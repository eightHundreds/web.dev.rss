<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>web.dev</title>
        <link>undefined</link>
        <description>undefined</description>
        <lastBuildDate>Tue, 15 Aug 2023 08:40:31 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <item>
            <title><![CDATA[定义测试用例和优先级]]></title>
            <link>https://web.dev/ta-test-cases/</link>
            <guid>https://web.dev/ta-test-cases/</guid>
            <content:encoded><![CDATA[<div>
    <h1>GPT总结</h1>
    <summary>本文介绍了测试策略、测试所需的测试数量以及如何找到最合适的测试方法来获得最高的结果可信度，同时考虑资源限制。然而，这只是告诉我们需要测试多少的一个概念，你仍然需要确定具体要测试什么。

以下三个标准有助于理解测试中的期望结果，以及确定最适合的测试类型和详细程度：

1. 关注正常路径。这是应用程序的最常见或主要用户故事，用户会很快注意到错误。

2. 仔细决定详细程度。如果你的用例容易受到攻击或错误会造成严重损害，就需要更详细的测试。

3. 尽可能优先选择低级别的测试，如单元测试和集成测试，而不是高级别的端到端测试。

本文的其余部分探讨了这些标准，并介绍了如何定义测试用例。

测试用例是什么？

在软件开发中，测试用例是一系列行动或情况，旨在确认软件程序或应用程序的有效性。

测试用例旨在确保软件按计划运行，并且所有功能都能正确执行。软件测试人员或开发人员通常创建这些测试用例，以确保软件满足指定的要求和规范。

当运行测试用例时，软件会执行一系列检查，</summary>
    <div>
    <div>OriginTitle: Defining test cases and priorities</div>

    </div></div><p>在里面<a href="https://web.dev/ta-strategies/">上一篇文章</a>中，您了解了测试策略、测试应用程序所需的测试数量，以及如何找到最适合的测试以获得对结果的最大信心，同时牢记您的资源。 然而，这只是让我们知道要测试多少。 您仍然需要准确确定要测试的内容。 
 以下三个标准有助于了解测试中的预期内容以及了解哪种测试类型和详细程度最适合：</p>
<ol>
<li><strong>守护你的幸福之路</strong>。 这是应用程序最通用或主要的用户故事，用户很快就会注意到错误。</li>
<li><strong>仔细决定详细程度</strong>。 如果您的用例容易受到攻击或者错误会导致严重损害，请详细了解。</li>
<li><strong>优先考虑较低级别的测试</strong>，例如单元和集成测试，尽可能高于更高级别的端到端测试。</li>
</ol>
<p>本文的其余部分将探讨这些标准，以及它们在定义测试用例时如何应用。</p>
<h2 id="what-is-a-test-case">什么是测试用例？<a class="headline-link" href="https://web.dev/ta-test-cases/#what-is-a-test-case">#</a></h2>
<p>在软件开发中，测试用例是旨在确认软件程序或应用程序有效性的一系列操作或环境。 
 测试用例旨在确保软件按计划运行以及其所有特性和功能正确运行。 软件测试人员或开发人员通常创建这些测试用例以保证软件满足指定的要求和规范。</p>
<img alt="Test case is verifying." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/Am7IXUF5DVMprZQsSA5p.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/Am7IXUF5DVMprZQsSA5p.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/Am7IXUF5DVMprZQsSA5p.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/Am7IXUF5DVMprZQsSA5p.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/Am7IXUF5DVMprZQsSA5p.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/Am7IXUF5DVMprZQsSA5p.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/Am7IXUF5DVMprZQsSA5p.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/Am7IXUF5DVMprZQsSA5p.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/Am7IXUF5DVMprZQsSA5p.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/Am7IXUF5DVMprZQsSA5p.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/Am7IXUF5DVMprZQsSA5p.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/Am7IXUF5DVMprZQsSA5p.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/Am7IXUF5DVMprZQsSA5p.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/Am7IXUF5DVMprZQsSA5p.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/Am7IXUF5DVMprZQsSA5p.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/Am7IXUF5DVMprZQsSA5p.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/Am7IXUF5DVMprZQsSA5p.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/Am7IXUF5DVMprZQsSA5p.jpeg?auto=format&amp;w=1600 1600w" width="800">
<p>运行测试用例时，软件会执行一系列检查以确保产生所需的结果。 在此过程中，测试将完成以下任务：</p>
<ul>
<li><strong>确认</strong>。 彻底检查软件以确保其正常运行的过程。 确定所创建的产品是否满足所有必要的非功能性要求并成功实现其预期目的至关重要。 它回答的问题是：“我们构建的产品正确吗？”</li>
<li><strong>验证</strong>。 确保软件产品满足必要标准或高级要求的过程。 它涉及检查实际产品是否与预期产品相符。 本质上，我们正在回答这个问题：“我们是否正在根据用户的需求构建正确的产品？”</li>
</ul>
<p>假设该程序未能提供预期结果。 在这种情况下，测试用例将成为信使，从而报告不成功的结果，开发人员或测试人员将需要调查问题并找到解决方案。 
 将检查和操作视为计算机遵循的路径，无论测试类型如何。 用于检查的输入数据或条件组称为“等价类”。 他们应该从被测系统中获得类似的行为或结果。 测试中执行的特定路径可能会有所不同，但应与测试中完成的活动和断言相匹配。</p>
<h2 id="test-paths-typical-kinds-of-test-cases">测试路径：典型的测试用例类型<a class="headline-link" href="https://web.dev/ta-test-cases/#test-paths-typical-kinds-of-test-cases">#</a></h2>
<p>在软件开发中，一个<a href="https://en.wikipedia.org/wiki/Happy_path" rel="noopener">测试用例</a>是预期并测试特定行为的代码执行场景。 通常，可以从三种场景中形成测试用例。</p>
<img alt="The happy path." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/SyLaoC8VQymTbBwIUd11.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/SyLaoC8VQymTbBwIUd11.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/SyLaoC8VQymTbBwIUd11.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/SyLaoC8VQymTbBwIUd11.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/SyLaoC8VQymTbBwIUd11.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/SyLaoC8VQymTbBwIUd11.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/SyLaoC8VQymTbBwIUd11.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/SyLaoC8VQymTbBwIUd11.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/SyLaoC8VQymTbBwIUd11.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/SyLaoC8VQymTbBwIUd11.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/SyLaoC8VQymTbBwIUd11.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/SyLaoC8VQymTbBwIUd11.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/SyLaoC8VQymTbBwIUd11.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/SyLaoC8VQymTbBwIUd11.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/SyLaoC8VQymTbBwIUd11.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/SyLaoC8VQymTbBwIUd11.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/SyLaoC8VQymTbBwIUd11.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/SyLaoC8VQymTbBwIUd11.jpeg?auto=format&amp;w=1600 1600w" width="800">
<p>第一个是最著名的，您可能已经在使用它。 这是<em>幸福之路</em>，也称为“快乐日场景”或“黄金路径”。 它定义了您的功能、应用程序或变更的最常见用例——它应该为客户提供的方式。</p>
<img alt="The scary path." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/7F0MGozRfVyyi3vn65No.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/7F0MGozRfVyyi3vn65No.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/7F0MGozRfVyyi3vn65No.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/7F0MGozRfVyyi3vn65No.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/7F0MGozRfVyyi3vn65No.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/7F0MGozRfVyyi3vn65No.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/7F0MGozRfVyyi3vn65No.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/7F0MGozRfVyyi3vn65No.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/7F0MGozRfVyyi3vn65No.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/7F0MGozRfVyyi3vn65No.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/7F0MGozRfVyyi3vn65No.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/7F0MGozRfVyyi3vn65No.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/7F0MGozRfVyyi3vn65No.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/7F0MGozRfVyyi3vn65No.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/7F0MGozRfVyyi3vn65No.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/7F0MGozRfVyyi3vn65No.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/7F0MGozRfVyyi3vn65No.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/7F0MGozRfVyyi3vn65No.jpeg?auto=format&amp;w=1600 1600w" width="800">
<p>测试用例中要涵盖的第二个最重要的测试路径通常会被忽略，因为它不舒服——正如它的名字所暗示的那样。 这是“可怕的道路”，或者换句话说，<em>阴性测试</em>。 此路径针对导致代码行为不当或进入错误状态的场景。 如果您的用例非常脆弱，给利益相关者或用户带来了高风险，那么测试这些场景就尤其重要。</p>
<p>您可能想了解并考虑使用其他一些路径，但通常它们不太常用。 下表总结了它们：</p>
<div class="table-wrapper scrollbar">
<table>
<thead>
<tr>
<th>测试路径</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>愤怒的路径</td>
<td>这会导致错误，但却是预料之中的错误； 例如，如果您想确保错误处理正确进行。</td>
</tr>
<tr>
<td>不良路径</td>
<td>此路径负责您的应用程序需要满足的任何与安全相关的场景。</td>
</tr>
<tr>
<td>荒凉的小路</td>
<td>在应用程序中测试场景的路径没有获得足够的数据来运行，例如测试空值。</td>
</tr>
<tr>
<td>健忘之路</td>
<td>在资源不足的情况下测试应用程序的行为，例如触发数据丢失。</td>
</tr>
<tr>
<td>犹豫不决的道路</td>
<td>与尝试在应用程序中执行操作或关注用户故事但尚未完成这些工作流程的用户进行测试。 例如，当用户中断其工作流程时可能会出现这种情况。</td>
</tr>
<tr>
<td>贪心路径</td>
<td>尝试使用大量输入或数据进行测试。</td>
</tr>
<tr>
<td>充满压力的道路</td>
<td>尝试以任何必要的方式对您的应用程序施加负载，直到它不再起作用（类似于负载测试）。</td>
</tr>
</tbody>
</table>
</div><p>有多种方法可以对这些路径进行分类。 两种常见的方法是：</p>
<ul>
<li><strong>等价划分</strong>。 一种将测试用例分类为组或分区的测试方法，从而帮助创建等价类。 这是基于这样的想法：如果分区中的一个测试用例发现了缺陷，则同一分区中的其他测试用例可能会发现类似的缺陷。 由于特定等价类中的所有输入应表现出相同的行为，因此您可以减少测试用例的数量。<a href="https://en.wikipedia.org/wiki/Equivalence_partitioning" rel="noopener">了解有关等价划分的更多信息</a>。</li>
<li><strong>极限分析</strong>。 一种测试方法，也称为<a href="https://en.wikipedia.org/wiki/Boundary-value_analysis" rel="noopener">边值分析</a>，它检查输入值的限制或极端，以查找在系统功能或约束限制下可能出现的任何潜在问题或错误。</li>
</ul>
<h2 id="best-practice-writing-test-cases">最佳实践：编写测试用例<a class="headline-link" href="https://web.dev/ta-test-cases/#best-practice-writing-test-cases">#</a></h2>
<p>测试人员编写的经典测试用例将包含特定的数据，以帮助您掌握要进行的测试的内容，当然还有执行测试。 典型的测试人员会在表格中记录他们的测试工作。 在这个阶段，我们可以使用两种模式，帮助我们构建测试用例，以及稍后构建我们的测试本身：</p>
<ul>
<li><strong>安排、行动、断言</strong>图案。 “安排、行动、断言”（也称为“AAA”或“Triple A”）测试模式是一种将测试组织为三个不同步骤的方法：安排测试，然后执行测试，最后但并非最不重要的一点是，得出结论。</li>
<li><strong>给定，何时，然后</strong>图案。 此模式与 AAA 模式类似，但有一些根源<a href="https://en.wikipedia.org/wiki/Behavior-driven_development" rel="noopener">行为驱动的发展</a>。</li>
</ul>
<p>一旦我们介绍了测试本身的结构，未来的文章将详细介绍这些模式。 如果您想在这个阶段深入了解这些模式，请查看这两篇文章：<a href="https://automationpanda.com/2020/07/07/arrange-act-assert-a-pattern-for-writing-good-tests/" rel="noopener">Arrange-Act-Assert：编写良好测试的模式</a>和<a href="https://martinfowler.com/bliki/GivenWhenThen.html" rel="noopener">给定-何时-然后</a>。</p>
<p>根据本文的所有知识，下表总结了一个经典示例：</p>
<div class="table-wrapper scrollbar">
<table>
<thead>
<tr>
<th>信息</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>先决条件</td>
<td>在编写测试之前需要完成的所有事情。</td>
</tr>
<tr>
<td>被测物体</td>
<td>需要验证什么？</td>
</tr>
<tr>
<td>输入数据</td>
<td>变量及其值。</td>
</tr>
<tr>
<td>需要执行的步骤</td>
<td>您为使测试变为现实而要做的所有事情：您在测试中所做的所有操作或交互。</td>
</tr>
<tr>
<td>预期结果</td>
<td>应该发生什么以及要满足哪些期望。</td>
</tr>
<tr>
<td>实际结果</td>
<td>实际发生了什么。</td>
</tr>
</tbody>
</table>
</div><p>在自动化测试中，您不需要以测试人员需要的方式记录所有这些测试用例，尽管这样做无疑是有帮助的。 如果您细心的话，您可以在测试中找到所有这些信息。 那么让我们将这个经典的测试用例转化为自动化测试。</p>
<div class="table-wrapper scrollbar">
<table>
<thead>
<tr>
<th>信息</th>
<th>转化为测试自动化</th>
</tr>
</thead>
<tbody>
<tr>
<td>先决条件</td>
<td>您需要的所有东西，安排测试，并考虑为实现测试场景而提供的内容。</td>
</tr>
<tr>
<td>被测物体</td>
<td>这个“对象”可以是各种东西：被测试的应用程序、流程、单元或组件。</td>
</tr>
<tr>
<td>输入数据</td>
<td>参数值。</td>
</tr>
<tr>
<td>需要执行的步骤</td>
<td>测试中执行的所有操作和命令、您执行的操作以及了解当您执行某些操作时会发生什么。</td>
</tr>
<tr>
<td>预期结果</td>
<td>您用于验证应用程序的断言，即您在应用程序中断言的内容。</td>
</tr>
<tr>
<td>实际结果</td>
<td>自动化测试的结果。</td>
</tr>
</tbody>
</table>
</div><aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow">这篇博文由 Ramona 撰写，并接受了以下人士的意见和评论<a href="https://web.dev/authors/jecelynyeen/">叶洁琳</a>（<a href="https://twitter.com/jecfish">推特</a>),<a href="https://www.linkedin.com/in/michael-hablich-2128646/">迈克尔·哈布里奇</a>（<a href="https://twitter.com/MHablich">推特</a>）， 和<a href="https://web.dev/authors/rachelandrew/">雷切尔·安德鲁</a>。 特别感谢<a href="https://www.linkedin.com/in/sofia-yemelianova/">索菲亚·艾米利亚诺娃</a>用于支持出版过程。</div></aside>
<hr><p>In the <a href="https://web.dev/ta-strategies/">previous post</a>, you learned about testing strategies, the number of tests needed to test an application, and how to find the best fit to gain the most confidence in the results while bearing in mind your resources. However, this only gives us an idea of how much to test. You still need to determine exactly what to test.
The following three criteria can be helpful in understanding what to expect in a test and to see what testing type and level of detail might fit best:</p>
<ol>
<li><strong>Take care of your happy path</strong>. This is the most generic or primary user story of your application, where your user will notice an error very quickly.</li>
<li><strong>Decide carefully on the level of detail</strong>. Get into more detail if your use case is vulnerable or where an error would cause high damage.</li>
<li><strong>Prioritize lower-level tests</strong>, such as unit and integration tests, over higher-level end-to-end tests whenever possible.</li>
</ol>
<p>The rest of this article explores these criteria, and how they apply as you define test cases.</p>
<h2 id="what-is-a-test-case">What is a test case? <a class="headline-link" href="https://web.dev/ta-test-cases/#what-is-a-test-case">#</a></h2>
<p>In software development, a test case is a sequence of actions or circumstances that are devised to confirm the effectiveness of a software program or application.
A test case aims to ensure that the software operates as planned and that all its features and functions perform correctly. Software testers or developers typically create these test cases to guarantee that the software meets the specified requirements and specifications.</p>
<img alt="Test case is verifying." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/Am7IXUF5DVMprZQsSA5p.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/Am7IXUF5DVMprZQsSA5p.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/Am7IXUF5DVMprZQsSA5p.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/Am7IXUF5DVMprZQsSA5p.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/Am7IXUF5DVMprZQsSA5p.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/Am7IXUF5DVMprZQsSA5p.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/Am7IXUF5DVMprZQsSA5p.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/Am7IXUF5DVMprZQsSA5p.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/Am7IXUF5DVMprZQsSA5p.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/Am7IXUF5DVMprZQsSA5p.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/Am7IXUF5DVMprZQsSA5p.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/Am7IXUF5DVMprZQsSA5p.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/Am7IXUF5DVMprZQsSA5p.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/Am7IXUF5DVMprZQsSA5p.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/Am7IXUF5DVMprZQsSA5p.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/Am7IXUF5DVMprZQsSA5p.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/Am7IXUF5DVMprZQsSA5p.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/Am7IXUF5DVMprZQsSA5p.jpeg?auto=format&amp;w=1600 1600w" width="800">
<p>When a test case is run, the software performs a series of checks to ensure it produces the desired results. While doing that, a test fulfills the following tasks:</p>
<ul>
<li><strong>Verification</strong>. The process of thoroughly checking software to ensure it functions without errors. Determining whether the created product meets all the necessary non-functional requirements and successfully achieves its intended purpose is crucial. The question it answers is: “Are we building the product right?”</li>
<li><strong>Validation</strong>. The process of ensuring that the software product meets the necessary standards or high-level requirements. It involves checking whether the actual product aligns with the expected product. Essentially, we’re answering the question: “Are we building the right product for the user’s requirements?”</li>
</ul>
<p>Suppose the program fails to deliver the expected outcome. In that case, the test case will be the messenger—thus reporting an unsuccessful result, and the developer or tester will need to investigate the issue and find a solution.
Think of the checks and actions as paths the computer follows, regardless of the testing type.  Groups of input data or conditions used for checking are called "equivalence classes". They should get similar behavior or results from the system under test. The specific paths executed inside a test may vary but should match the activities and assertions done in your test.</p>
<h2 id="test-paths-typical-kinds-of-test-cases">Test paths: Typical kinds of test cases <a class="headline-link" href="https://web.dev/ta-test-cases/#test-paths-typical-kinds-of-test-cases">#</a></h2>
<p>In software development, a <a href="https://en.wikipedia.org/wiki/Happy_path" rel="noopener">test case</a> is a code execution scenario from which a certain behavior is expected and tested. Typically, there are three scenarios to form test cases from.</p>
<img alt="The happy path." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/SyLaoC8VQymTbBwIUd11.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/SyLaoC8VQymTbBwIUd11.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/SyLaoC8VQymTbBwIUd11.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/SyLaoC8VQymTbBwIUd11.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/SyLaoC8VQymTbBwIUd11.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/SyLaoC8VQymTbBwIUd11.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/SyLaoC8VQymTbBwIUd11.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/SyLaoC8VQymTbBwIUd11.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/SyLaoC8VQymTbBwIUd11.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/SyLaoC8VQymTbBwIUd11.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/SyLaoC8VQymTbBwIUd11.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/SyLaoC8VQymTbBwIUd11.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/SyLaoC8VQymTbBwIUd11.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/SyLaoC8VQymTbBwIUd11.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/SyLaoC8VQymTbBwIUd11.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/SyLaoC8VQymTbBwIUd11.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/SyLaoC8VQymTbBwIUd11.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/SyLaoC8VQymTbBwIUd11.jpeg?auto=format&amp;w=1600 1600w" width="800">
<p>The first one is the most well known, which you are probably already using. It’s the <em>happy path</em>, also known as the “happy day scenario” or “golden path”. It defines the most common use case of your feature, application, or change—the way it should work out for the customer.</p>
<img alt="The scary path." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/7F0MGozRfVyyi3vn65No.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/7F0MGozRfVyyi3vn65No.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/7F0MGozRfVyyi3vn65No.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/7F0MGozRfVyyi3vn65No.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/7F0MGozRfVyyi3vn65No.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/7F0MGozRfVyyi3vn65No.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/7F0MGozRfVyyi3vn65No.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/7F0MGozRfVyyi3vn65No.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/7F0MGozRfVyyi3vn65No.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/7F0MGozRfVyyi3vn65No.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/7F0MGozRfVyyi3vn65No.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/7F0MGozRfVyyi3vn65No.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/7F0MGozRfVyyi3vn65No.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/7F0MGozRfVyyi3vn65No.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/7F0MGozRfVyyi3vn65No.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/7F0MGozRfVyyi3vn65No.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/7F0MGozRfVyyi3vn65No.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/NJdAV9UgKuN8AhoaPBquL7giZQo1/7F0MGozRfVyyi3vn65No.jpeg?auto=format&amp;w=1600 1600w" width="800">
<p>The second most crucial test path to cover in your test cases is often left out as it’s uncomfortable—as its name may imply. It’s the “scary path” or, in other words, the <em>negative test</em>. This path targets scenarios that cause the code to misbehave or enter an error state. Testing these scenarios is especially important if you have highly vulnerable use cases imposing a high risk on the stakeholders or users.</p>
<p>There are some other paths you might want to know about and consider using, but typically they are less commonly used. The following table summarizes them:</p>
<div class="table-wrapper scrollbar">
<table>
<thead>
<tr>
<th>Test path</th>
<th>Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td>Angry path</td>
<td>This leads to an error, but an expected one; for example, if you want to ensure error handling works correctly.</td>
</tr>
<tr>
<td>Delinquent path</td>
<td>This path takes care of any security-related scenarios your application needs to fulfill.</td>
</tr>
<tr>
<td>Desolate path</td>
<td>The path testing the scenario in your application doesn’t get enough data to function, for example, testing null values.</td>
</tr>
<tr>
<td>Forgetful path</td>
<td>Testing the behavior of your application with insufficient resources, for example, triggering a data loss.</td>
</tr>
<tr>
<td>Indecisive path</td>
<td>Testing with a user who is trying to do actions or following user stories in your application but hasn’t completed those workflows. This could be the case, for example, when the user interrupts their workflow.</td>
</tr>
<tr>
<td>Greedy path</td>
<td>Trying to test using vast amounts of inputs or data.</td>
</tr>
<tr>
<td>Stressful path</td>
<td>Trying to put a load on your application by any means necessary until it no longer functions (similar to a load test).</td>
</tr>
</tbody>
</table>
</div><p>There are several methods to categorize those paths. Two common approaches are:</p>
<ul>
<li><strong>Equivalence partitioning</strong>. A testing method that categorizes test cases into groups or partitions and, as a result, helps create equivalence classes. This is based on the idea that if one test case in a partition uncovers a defect, other test cases in the same partition will likely reveal similar defects. As all inputs within a specific equivalence class should exhibit identical behavior, you can decrease the number of test cases. <a href="https://en.wikipedia.org/wiki/Equivalence_partitioning" rel="noopener">Learn more about equivalence partitioning</a>.</li>
<li><strong>Limit analysis</strong>. A testing method, also known as <a href="https://en.wikipedia.org/wiki/Boundary-value_analysis" rel="noopener">boundary-value analysis</a>, that examines the limits or extremes of input values to find any potential issues or errors that might arise at the system's limits of capabilities or constraints.</li>
</ul>
<h2 id="best-practice-writing-test-cases">Best practice: Writing test cases <a class="headline-link" href="https://web.dev/ta-test-cases/#best-practice-writing-test-cases">#</a></h2>
<p>A classical test case written by a tester will contain specific data to help you grasp the content of the test you want to conduct and, of course, execute the test. A typical tester would document their testing efforts in a table. There are two patterns we can use at this stage, helping us to structure our test cases and later, our tests themselves, too:</p>
<ul>
<li><strong>Arrange, act, assert</strong> pattern. The "arrange, act, assert" (also known as the "AAA" or "Triple A") testing pattern is a way of organizing tests into three distinct steps: arranging the test, then performing the test, and last but not least, drawing conclusions.</li>
<li><strong>Given, when, then</strong> pattern. This pattern is similar to the AAA pattern but has some roots in <a href="https://en.wikipedia.org/wiki/Behavior-driven_development" rel="noopener">behavior-driven development</a>.</li>
</ul>
<p>Future articles will go into more details on these patterns, as soon as we cover the structure of a test itself. If you want to go deeper into these patterns at this stage, check out these two articles: <a href="https://automationpanda.com/2020/07/07/arrange-act-assert-a-pattern-for-writing-good-tests/" rel="noopener">Arrange-Act-Assert: A pattern for writing good tests</a> and <a href="https://martinfowler.com/bliki/GivenWhenThen.html" rel="noopener">Given-When-Then</a>.</p>
<p>According to all the learnings from this article, the following table summarizes a classic example:</p>
<div class="table-wrapper scrollbar">
<table>
<thead>
<tr>
<th>Information</th>
<th>Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td>Prerequisites</td>
<td>Everything which needs to be done before writing the test.</td>
</tr>
<tr>
<td>Object under test</td>
<td>What needs to be verified?</td>
</tr>
<tr>
<td>Input data</td>
<td>Variables and their values.</td>
</tr>
<tr>
<td>Steps to be executed</td>
<td>All the things you will do to bring your test to life: all actions or interactions you do in your tests.</td>
</tr>
<tr>
<td>Expected result</td>
<td>What should happen and which expectations are to be fulfilled.</td>
</tr>
<tr>
<td>Actual result</td>
<td>What actually happens.</td>
</tr>
</tbody>
</table>
</div><p>In automated testing, you don’t need to document all these test cases in the way that a tester needs to, even though it’s undoubtedly helpful to do so. You can find all this information in your test if you pay attention. So let’s translate this classical test case into an automated test.</p>
<div class="table-wrapper scrollbar">
<table>
<thead>
<tr>
<th>Information</th>
<th>Translation into test automation</th>
</tr>
</thead>
<tbody>
<tr>
<td>Prerequisites</td>
<td>All the things you need, arranging the test, and thinking about what is given to make your test’s scenario happen.</td>
</tr>
<tr>
<td>Object under test</td>
<td>This “object” can be various things: an application, flow, unit, or component under test.</td>
</tr>
<tr>
<td>Input data</td>
<td>Parameter values.</td>
</tr>
<tr>
<td>Steps to be executed</td>
<td>All the actions and commands executed inside your test, the things you act upon, and finding out what happens when you do certain things.</td>
</tr>
<tr>
<td>Expected result</td>
<td>The assertion you use to validate your application, the things you assert upon in your application.</td>
</tr>
<tr>
<td>Actual result</td>
<td>The result of your automated test.</td>
</tr>
</tbody>
</table>
</div><aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> This blog post was written by Ramona, with input and review from <a href="https://web.dev/authors/jecelynyeen/">Jecelyn Yeen</a> (<a href="https://twitter.com/jecfish">Twitter</a>), <a href="https://www.linkedin.com/in/michael-hablich-2128646/">Michael Hablich</a> (<a href="https://twitter.com/MHablich">Twitter</a>), and <a href="https://web.dev/authors/rachelandrew/">Rachel Andrew</a>. Special thanks to <a href="https://www.linkedin.com/in/sofia-yemelianova/">Sofia Emelianova</a> for supporting the publication process. </div></aside>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[七月网络平台新功能]]></title>
            <link>https://web.dev/web-platform-07-2023/</link>
            <guid>https://web.dev/web-platform-07-2023/</guid>
            <content:encoded><![CDATA[<div>
    <h1>GPT总结</h1>
    <summary>2023年7月，Firefox 115和Chrome 115发布了稳定版本。这篇文章介绍了这对于Web平台意味着什么。

Chrome 115中包含了CSS display属性的多个值。这意味着display: flex变成了display: block flex，display: block变成了display: block flow。单个值作为传统关键字保留，这些值现在在三个主要引擎中都可用。

Chrome 115还引入了ScrollTimeline和ViewTimeline扩展，用于Web动画规范。这使得可以通过CSS和JavaScript实现滚动驱动的动画。

Chrome 115还引入了Privacy Sandbox相关性和测量API。这包括Topics、Protected Audience、Attribution Reporting、Private Aggregation、Shared Storage和Fenced Frames API。

Firefox 115支持CSS animation-composition属性，使得animation-composition在所有三个主要引擎中都得到支持。

Firefox 115还引入了一组Array和TypedArray的方法，包括Array.toReversed()、Array.toSorted()、Array.toSpliced()、Array.with()、TypedArrays.toReversed()、TypedArrays.toSorted()和TypedArrays.with()。

Beta版本的浏览器提供了下一个稳定版本的预览。Firefox 116和Chrome 116是新的beta版本。这些版本带来了许多优秀的功能。例如，Firefox 116在除Android外的所有平台上支持Audio Output Devices API，允许将音频输出重定向到允许的蓝牙耳机、扬声器或</summary>
    <div>
    <div>OriginTitle: New to the web platform in July</div>

    </div></div><h2 id="stable-browser-releases">稳定的浏览器版本<a class="headline-link" href="https://web.dev/web-platform-07-2023/#stable-browser-releases">#</a></h2>
<p>2023年7月<a href="https://developer.mozilla.org/docs/Mozilla/Firefox/Releases/115" rel="noopener">火狐115</a>和<a href="https://developer.chrome.com/blog/new-in-chrome-115/" rel="noopener">铬115</a>变得稳定。 这篇文章探讨了这对网络平台意味着什么。</p>
<aside class="aside flow bg-state-bad-bg color-state-bad-text"><p class="cluster color-state-bad-text"><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Error sign">   <path fill-rule="evenodd" clip-rule="evenodd" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-2h2v2h-2zm0-10v6h2V7h-2z"></path> </svg></span><strong>警告</strong></p><div class=" flow">我们在这些帖子中包含从 MDN 中提取的浏览器兼容性数据，这些数据对于最新的浏览器版本可能尚未更新。 该帖子一旦出现在帖子中，就会显示正确的信息<a href="https://github.com/mdn/browser-compat-data/releases">浏览器兼容数据发布</a>。</div></aside>
<h3 id="multiple-values-for-the-css-display-property">CSS 的多个值<code>展示</code>财产<a class="headline-link" href="https://web.dev/web-platform-07-2023/#multiple-values-for-the-css-display-property">#</a></h3>
<p>Chrome 115 包含多个 CSS 值<code>展示</code>财产。 这意味着<code>显示： 柔性</code>变成<code>显示：块柔性</code>和<code>显示：块</code>变成<code>显示：块流</code>。 单个值作为旧关键字维护，这些值现在可在三个主要引擎中使用。</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">浏览器支持</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 115，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      115
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">火狐 70，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      70
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">边缘 115，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      115
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 15，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      15
    </span>
    </li>
  </ul>
</div>
<h3 id="scroll-driven-animations">滚动驱动的动画<a class="headline-link" href="https://web.dev/web-platform-07-2023/#scroll-driven-animations">#</a></h3>
<p>Chrome 115 中还有<code>滚动时间轴</code>和<code>查看时间线</code>Web 动画规范的扩展。 这些使<a href="https://developer.chrome.com/articles/scroll-driven-animations/" rel="noopener">滚动驱动的动画</a>通过 CSS 和 JavaScript。</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">浏览器支持</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 115，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      115
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">火狐浏览器，不支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported">
<p></p></span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="edge">
<span class="visually-hidden">边缘 115，支持</span>
</span>
<span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
115
</span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="safari">
<span class="visually-hidden">Safari，不支持</span>
</span>
<span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported"><p></p>
<p></p></span>
</li><p></p>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/API/ScrollTimeline#browser_compatibility" target="_blank">来源</a>
</div>
<h3 id="privacy-sandbox-apis">隐私沙箱 API<a class="headline-link" href="https://web.dev/web-platform-07-2023/#privacy-sandbox-apis">#</a></h3>
<p>隐私沙箱<a href="https://developer.chrome.com/blog/privacy-sandbox-launch/" rel="noopener">相关性和测量 API</a>Chrome 115 中提供。这包括主题、受保护的受众、归因报告、私有聚合、共享存储和 Fenced Frames API。</p>
<p>要了解有关这些 API 的更多信息，请查看<a href="https://developer.chrome.com/blog/privacy-sandbox-demos/" rel="noopener">隐私沙盒演示</a>。</p>
<h3 id="the-animation-composition-property">这<code>动画合成</code>财产<a class="headline-link" href="https://web.dev/web-platform-07-2023/#the-animation-composition-property">#</a></h3>
<p>火狐115支持CSS<a href="https://developer.mozilla.org/docs/Web/CSS/animation-composition" rel="noopener"><code>动画合成</code></a>财产。 制作<code>动画合成</code>所有三个主要引擎均受支持。 在文章中了解更多信息<a href="https://developer.chrome.com/articles/css-animation-composition/" rel="noopener">指定多个动画效果如何与animation-composition合成</a>。</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">浏览器支持</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 112，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      112
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">火狐 115，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      115
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">边缘 112，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      112
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 16，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      16
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/CSS/animation-composition#browser_compatibility" target="_blank">来源</a>
</div>
<h3 id="array-methods">数组方法<a class="headline-link" href="https://web.dev/web-platform-07-2023/#array-methods">#</a></h3>
<p>与 Firefox 115 实现互操作性的还有一组方法<code>大批</code>和<code>类型数组</code>。<code>Array.toReversed()</code>,<code>Array.toSorted()</code>,<code>Array.toSpliced()</code>,<code>数组.with()</code>,<code>TypedArrays.toReversed()</code>,<code>TypedArrays.toSorted()</code>， 和<code>TypedArrays.with()</code>返回一个新数组，其中包含已浅复制的元素。</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">浏览器支持</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 110，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      110
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">火狐 115，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      115
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">边缘 110，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      110
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 16，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      16
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/toReversed#browser_compatibility" target="_blank">来源</a>
</div>
<h2 id="beta-browser-releases">测试版浏览器发布<a class="headline-link" href="https://web.dev/web-platform-07-2023/#beta-browser-releases">#</a></h2>
<p>Beta 浏览器版本可让您预览浏览器下一个稳定版本中的内容。 现在是测试新功能或删除的好时机，这些功能或删除可能会在发布该版本之前影响您的网站。 新的测试版是<a href="https://developer.mozilla.org/docs/Mozilla/Firefox/Releases/116" rel="noopener">火狐116</a>和<a href="https://developer.chrome.com/blog/chrome-116-beta/" rel="noopener">铬116</a>。 这<a href="https://developer.apple.com/documentation/safari-release-notes/safari-16_6-release-notes" rel="noopener">狩猎17</a>和<a href="https://developer.apple.com/documentation/safari-release-notes/safari-16_6-release-notes" rel="noopener">Safari 16.6</a>测试版仍在进行中。 这些版本为该平台带来了许多出色的功能。 查看发行说明以了解所有详细信息，这里仅列出一些亮点。</p>
<p>火狐 116 支持<a href="https://developer.mozilla.org/docs/Web/API/Audio_Output_Devices_API" rel="noopener">音频输出设备 API</a>在除 Android 之外的所有平台上。 此 API 允许 Web 应用程序将音频输出重定向到允许的蓝牙耳机、扬声器或其他设备，而不必使用浏览器或底层操作系统默认设置。</p>
<p>Chrome 116 包含 CSS 运动路径，允许任何图形对象沿着开发人员指定的路径进行动画处理。 这允许许多强大的新变换可能性，例如使用极坐标定位（使用<code>射线（）</code>函数）而不是使用的标准直角坐标<code>翻译（）</code>函数，或者沿着定义的路径对元素进行动画处理。 这使得定义复杂而美丽的二维空间过渡变得更加容易。 路径可以指定为<code>圆圈（）</code>,<code>椭圆（）</code>,<code>矩形（）</code>,<code>插图（）</code>,<code>xywh()</code>,<code>多边形（）</code>,<code>射线（）</code>和<code>网址（）</code>。</p>
<p>Chrome 116 中还有<a href="https://developer.chrome.com/docs/web-platform/document-picture-in-picture/" rel="noopener">文档画中画 API</a>。 这使得可以使用任意 HTMLElement 填充始终位于顶部的窗口。 这是对现有 HTMLVideoElement API 的扩展，仅允许将 HTMLVideoElement 放入画中画 (PiP) 窗口中。</p>
<p><em>拍摄者<a href="https://unsplash.com/@ninjason" rel="noopener">梁杰森</a>。</em></p>
<hr><h2 id="stable-browser-releases">Stable browser releases <a class="headline-link" href="https://web.dev/web-platform-07-2023/#stable-browser-releases">#</a></h2>
<p>In July 2023 <a href="https://developer.mozilla.org/docs/Mozilla/Firefox/Releases/115" rel="noopener">Firefox 115</a> and <a href="https://developer.chrome.com/blog/new-in-chrome-115/" rel="noopener">Chrome 115</a> became stable. This post takes a look at what that means for the web platform.</p>
<aside class="aside flow bg-state-bad-bg color-state-bad-text"><p class="cluster color-state-bad-text"><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Error sign">   <path fill-rule="evenodd" clip-rule="evenodd" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-2h2v2h-2zm0-10v6h2V7h-2z"></path> </svg></span><strong>Caution</strong></p><div class=" flow"> We include browser compatibility data pulled from MDN in these posts which may not have been updated yet for very recent browser releases. The post will show the correct information as soon as it appears in the <a href="https://github.com/mdn/browser-compat-data/releases">browser-compat-data release</a>. </div></aside>
<h3 id="multiple-values-for-the-css-display-property">Multiple values for the CSS <code>display</code> property <a class="headline-link" href="https://web.dev/web-platform-07-2023/#multiple-values-for-the-css-display-property">#</a></h3>
<p>Chrome 115 includes multiple values for the CSS <code>display</code> property. This means that <code>display: flex</code> becomes <code>display: block flex</code> and <code>display: block</code> becomes <code>display: block flow</code>. The single values are maintained as legacy keywords, these values are now available in the three major engines.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 115, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      115
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 70, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      70
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 115, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      115
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 15, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      15
    </span>
    </li>
  </ul>
</div>
<h3 id="scroll-driven-animations">Scroll-driven animations <a class="headline-link" href="https://web.dev/web-platform-07-2023/#scroll-driven-animations">#</a></h3>
<p>Also in Chrome 115 are the <code>ScrollTimeline</code> and <code>ViewTimeline</code> extensions to the Web Animations specification. These enable <a href="https://developer.chrome.com/articles/scroll-driven-animations/" rel="noopener">scroll-driven animations</a> via CSS and JavaScript.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 115, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      115
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox, Not supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported">
<p></p></span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="edge">
<span class="visually-hidden">Edge 115, Supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
115
</span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="safari">
<span class="visually-hidden">Safari, Not supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported"><p></p>
<p></p></span>
</li><p></p>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/API/ScrollTimeline#browser_compatibility" target="_blank">Source</a>
</div>
<h3 id="privacy-sandbox-apis">Privacy Sandbox APIs <a class="headline-link" href="https://web.dev/web-platform-07-2023/#privacy-sandbox-apis">#</a></h3>
<p>The Privacy Sandbox <a href="https://developer.chrome.com/blog/privacy-sandbox-launch/" rel="noopener">relevance and measurement APIs</a> shipped in Chrome 115. This includes the Topics, Protected Audience, Attribution Reporting, Private Aggregation, Shared Storage, and Fenced Frames APIs.</p>
<p>To understand more about these APIs check out the <a href="https://developer.chrome.com/blog/privacy-sandbox-demos/" rel="noopener">Privacy Sandbox demos</a>.</p>
<h3 id="the-animation-composition-property">The <code>animation-composition</code> property <a class="headline-link" href="https://web.dev/web-platform-07-2023/#the-animation-composition-property">#</a></h3>
<p>Firefox 115 supports the CSS <a href="https://developer.mozilla.org/docs/Web/CSS/animation-composition" rel="noopener"><code>animation-composition</code></a> property. Making <code>animation-composition</code> supported in all three major engines. Learn more in the article <a href="https://developer.chrome.com/articles/css-animation-composition/" rel="noopener">Specify how multiple animation effects should composite with animation-composition</a>.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 112, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      112
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 115, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      115
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 112, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      112
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 16, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      16
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/CSS/animation-composition#browser_compatibility" target="_blank">Source</a>
</div>
<h3 id="array-methods">Array methods <a class="headline-link" href="https://web.dev/web-platform-07-2023/#array-methods">#</a></h3>
<p>Also reaching interoperability with Firefox 115 are a set of methods for <code>Array</code> and <code>TypedArray</code>.  <code>Array.toReversed()</code>, <code>Array.toSorted()</code>, <code>Array.toSpliced()</code>, <code>Array.with()</code>, <code>TypedArrays.toReversed()</code>, <code>TypedArrays.toSorted()</code>, and <code>TypedArrays.with()</code> return a new array with elements that have been shallow copied.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 110, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      110
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 115, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      115
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 110, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      110
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 16, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      16
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/toReversed#browser_compatibility" target="_blank">Source</a>
</div>
<h2 id="beta-browser-releases">Beta browser releases <a class="headline-link" href="https://web.dev/web-platform-07-2023/#beta-browser-releases">#</a></h2>
<p>Beta browser versions give you a preview of things that will be in the next stable version of the browser. It's a great time to test new features, or removals, that could impact your site before the world gets that release. New betas are <a href="https://developer.mozilla.org/docs/Mozilla/Firefox/Releases/116" rel="noopener">Firefox 116</a> and <a href="https://developer.chrome.com/blog/chrome-116-beta/" rel="noopener">Chrome 116</a>. The <a href="https://developer.apple.com/documentation/safari-release-notes/safari-16_6-release-notes" rel="noopener">Safari 17</a>  and <a href="https://developer.apple.com/documentation/safari-release-notes/safari-16_6-release-notes" rel="noopener">Safari 16.6</a> betas are still ongoing. These releases bring many great features to the platform. Check out the release notes for all of the details, here are just a few highlights.</p>
<p>Firefox 116 supports the <a href="https://developer.mozilla.org/docs/Web/API/Audio_Output_Devices_API" rel="noopener">Audio Output Devices API</a> on all platforms except for Android. This API allows web applications to redirect audio output to a permitted Bluetooth headset, speakerphone, or other device, instead of having to use the browser or underlying OS default.</p>
<p>Chrome 116 includes CSS Motion Path allowing any graphical object to be animated it along a path specified by the developer. This allows a number of powerful new transform possibilities, such as positioning using polar coordinates (with the <code>ray()</code> function) rather than the standard rectangular coordinates used by the <code>translate()</code> function, or animating an element along a defined path. This makes it easier to define complex and beautiful 2d spatial transitions. A path can be specified as <code>circle()</code>, <code>ellipse()</code>, <code>rect()</code>, <code>inset()</code>, <code>xywh()</code>, <code>polygon()</code>, <code>ray()</code> and <code>url()</code>.</p>
<p>Also in Chrome 116 is the <a href="https://developer.chrome.com/docs/web-platform/document-picture-in-picture/" rel="noopener">Document Picture-in-Picture API</a>. This enables an always-on-top window that can be populated with arbitrary HTMLElements. This is an expansion upon the existing HTMLVideoElement API that only allows for an HTMLVideoElement to be put into a Picture-in-Picture (PiP) window.</p>
<p><em>Photo by <a href="https://unsplash.com/@ninjason" rel="noopener">Jason Leung</a>.</em></p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[使用 CSS 使版式适应用户偏好]]></title>
            <link>https://web.dev/adapting-typography-to-user-preferences-with-css/</link>
            <guid>https://web.dev/adapting-typography-to-user-preferences-with-css/</guid>
            <content:encoded><![CDATA[<div>
    <h1>GPT总结</h1>
    <summary>这篇文章介绍了如何通过使用CSS媒体查询和可变字体来定制阅读体验。通过使用字体变体设置，可以根据用户的偏好和上下文（如暗模式或高对比度）来自定义字体的等级和粗细。文章还提到了使用@font-face API加载可变字体，并使用CSS自定义属性和媒体查询来适应用户的偏好。根据用户的对比度偏好，字体的粗细会有所不同，而根据用户的颜色方案偏好，字体的亮度也会有所调整。通过这种方式，可以根据用户的偏好来定制字体，提供更好的阅读体验。</summary>
    <div>
    <div>OriginTitle: Adapting typography to user preferences with CSS</div>

    </div></div><p>让用户参与设计过程对于用户来说是一个激动人心的时刻， 
 设计师和开发人员。 用户可以登陆您的体验并无缝开始 
 消费内容时，他们的偏好充分融入到设计结果中。</p>
<p>这篇博文探讨了使用 CSS 媒体查询和可变字体来定制 
 阅读体验更进一步。 字体等级和粗细可定制 
 和<code>字体变化设置</code>，允许根据不同的偏好进行微调 
 和上下文，例如对深色模式或高对比度的偏好。 我们可以采取 
 这些偏好并为该用户体验定制可变字体。</p>
<ul>
<li>深色模式的渐变程度略有降低。</li>
<li>高对比度使字体更粗。</li>
<li>低对比度使字体更细。</li>
</ul>
<figure data-size="full">
  <video autoplay="" controls="" loop="" muted="">      <source src="https://storage.googleapis.com/web-dev-uploads/video/vS06HQ1YTsbMKSFTIPl2iogUQP73/cgGryLwncKVnBUQ8iQOF.mp4" type="video/mp4">    </video>
  <figcaption>
    <a href="https://codepen.io/argyleink/pen/mdQrqvj">https://codepen.io/argyleink/pen/mdQrqvj</a>
  </figcaption>
</figure>
<p>请继续了解 CSS 和可变字体的每个部分 
 这个有意义的时刻！</p>
<h2 id="getting-setup">进行设置<a class="headline-link" href="https://web.dev/adapting-typography-to-user-preferences-with-css/#getting-setup">#</a></h2>
<p>为了帮助关注 CSS 和字体变化设置值，还给我们 
 一些值得阅读和查看的内容，这里是您可以用来预览作品的标记：</p>
<div><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&amp;lt;</span>h1</span><span class="token punctuation">&amp;gt;</span></span>基于对比度偏好的可变字体粗细<span class="token tag"><span class="token tag"><span class="token punctuation"></span>h1</span><span class="token punctuation">&amp;gt;</span></span><br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&amp;lt;</span>p</span><span class="token punctuation">&amp;gt;</span></span><br>Lorem ipsum dolor sat amet consectetur adipisicing elit。<br>官方，怎么样？ Quidem、nemo aliquam、magnam rerum 区别<br>itaque nisi nam，cupiditate dolorum ad sint。 索鲁塔尼莫<br>Labore aliquid ex， dicta corporis。<br><span class="token tag"><span class="token tag"><span class="token punctuation"></span>p</span><span class="token punctuation">&amp;gt;</span></span></code></pre>
</div><p>无需添加任何 CSS，字体大小就已经能够适应用户的喜好。 
 这是另一个演示的视频，展示了如何设置<code>字体大小</code>以像素为单位将 
 压缩任何用户偏好，以及为什么你应该以 rems 设置字体大小：</p>
<p><video autoplay="" controls="" loop="" muted="">      <source src="https://storage.googleapis.com/web-dev-uploads/video/vS06HQ1YTsbMKSFTIPl2iogUQP73/8mxSKsYmv6K7zoqDor0F.mp4" type="video/mp4">    </video></p>
<p>最后，为了集中和支持演示，需要一些 CSS：</p>
<div><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@层</span>演示支持</span> <span class="token punctuation">{</span><br>  <span class="token selector">身体</span> <span class="token punctuation">{</span><br>    <span class="token property">展示</span><span class="token punctuation">:</span>网格<span class="token punctuation">;</span><br>    <span class="token property">地点内容</span><span class="token punctuation">:</span>中心<span class="token punctuation">;</span><br>    <span class="token property">填充</span><span class="token punctuation">:</span> <span class="token function">变量</span><span class="token punctuation">（</span>--尺寸-5<span class="token punctuation">）</span><span class="token punctuation">;</span><br>    <span class="token property">差距</span><span class="token punctuation">:</span> <span class="token function">变量</span><span class="token punctuation">（</span>--尺寸-5<span class="token punctuation">）</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token selector">h1</span> <span class="token punctuation">{</span><br>    <span class="token property">文本换行</span><span class="token punctuation">:</span>平衡<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</div><img alt="A screenshot preview of the demo so far, in both dark and light themes." decoding="async" height="327" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format" srcset="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&amp;w=1600 1600w" width="800">
<p>此演示设置可让您开始测试和实现这种简洁的排版用户体验 
 特征。</p>
<h2 id="loading-the-roboto-flex-variable-font">加载 Roboto Flex 可变字体<a class="headline-link" href="https://web.dev/adapting-typography-to-user-preferences-with-css/#loading-the-roboto-flex-variable-font">#</a></h2>
<p>自适应策略取决于具有有意义的轴的可变字体 
 定制，特别是您需要的<code>研究生毕业证书</code>和<code>重量</code>。 目标自适应用户 
 本文中的偏好是配色方案和对比度，两者 
 将定制这些轴以匹配用户所需的偏好。</p>
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow">不需要可变字体来实现这种符合偏好的用户体验，但是，使用可变字体无需加载多种粗细或版本的字体即可实现效果。 看<a href="https://codepen.io/web-dot-dev/pen/zYMmevQ">这个演示</a>有关此 UX 的示例，不依赖于可变字体。</div></aside>
<p>使用以下命令加载可变字体<code>@字体脸</code>CSS的API：</p>
<div><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@字体脸</span></span> <span class="token punctuation">{</span><br>  <span class="token property">字体系列</span><span class="token punctuation">:</span> <span class="token string">“机器人柔性”</span><span class="token punctuation">;</span><br>  <span class="token property">源代码</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">网址</span><span class="token punctuation">（</span><span class="token string url">'https://assets.codepen.io/2585/RobotoFlex'</span><span class="token punctuation">）</span></span> <span class="token function">格式</span><span class="token punctuation">（</span><span class="token string">'真实类型'</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</div><p>接下来，将字体应用于某些内容。 以下 CSS 将其应用于 
 一切：</p>
<div><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@层</span>演示支持</span> <span class="token punctuation">{</span><br>  <span class="token selector">身体</span> <span class="token punctuation">{</span><br>    <span class="token property">字体系列</span><span class="token punctuation">:</span>机器人柔性<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</div><img alt="A screenshot preview of the demo so far, with the font now in Roboto Flex in both dark and light themes." decoding="async" height="327" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format" srcset="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&amp;w=1600 1600w" width="800">
<h2 id="css-custom-properties-and-media-queries-for-the-win">CSS 自定义属性和媒体查询获胜<a class="headline-link" href="https://web.dev/adapting-typography-to-user-preferences-with-css/#css-custom-properties-and-media-queries-for-the-win">#</a></h2>
<p>加载字体后，您可以查询用户首选项并调整变量 
 字体设置要匹配。</p>
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow">如果您需要对其中一些样式进行评论，请查看<a href="https://web.dev/learn/css/">学习 CSS</a>模块开启<a href="https://web.dev/learn/design/media-queries/">媒体查询</a>或这篇文章<a href="https://web.dev/building-a-color-scheme/">使用自定义属性构建自适应配色方案</a>。</div></aside>
<h3 id="settings-when-theres-no-preferences-default">没有首选项时的设置（默认）<a class="headline-link" href="https://web.dev/adapting-typography-to-user-preferences-with-css/#settings-when-theres-no-preferences-default">#</a></h3>
<p>以下初始样式将是默认样式，或者另一种查看方式 
 在这里，用户的样式没有任何偏好。</p>
<div><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@层</span>演示</span> <span class="token punctuation">{</span><br>  <span class="token selector">身体</span> <span class="token punctuation">{</span><br>    <span class="token property">--基础重量</span><span class="token punctuation">:</span>400<span class="token punctuation">;</span><br>    <span class="token property">--基础等级</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span><br><br>    <span class="token property">字体变化设置</span><span class="token punctuation">:</span><br>      <span class="token string">“重量”</span> <span class="token function">变量</span><span class="token punctuation">（</span>--基础重量<span class="token punctuation">）</span><span class="token punctuation">,</span><br>      <span class="token string">“毕业”</span> <span class="token function">变量</span><span class="token punctuation">（</span>--基础等级<span class="token punctuation">）</span><br>    <span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</div><h3 id="settings-when-the-preference-is-for-high-contrast">偏好高对比度时的设置<a class="headline-link" href="https://web.dev/adapting-typography-to-user-preferences-with-css/#settings-when-the-preference-is-for-high-contrast">#</a></h3>
<p>对于在系统中表示偏好高对比度的用户 
 设置，增加<code>--基础重量</code>价值来自<code>400</code>到<code>700</code>:</p>
<div><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@层</span>演示</span> <span class="token punctuation">{</span><br>  <span class="token atrule"><span class="token rule">@媒体</span> <span class="token punctuation">（</span><span class="token property">喜欢对比</span><span class="token punctuation">:</span>更多的<span class="token punctuation">）</span></span> <span class="token punctuation">{</span><br>    <span class="token selector">身体</span> <span class="token punctuation">{</span><br>      <span class="token property">--基础重量</span><span class="token punctuation">:</span>700<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</div><p>现在阅读时对比更多。</p>
<h3 id="settings-when-the-preference-is-for-low-contrast">优先选择低对比度时的设置<a class="headline-link" href="https://web.dev/adapting-typography-to-user-preferences-with-css/#settings-when-the-preference-is-for-low-contrast">#</a></h3>
<p>对于在系统中表示偏好低对比度的用户 
 设置，减少<code>--基础重量</code>价值来自<code>400</code>到<code>200</code>:</p>
<div><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@层</span>演示</span> <span class="token punctuation">{</span><br>  <span class="token atrule"><span class="token rule">@媒体</span> <span class="token punctuation">（</span><span class="token property">喜欢对比</span><span class="token punctuation">:</span>较少的<span class="token punctuation">）</span></span> <span class="token punctuation">{</span><br>    <span class="token selector">身体</span> <span class="token punctuation">{</span><br>      <span class="token property">--基础重量</span><span class="token punctuation">:</span>200<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</div><p>现在阅读时对比度减少了。</p>
<h3 id="settings-when-the-preference-is-for-dark-mode">偏好为深色模式时的设置<a class="headline-link" href="https://web.dev/adapting-typography-to-user-preferences-with-css/#settings-when-the-preference-is-for-dark-mode">#</a></h3>
<div><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@层</span>演示</span> <span class="token punctuation">{</span><br>  <span class="token atrule"><span class="token rule">@媒体</span> <span class="token punctuation">（</span><span class="token property">偏好配色方案</span><span class="token punctuation">:</span>黑暗的<span class="token punctuation">）</span></span> <span class="token punctuation">{</span><br>    <span class="token selector">身体</span> <span class="token punctuation">{</span><br>      <span class="token property">--基础等级</span><span class="token punctuation">:</span>-25<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</div><p>现在，亮对暗与暗对亮的感知差异已经是 
 占。</p>
<h3 id="all-together-now">现在都在一起了<a class="headline-link" href="https://web.dev/adapting-typography-to-user-preferences-with-css/#all-together-now">#</a></h3>
<div><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@层</span>演示</span> <span class="token punctuation">{</span><br>  <span class="token selector">身体</span> <span class="token punctuation">{</span><br>    <span class="token property">--基础重量</span><span class="token punctuation">:</span>400<span class="token punctuation">;</span><br>    <span class="token property">--基础等级</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span><br><br>    <span class="token property">字体变化设置</span><span class="token punctuation">:</span><br>      <span class="token string">“重量”</span> <span class="token function">变量</span><span class="token punctuation">（</span>--基础重量<span class="token punctuation">）</span><span class="token punctuation">,</span><br>      <span class="token string">“毕业”</span> <span class="token function">变量</span><span class="token punctuation">（</span>--基础等级<span class="token punctuation">）</span><br>    <span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token atrule"><span class="token rule">@媒体</span> <span class="token punctuation">（</span><span class="token property">喜欢对比</span><span class="token punctuation">:</span>更多的<span class="token punctuation">）</span></span> <span class="token punctuation">{</span><br>    <span class="token selector">身体</span> <span class="token punctuation">{</span><br>      <span class="token property">--基础重量</span><span class="token punctuation">:</span>700<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token atrule"><span class="token rule">@媒体</span> <span class="token punctuation">（</span><span class="token property">喜欢对比</span><span class="token punctuation">:</span>较少的<span class="token punctuation">）</span></span> <span class="token punctuation">{</span><br>    <span class="token selector">身体</span> <span class="token punctuation">{</span><br>      <span class="token property">--基础重量</span><span class="token punctuation">:</span>200<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token atrule"><span class="token rule">@媒体</span> <span class="token punctuation">（</span><span class="token property">偏好配色方案</span><span class="token punctuation">:</span>黑暗的<span class="token punctuation">）</span></span> <span class="token punctuation">{</span><br>    <span class="token selector">身体</span> <span class="token punctuation">{</span><br>      <span class="token property">--基础等级</span><span class="token punctuation">:</span>-25<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</div><p>或者，为了好玩，一起<a href="https://developer.chrome.com/articles/css-nesting/" rel="noopener">CSS 嵌套</a>:</p>
<div><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@层</span>演示</span> <span class="token punctuation">{</span><br>  <span class="token selector">身体</span> <span class="token punctuation">{</span><br>    <span class="token property">--基础重量</span><span class="token punctuation">:</span>400<span class="token punctuation">;</span><br>    <span class="token property">--基础等级</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span><br><br>    <span class="token property">字体变化设置</span><span class="token punctuation">:</span><br>      <span class="token string">“重量”</span> <span class="token function">变量</span><span class="token punctuation">（</span>--基础重量<span class="token punctuation">）</span><span class="token punctuation">,</span><br>      <span class="token string">“毕业”</span> <span class="token function">变量</span><span class="token punctuation">（</span>--基础等级<span class="token punctuation">）</span><br>    <span class="token punctuation">;</span><br><br>    <span class="token atrule"><span class="token rule">@媒体</span> <span class="token punctuation">（</span><span class="token property">喜欢对比</span><span class="token punctuation">:</span>更多的<span class="token punctuation">）</span></span>     <span class="token punctuation">{</span> <span class="token property">--基础重量</span><span class="token punctuation">:</span>700<span class="token punctuation">}</span><br>    <span class="token atrule"><span class="token rule">@媒体</span> <span class="token punctuation">（</span><span class="token property">喜欢对比</span><span class="token punctuation">:</span>较少的<span class="token punctuation">）</span></span>     <span class="token punctuation">{</span> <span class="token property">--基础重量</span><span class="token punctuation">:</span>200<span class="token punctuation">}</span><br>    <span class="token atrule"><span class="token rule">@媒体</span> <span class="token punctuation">（</span><span class="token property">偏好配色方案</span><span class="token punctuation">:</span>黑暗的<span class="token punctuation">）</span></span> <span class="token punctuation">{</span> <span class="token property">--基础等级</span><span class="token punctuation">:</span>-25<span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</div><p>结果是一种调整字体以匹配用户的阅读体验 
 优先。 完整的源代码可在下面的 Codepen 中找到。</p>
<div class="codepen-embed-wrap" style="height: 500px; width: 100%">
<iframe allow="camera; clipboard-read; clipboard-write; encrypted-media; geolocation; microphone; midi;" loading="lazy" src="https://codepen.io/web-dot-dev/embed/rNQZMzo?height=500&amp;theme-id=light&amp;default-tab=result&amp;editable=true" style="height: 100%; width: 100%; border: 0;" title="Pen rNQZMzo by web-dot-dev on Codepen">Codepen 上 web-dot-dev 的 Pen</iframe></div>
<hr><p>Bringing the user into the design process has been an exciting time for users,
designers and developers. Users can land on your experience and seamlessly begin
consuming content, their preferences richly integrated into the design result.</p>
<p>This blog post explores using CSS media queries with a variable font to tailor
the reading experience even further. Font grade and weight can be customized
with <code>font-variation-settings</code>, allowing microtuning given various preferences
and contexts, like a preference for dark mode or high contrast. We can take
these preferences and tailor a variable font for that user experience.</p>
<ul>
<li>Dark mode gets a slightly reduced gradation.</li>
<li>High contrast gets a bolder font.</li>
<li>Low contrast gets a thinner font.</li>
</ul>
<figure data-size="full">
  <video autoplay="" controls="" loop="" muted="">      <source src="https://storage.googleapis.com/web-dev-uploads/video/vS06HQ1YTsbMKSFTIPl2iogUQP73/cgGryLwncKVnBUQ8iQOF.mp4" type="video/mp4">    </video>
  <figcaption>
    <a href="https://codepen.io/argyleink/pen/mdQrqvj">https://codepen.io/argyleink/pen/mdQrqvj</a>
  </figcaption>
</figure>
<p>Follow along to understand each portion of the CSS and variable font that enable
this meaningful moment!</p>
<h2 id="getting-setup">Getting setup <a class="headline-link" href="https://web.dev/adapting-typography-to-user-preferences-with-css/#getting-setup">#</a></h2>
<p>To help focus on the CSS and font variation setting values, but also give us
something to read and see, here's the markup you can use to preview the work:</p>
<div><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Variable font weight based on contrast preference<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><br>  Lorem ipsum dolor sit amet consectetur adipisicing elit.<br>  Officia, quod? Quidem, nemo aliquam, magnam rerum distinctio<br>  itaque nisi nam, cupiditate dolorum ad sint. Soluta nemo<br>  labore aliquid ex, dicta corporis.<br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span></code></pre>
</div><p>Without adding any CSS, the font size is already adaptive to user preferences.
Here's a video from another demo showing how setting <code>font-size</code> in pixels will
squash any user preferences, and why you should set your font size in rems:</p>
<p><video autoplay="" controls="" loop="" muted="">      <source src="https://storage.googleapis.com/web-dev-uploads/video/vS06HQ1YTsbMKSFTIPl2iogUQP73/8mxSKsYmv6K7zoqDor0F.mp4" type="video/mp4">    </video></p>
<p>Lastly, to center and support the demo, a little CSS:</p>
<div><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@layer</span> demo.support</span> <span class="token punctuation">{</span><br>  <span class="token selector">body</span> <span class="token punctuation">{</span><br>    <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span><br>    <span class="token property">place-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span><br>    <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--size-5<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token property">gap</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--size-5<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token selector">h1</span> <span class="token punctuation">{</span><br>    <span class="token property">text-wrap</span><span class="token punctuation">:</span> balance<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</div><img alt="A screenshot preview of the demo so far, in both dark and light themes." decoding="async" height="327" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format" srcset="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&amp;w=1600 1600w" width="800">
<p>This demo setup lets you begin testing and implementing this neat typography UX
feature.</p>
<h2 id="loading-the-roboto-flex-variable-font">Loading the Roboto Flex variable font <a class="headline-link" href="https://web.dev/adapting-typography-to-user-preferences-with-css/#loading-the-roboto-flex-variable-font">#</a></h2>
<p>The adaptive strategy depends on a variable font with meaningful axes for
customization, specifically you need <code>GRAD</code> and <code>wght</code>. The target adaptive user
preferences in this article are for color scheme and contrast, both of which
will tailor these axes to match the user's desired preference.</p>
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> A variable font is not required to achieve this user experience that matches preferences, however, using one achieves the effect without loading multiple weights or versions of a font. See <a href="https://codepen.io/web-dot-dev/pen/zYMmevQ">this demo</a> for an example of this UX without a dependency on a variable font. </div></aside>
<p>Load the variable font using the <code>@font-face</code> API of CSS:</p>
<div><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span><br>  <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">"Roboto Flex"</span><span class="token punctuation">;</span><br>  <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'https://assets.codepen.io/2585/RobotoFlex'</span><span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'truetype'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</div><p>Next, apply the font to some content. The following CSS applies it to
everything:</p>
<div><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@layer</span> demo.support</span> <span class="token punctuation">{</span><br>  <span class="token selector">body</span> <span class="token punctuation">{</span><br>    <span class="token property">font-family</span><span class="token punctuation">:</span> Roboto Flex<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</div><img alt="A screenshot preview of the demo so far, with the font now in Roboto Flex in both dark and light themes." decoding="async" height="327" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format" srcset="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&amp;w=1600 1600w" width="800">
<h2 id="css-custom-properties-and-media-queries-for-the-win">CSS custom properties and media queries for the win <a class="headline-link" href="https://web.dev/adapting-typography-to-user-preferences-with-css/#css-custom-properties-and-media-queries-for-the-win">#</a></h2>
<p>With the font loaded, you can query for user preferences and adapt the variable
font settings to match.</p>
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> If you need a review on some of these styles, check out the <a href="https://web.dev/learn/css/">Learn CSS</a> module on <a href="https://web.dev/learn/design/media-queries/">media queries</a> or this post on <a href="https://web.dev/building-a-color-scheme/">building an adaptive color scheme with custom properties</a>. </div></aside>
<h3 id="settings-when-theres-no-preferences-default">Settings when there's no preferences (default) <a class="headline-link" href="https://web.dev/adapting-typography-to-user-preferences-with-css/#settings-when-theres-no-preferences-default">#</a></h3>
<p>The following initial styles will be the default styles, or another way to look
at it, the styles for users without any preferences.</p>
<div><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@layer</span> demo</span> <span class="token punctuation">{</span><br>  <span class="token selector">body</span> <span class="token punctuation">{</span><br>    <span class="token property">--base-weight</span><span class="token punctuation">:</span> 400<span class="token punctuation">;</span><br>    <span class="token property">--base-grade</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br><br>    <span class="token property">font-variation-settings</span><span class="token punctuation">:</span><br>      <span class="token string">"wght"</span> <span class="token function">var</span><span class="token punctuation">(</span>--base-weight<span class="token punctuation">)</span><span class="token punctuation">,</span><br>      <span class="token string">"GRAD"</span> <span class="token function">var</span><span class="token punctuation">(</span>--base-grade<span class="token punctuation">)</span><br>    <span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</div><h3 id="settings-when-the-preference-is-for-high-contrast">Settings when the preference is for high contrast <a class="headline-link" href="https://web.dev/adapting-typography-to-user-preferences-with-css/#settings-when-the-preference-is-for-high-contrast">#</a></h3>
<p>For users who have indicated a preference for high contrast in their system
settings, increase the <code>--base-weight</code> value from <code>400</code> to <code>700</code>:</p>
<div><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@layer</span> demo</span> <span class="token punctuation">{</span><br>  <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">prefers-contrast</span><span class="token punctuation">:</span> more<span class="token punctuation">)</span></span> <span class="token punctuation">{</span><br>    <span class="token selector">body</span> <span class="token punctuation">{</span><br>      <span class="token property">--base-weight</span><span class="token punctuation">:</span> 700<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</div><p>Now there's more contrast while reading.</p>
<h3 id="settings-when-the-preference-is-for-low-contrast">Settings when the preference is for low contrast <a class="headline-link" href="https://web.dev/adapting-typography-to-user-preferences-with-css/#settings-when-the-preference-is-for-low-contrast">#</a></h3>
<p>For users who have indicated a preference for low contrast in their system
settings, decrease the <code>--base-weight</code> value from <code>400</code> to <code>200</code>:</p>
<div><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@layer</span> demo</span> <span class="token punctuation">{</span><br>  <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">prefers-contrast</span><span class="token punctuation">:</span> less<span class="token punctuation">)</span></span> <span class="token punctuation">{</span><br>    <span class="token selector">body</span> <span class="token punctuation">{</span><br>      <span class="token property">--base-weight</span><span class="token punctuation">:</span> 200<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</div><p>Now there's less contrast while reading.</p>
<h3 id="settings-when-the-preference-is-for-dark-mode">Settings when the preference is for dark mode <a class="headline-link" href="https://web.dev/adapting-typography-to-user-preferences-with-css/#settings-when-the-preference-is-for-dark-mode">#</a></h3>
<div><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@layer</span> demo</span> <span class="token punctuation">{</span><br>  <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">prefers-color-scheme</span><span class="token punctuation">:</span> dark<span class="token punctuation">)</span></span> <span class="token punctuation">{</span><br>    <span class="token selector">body</span> <span class="token punctuation">{</span><br>      <span class="token property">--base-grade</span><span class="token punctuation">:</span> -25<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</div><p>Now the perceptual differences of light on dark vs dark on light have been
accounted for.</p>
<h3 id="all-together-now">All together now <a class="headline-link" href="https://web.dev/adapting-typography-to-user-preferences-with-css/#all-together-now">#</a></h3>
<div><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@layer</span> demo</span> <span class="token punctuation">{</span><br>  <span class="token selector">body</span> <span class="token punctuation">{</span><br>    <span class="token property">--base-weight</span><span class="token punctuation">:</span> 400<span class="token punctuation">;</span><br>    <span class="token property">--base-grade</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br><br>    <span class="token property">font-variation-settings</span><span class="token punctuation">:</span><br>      <span class="token string">"wght"</span> <span class="token function">var</span><span class="token punctuation">(</span>--base-weight<span class="token punctuation">)</span><span class="token punctuation">,</span><br>      <span class="token string">"GRAD"</span> <span class="token function">var</span><span class="token punctuation">(</span>--base-grade<span class="token punctuation">)</span><br>    <span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">prefers-contrast</span><span class="token punctuation">:</span> more<span class="token punctuation">)</span></span> <span class="token punctuation">{</span><br>    <span class="token selector">body</span> <span class="token punctuation">{</span><br>      <span class="token property">--base-weight</span><span class="token punctuation">:</span> 700<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">prefers-contrast</span><span class="token punctuation">:</span> less<span class="token punctuation">)</span></span> <span class="token punctuation">{</span><br>    <span class="token selector">body</span> <span class="token punctuation">{</span><br>      <span class="token property">--base-weight</span><span class="token punctuation">:</span> 200<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">prefers-color-scheme</span><span class="token punctuation">:</span> dark<span class="token punctuation">)</span></span> <span class="token punctuation">{</span><br>    <span class="token selector">body</span> <span class="token punctuation">{</span><br>      <span class="token property">--base-grade</span><span class="token punctuation">:</span> -25<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</div><p>Or, for fun, all together with <a href="https://developer.chrome.com/articles/css-nesting/" rel="noopener">CSS nesting</a>:</p>
<div><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@layer</span> demo</span> <span class="token punctuation">{</span><br>  <span class="token selector">body</span> <span class="token punctuation">{</span><br>    <span class="token property">--base-weight</span><span class="token punctuation">:</span> 400<span class="token punctuation">;</span><br>    <span class="token property">--base-grade</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br><br>    <span class="token property">font-variation-settings</span><span class="token punctuation">:</span><br>      <span class="token string">"wght"</span> <span class="token function">var</span><span class="token punctuation">(</span>--base-weight<span class="token punctuation">)</span><span class="token punctuation">,</span><br>      <span class="token string">"GRAD"</span> <span class="token function">var</span><span class="token punctuation">(</span>--base-grade<span class="token punctuation">)</span><br>    <span class="token punctuation">;</span><br><br>    <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">prefers-contrast</span><span class="token punctuation">:</span> more<span class="token punctuation">)</span></span>     <span class="token punctuation">{</span> <span class="token property">--base-weight</span><span class="token punctuation">:</span> 700 <span class="token punctuation">}</span><br>    <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">prefers-contrast</span><span class="token punctuation">:</span> less<span class="token punctuation">)</span></span>     <span class="token punctuation">{</span> <span class="token property">--base-weight</span><span class="token punctuation">:</span> 200 <span class="token punctuation">}</span><br>    <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">prefers-color-scheme</span><span class="token punctuation">:</span> dark<span class="token punctuation">)</span></span> <span class="token punctuation">{</span> <span class="token property">--base-grade</span><span class="token punctuation">:</span> -25 <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</div><p>The result is a reading experience that adapts the font to match the user's
preferences. Full source code is available below in the Codepen.</p>
<div class="codepen-embed-wrap" style="height: 500px; width: 100%">
<iframe allow="camera; clipboard-read; clipboard-write; encrypted-media; geolocation; microphone; midi;" loading="lazy" src="https://codepen.io/web-dot-dev/embed/rNQZMzo?height=500&amp;theme-id=light&amp;default-tab=result&amp;editable=true" style="height: 100%; width: 100%; border: 0;" title="Pen rNQZMzo by web-dot-dev on Codepen">See the Pen <a href="https://codepen.io/web-dot-dev/embed/rNQZMzo">Pen rNQZMzo by web-dot-dev on Codepen</a></iframe></div>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[设计 Google 帐户上的密钥的用户体验]]></title>
            <link>https://web.dev/passkey-google-ux/</link>
            <guid>https://web.dev/passkey-google-ux/</guid>
            <content:encoded><![CDATA[<div>
    <h1>GPT总结</h1>
    <summary>这篇文章介绍了Google推出的一种新的身份验证技术——Passkeys。Passkeys是一种简单而安全的跨设备身份验证技术，可以在不输入密码的情况下创建在线账户并登录。用户只需使用设备上的屏幕锁，如指纹传感器，即可登录账户。Google与FIDO联盟合作多年，与苹果和微软一起推广Passkeys。2022年，Google为Android和Chrome用户提供了Passkeys的平台支持，使他们可以在所有设备上无缝登录应用和网站。2023年5月，Google启用了使用Passkeys登录Google账户的功能，为用户带来了安全和便利。Google作为一家同时致力于Passkeys基础设施的开发和最大的Passkeys服务提供商之一，正在谨慎而有计划地推出Passkeys，以便通过用户反馈不断改进Passkeys基础设施和Google账户体验。

文章还介绍了如何引导用户过渡到Passkeys。研究表明，用户最看重的是便利性。他们希望能够顺利快速地过渡到真正的体验，而这需要在登录之后进行。Passkeys的过渡需要改变用户的肌肉记忆，并且需要说服用户这个转变是值得的。因此，Google在设计Passkeys的用户体验时，强调了易用性和安</summary>
    <div>
    <div>OriginTitle: Designing the user experience of passkeys on Google accounts</div>

    </div></div><p>万能钥匙是一个简单且<a href="https://security.googleblog.com/2023/05/so-long-passwords-thanks-for-all-phish.html" rel="noopener">安全的跨设备身份验证 
 技术</a>
 允许创建在线帐户并登录，而无需输入 
 密码。 要登录帐户，系统只会提示用户使用 
 设备上的屏幕锁定，例如触摸指纹传感器。</p>
<p>谷歌多年来一直与 FIDO 联盟合作，与苹果和 
 微软，将密钥带给世界。 2022 年我们推出平台 
 支持密钥，以便 
<a href="https://android-developers.googleblog.com/2022/10/bringing-passkeys-to-android-and-chrome.html" rel="noopener">安卓</a>
和
<a href="https://blog.chromium.org/2022/12/introducing-passkeys-in-chrome.html" rel="noopener">铬合金</a>
 用户可以在所有设备上无缝登录应用程序和网站。 在 
 2023 年 5 月，我们启用了登录<a href="https://blog.google/technology/safety-security/the-beginning-of-the-end-of-the-password/" rel="noopener">Google 帐户 
 万能钥匙</a>, 
 为我们的用户带来密钥的安全性和便利性。</p>
<p>谷歌处于独特的地位，因为我们都致力于基础设施建设 
 密钥，是使用密钥的最大服务之一。 我们正在推出 
 仔细而谨慎地设置 Google 帐户的密钥，以便我们能够衡量 
 结果并使用该反馈来继续改进密钥基础设施 
 以及 Google 帐户体验。</p>
<h2 id="transitioning-users-to-passkeys">将用户转换为密钥<a class="headline-link" href="https://web.dev/passkey-google-ux/#transitioning-users-to-passkeys">#</a></h2>
<p>自个性化出现以来，密码一直是标准登录方法 
 在线体验。 我们如何引入passkey的无密码体验？</p>
<p>研究表明，在身份验证方面，用户重视 
 最方便。 他们希望平稳快速地过渡到真正的 
 体验，只有在登录后才能获得。</p>
<p>尽管如此，向万能钥匙的过渡需要改变肌肉记忆，并且用户需要 
 确信改变是值得的。</p>
<p>密钥的用户体验<a href="http://google.com/" rel="noopener">谷歌网站</a>已经 
 战略性设计旨在强调每一步的两个原则 
 身份验证过程：易用性和安全性。</p>
<h3 id="leading-with-convenience">以便利为先导<a class="headline-link" href="https://web.dev/passkey-google-ux/#leading-with-convenience">#</a></h3>
<figure>
<img alt="For most users, this will be the first time they see passkeys" decoding="async" height="600" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format" srcset="https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>对于大多数用户来说，这将是他们第一次看到密钥。</figcaption>
</figure>
<p>用户看到的第一个万能钥匙屏幕很轻且易于理解。 标题是 
 关注用户利益，说“简化您的登录”。</p>
<p>正文解释说“通过密钥，您现在可以使用指纹、面部或 
 屏幕锁定以验证确实是您”。</p>
<p>插图旨在将信息扎根于所提出的价值主张中 
 按页面。 大的蓝色主要操作邀请用户继续。 “不是 
 now”作为次要操作包含在内，以允许用户选择是否 
 此时选择加入，让用户掌控。 并提供“了解更多” 
 对于那些想更好地了解密钥的好奇用户 
 进行中。</p>
<p>我们探索了用于向用户介绍万能钥匙的页面的多次迭代 
 登录期间。这包括尝试强调安全性的内容， 
 技术以及万能钥匙的其他方面——但真正重要的是便利性 
 最引起共鸣。 Google 的内容策略、插图和交互设计 
 演示了我们实施密钥的核心原则。</p>
<h3 id="associating-the-term-passkeys-with-familiar-security-experiences">将术语“密钥”与熟悉的安全体验相关联<a class="headline-link" href="https://web.dev/passkey-google-ux/#associating-the-term-passkeys-with-familiar-security-experiences">#</a></h3>
<p>对于大多数用户来说，万能钥匙是一个新术语，因此我们有意温和地公开 
 用户对该术语建立熟悉度。 在内部研究的指导下，我们 
 策略性地将密钥与安全性关联起来。</p>
<p>“密钥”一词包含在整个登录流程中不太显眼的位置 
 正文复制位置。 它始终坐落在熟悉的安全环境之中 
 支持密钥使用的体验：指纹、面部扫描或其他设备 
 屏幕锁。</p>
<p>我们的研究表明，许多用户将生物识别技术与安全联系起来。 尽管 
 密钥不需要生物识别（密钥可以与设备 PIN 一起使用，例如 
 例如），我们倾向于将万能钥匙与生物识别技术联系起来 
 提高用户对密钥安全优势的认识。</p>
<p>“了解更多”后面的附加内容有很多有价值的信息 
 对于用户来说，包括让用户放心他们的敏感生物识别数据 
 保留在他们的个人设备上，并且在创建或共享时绝不会存储或共享 
 使用密钥。 我们采取这种方法是因为大多数用户发现这种方法很方便 
 密钥方面很有吸引力，但只有少数考虑到生物识别 
 测试期间的元素。</p>
<h3 id="introducing-passkeys-when-its-relevant-to-the-user">当与用户相关时引入密钥<a class="headline-link" href="https://web.dev/passkey-google-ux/#introducing-passkeys-when-its-relevant-to-the-user">#</a></h3>
<p>Google 的启发式方法会仔细确定谁将看到介绍性屏幕。 
 其中一些因素是用户是否启用了两步验证以及 
 他们是否定期从同一设备访问该帐户。</p>
<p>首先选择最有可能成功使用密钥的用户，然后再选择 
 届时将引入更多用户（不过，任何人都可以从 
<a href="http://g.co/passkeys" rel="noopener">g.co/密码</a>今天）。</p>
<p>使用用户名登录后，系统会提示选择用户创建密码 
 和密码。 我们在用户旅程中选择这一点有几个原因：</p>
<ul>
<li>用户刚刚登录，他们知道自己的凭据，然后 
 步。</li>
<li>我们确信用户正在使用他们的设备 - 他们刚刚登录，因此 
 他们不太可能走开或放下设备。</li>
<li>据统计，第一次登录并不总是成功，因此一条消息 
 让下次变得更容易具有有形的价值。</li>
</ul>
<h3 id="positioning-passkeys-as-an-alternative-to-passwords-and-not-yet-a-replacement">将万能钥匙定位为密码的替代品，但尚未取代<a class="headline-link" href="https://web.dev/passkey-google-ux/#positioning-passkeys-as-an-alternative-to-passwords-and-not-yet-a-replacement">#</a></h3>
<p>初步用户研究表明，许多用户仍然希望密码作为备份 
 登录方法。 并非所有用户都会拥有<a href="https://support.google.com/accounts/answer/13548313?hl=en&amp;sjid=17510595681178318776-NA" rel="noopener">必须采用的技术 
 万能钥匙</a>。</p>
<p>因此，尽管包括谷歌在内的整个行业正在走向“无密码” 
 未来”，谷歌有意将密钥定位为一种简单而安全的方式 
<strong>选择</strong>到密码。 Google 的 UI 重点关注万能钥匙的好处 
 并避免使用暗示删除密码的语言。</p>
<h2 id="the-creation-moment">创作时刻<a class="headline-link" href="https://web.dev/passkey-google-ux/#the-creation-moment">#</a></h2>
<p>当用户选择注册时，他们将看到特定于浏览器的 UI 模式 
 使他们能够创建密钥。</p>
<p>密钥本身显示有行业一致的图标和信息 
 用于创建它。 这包括显示名称（您的友好名称） 
 密钥（例如您用户的真实姓名）和用户名（您的帐户上的唯一名称） 
 服务——电子邮件地址在这里可以发挥很大作用）。 当谈到与 
 密钥图标，<a href="https://media.fidoalliance.org/wp-content/uploads/2023/05/FIDO-Alliance-UX-Guidelines-for-Passkey-Creation-and-Sign-ins.pdf" rel="noopener">FIDO 联盟建议使用经过验证的密钥 
 图标</a>-和 
 鼓励通过定制使其成为您自己的。</p>
<p>在整个用户旅程中一致显示万能钥匙图标，以创建 
 熟悉用户在使用或管理密钥时将看到的内容。 这 
 如果没有上下文或支持材料，万能钥匙图标永远不会显示。</p>
<figure>
<img alt="When users create their passkey, they'll see this page" decoding="async" height="600" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format" srcset="https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>当用户创建密钥时，他们将看到此页面。</figcaption>
</figure>
<p>上面，我们概述了用户和平台如何共同创建一个 
 密钥。 当用户单击“继续”时，他们将看到一个独特的 UI 
 取决于平台。</p>
<p>考虑到这一点，我们通过内部研究了解到，确认 
 创建密钥后的屏幕对于理解非常有帮助 
 并在流程的这一步结束。</p>
<figure>
<img alt="Once the passkey has been created, users will see this page" decoding="async" height="600" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format" srcset="https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>创建密钥后，用户将看到此页面。</figcaption>
</figure>
<p>确认屏幕是一个故意的“暂停”，以结束旅程 
 向用户介绍密钥并完成创建其中之一的过程 
 他们自己的。 由于这是（可能）用户第一次使用密钥， 
 此页面旨在为旅程提供明确的结束。 我们选择了独立的 
 尝试其他一些工具（例如较小的通知，甚至是 
 创建后电子邮件——只是为了提供结构化、稳定的端到端 
 经验。</p>
<p>一旦用户点击此处的“继续”，他们就会被带到目的地。</p>
<figure>
<img alt="When users sign in again, they'll likely see this page" decoding="async" height="600" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format" srcset="https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>当用户再次登录时，他们可能会看到此页面。</figcaption>
</figure>
<h2 id="signing-in">登录中<a class="headline-link" href="https://web.dev/passkey-google-ux/#signing-in">#</a></h2>
<p>下次用户尝试登录时，他们将看到此页面。 这使用 
 相同的布局、插图和主要号召性用语来唤起第一反应 
 上面概述的“创造”体验。 一旦用户选择注册 
 在密钥中，此页面应该感觉熟悉，并且他们会识别哪些步骤 
 他们需要携带才能登录。</p>
<figure>
<img alt="The user will use this WebAuthn UI to sign in" decoding="async" height="600" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format" srcset="https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>用户将使用此 WebAuthn UI 登录。</figcaption>
</figure>
<p>同样的熟悉原则也适用于此。 有意地，这使用了 
 相同的图像、插图、布局和文本。 WebAuthn UI 中的文本 
 保持简短、广泛且可重复使用——因此每个人都可以将其用于 
 身份验证和重新身份验证。</p>
<h2 id="passkeys-management">密钥管理<a class="headline-link" href="https://web.dev/passkey-google-ux/#passkeys-management">#</a></h2>
<p>需要在 Google 帐户设置页面中引入全新页面 
 仔细考虑以确保用户有凝聚力、直观且一致 
 经验。</p>
<p>为了实现这一目标，我们分析了有关导航、内容、 
 整个组织中存在的等级制度、结构和既定期望 
 谷歌帐户。</p>
<figure>
<img alt="Passkeys management page in the Google Account" decoding="async" height="655" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format" srcset="https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>Google 帐户中的密钥管理页面。</figcaption>
</figure>
<h3 id="describe-passkeys-by-ecosystem">按生态系统描述密钥<a class="headline-link" href="https://web.dev/passkey-google-ux/#describe-passkeys-by-ecosystem">#</a></h3>
<p>创建一个高级类别系统，使我们能够逻辑地理解 
 决定通过描述密钥 
<a href="https://developers.google.com/identity/passkeys/supported-environments" rel="noopener">生态系统</a>。 
 这样，用户就可以识别密钥的创建位置和所在位置 
 用过的。 每个身份提供商（Google、Apple 和 Microsoft）都有一个名称 
 生态系统，所以我们选择使用这些（Google 密码管理器、iCloud 钥匙串、 
 和 Windows Hello）。</p>
<p>为了支持这一点，我们添加了额外的元数据，例如它何时创建、何时创建 
 最后一次使用它，以及使用它的特定操作系统。 从用户角度来说 
 管理操作，API仅支持重命名、撤销和创建。</p>
<p>重命名允许用户为密钥分配个人有意义的名称，这 
 可以帮助特定的用户群体跟踪并更多地了解他们 
 容易地。</p>
<p>撤销密钥不会将其从用户的个人凭证管理器中删除 
 （如 Google 密码管理器），但在设置之前使其无法使用 
 再次。 这就是为什么我们选择十字，而不是垃圾桶或删除图标， 
 代表撤销密钥的操作。</p>
<p>在描述向其帐户添加密钥的操作时，短语 
 与“添加密钥”相比，“创建密钥”更能引起用户的共鸣。 这 
 是一种微妙的语言选择，用于区分密钥和有形硬件 
 安全密钥（尽管应该注意的是<a href="https://support.google.com/accounts/answer/13548313?hl=en&amp;sjid=17510595681178318776-NA" rel="noopener">密钥可以存储在某些 
 硬件安全 
 键</a>）。</p>
<h3 id="providing-additional-content">提供额外内容<a class="headline-link" href="https://web.dev/passkey-google-ux/#providing-additional-content">#</a></h3>
<p>内部研究表明，使用密钥是一种相对无缝且可靠的方法。 
 熟悉的经历。 然而，与任何新技术一样，也存在一些挥之不去的问题 
 一些用户会出现的问题和疑虑。</p>
<p>屏幕锁背后的技术如何运作，什么使它更安全，以及 
 解决了 Google 在测试中遇到的最常见的“假设”场景 
 在<a href="https://support.google.com/accounts/answer/13548313?hl=en&amp;sjid=17510595681178318776-NA" rel="noopener">Google 的万能钥匙帮助中心 
 内容</a>。 
 准备好支持内容并启动密钥对于轻松启动至关重要 
 任何网站上的用户的过渡。</p>
<h3 id="falling-back-from-passkeys">从万能钥匙中恢复过来<a class="headline-link" href="https://web.dev/passkey-google-ux/#falling-back-from-passkeys">#</a></h3>
<p>恢复到旧系统就像在出现错误时单击“尝试其他方式”一样简单 
 要求用户使用密钥进行身份验证。 此外，退出 WebAuthn 
 UI 将启动用户再次尝试其密码或登录其帐户的路径 
 以传统方式使用 Google 帐户。</p>
<h2 id="conclusion">结论<a class="headline-link" href="https://web.dev/passkey-google-ux/#conclusion">#</a></h2>
<p>我们仍处于密钥的早期阶段，因此在设计用户时 
 经验牢记几个原则：</p>
<ul>
<li>当与用户相关时引入密钥。</li>
<li>强调万能钥匙的好处。</li>
<li>利用机会熟悉万能钥匙的概念。</li>
<li>将密钥定位为密码的替代品，而不是替代品。</li>
</ul>
<p>我们为 Google 帐户的密钥所做的选择是由最佳人员告知的 
 实践和内部研究，我们将继续改进用户体验 
 当我们从现实世界的用户那里获得新的见解时。</p>
<hr><p>Passkeys are a simple and <a href="https://security.googleblog.com/2023/05/so-long-passwords-thanks-for-all-phish.html" rel="noopener">secure cross-device authentication
technology</a>
that enables creating online accounts and signing in to them without entering a
password. To log in to an account, users are simply shown a prompt to to use the
screen lock on their device, such as touching the fingerprint sensor.</p>
<p>Google has been working with the FIDO Alliance for years, alongside Apple and
Microsoft, to bring passkeys to the world. In 2022 we rolled out platform
support for passkeys so that
<a href="https://android-developers.googleblog.com/2022/10/bringing-passkeys-to-android-and-chrome.html" rel="noopener">Android</a>
and
<a href="https://blog.chromium.org/2022/12/introducing-passkeys-in-chrome.html" rel="noopener">Chrome</a>
users can seamlessly sign in to apps and websites across all their devices. In
May 2023, we enabled signing in to <a href="https://blog.google/technology/safety-security/the-beginning-of-the-end-of-the-password/" rel="noopener">Google Accounts with
passkeys</a>,
bringing the security and convenience of passkeys to our users.</p>
<p>Google is in a unique position, as we are both working on the infrastructure for
passkeys and are one of the largest services using them. We are rolling out
passkeys for Google Accounts carefully and deliberately, so we can measure the
results and use that feedback to continue to improve the passkey infrastructure
and the Google account experience.</p>
<h2 id="transitioning-users-to-passkeys">Transitioning users to passkeys <a class="headline-link" href="https://web.dev/passkey-google-ux/#transitioning-users-to-passkeys">#</a></h2>
<p>Passwords have been the standard sign-in method since the advent of personalized
online experiences. How do we introduce the passwordless experience of passkeys?</p>
<p>Research indicates that when it comes to authentication, users value the
convenience the most. They want a smooth and fast transition to the real
experience, which only comes after signing in.</p>
<p>Still, the transition to passkeys requires changing muscle memory and users need
to be convinced it's worth making a switch.</p>
<p>The user experience of passkeys for <a href="http://google.com/" rel="noopener">Google.com</a> has been
strategically designed to emphasize two principles at every step of the
authentication process: ease of use and security.</p>
<h3 id="leading-with-convenience">Leading with convenience <a class="headline-link" href="https://web.dev/passkey-google-ux/#leading-with-convenience">#</a></h3>
<figure>
<img alt="For most users, this will be the first time they see passkeys" decoding="async" height="600" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format" srcset="https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>For most users, this will be the first time they see passkeys.</figcaption>
</figure>
<p>The first passkey screen users see is light and easy-to-digest.  The header is
focusing on the user benefit, saying "Simplify your sign in."</p>
<p>The body copy explains "With passkeys you can now use your fingerprint, face or
screen lock to verify it's really you".</p>
<p>The illustration is intended to ground the message in the value proposition made
by the page. The large blue primary action invites the user to proceed. "Not
now" is included as a secondary action to allow users to choose whether or not
to opt in at this time, leaving the user in control. And "Learn more" is offered
for the most curious users who would like to understand passkeys better before
proceeding.</p>
<p>We explored many iterations of the pages used to introduce users to passkeys
during sign in. This included trying content that emphasized the security,
technology, and other aspects of passkeys—yet convenience was really what
resonated most. Google's content strategy, illustration, and interaction design
demonstrates this core principle for our implementation of passkeys.</p>
<h3 id="associating-the-term-passkeys-with-familiar-security-experiences">Associating the term "passkeys" with familiar security experiences <a class="headline-link" href="https://web.dev/passkey-google-ux/#associating-the-term-passkeys-with-familiar-security-experiences">#</a></h3>
<p>Passkeys are a new term for most users so we are intentionally gently exposing
the users to the term to build familiarity. Guided by internal research, we are
strategically associating passkeys with security.</p>
<p>The word "passkey" is included throughout the sign-in flow in the less-prominent
body copy position.  It's consistently nestled amongst the familiar security
experiences that enable passkey use: fingerprint, face scan, or other device
screen lock.</p>
<p>Our research has shown that many users associate biometrics with security. While
passkeys don't require biometrics (a passkey can be used with a device PIN, for
example), we are leaning into the association of passkeys with biometrics to
boost user perception of passkeys' security benefits.</p>
<p>The additional content behind the "Learn more" has lots of valuable information
for users, including reassurance for users that their sensitive, biometric data
stays on their personal device and is never stored or shared when creating or
using passkeys. We took this approach because most users found the convenience
aspect of passkeys appealing, but only a few took into account the biometric
element during testing.</p>
<h3 id="introducing-passkeys-when-its-relevant-to-the-user">Introducing passkeys when it's relevant to the user <a class="headline-link" href="https://web.dev/passkey-google-ux/#introducing-passkeys-when-its-relevant-to-the-user">#</a></h3>
<p>Google's heuristics carefully determine who will see the introductory screen.
Some of the factors are whether a user has two-step verification enabled and
whether they access that account regularly from the same device.</p>
<p>Users who are most likely to succeed with passkeys are selected first, and over
time more users will be introduced (though, anyone can get started at
<a href="http://g.co/passkeys" rel="noopener">g.co/passkeys</a> today).</p>
<p>Select users are prompted to create a passkey after signing in with a username
and password. There are a few reasons we chose this point in the user journey:</p>
<ul>
<li>The user has just signed in, they're aware of their credentials and second
step.</li>
<li>We are confident that the user is on their device–they just signed in, so it's
unlikely they walked away or put their device down.</li>
<li>Statistically, signing in isn't always successful the first time–so a message
around making it easier next time has tangible value.</li>
</ul>
<h3 id="positioning-passkeys-as-an-alternative-to-passwords-and-not-yet-a-replacement">Positioning passkeys as an alternative to passwords and not yet a replacement <a class="headline-link" href="https://web.dev/passkey-google-ux/#positioning-passkeys-as-an-alternative-to-passwords-and-not-yet-a-replacement">#</a></h3>
<p>Initial user research shows that many users still want passwords as a backup
sign-in method. And not all users will have the <a href="https://support.google.com/accounts/answer/13548313?hl=en&amp;sjid=17510595681178318776-NA" rel="noopener">technology necessary to adopt
passkeys</a>.</p>
<p>So while the industry, Google included, is moving towards a "passwordless
future", Google is intentionally positioning passkeys as a simple and secure
<strong>alternative</strong> to passwords. Google's UI focuses on the benefits of passkeys
and avoids language that implies getting rid of passwords.</p>
<h2 id="the-creation-moment">The creation moment <a class="headline-link" href="https://web.dev/passkey-google-ux/#the-creation-moment">#</a></h2>
<p>When users choose to enroll, they'll see a browser-specific UI modal that
enables them to create a passkey.</p>
<p>The passkey itself is shown with the industry-aligned icon and the information
used to create it. This includes the display name (a friendly name for your
passkey, like your user's real name) and the username (a unique name on your
service–an email address can work great here). When it comes to working with the
passkeys icon, <a href="https://media.fidoalliance.org/wp-content/uploads/2023/05/FIDO-Alliance-UX-Guidelines-for-Passkey-Creation-and-Sign-ins.pdf" rel="noopener">the FIDO alliance recommends using the proven passkeys
icon</a>–and
encourages making it your own with customizations.</p>
<p>Passkeys icon is shown consistently across the user journey to create a
familiarity with what the user will see when using or managing the passkey. The
passkey icon is never presented without context or supporting material.</p>
<figure>
<img alt="When users create their passkey, they'll see this page" decoding="async" height="600" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format" srcset="https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>When users create their passkey, they'll see this page.</figcaption>
</figure>
<p>Above, we outlined how the user and the platform work together to create a
passkey. When the user clicks "Continue" they'll be presented with a unique UI
depending on the platform.</p>
<p>With that in mind, we learned through internal research that a confirmation
screen once the passkey is created can be very helpful in terms of comprehension
and closure at this step of the process.</p>
<figure>
<img alt="Once the passkey has been created, users will see this page" decoding="async" height="600" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format" srcset="https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>Once the passkey has been created, users will see this page.</figcaption>
</figure>
<p>The confirmation screen is a deliberate ‘pause' to bookend the journey of
introducing a user to passkeys and going through the process of creating one of
their own. As it is (likely) the first time a user has engaged with passkeys,
this page aims to provide clear closure to the journey. We chose a standalone
page after trying some other tools like smaller notifications, and even a
post-creation email–simply to provide a structured, stable end to end
experience.</p>
<p>Once the user clicks "Continue" here, they're brought to their destination.</p>
<figure>
<img alt="When users sign in again, they'll likely see this page" decoding="async" height="600" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format" srcset="https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>When users sign in again, they'll likely see this page.</figcaption>
</figure>
<h2 id="signing-in">Signing in <a class="headline-link" href="https://web.dev/passkey-google-ux/#signing-in">#</a></h2>
<p>Next time a user tries to sign in, they'll be greeted with this page. This uses
the same layout, illustration, and primary call to action to evoke the first
‘creation' experience outlined above. Once the user has made a choice to enroll
in passkeys, this page should feel familiar and they will recognize what steps
they need to take to sign in.</p>
<figure>
<img alt="The user will use this WebAuthn UI to sign in" decoding="async" height="600" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format" srcset="https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>The user will use this WebAuthn UI to sign in.</figcaption>
</figure>
<p>The same principle of familiarity applies here. Intentionally, this uses the
same iconography, illustration, layout and text. The text within the WebAuthn UI
is kept brief, broad, and re-usable–so everyone can use this both for
authentication and reauthentication.</p>
<h2 id="passkeys-management">Passkeys management <a class="headline-link" href="https://web.dev/passkey-google-ux/#passkeys-management">#</a></h2>
<p>Introducing a whole new page within the Google Account settings pages required
careful consideration to ensure a cohesive, intuitive, and consistent user
experience.</p>
<p>To achieve this, we analyzed the patterns regarding navigation, content,
hierarchy, structure, and established expectations that existed across the
Google Account.</p>
<figure>
<img alt="Passkeys management page in the Google Account" decoding="async" height="655" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format" srcset="https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>Passkeys management page in the Google Account.</figcaption>
</figure>
<h3 id="describe-passkeys-by-ecosystem">Describe passkeys by ecosystem <a class="headline-link" href="https://web.dev/passkey-google-ux/#describe-passkeys-by-ecosystem">#</a></h3>
<p>To create a high level category system that would be logical to understand we
settled on describing passkeys by
<a href="https://developers.google.com/identity/passkeys/supported-environments" rel="noopener">ecosystem</a>.
This way, a user could recognize where a passkey was created and where it is
used. Each identity provider (Google, Apple, and Microsoft) has a name for their
ecosystem, so we chose to use those (Google Password Manager, iCloud keychain,
and Windows Hello respectively).</p>
<p>To support this, we added additional metadata, such as when it was created, when
it was last used, and the specific OS that it was used on. In terms of user
management actions, the API only supports renaming, revoking, and creating.</p>
<p>Renaming allows users to assign personally meaningful names to passkeys, which
could help particular cohorts of users keep track and understand them more
easily.</p>
<p>Revoking a passkey doesn't delete it from the user's personal credential manager
(like Google Password Manager), but renders it unusable until it is set up
again. That's why we chose a cross, instead of a trash or delete icon, to
represent the action of revoking a passkey.</p>
<p>When describing the action of adding a passkey to their account, the phrase
"Create passkey" resonated better with users compared to "Add a passkey." This
is a subtle language choice to distinguish passkeys from tangible, hardware
security keys (though it should be noted that <a href="https://support.google.com/accounts/answer/13548313?hl=en&amp;sjid=17510595681178318776-NA" rel="noopener">passkeys can be stored on some
hardware security
keys</a>).</p>
<h3 id="providing-additional-content">Providing additional content <a class="headline-link" href="https://web.dev/passkey-google-ux/#providing-additional-content">#</a></h3>
<p>Internal research showed that using passkeys is a relatively seamless and
familiar experience. However as with any new technology, there are lingering
questions and concerns that will come up for some users.</p>
<p>How the technology works behind the screen lock, what makes it more secure, and
the most common "what if" scenarios Google came across in testing are addressed
in <a href="https://support.google.com/accounts/answer/13548313?hl=en&amp;sjid=17510595681178318776-NA" rel="noopener">Google's passkey Help Center
content</a>.
Having support content ready with launch of passkeys is critical for an easy
transition for users on any site.</p>
<h3 id="falling-back-from-passkeys">Falling back from passkeys <a class="headline-link" href="https://web.dev/passkey-google-ux/#falling-back-from-passkeys">#</a></h3>
<p>Reverting to the old system is as simple as clicking "try another way" when a
user is asked to authenticate with a passkey. Additionally, exiting the WebAuthn
UI will start users on a path to try their passkey again, or sign into their
Google Account in traditional ways.</p>
<h2 id="conclusion">Conclusion <a class="headline-link" href="https://web.dev/passkey-google-ux/#conclusion">#</a></h2>
<p>We are still in the early days of passkeys, so when designing the user
experience keep a few principles in mind:</p>
<ul>
<li>Introduce passkeys when it's relevant to the user.</li>
<li>Highlight the benefits of passkeys.</li>
<li>Use opportunities to build familiarity the concept of passkeys.</li>
<li>Position passkeys as an alternative to passwords and not a replacement.</li>
</ul>
<p>The choices we made for passkeys for Google Accounts were informed by best
practices and internal research and we'll continue to evolve the user experience
as we gain new insights from users in the real world.</p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[金字塔还是螃蟹？ 找到适合的测试策略]]></title>
            <link>https://web.dev/ta-strategies/</link>
            <guid>https://web.dev/ta-strategies/</guid>
            <content:encoded><![CDATA[<div>
    <h1>GPT总结</h1>
    <summary>本文介绍了如何将不同的测试类型结合起来形成合理的测试策略，并选择适合项目的策略。文章列举了几种常见的测试策略，并解释了它们的含义。首先介绍了测试目标的确定，即通过测试达到什么目的。然后介绍了测试策略的选择，包括经典的测试金字塔、测试钻石、测试蜂窝和测试奖杯等不同的策略。最后强调了测试的目标是为了服务用户，而不仅仅是为了达到100%的覆盖率。文章还提到了测试冰锥和测试螃蟹这两种更注重UI测试的策略。最后，文章指出选择适合项目的测试策略取决于应用程序的架构、需求和用户需求，重点是为了服务用户而设计测试。</summary>
    <div>
    <div>OriginTitle: Pyramid or Crab? Find a testing strategy that fits</div>

    </div></div><p>欢迎回来！ 这<a href="https://web.dev/ta-types">上一篇文章</a>为如何处理不同的测试类型及其包含的内容奠定了许多基础，并阐明了测试类型的定义。 记住这一点<a href="https://web.dev/ta-types/#testing-in-all-shapes-how-does-this-all-work-together">小模因图像</a>？ 您可能想知道您学到的所有这些测试类型如何协同工作。</p>
<img alt="A cupboard with two drawers you can open at the same time." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&amp;w=1600 1600w" width="800">
<p>接下来，您将确切地了解到这一点。 本文介绍如何将这些测试类型组合成合理的策略，并选择适合您的项目的测试类型。</p>
<p>您可以将这些策略与许多形状进行比较，以更好地理解它们的含义。 以下是具有各自规模和发展范围的战略列表。</p>
<div class="table-wrapper scrollbar">
  <table>
    <thead>
      <tr>
        <th>
          应用尺寸
        </th>
        <th>
          团队构成
        </th>
        <th>
          依赖手动测试
        </th>
        <th>
          测试策略
        </th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>小的</td>
        <td>仅限开发者</td>
        <td>高的</td>
        <td>测试冰锥<br>测试蟹</td>
      </tr>
      <tr>
        <td>小的</td>
        <td>开发人员和 QA 工程师</td>
        <td>高的</td>
        <td>测试冰锥<br>测试蟹</td>
      </tr>
      <tr>
        <td>小的</td>
        <td>仅限开发者</td>
        <td>低的</td>
        <td>测试金字塔</td>
      </tr>
      <tr>
        <td>大的</td>
        <td>仅限开发者</td>
        <td>高的</td>
        <td>测试奖杯<br>测试钻石</td>
      </tr>
      <tr>
        <td>大的</td>
        <td>开发人员和 QA 工程师</td>
        <td>高的</td>
        <td>测试奖杯<br>测试蟹</td>
      </tr>
      <tr>
        <td>大的</td>
        <td>仅限开发者</td>
        <td>低的</td>
        <td>测试奖杯<br>测试蜂窝</td>
      </tr>
    </tbody>
  </table>
</div>
<p>让我们仔细看看这些策略并了解它们名称背后的含义。</p>
<h2 id="determine-testing-goals-what-do-you-want-to-achieve-with-these-tests">确定测试目标：您希望通过这些测试实现什么目标？<a class="headline-link" href="https://web.dev/ta-strategies/#determine-testing-goals-what-do-you-want-to-achieve-with-these-tests">#</a></h2>
<p>在开始制定良好的策略之前，请先确定您的测试目标。 您什么时候认为您的应用程序已经经过充分测试？</p>
<p>在测试方面，实现高测试覆盖率通常被视为开发人员的最终目标。 但这总是最好的方法吗？ 在决定测试策略时，可能还需要考虑另一个关键因素——满足用户的需求。</p>
<p>作为开发人员，您还使用许多其他应用程序和设备。 在这方面，您是依赖所有这些系统“正常工作”的用户。 反过来，您依赖无数开发人员尽最大努力使他们的应用程序和设备正常运行。 为了扭转这种局面，作为一名开发者，你也要努力不辜负这种信任。 因此，您的首要目标应该始终是交付可工作的软件并为您的用户提供服务。 这扩展到您为确保应用程序质量而编写的测试。<a href="https://kentcdodds.com/about" rel="noopener">肯特·C·多兹</a>他的总结得很好<a href="https://kentcdodds.com/blog/static-vs-unit-vs-integration-vs-e2e-tests" rel="noopener">前端应用程序的静态、单元、集成、E2E 测试</a>邮政：</p>
<blockquote>
  <p>
    您的测试越接近软件的使用方式，它们就越能给您带来信心。
  </p>
  <cite>
    作者：肯特·C·多兹
  </cite>
</blockquote>
<p>肯特将其描述为对测试的信心增强。 通过选择合适的测试类型，您与用户的距离越近，您就越能相信您的测试会产生有效的结果。 换句话说，你爬到金字塔越高，你就越自信。 但是等等，金字塔是什么？</p>
<h2 id="determining-test-strategies-how-to-choose-a-testing-strategy">确定测试策略：如何选择测试策略<a class="headline-link" href="https://web.dev/ta-strategies/#determining-test-strategies-how-to-choose-a-testing-strategy">#</a></h2>
<p>第一步，确定需要检查要求的哪些部分以确保满足它们。 了解要使用哪些测试类型以及在何种详细程度下您可以最有信心地实现同时保持高效的成本结构。 许多开发人员通过类比来处理这个主题。 以下是最常见的，从众所周知的经典开始。</p>
<img alt="A lot of shapes like pyramid, diamonds, ice cone, honeycombs and a trophy; representing test strategies." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&amp;w=1600 1600w" width="800">
<h3 id="the-classic-the-test-pyramid">经典：测试金字塔<a class="headline-link" href="https://web.dev/ta-strategies/#the-classic-the-test-pyramid">#</a></h3>
<p>一旦您开始寻找测试策略，您可能会遇到第一个类比测试自动化金字塔。 Mike Cohn 在他的《Succeeding with Agile》一书中引入了这个概念。 后来，马丁·福勒 (Martin Fowler) 在他的著作中扩展了这个概念。<a href="https://martinfowler.com/articles/practical-test-pyramid.html" rel="noopener">实际测试金字塔</a>文章。 您可以将金字塔形象地表示如下：</p>
<img alt="The test pyramid." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&amp;w=1600 1600w" width="800">
<p>如此图所示，测试金字塔由三层组成：</p>
<ol>
<li>
<p><strong>单元</strong>。 您可以在金字塔的基础层找到这些测试，因为它们执行速度快且易于维护。 它们是孤立的并针对最小的测试单元。 例如，看一个典型的<a href="https://github.com/leichteckig/phpmagazin-jest-example/blob/main/product.test.js" rel="noopener">单元测试</a>对于一个非常小的产品。</p>
</li>
<li>
<p><strong>一体化</strong>。 这些测试位于金字塔的中间，因为它们具有可接受的执行速度，但比单元测试更接近用户。 集成测试的一个例子是<a href="https://github.com/cypress-io/cypress-realworld-app/blob/develop/cypress/tests/api/api-users.spec.ts" rel="noopener">API测试</a>。 还可以分类<a href="https://github.com/leichteckig/nuxt-leichteckig/blob/main/test/components/MediaGrid.spec.js" rel="noopener">组件测试</a>作为这种类型。</p>
</li>
<li>
<p><strong>端到端测试</strong>（也叫<strong>用户界面测试</strong>）。 这些测试模拟真实的用户及其交互。 此类测试需要更多时间来执行，因此成本更高。 他们位于金字塔的顶端。</p>
</li>
</ol>
<h3 id="confidence-versus-resources">信心与资源<a class="headline-link" href="https://web.dev/ta-strategies/#confidence-versus-resources">#</a></h3>
<p>正如之前简要介绍的，各层的顺序并非巧合。 它们显示了优先级和相应的成本。 这可以让您清楚地了解应该为每一层编写多少测试。 您已经在测试类型的定义中看到了这一点。</p>
<p>由于 E2E 测试最接近您的用户，因此它们让您最有信心您的应用程序按预期运行。 然而，它们需要完整的应用程序堆栈和模拟用户，因此，它们也可能是最昂贵的。 因此，信心与执行测试所需的资源直接竞争。</p>
<img alt="The test pyramid with arrows showing the direction of confidence and resources required for different testing types." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&amp;w=1600 1600w" width="800">
<p>金字塔试图通过让你更多地关注单元测试并严格优先考虑端到端测试覆盖的案例来解决这个问题。 例如，最重要的用户旅程或最容易出现缺陷的地方。 正如马丁·福勒所强调的，科恩金字塔中最本质的两点如下：</p>
<ol>
<li>编写不同粒度的测试。</li>
<li>你获得的级别越高，你应该进行的测试就越少。</li>
</ol>
<h2 id="pyramid-evolved-adaptations-of-the-test-pyramids">金字塔进化了！ 测试金字塔的调整<a class="headline-link" href="https://web.dev/ta-strategies/#pyramid-evolved-adaptations-of-the-test-pyramids">#</a></h2>
<p>多年来，讨论一直围绕着金字塔展开。 金字塔似乎过于简化了测试策略，遗漏了很多测试类型，并且不再适合所有现实世界的项目。 因此，它可能会产生误导。 金字塔变形了吗？ 
<a href="https://rauchg.com/about" rel="noopener">吉列尔莫·劳赫</a>对此有自己的看法：</p>
<blockquote>
  <p>
     编写测试。 不是很多。 主要是整合。 
  </p>
  <cite>
    作者：吉列尔莫·劳赫
  </cite>
</blockquote>
<p>这是关于这个主题最常被引用的引文之一，所以让我们来分解一下：</p>
<ul>
<li>“编写测试”。 不仅因为它建立了信任，还因为它节省了维护时间。</li>
<li>“不是很多”。 100% 的覆盖率并不总是好的，因为这样您的测试就不会被优先考虑，并且会有大量的维护工作。</li>
<li>“主要是整合”。 这里再次强调集成测试：它们具有最大的商业价值，为您提供每日的高置信度，同时保持合理的执行时间。</li>
</ul>
<p>这让您重新思考测试金字塔，并将您的注意力转移到集成测试上。 在过去的几年里，已经提出了许多适应措施，所以让我们看看最常见的适应措施。</p>
<h3 id="test-diamond">测试钻石<a class="headline-link" href="https://web.dev/ta-strategies/#test-diamond">#</a></h3>
<p>第一次调整消除了对单元测试的过分强调，如测试金字塔所示。 想象一下您的单元测试覆盖率已达到 100%。 但是，下次重构时，您将必须更新其中许多单元测试，并且您可能会想跳过它们。 所以它们会被侵蚀。</p>
<p>因此，再加上对集成测试的高度关注，可能会出现以下情况：</p>
<img alt="The test diamond." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&amp;w=1600 1600w" width="800">
<p>金字塔演变成钻石。 您可以看到前三层，但大小不同，并且单元层已被剪切：</p>
<ul>
<li><strong>单元</strong>。 按照之前定义的方式编写单元测试。 然而，因为它们往往会侵蚀、优先考虑并仅涵盖最关键的情况。</li>
<li><strong>一体化</strong>。 您知道的集成测试，测试单个单元的组合。</li>
<li><strong>端到端</strong>。 该层处理类似于测试金字塔的 UI 测试。 请注意只为最关键的测试用例编写 E2E 测试。</li>
</ul>
<h3 id="testing-honeycomb">测试蜂窝<a class="headline-link" href="https://web.dev/ta-strategies/#testing-honeycomb">#</a></h3>
<p>还有另一种改编，由<a href="https://engineering.atspotify.com/2018/01/testing-of-microservices/" rel="noopener">Spotify</a>，类似于测试钻石，但进一步专门用于基于微服务的软件系统。 测试蜂窝是为测试编写的粒度、范围和数量的另一个直观类比。<a href="https://notes.paulswail.com/public/Testing+microservices" rel="noopener">基于微服务的软件系统</a>。 由于其规模较小，微服务中最重要的复杂性并不在于服务本身，而是在于它与其他服务的交互方式。 因此，微服务的测试策略应该主要关注集成测试。</p>
<img alt="The testing honeycomb." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&amp;w=1600 1600w" width="800">
<p>这种形状让我们想起蜂窝，因此得名。 它有以下几层：</p>
<ul>
<li><strong>综合测试</strong>。 Spotify 的文章引用了<a href="https://blog.thecodewhisperer.com/permalink/integrated-tests-are-a-scam" rel="noopener">JB雷恩斯伯格</a>定义这一层：“根据另一个系统的正确性来通过或失败的测试。” 此类测试具有您需要考虑的外部依赖性，相反，您的系统可能是破坏其他系统的依赖性。 与其他类比中的 E2E 测试类似，请谨慎使用这些测试，仅适用于最重要的情况。</li>
<li><strong>集成测试</strong>。 与其他适配类似，您应该关注这一层。 它包含以更独立的方式验证服务正确性的测试，但仍与其他服务结合使用。 这意味着测试也将包括一些其他系统，并重点关注交互点，例如通过 API 测试。</li>
<li><strong>实施细节测试</strong>。 这些测试类似于单元测试，测试重点关注自然隔离的代码部分，因此具有自己的内部复杂性。</li>
</ul>
<p>如果您想了解有关此测试策略的更多信息，请参阅<a href="https://martinfowler.com/articles/2021-test-shapes.html" rel="noopener">将测试金字塔与蜂窝进行比较的帖子</a>马丁·福勒和<a href="https://engineering.atspotify.com/2018/01/testing-of-microservices/" rel="noopener">原创文章来自 Spotify</a>。</p>
<h3 id="testing-trophy">测试奖杯<a class="headline-link" href="https://web.dev/ta-strategies/#testing-trophy">#</a></h3>
<p>您已经可以看到对集成测试的重复关注。 然而，您在上一篇文章中遇到的另一种类型在理论上并不是测试，但仍然是您在测试策略中应该考虑的一个重要方面。 测试金字塔和您迄今为止看到的大多数改编中都缺少静态分析。 测试奖杯适应考虑了静态分析，同时保持对集成测试的关注。 测试奖杯源自 Guillermo Rauch 早期的引用，由 Kent C. Dodds 开发：</p>
<img alt="The testing trophy." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&amp;w=1600 1600w" width="800">
<p>测试奖杯是一个类比，以略有不同的方式描述测试的粒度。 它有四层：</p>
<ul>
<li><strong>静态分析</strong>。 它在这个类比中起着至关重要的作用，让您只需运行已经概述的调试步骤即可发现拼写错误、样式错误和其他错误。</li>
<li><strong>单元测试</strong>。 它们确保您的最小单元得到适当的测试，但测试奖杯不会像测试金字塔那样强调它们。</li>
<li><strong>一体化</strong>。 这是主要焦点，因为它以最佳方式平衡成本和更高的置信度，与其他适应一样。</li>
<li><strong>用户界面测试</strong>。 包括E2E和视觉测试，它们位于测试奖杯的顶端，类似于它们在测试金字塔中的角色。</li>
</ul>
<p>要了解有关测试奖杯的更多信息，请参阅<a href="https://kentcdodds.com/blog/static-vs-unit-vs-integration-vs-e2e-tests" rel="noopener">肯特·C·多兹 (Kent C. Dodds) 的博客文章</a>关于这个话题。</p>
<h2 id="some-more-ui-focused-approaches">一些更注重 UI 的方法<a class="headline-link" href="https://web.dev/ta-strategies/#some-more-ui-focused-approaches">#</a></h2>
<p>这一切都很好，但无论你如何称呼你的策略，“金字塔”、“蜂窝”或“钻石”，仍然缺少一些东西。 虽然测试自动化很有价值，但重要的是要记住手动测试仍然是必不可少的。 自动化测试应该减轻日常任务，并使质量保证工程师能够专注于关键领域。 自动化不应取代手动测试，而应对其进行补充。 有没有办法将手动测试与自动化集成以获得最佳结果？</p>
<h3 id="testing-ice-cone-and-testing-crab">测试冰锥和测试螃蟹<a class="headline-link" href="https://web.dev/ta-strategies/#testing-ice-cone-and-testing-crab">#</a></h3>
<p>测试金字塔确实有两种改编，它们更多地关注这些以 UI 为中心的测试方式。 两者都具有高置信度的优势，但由于测试执行速度较慢，成本自然更高。</p>
<p>第一个是测试冰锥，看起来像倒过来的金字塔。 没有手动测试步骤，也称为测试披萨。</p>
<img alt="The testing ice cone." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&amp;w=1600 1600w" width="800">
<p>Ice Cone 更注重手动或 UI 测试，而最少注重单元测试。 它通常在开发人员开始工作时只对测试策略有一些想法的项目中形成。 Ice 代码被认为是一种反模式，这是理所当然的。 就资源和手工工作而言，这是昂贵的。</p>
<p>测试螃蟹与测试冰锥类似，但更强调E2E和视觉测试：</p>
<img alt="The testing crab." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&amp;w=1600 1600w" width="800">
<p>该测试策略还包括一个方面：它验证您的应用程序功能和外观是否良好。 测试螃蟹凸显了以下的重要性<a href="https://docs.cypress.io/guides/tooling/visual-testing" rel="noopener">视觉测试</a>，定义在<a href="https://web.dev/ta-types/#visual-ui-testing">上一篇文章</a>。 集成测试分为组件测试和 API 测试，进一步进入后台，单元测试在这里扮演更次要的角色。 您可以在此处找到有关此测试策略的更多详细信息<a href="https://changelog.com/posts/the-testing-pyramid-should-look-more-like-a-crab" rel="noopener">关于测试螃蟹的文章</a>。</p>
<p>虽然成本较高，但这两种测试策略都有其用处：例如，在需要较少测试或需要覆盖的复杂性较低的较小项目中。 在这种情况下，专注于集成测试的全面测试策略可能会被过度设计。</p>
<p>尽管这两种测试策略成本较高，但它们有其用武之地，例如，在需要较少测试且不需要涵盖大量复杂性的较小项目中。 在这种情况下，专注于集成测试的全面测试策略可能会变得不必要的复杂。</p>
<h2 id="practical-advice-lets-strategize">实用建议：让我们制定策略！<a class="headline-link" href="https://web.dev/ta-strategies/#practical-advice-lets-strategize">#</a></h2>
<p>您现在已经了解了最常见的测试策略。 您从经典的测试金字塔开始，并了解了它的许多改编版本。 现在您需要评估它们是否适合您的产品，并决定哪一个最适合您的项目。 这个问题的答案应该从大家最喜欢的“<strong>这取决于</strong>“。但这并不会降低它的准确性。</p>
<img alt="It depends." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&amp;w=1600 1600w" width="800">
<p>从所描述的策略（甚至是遗漏的策略）中选择最合适的测试策略取决于您的应用程序。 它应该满足您的架构、您的需求，最后但并非最不重要的一点是，您的用户及其需求。 所有这些可能因应用程序而异。 这是完全正常的。 请记住，您最重要的目标是为用户服务，而不是教科书定义。</p>
<p>通常，现实世界的测试很难单独分离和定义。 甚至马丁·福勒本人也强调<a href="https://martinfowler.com/articles/2021-test-shapes.html" rel="noopener">不同定义的积极方面</a>，例如单元测试的情况。 作为<a href="https://justin.searls.co/about/" rel="noopener">贾斯汀·西尔斯</a>正确地陈述<a href="https://twitter.com/searls/status/1393385209089990659" rel="noopener">他的推文</a>:</p>
<blockquote>
  <p>
    […] 编写富有表现力的测试，建立清晰的边界，快速可靠地运行，并且仅因有用的原因而失败。
  </p>
  <cite>
    通过贾斯汀·塞尔斯
  </cite>
</blockquote>
<p>专注于报告用户可能遇到的实际错误的测试，不要分散您的目标。 测试的设计应该使用户受益，而不仅仅是提供 100% 的覆盖率或争论要编写哪种测试类型的百分比。</p>
<p>专注于报告用户可能遇到的现实生活中的错误的测试，并且不要分散您的目标。 测试的设计应该让用户受益，而不仅仅是提供 100% 的覆盖率或引发关于您应该编写多少百分比的特定测试类型的争论。</p>
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow">这篇博文由 Ramona 撰写，并接受了以下人士的意见和评论<a href="https://web.dev/authors/jecelynyeen/">叶洁琳</a>（<a href="https://twitter.com/jecfish">推特</a>),<a href="https://www.linkedin.com/in/michael-hablich-2128646/">迈克尔·哈布里奇</a>（<a href="https://twitter.com/MHablich">推特</a>）， 和<a href="https://www.linkedin.com/in/sofia-yemelianova/">索菲亚·艾米利亚诺娃</a>。</div></aside>
<hr><p>Welcome back! The <a href="https://web.dev/ta-types">last article</a> laid down lots of groundwork about how to approach the different testing types and what they contain, and clarified the testing type definitions. Remember this <a href="https://web.dev/ta-types/#testing-in-all-shapes-how-does-this-all-work-together">little meme image</a>? You might have wondered how all those testing types you learned about could work together.</p>
<img alt="A cupboard with two drawers you can open at the same time." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&amp;w=1600 1600w" width="800">
<p>Next, you will learn exactly that. This article gives an introduction on how to combine these testing types into reasonable strategies and choose one that matches your project.</p>
<p>You can compare the strategies to a number of shapes to better grasp their meaning. Here's a list of strategies with respective sizes and development scopes.</p>
<div class="table-wrapper scrollbar">
  <table>
    <thead>
      <tr>
        <th>
          Application size
        </th>
        <th>
          Team composition
        </th>
        <th>
          Reliance on manual testing
        </th>
        <th>
          Testing strategy
        </th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Small</td>
        <td>Developers only</td>
        <td>High</td>
        <td>Testing Ice Cone<br>Testing Crab</td>
      </tr>
      <tr>
        <td>Small</td>
        <td>Developers &amp; QA engineers</td>
        <td>High</td>
        <td>Testing Ice Cone<br>Testing Crab</td>
      </tr>
      <tr>
        <td>Small</td>
        <td>Developers only</td>
        <td>Low</td>
        <td>Test Pyramid</td>
      </tr>
      <tr>
        <td>Large</td>
        <td>Developers only</td>
        <td>High</td>
        <td>Testing Trophy<br>Testing Diamond</td>
      </tr>
      <tr>
        <td>Large</td>
        <td>Developers &amp; QA engineers</td>
        <td>High</td>
        <td>Testing Trophy<br>Testing Crab</td>
      </tr>
      <tr>
        <td>Large</td>
        <td>Developers only</td>
        <td>Low</td>
        <td>Testing Trophy<br>Testing Honeycomb</td>
      </tr>
    </tbody>
  </table>
</div>
<p>Let's take a closer look at the strategies and learn the meaning behind their names.</p>
<h2 id="determine-testing-goals-what-do-you-want-to-achieve-with-these-tests">Determine testing goals: What do you want to achieve with these tests? <a class="headline-link" href="https://web.dev/ta-strategies/#determine-testing-goals-what-do-you-want-to-achieve-with-these-tests">#</a></h2>
<p>Before you can start building a good strategy, figure out your testing goal. When do you consider that your application has been sufficiently tested?</p>
<p>Achieving high test coverage is often viewed as the ultimate goal for developers when it comes to testing. But is it always the best approach? There might be another critical factor to consider when deciding on a testing strategy—serving your users' needs.</p>
<p>As a developer, you also use many other applications and devices. In this respect, you are the user who relies on all these systems to “just work”. In turn, you rely on countless developers to do their best to make their applications and devices work. To turn this back around, as a developer, you also strive to live up to this trust. So your first goal should always be to ship working software and serve your users. This extends to the tests you write to ensure application quality. <a href="https://kentcdodds.com/about" rel="noopener">Kent C. Dodds</a> sums it up very well in his <a href="https://kentcdodds.com/blog/static-vs-unit-vs-integration-vs-e2e-tests" rel="noopener">Static vs Unit vs Integration vs E2E Testing for Frontend Apps</a> post:</p>
<blockquote>
  <p>
    The more your tests resemble the way your software is used, the more confidence they can give you.
  </p>
  <cite>
    by Kent C. Dodds
  </cite>
</blockquote>
<p>Kent describes it as gaining confidence in tests. The closer you get to the users by choosing a testing type that fits, the more you can trust your tests to have valid results. In other words, the higher up you climb the pyramid, the more confident you get. But wait, what is the pyramid?</p>
<h2 id="determining-test-strategies-how-to-choose-a-testing-strategy">Determining test strategies: How to choose a testing strategy <a class="headline-link" href="https://web.dev/ta-strategies/#determining-test-strategies-how-to-choose-a-testing-strategy">#</a></h2>
<p>As a first step, determine which parts of the requirements you need to check to make sure they are met. Find out what test types to use and at what level of detail you can achieve the most confidence while maintaining an efficient cost structure. Many developers approach this topic by using analogies. Here are the most common ones, starting with the well-known classic.</p>
<img alt="A lot of shapes like pyramid, diamonds, ice cone, honeycombs and a trophy; representing test strategies." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&amp;w=1600 1600w" width="800">
<h3 id="the-classic-the-test-pyramid">The classic: The test pyramid <a class="headline-link" href="https://web.dev/ta-strategies/#the-classic-the-test-pyramid">#</a></h3>
<p>As soon as you start looking for test strategies, you will probably come across the test automation pyramid as the first analogy. Mike Cohn introduced this concept in his book "Succeeding with Agile". Later, Martin Fowler expanded upon the concept in his <a href="https://martinfowler.com/articles/practical-test-pyramid.html" rel="noopener">Practical Test Pyramid</a> article. You can represent the pyramid visually as the following:</p>
<img alt="The test pyramid." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&amp;w=1600 1600w" width="800">
<p>As shown in this drawing, the test pyramid consists of three layers:</p>
<ol>
<li>
<p><strong>Unit</strong>. You find these tests at the base layer of the pyramid because they are fast to execute and simple to maintain. They are isolated and target the most minor test units. For example, see a typical <a href="https://github.com/leichteckig/phpmagazin-jest-example/blob/main/product.test.js" rel="noopener">unit test</a> for a very small product.</p>
</li>
<li>
<p><strong>Integration</strong>. These tests are in the middle of the pyramid, because they have an acceptable execution speed but bring you closer to the user than the unit tests can. An example of an integration test is an <a href="https://github.com/cypress-io/cypress-realworld-app/blob/develop/cypress/tests/api/api-users.spec.ts" rel="noopener">API test</a>. You can also classify <a href="https://github.com/leichteckig/nuxt-leichteckig/blob/main/test/components/MediaGrid.spec.js" rel="noopener">component tests</a> as this type.</p>
</li>
<li>
<p><strong>E2E tests</strong> (also called <strong>UI tests</strong>). These tests simulate a genuine user and their interaction. Such tests need more time to execute and thus are more expensive. They are at at the top of the pyramid.</p>
</li>
</ol>
<h3 id="confidence-versus-resources">Confidence versus resources <a class="headline-link" href="https://web.dev/ta-strategies/#confidence-versus-resources">#</a></h3>
<p>As briefly covered before, the order of the layers is no coincidence. They show the priorities and the corresponding costs. This gives you a clear picture of how many tests you should write for each layer. You have already seen this in the definition of the testing types.</p>
<p>Because E2E tests are closest to your users, they give you the most confidence that you application is working as intended. However, they require a complete application stack and a simulated user, therefore, they are also potentially the most expensive. So the confidence is in direct competition with the resources you need to execute the tests.</p>
<img alt="The test pyramid with arrows showing the direction of confidence and resources required for different testing types." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&amp;w=1600 1600w" width="800">
<p>The pyramid tries to solve this problem by making you focus more on unit tests and strictly prioritize the cases covered by E2E tests. For example, your most crucial user journeys or the places most vulnerable to defects. As Martin Fowler emphasizes, the two most essential points in Cohn's pyramid are as follows:</p>
<ol>
<li>Write tests with different granularity.</li>
<li>The more high level you get, the fewer tests you should have.</li>
</ol>
<h2 id="pyramid-evolved-adaptations-of-the-test-pyramids">Pyramid evolved! Adaptations of the test pyramids <a class="headline-link" href="https://web.dev/ta-strategies/#pyramid-evolved-adaptations-of-the-test-pyramids">#</a></h2>
<p>For several years, discussions have revolved around the pyramid. The pyramid seems to oversimplify testing strategies, leaves out a lot of testing types, and no longer fits all the real-world projects. Therefore, it may be misleading. Has the pyramid fallen out of shape?
<a href="https://rauchg.com/about" rel="noopener">Guillermo Rauch</a> has an opinion about it:</p>
<blockquote>
  <p>
    Write tests. Not too many. Mostly integration.
  </p>
  <cite>
    by Guillermo Rauch
  </cite>
</blockquote>
<p>It's one of the most commonly cited quotes on this subject, so let's break it down:</p>
<ul>
<li>"Write tests". Not only because it builds trust, but also because it saves time in maintenance.</li>
<li>"Not too many". 100% coverage is not always good because then your testing isn't prioritized and there will be a lot of maintenance.</li>
<li>"Mostly integration". Here again the emphasis is on integration tests: they have the most business value by giving you a daily high confidence level while maintaining a reasonable execution time.</li>
</ul>
<p>This makes you think again about the testing pyramid and shift your focus to integration testing. Over the last few years, many adaptations have been proposed, so let's look at the most common ones.</p>
<h3 id="test-diamond">Test diamond <a class="headline-link" href="https://web.dev/ta-strategies/#test-diamond">#</a></h3>
<p>The first adaptation removes the overemphasis on unit testing, as seen in the test pyramid. Imagine that you have reached 100% coverage on unit tests. However, the next time you refactor, you will have to update many of these unit tests and you might be tempted to skip them. So they erode.</p>
<p>As a result, and together with the higher focus on integration testing, the following shape may arise:</p>
<img alt="The test diamond." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&amp;w=1600 1600w" width="800">
<p>A pyramid evolves into a diamond. You can see the previous three layers, but with a different size, and the unit layer has been cut:</p>
<ul>
<li><strong>Unit</strong>. Write unit tests the way you defined them before. However, because they tend to erode, prioritize and cover only the most critical cases.</li>
<li><strong>Integration</strong>. The integration tests you know, testing the combination of single units.</li>
<li><strong>E2E</strong>. This layer handles the UI tests similar to the test pyramid. Take care to only write E2E tests for the most critical test cases.</li>
</ul>
<h3 id="testing-honeycomb">Testing honeycomb <a class="headline-link" href="https://web.dev/ta-strategies/#testing-honeycomb">#</a></h3>
<p>There is another adaptation, introduced by <a href="https://engineering.atspotify.com/2018/01/testing-of-microservices/" rel="noopener">Spotify</a>, that is similar to the test diamond but further specialized for microservices-based software systems. The testing honeycomb is another visual analogy for the granularity, scope, and number of tests to write for a <a href="https://notes.paulswail.com/public/Testing+microservices" rel="noopener">microservices-based software system</a>. Due to their small size, the most considerable complexity in a microservice is not within the service itself, but in how it interacts with others. So a testing strategy for a microservice should primarily focus on integration tests.</p>
<img alt="The testing honeycomb." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&amp;w=1600 1600w" width="800">
<p>This shape reminds us of a honeycomb, thus the name. It has the following layers:</p>
<ul>
<li><strong>Integrated tests</strong>. The article by Spotify uses a quote from <a href="https://blog.thecodewhisperer.com/permalink/integrated-tests-are-a-scam" rel="noopener">J. B. Rainsberger</a> to define this layer: “A test that will pass or fail based on the correctness of another system.” Such tests have external dependencies that you need to consider, and on the contrary, your system might be a dependency that breaks other systems. Similar to E2E tests in other analogies, use these tests carefully, only for the most essential cases.</li>
<li><strong>Integration tests</strong>. Similar to other adaptations, you should focus on this layer. It contains tests that verify the correctness of your service in a more isolated fashion, but still in combination with other services. That means the tests will include some other systems too and focus on the interaction points, for example, via API tests.</li>
<li><strong>Tests on implementation details</strong>. These tests resemble unit tests—tests that focus on parts of the code that are naturally isolated and thus have their own internal complexity.</li>
</ul>
<p>If you want to find out more about this testing strategy, see the <a href="https://martinfowler.com/articles/2021-test-shapes.html" rel="noopener">post that compares the test pyramid to the honeycomb</a> by Martin Fowler and the <a href="https://engineering.atspotify.com/2018/01/testing-of-microservices/" rel="noopener">original article from Spotify</a>.</p>
<h3 id="testing-trophy">Testing trophy <a class="headline-link" href="https://web.dev/ta-strategies/#testing-trophy">#</a></h3>
<p>You can already see a repeating focus on integration tests. However, another type you came across in the previous article is not testing in theory but is still an important aspect you should consider in a testing strategy. Static analysis is missing from the test pyramid and in most of the adaptations you have seen so far. There's the testing trophy adaptation that takes static analysis into account while maintaining the focus on integration tests. The testing trophy originated from the earlier quote by Guillermo Rauch and was developed by Kent C. Dodds:</p>
<img alt="The testing trophy." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&amp;w=1600 1600w" width="800">
<p>The testing trophy is an analogy depicting the granularity of tests in a slightly different way. It has four layers:</p>
<ul>
<li><strong>Static analysis</strong>. It plays a vital role in this analogy and lets you catch typos, style mistakes, and other bugs by merely running the debugging steps already outlined.</li>
<li><strong>Unit tests</strong>. They ensure that your smallest unit is appropriately tested, but the testing trophy won't emphasize them to the same extent as the test pyramid.</li>
<li><strong>Integration</strong>. This is the main focus as it balances the cost and the higher confidence in the best way, as with other adaptations.</li>
<li><strong>UI tests</strong>. Including E2E and visual tests, they are at the top of the testing trophy, similar to their role in the test pyramid.</li>
</ul>
<p>To read more about the testing trophy, see the <a href="https://kentcdodds.com/blog/static-vs-unit-vs-integration-vs-e2e-tests" rel="noopener">blog post by Kent C. Dodds</a> on this subject.</p>
<h2 id="some-more-ui-focused-approaches">Some more UI-focused approaches <a class="headline-link" href="https://web.dev/ta-strategies/#some-more-ui-focused-approaches">#</a></h2>
<p>That's all well and good but no matter how you call your strategy, a “pyramid”, “honeycomb,” or “diamond”, there's still something missing. While test automation is valuable, it's important to remember that manual testing is still essential. Automated testing should alleviate routine tasks and free the quality assurance engineers to focus on crucial areas. Instead of replacing manual testing, automation should complement it. Is there a way to integrate manual testing with automation for optimal results?</p>
<h3 id="testing-ice-cone-and-testing-crab">Testing ice cone and testing crab <a class="headline-link" href="https://web.dev/ta-strategies/#testing-ice-cone-and-testing-crab">#</a></h3>
<p>There are indeed two adaptations of the testing pyramid that focus more on these UI-focused ways of testing. Both have the advantage of high confidence, but are naturally more costly due to slower test execution.</p>
<p>The first one, the test ice cone, looks like the pyramid in reverse. Without the manual testing step, it is also known as the testing pizza.</p>
<img alt="The testing ice cone." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&amp;w=1600 1600w" width="800">
<p>The ice cone has bigger focus on manual or UI testing and the least focus on unit testing. It often takes shape in projects where developers started work with only a few thoughts on the testing strategy. The ice code is considered an anti-pattern and rightfully so. It is costly in terms of resources and manual work.</p>
<p>The test crab is similar to the test ice cone, but with more emphasis on E2E and visual testing:</p>
<img alt="The testing crab." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&amp;w=1600 1600w" width="800">
<p>This testing strategy includes one more aspect: it verifies that your application functions and looks good. The testing crab highlights the importance of <a href="https://docs.cypress.io/guides/tooling/visual-testing" rel="noopener">visual testing</a>, defined in the <a href="https://web.dev/ta-types/#visual-ui-testing">previous article</a>. Integration testing, divided into component and API testing, moves further into the background, and unit testing plays an even more secondary role here. You can find further details on this testing strategy in this <a href="https://changelog.com/posts/the-testing-pyramid-should-look-more-like-a-crab" rel="noopener">article on the testing crab</a>.</p>
<p>While being more costly, these two testing strategies have their place: for example, in smaller projects where fewer tests are needed, or less complexity needs to be covered. In this case, a full-blown testing strategy focusing on integration testing might be over-engineered.</p>
<p>Although these two testing strategies are more costly, they have their place, for example, in smaller projects that require fewer tests and don't need to cover a lot of complexity. In this case, a full scale testing strategy focused on integration testing may be unnecessarily complex.</p>
<h2 id="practical-advice-lets-strategize">Practical advice: Let's strategize! <a class="headline-link" href="https://web.dev/ta-strategies/#practical-advice-lets-strategize">#</a></h2>
<p>You have now learned about the most common testing strategies. You started with the classic—the test pyramid—and got to know its many adaptations. Now you need to evaluate them for your product and decide which is be the best for your project. The answer to this question should start with everyone's favorite "<strong>It depends</strong>". That doesn't make it any less accurate though.</p>
<img alt="It depends." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&amp;w=1600 1600w" width="800">
<p>The choice of the most appropriate testing strategy from those described—and even the ones left out—depends on your application. It should fir your architecture, your requirements, and last but not least, your users and their requirements. All this might differ from application to application. That's completely normal. Remember that your most important goal is to serve your users, not a textbook definition.</p>
<p>More often than not, real-world tests are difficult to separate and define individually. Even Martin Fowler himself emphasizes the <a href="https://martinfowler.com/articles/2021-test-shapes.html" rel="noopener">positive aspect of differing definitions</a>, such as in the case of unit tests. As <a href="https://justin.searls.co/about/" rel="noopener">Justin Searls</a> states correctly in <a href="https://twitter.com/searls/status/1393385209089990659" rel="noopener">his tweet</a>:</p>
<blockquote>
  <p>
    […] write expressive tests that establish clear boundaries, run quickly &amp; reliably, and only fail for useful reasons.
  </p>
  <cite>
    by Justin Searls
  </cite>
</blockquote>
<p>Focus on the tests that report actual errors that the users might encounter, and don't get distracted from your goal. Tests should be designed to benefit the user, not just provide 100% coverage or to debate which percentage of which testing type to write.</p>
<p>Focus on tests that report real-life errors that your users might encounter and don't get distracted from your goal. Tests should be designed to benefit the user, not just provide 100% coverage or spark debates on what percentage of a particular testing type you should write.</p>
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> This blog post was written by Ramona, with input and review from <a href="https://web.dev/authors/jecelynyeen/">Jecelyn Yeen</a> (<a href="https://twitter.com/jecfish">Twitter</a>), <a href="https://www.linkedin.com/in/michael-hablich-2128646/">Michael Hablich</a> (<a href="https://twitter.com/MHablich">Twitter</a>), and <a href="https://www.linkedin.com/in/sofia-yemelianova/">Sofia Emelianova</a>. </div></aside>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[后退/前进缓存如何帮助 Yahoo! 日本新闻 移动收入增加 9%]]></title>
            <link>https://web.dev/yahoo-japan-news-bfcache/</link>
            <guid>https://web.dev/yahoo-japan-news-bfcache/</guid>
            <content:encoded><![CDATA[<div>
    <h1>GPT总结</h1>
    <summary>本文介绍了浏览器优化技术bfcache（back/forward cache）的作用和优势。bfcache可以实现即时的后退和前进导航，显著提高用户的浏览体验，特别适用于需要频繁后退和前进导航的网站。Yahoo! JAPAN News通过优化bfcache的使用，取得了显著的用户体验和商业效果提升。他们进行了A/B测试，结果显示使用bfcache的页面广告收入增加了9%。文章还介绍了如何解决bfcache的潜在问题，包括移除unload事件处理程序和更改Cache-control头部的no-store指令。通过这些优化措施，Yahoo! JAPAN News取得了显著的成果，包括页面浏览量和广告收入的增加。最后，文章总结了bfcache的优势，包括提升用户体验、增加页面浏览量和广告收入。</summary>
    <div>
    <div>OriginTitle: How Back/forward Cache Helped Yahoo! JAPAN News Increase Revenue by 9% on Mobile</div>

    </div></div><blockquote>
<p><a href="https://web.dev/bfcache/">后退/前进缓存</a>（或 bfcache）是一种浏览器优化，可实现即时后退和前进导航。 它显着改善了用户的浏览体验，尤其是涉及多次来回导航的网站。</p>
<p><cite>web.dev 关于 bfcache 的文章</cite></p>
</blockquote>
<p>雅虎！ 日本最受欢迎的新闻平台之一 JAPAN News 齐心协力提高 bfcache 命中率，并因此实现了显着的用户体验和业务改进。 具体来说，他们进行的 A/B 测试结果表明，使用 bfcache 的页面具有<strong>广告收入增加 9%</strong>。</p>
<p>本案例研究将解释 Yahoo! JAPAN News 消除了 bfcache 的阻碍，以及 bfcache 如何大幅改善用户体验。</p>
<h2 id="removing-blockers-for-bfcache">删除 bfcache 的拦截器<a class="headline-link" href="https://web.dev/yahoo-japan-news-bfcache/#removing-blockers-for-bfcache">#</a></h2>
<p>bfcache 自 Chrome 86 起可用，并且也可在所有现代浏览器上使用。 然而，充分利用 bfcache 需要删除网站上潜在的拦截器。 雅虎的一些主要拦截器！ 日本新闻面临的是：</p>
<ol>
<li>用于<code>卸下</code>处理程序</li>
<li>使用<a href="https://developer.mozilla.org/docs/Web/HTTP/Headers/Cache-Control#no-store" rel="noopener"><code>无商店</code>指示</a>在<code>缓存控制</code>标头</li>
</ol>
<p>您可以访问以下地址来检查您的网站有哪些主要拦截器<strong>Chrome 开发工具 &amp;gt; 应用程序 &amp;gt; 后退/前进缓存</strong>（<a href="https://web.dev/bfcache/#test-to-ensure-your-pages-are-cacheable">更多细节</a>），或者通过使用<a href="https://developer.chrome.com/docs/web-platform/bfcache-notrestoredreasons/" rel="noopener"><code>未恢复原因</code>应用程序编程接口</a>根据现场的实际使用情况，更全面地了解拦截器。</p>
<p>雅虎是这样的！ 日本新闻已经删除了他们的拦截器：</p>
<ul>
<li><strong>卸载处理程序：</strong>使用<code>页面隐藏</code>事件而不是<code>卸下</code>事件，作为<code>卸下</code>事件是<a href="https://web.dev/bfcache/#never-use-the-unload-event">非常不可靠</a>。 还，<code>权限策略：卸载</code>曾是<a href="https://chromestatus.com/feature/5579556305502208" rel="noopener">在 Chrome 115 中推出</a>以便网站能够可靠地删除<code>卸下</code>特定来源的处理程序。 Chrome 还计划<a href="https://github.com/fergald/docs/blob/master/explainers/permissions-policy-deprecate-unload.md#logistics-of-deprecation" rel="noopener">逐渐弃用<code>卸下</code>处理程序</a>。</li>
<li><strong><code>缓存控制：无存储</code></strong>（或简称CCNS）：改变<code>缓存控制</code>标题来自<strong><code>无商店</code></strong>到<strong><code>无缓存</code></strong>可以启用bfcache。 Chrome也计划启动<a href="https://chromestatus.com/feature/6705326844805120" rel="noopener">即使使用 a 也可以缓存 bfcache<code>无商店</code>某些情况下的标题</a>。</li>
</ul>
<p>CCNS 适用于在任何情况下都不应缓存的页面。 但需要注意的是，任何使用 CCNS 的页面都无法从任何缓存技术中受益，包括 CDN 边缘服务器和本地缓存。</p>
<p>如果您有 CCNS 标头，这是讨论正确内容的绝佳机会<code>缓存控制</code>策略适用于您的网站。 以下是两者之间的主要区别<code>无商店</code>和<code>无缓存</code>。</p>
<div class="table-wrapper scrollbar">
  <table>
    <thead>
      <tr>
        <th><code>缓存控制：<strong>无商店</strong></code></th>
        <th><code>缓存控制：<strong>无缓存</strong></code></th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>
          <ul>
            <li>不允许将响应存储在缓存中。</li>
            <li>因此，每个请求都会完整获取响应。</li>
            <li>这应该用于私人回复。</li>
          </ul>
        </td>
        <td>
          <ul>
            <li>只要在每次使用之前通过服务器重新验证响应，就可以将其存储在缓存中。</li>
            <li>这应该是您每次都希望重新验证的公共响应（例如，新闻网站的主页 - 尽管即使如此，非常短的缓存时间也可以提高性能并减轻主服务器的工作负担）。</li>
          </ul>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<p>如果您有兴趣了解更多信息<code>缓存控制</code>选项，<a href="https://web.dev/http-cache/?hl=en#flowchart">这个流程图</a>是一个很大的帮助。</p>
<h2 id="impact-of-bfcache-in-numbers">bfcache 对数字的影响<a class="headline-link" href="https://web.dev/yahoo-japan-news-bfcache/#impact-of-bfcache-in-numbers">#</a></h2>
<p>为了衡量 bfcache 的影响，Yahoo! JAPAN News 进行了为期 2 周的 A/B 测试，其中他们向一组提供了包含 bfcache 修复的页面版本，并向另一组提供了不符合 bfcache 条件的页面版本。 他们选择了流量较大的 URL 路径，以便测试能够取得有意义的结果。 两个版本之间没有其他视觉或功能差异。</p>
<p>这是一个视频，比较了使用 bfcache 和不使用 bfcache 的网站。 您可以看到启用 bfcache 的网站在后退或前进导航期间加载速度明显加快。</p>
<style>
   .bfcache-video 视频 { 
     高度：自动； 
   } 
</style>
<figure class="bfcache-video">
  <video autoplay="" controls="" height="800" loop="" muted="" width="800" style="--vid-width: 800; --vid-height: 800">      <source src="https://storage.googleapis.com/web-dev-uploads/video/jL3OLOhcWUQDnR4XjewLBx4e3PC3/2qqiTs9XuedWvtjfKuMu.mp4" type="video/mp4">    </video>
</figure>
<p>真正有希望的是启用 b​​fcache 的组有一个<strong>页面浏览量和广告收入显着增加</strong>，尤其是在移动设备上。</p>
<p>以下是雅虎观察到的影响的详细信息！ JAPAN News 进行了 bfcache A/B 测试。 （更多信息可以在<a href="https://techblog.yahoo.co.jp/entry/2023072430429932/" rel="noopener">他们的案例研究文章</a>）。</p>
<div class="table-wrapper scrollbar">
  <table>
    <thead>
      </thead><tbody><tr><td>
        <strong>指标</strong>
      </td>
      <td>
        <strong>提升百分比（移动设备）</strong>
      </td>
      <td>
        <strong>提升百分比（桌面）</strong>
      </td>
    
    </tr></tbody><tbody>
      <tr>
        <td>bfcache命中率</td>
        <td>
          <strong>+54.03点</strong>(0.04% → 54.07%)
        </td>
        <td>+47.28 点 (0.02% → 47.30%)</td>
      </tr>
      <tr>
        <td>页面浏览量</td>
        <td>
          <strong>+2.26%</strong>
        </td>
        <td>+0.65%</td>
      </tr>
      <tr>
        <td>广告收入</td>
        <td>
          <strong>+9.0%</strong>
        </td>
        <td>+0.6%</td>
      </tr>
    </tbody>
  </table>
</div>
<p>当页面之间的后退/前进导航通过 bfcache 瞬间实现时，用户往往会在页面上停留更长时间，从而增加广告浏览量，从而增加广告收入。</p>
<h2 id="bfcache-enhances-seamless-user-experience-on-the-website">bfcache 增强网站上的无缝用户体验<a class="headline-link" href="https://web.dev/yahoo-japan-news-bfcache/#bfcache-enhances-seamless-user-experience-on-the-website">#</a></h2>
<p>当页面立即加载时，<strong>导航感觉更加无缝。</strong></p>
<p>在雅虎！ JAPAN News，主要用户旅程之一如下：</p>
<ol>
<li>前往文章列表</li>
<li>点击一篇文章即可阅读</li>
<li>返回文章列表</li>
<li>点击另一篇文章阅读</li>
</ol>
<p>在bfcache之前，当用户读完一篇文章（步骤2）时，他们必须等待文章列表页面再次加载。 对于只想返回文章列表以选择另一篇文章进行阅读的用户来说，这可能是一个摩擦因素。</p>
<p>向后导航期间的另一个摩擦源是滚动位置。 实际上，当发生向后导航时，浏览器会尝试恢复滚动位置。 然而，由于动态添加的广告或其他布局变化，滚动位置经常会被错误地恢复，这可能会导致用户迷失方向，甚至离开页面。 当向后导航由 bfcache 提供支持时，这永远不是问题：滚动位置会立即正确恢复。</p>
<figure>
  <img alt="Two filmstrips of a backward navigation from an article to the article listing page. The top is a filmstrip of the process being handled with bfcache which takes 0.3 seconds, whereas the bottom is of the same process being handled without bfcache, which takes 3.3 seconds." decoding="async" height="343" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&amp;w=1600 1600w" width="800">
</figure>
<p>现在，有了 bfcache，用户旅程中的摩擦就消失了——用户可以立即导航回文章列表页面并选择另一篇文章进行阅读，而无需等待文章列表页面加载。</p>
<p>当用户从一篇文章直接浏览到另一篇文章并返回时，也会发生同样的情况：</p>
<figure>
  <img alt="An animated image showing the backward navigation flow from an article to the article listing page with and without bfcache. With bfcache, the backward navigation is not only faster, but the scroll position is accurately maintained. Without bfcache, these guarantees cannot be made." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&amp;w=1600 1600w" width="800">
</figure>
<p>简而言之，使用 bfcache for Yahoo! 的好处 日本新闻包括：</p>
<ul>
<li>提高综合浏览量：当使用 bfcache 缓存页面时，用户更有可能在网站内导航。</li>
<li>收入增加：由于每个会话的浏览量增加，广告展示次数增加，与没有 bfcache 的测试组相比，移动设备上的收入增加了 9%。</li>
</ul>
<h2 id="conclusion">结论<a class="headline-link" href="https://web.dev/yahoo-japan-news-bfcache/#conclusion">#</a></h2>
<p>简而言之，bfcache 不仅可以让您的网站变得即时，还可以减少整体用户体验的摩擦并提高网站的参与度。</p>
<p>Chrome 团队一直在研究 bfcache 拦截器，尤其是本文中列出的两个原因，因为它们是不使用 bfcache 的常见原因。 将来，这些可能不会阻止 bfcache 使用，但无需等到那时。 通过查看 bfcache 阻止程序并避免这些常见和其他不太常见的模式，您可以从 bfcache 中受益。</p>
<hr><blockquote>
<p><a href="https://web.dev/bfcache/">Back/forward cache</a> (or bfcache) is a browser optimization that enables instant back and forward navigation. It significantly improves the browsing experience for users, especially for websites that involve many back and forth navigations.</p>
<p><cite>web.dev article on bfcache </cite></p>
</blockquote>
<p>Yahoo! JAPAN News, one of the most popular news platforms in Japan, drove a concerted effort to improve their bfcache hit rate and saw significant user experience and business improvements as a result. Specifically, the results of the A/B test they conducted showed that pages that use bfcache had a <strong>9% increase in ads revenue</strong>.</p>
<p>This case study will explain how Yahoo! JAPAN News removed the blockers for bfcache, and how bfcache drastically improved the user experience.</p>
<h2 id="removing-blockers-for-bfcache">Removing blockers for bfcache <a class="headline-link" href="https://web.dev/yahoo-japan-news-bfcache/#removing-blockers-for-bfcache">#</a></h2>
<p>bfcache has been available since Chrome 86, and is also available on all modern browsers. However, taking full advantage of bfcache requires removing potential blockers on one's website. Some major blockers that Yahoo! JAPAN News faced were:</p>
<ol>
<li>Use of <code>unload</code> handlers</li>
<li>Use of the <a href="https://developer.mozilla.org/docs/Web/HTTP/Headers/Cache-Control#no-store" rel="noopener"><code>no-store</code> directive</a> on <code>Cache-control</code> headers</li>
</ol>
<p>You can check what major blockers there are for your website by going to <strong>Chrome Dev Tools &gt; Applications &gt; Back/forward Cache</strong> (<a href="https://web.dev/bfcache/#test-to-ensure-your-pages-are-cacheable">more details</a>), or by using the <a href="https://developer.chrome.com/docs/web-platform/bfcache-notrestoredreasons/" rel="noopener"><code>notRestoredReasons</code> API</a> to get a more comprehensive view of blockers based on actual usage in the field.</p>
<p>Here's how Yahoo! JAPAN News has removed their blockers:</p>
<ul>
<li><strong>Unload Handlers:</strong> Use the <code>pagehide</code> event instead of <code>unload</code> event, as the <code>unload</code> event is <a href="https://web.dev/bfcache/#never-use-the-unload-event">very unreliable</a>. Also, <code>permission-policy: unload</code> was <a href="https://chromestatus.com/feature/5579556305502208" rel="noopener">launched in Chrome 115</a> so that the websites can reliably remove <code>unload</code> handlers for specific origins. Chrome is also planning to <a href="https://github.com/fergald/docs/blob/master/explainers/permissions-policy-deprecate-unload.md#logistics-of-deprecation" rel="noopener">gradually deprecate <code>unload</code> handlers</a>.</li>
<li><strong><code>Cache-control: no-store</code></strong> (or CCNS for short): Changing the <code>Cache-control</code> header from <strong><code>no-store</code></strong> to <strong><code>no-cache</code></strong> can enable bfcache. Chrome is also planning to start <a href="https://chromestatus.com/feature/6705326844805120" rel="noopener">caching for bfcache even with a <code>no-store</code> header in certain circumstances</a>.</li>
</ul>
<p>CCNS is intended for pages that should never be cached under any circumstances. This comes with the caveat that any page with CCNS will not be able to benefit from any caching technology, including CDN edge servers and local caches.</p>
<p>If you have a CCNS header, this is a great opportunity to discuss what the right <code>Cache-control</code> strategies are for your website. Here are the main differences between <code>no-store</code> and <code>no-cache</code>.</p>
<div class="table-wrapper scrollbar">
  <table>
    <thead>
      <tr>
        <th><code>Cache-control: <strong>no-store</strong></code></th>
        <th><code>Cache-control: <strong>no-cache</strong></code></th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>
          <ul>
            <li>The response is not allowed to be stored in caches.</li>
            <li>Consequently, the response is fetched in full on every request.</li>
            <li>This should be used for private responses.</li>
          </ul>
        </td>
        <td>
          <ul>
            <li>The response is allowed to be stored in caches as long as it's revalidated with the server before each use.</li>
            <li>This should be public responses you want revalidated every time (for example, the home page of a news website - though even then a very short caching time can improve performance and offload work from the main servers).</li>
          </ul>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<p>If you are interested in learning more about <code>Cache-control</code> options, <a href="https://web.dev/http-cache/?hl=en#flowchart">this flowchart</a> is a great help.</p>
<h2 id="impact-of-bfcache-in-numbers">Impact of bfcache in numbers <a class="headline-link" href="https://web.dev/yahoo-japan-news-bfcache/#impact-of-bfcache-in-numbers">#</a></h2>
<p>To measure the impact of bfcache, Yahoo! JAPAN News conducted an A/B test for 2 weeks, where they served a version of their pages with their bfcache fixes to one group, and a version with pages ineligible for bfcache to another. They picked the URL paths with a significant amount of traffic so that the test could achieve meaningful results. There were no other visual or functional difference between the 2 versions.</p>
<p>Here's a video comparing the website with bfcache and without bfcache. You can see that the website with bfcache enabled loads significantly faster during a back or forward navigation.</p>
<style>
  .bfcache-video video {
    height: auto;
  }
</style>
<figure class="bfcache-video">
  <video autoplay="" controls="" height="800" loop="" muted="" width="800" style="--vid-width: 800; --vid-height: 800">      <source src="https://storage.googleapis.com/web-dev-uploads/video/jL3OLOhcWUQDnR4XjewLBx4e3PC3/2qqiTs9XuedWvtjfKuMu.mp4" type="video/mp4">    </video>
</figure>
<p>What's really promising is that the group with bfcache enabled had a <strong>significant increase in page views and ads revenue</strong>, especially on mobile devices.</p>
<p>Here are details about the impact observed by Yahoo! JAPAN News with their bfcache A/B test. (Further information can be found in <a href="https://techblog.yahoo.co.jp/entry/2023072430429932/" rel="noopener">their case study article</a>).</p>
<div class="table-wrapper scrollbar">
  <table>
    <thead>
      </thead><tbody><tr><td>
        <strong>Metrics</strong>
      </td>
      <td>
        <strong>Uplift % (mobile)</strong>
      </td>
      <td>
        <strong>Uplift % (desktop)</strong>
      </td>
    
    </tr></tbody><tbody>
      <tr>
        <td>bfcache hit rate</td>
        <td>
          <strong>+54.03 points</strong> (0.04% → 54.07%)
        </td>
        <td>+47.28 points (0.02% → 47.30%)</td>
      </tr>
      <tr>
        <td>Page views</td>
        <td>
          <strong>+2.26%</strong>
        </td>
        <td>+0.65%</td>
      </tr>
      <tr>
        <td>Ads revenue</td>
        <td>
          <strong>+9.0%</strong>
        </td>
        <td>+0.6%</td>
      </tr>
    </tbody>
  </table>
</div>
<p>When back/forward navigations between pages become instantaneous with bfcache, users tend to stay on pages longer, thus increasing ad views, leading to an increase of ad revenue.</p>
<h2 id="bfcache-enhances-seamless-user-experience-on-the-website">bfcache enhances seamless user experience on the website <a class="headline-link" href="https://web.dev/yahoo-japan-news-bfcache/#bfcache-enhances-seamless-user-experience-on-the-website">#</a></h2>
<p>When pages load instantly, <strong>navigations feel more seamless.</strong></p>
<p>In Yahoo! JAPAN News, one of the major user journey is as follows:</p>
<ol>
<li>Go to the article list</li>
<li>Click on one article to read</li>
<li>Go back to the article list</li>
<li>Click on another article to read</li>
</ol>
<p>Before bfcache, when users finished reading an article (step 2), they had to wait for the article list page to load again. This could be a friction factor for users who just want to go back to the article list to pick out another article to read.</p>
<p>Another source of friction during backward navigation was the scroll position. In practice, the browser tries to restore the scroll position when a backward navigation happens. However, because of dynamically-added ads or other layout changes, the scroll position often gets incorrectly restored, which could cause users to lose their bearings or even leave the page. This is never an issue when a backward navigation is powered by bfcache: the scroll position is immediately and correctly restored.</p>
<figure>
  <img alt="Two filmstrips of a backward navigation from an article to the article listing page. The top is a filmstrip of the process being handled with bfcache which takes 0.3 seconds, whereas the bottom is of the same process being handled without bfcache, which takes 3.3 seconds." decoding="async" height="343" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&amp;w=1600 1600w" width="800">
</figure>
<p>Now with bfcache, the friction in the user journey is gone—users can instantly navigate back to the article list page and pick another article to read without having to wait for the article list page to load.</p>
<p>The same thing happens when users browse from one article directly to another and back:</p>
<figure>
  <img alt="An animated image showing the backward navigation flow from an article to the article listing page with and without bfcache. With bfcache, the backward navigation is not only faster, but the scroll position is accurately maintained. Without bfcache, these guarantees cannot be made." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&amp;w=1600 1600w" width="800">
</figure>
<p>In a nutshell, the benefits of using bfcache for Yahoo! JAPAN News includes:</p>
<ul>
<li>Increased pageviews: Users were more likely to navigate within the website when pages were cached with bfcache.</li>
<li>Increased revenue: As a result of increased pageviews per session, ads impression increased, which resulted in a 9% increase in revenue on mobile compared with the test group without bfcache.</li>
</ul>
<h2 id="conclusion">Conclusion <a class="headline-link" href="https://web.dev/yahoo-japan-news-bfcache/#conclusion">#</a></h2>
<p>In short, bfcache not only makes your website instant, but can also reduce friction in overall user experience and increase engagement within your website.</p>
<p>The Chrome team is continually looking at bfcache blockers—especially the two reasons listed in this article as they are common reasons bfcache is not used. In the future, these may not prevent bfcache usage, but there's no need to wait until then. You can benefit from bfcache by looking at your bfcache blockers and avoiding these common, and other less common, patterns.</p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[三种常见的测试自动化类型]]></title>
            <link>https://web.dev/ta-types/</link>
            <guid>https://web.dev/ta-types/</guid>
            <content:encoded><![CDATA[<div>
    <h1>GPT总结</h1>
    <summary>这篇文章主要讨论了软件开发中的测试策略。作者首先介绍了测试的两种模式：手动测试和自动化测试。手动测试是由人工进行的，通过点击应用程序来检查其功能，并尝试发现问题。自动化测试则是由计算机进行的，用于自动化重复和单调的测试。文章重点介绍了自动化测试，并强调了自动化测试和手动测试的结合应用。接下来，作者介绍了测试的两种方法：黑盒测试和白盒测试。黑盒测试是基于功能和非功能需求进行测试，而白盒测试则考虑应用程序的内部结构。在自动化测试中，作者介绍了几种常见的测试类型，包括单元测试、集成测试、端到端测试和可视化UI测试。此外，文章还提到了静态分析作为一种重要的质量保证策略。最后，作者介绍了几种常见的测试策略，如测试金字塔、测试钻石等，并表示将在后续文章中详细讨论如何选择适合项目的测试策略。</summary>
    <div>
    <div>OriginTitle: Three common types of test automation</div>

    </div></div><p>我们都经历过这样的情况：现实生活中经常出现的重复编码模因是什么？
<img alt="A cupboard with two drawers you cannot open at the same time." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&amp;w=1600 1600w" width="800"></p>
<p>这个模因总结得很好：每个抽屉单独工作都很好，但与另一个抽屉结合使用时，它们会互相阻塞而无法正常工作。 您希望两个抽屉能够很好地配合并且可以同时操作。</p>
<img alt="The same cupboard but with two drawers you can open at the same time." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&amp;w=1600 1600w" width="800">
<p>将其应用到 Web 开发中：您编写了一些测试，甚至可能实现了 100% 的测试覆盖率，但是一旦其他部分就位，您的应用程序仍然需要工作。 这些单元可以单独工作，但不能相互关联。 编写一些测试至关重要，但这只是项目理想测试设置的一部分。 作为第一步，您需要确定需要确保应用程序质量的哪些部分以及如何实现这一目标。</p>
<p>简而言之，在开始编写实际的测试代码之前，您需要一个计划。 为了探讨如何实际测试的主题，让我们从头开始并回答两个基本问题：</p>
<ul>
<li>你想怎么测试？</li>
<li>你想测试什么？</li>
</ul>
<p>本文重点介绍回答第一个问题所需了解的一般事项。 为了从共同点开始，我们首先了解存在哪些测试模式，然后关注常见的测试类型。 在后面的文章中，我们将回答第二个问题，结合答案，找到最适合您的项目的测试策略。 我们走吧！ 🙌</p>
<h2 id="start-with-the-basics-general-testing-modes">从基础开始：一般测试模式<a class="headline-link" href="https://web.dev/ta-types/#start-with-the-basics-general-testing-modes">#</a></h2>
<p>在回答如何测试的问题时，首先要澄清的一点是非常抽象的。 您应该手动测试还是让计算机接管？ 然而，重要的是不要陷入二元思维。</p>
<h3 id="manual-testing-versus-automated-testing">手动测试与自动化测试<a class="headline-link" href="https://web.dev/ta-types/#manual-testing-versus-automated-testing">#</a></h3>
<p>如果您要求质量保证工程师定义测试，他们可能会首先将其分为两种“模式”：</p>
<ul>
<li><strong>手动测试</strong>。 这是由真人进行的典型测试方法。 质量保证工程师点击应用程序，检查它是否有效，同时尝试破解它。 最常见的方法是探索性测试，工程师利用他们对应用程序的了解，根据预定义的路径或清单来调查应用程序。</li>
<li><strong>自动化测试</strong>。 这是一种由计算机进行的测试。 质量保证工程师利用它来自动化重复和单调的测试。</li>
</ul>
<p>本系列指南将主要关注自动化测试。 但是，您不应该只关注一种测试方法。 即使自动化节省了大量时间和精力，人类和手动测试仍将始终发挥至关重要的作用。 相反，测试自动化应该让人们能够专注于探索性测试和创造性的问题解决。 例如，保证用户体验的质量或保护高风险的业务逻辑。 换句话说，自动化为您提供支持。 ❤️</p>
<h3 id="opaque-box-versus-clear-box">不透明盒子与透明盒子<a class="headline-link" href="https://web.dev/ta-types/#opaque-box-versus-clear-box">#</a></h3>
<p>因此，您已经定义了测试的一般模式。 然而，这还不够。 为了规划测试策略，还有一个问题需要回答：您是否应该知道您的应用程序在幕后是如何工作的，还是在不了解这些知识的情况下进行测试更好？ 根据答案，有两种过程可供选择来导出和选择测试用例：</p>
<ul>
<li><strong>不透明盒测试</strong>（或黑盒测试）。 它基于分析组件或系统的功能或非功能需求（规范），而不考虑其内部结构。</li>
<li><strong>清盒测试</strong>（或白盒测试）是考虑所述盒子的内部结构的过程。 换句话说，您的应用程序在幕后如何工作。</li>
</ul>
<p>这两个过程都可以应用于手动和自动测试。 然而，一般测试模式的某些方面可能更多地关注两者之一——我们稍后将介绍这一点。 现在，让我们进一步将测试自动化分为不同类型。</p>
<h2 id="test-automation-types-how-do-you-want-to-test">测试自动化类型：您想如何测试？<a class="headline-link" href="https://web.dev/ta-types/#test-automation-types-how-do-you-want-to-test">#</a></h2>
<p>当您越来越接近回答“如何”问题时，您已经决定进行一些手动测试。 然而，选择和应用测试自动化类型更具挑战性。 自动化测试的类型与您想要在项目中创建的指标密切相关。 因此，让我们仔细看看最重要的几个。</p>
<p>正如前面提到的模因所示，您已经遇到过两种类型：单元测试和集成测试。 端到端测试是要考虑的第三个重要因素。 但这还不是全部。 让我们仔细看看。</p>
<h3 id="unit-testing">单元测试<a class="headline-link" href="https://web.dev/ta-types/#unit-testing">#</a></h3>
<p>单元测试是一种测试类型，其中对应用程序的次要可测试部分或单元进行单独和独立的测试以确保正确运行。 这些单元的范围可能有所不同，从功能、类或接口到服务或完整组件。 它们的主要属性是执行速度、隔离性和舒适的可维护性。 如果您想深入了解单元测试，请转到此<a href="https://en.wikipedia.org/wiki/Unit_testing" rel="noopener">单元测试指南</a>。</p>
<img alt="A simplified depiction of unit testing showing input and output." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&amp;w=1600 1600w" width="800">
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow">可能的工具包括但不限于<a href="https://vitest.dev/">维泰斯特</a>和<a href="https://jestjs.io/">笑话</a>。</div></aside>
<h3 id="integration-testing">集成测试<a class="headline-link" href="https://web.dev/ta-types/#integration-testing">#</a></h3>
<p>集成测试侧重于组件或系统之间的交互。 换句话说，就是他们合作得如何。 集成测试的典型示例是 API 或组件测试。</p>
<img alt="A simplified depiction of integration testing showing how two unit working together." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&amp;w=1600 1600w" width="800">
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow">您可能考虑使用的工具通常与本文中提到的工具相同<a href="https://web.dev/ta-types/#unit-testing">单元测试部分</a>并且还可以包括提供组件测试的框架，例如，<a href="https://webdriver.io/">网络驱动IO</a>和<a href="https://www.cypress.io/">柏</a>。</div></aside>
<h3 id="end-to-end-testing">端到端测试<a class="headline-link" href="https://web.dev/ta-types/#end-to-end-testing">#</a></h3>
<p>这些测试通常称为 UI 测试，这个名称更好地解释了它们的功能。 这些测试与应用程序的 UI（包括完整的应用程序堆栈）交互，并从一端到另一端测试您的应用程序。</p>
<img alt="A simplified depiction of end-to-end testing showing a computer as a robot, looking at a workflow." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&amp;w=1600 1600w" width="800">
<p>如果您参考质量保证理论，它们类似于系统测试。 这些测试模拟真实的用户及其交互。 端到端测试需要更多的运行时间，因为它们涉及整个系统，更多的运行时间需要更多的计算能力。 因此，这种额外的工作会导致更高的维护成本。</p>
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow">您可能用于端到端测试的工具包括但不限于<a href="https://webdriver.io/">网络驱动IO</a>,<a href="https://www.cypress.io/">柏</a>,<a href="https://playwright.dev/">剧作家</a>,<a href="https://www.selenium.dev/">硒</a>。</div></aside>
<h4 id="visual-ui-testing">可视化用户界面测试<a class="headline-link" href="https://web.dev/ta-types/#visual-ui-testing">#</a></h4>
<p>UI 测试的一个有趣的子类别是视觉测试。 这些测试是扩展的端到端测试，提供了一种验证应用程序可见输出的方法。 此类测试会在更改后获取屏幕截图以及包含“现状”（或黄金文件）的另一个屏幕截图，然后将这些结果提供给人工审阅者进行检查和检查。 换句话说，它有助于发现页面外观中的“视觉错误”，而不仅仅是纯粹的功能性错误，并且没有明确写入断言。</p>
<h3 id="static-analysis">静态分析<a class="headline-link" href="https://web.dev/ta-types/#static-analysis">#</a></h3>
<p>这里还要介绍一件事：静态分析。 这不是教科书意义上的测试类型。 然而，这将是以后质量保证策略的一个重要方面。 您可以将其想象为拼写检查功能：它会在不运行程序的情况下扫描您的代码以查找更重要的缺陷和语法错误，从而检测代码风格问题。 这个简单的措施可以防止许多错误。 如果您想更详细地了解静态分析，这是学习静态分析的好地方。</p>
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow">您可能用于静态分析的工具包括但不限于<a href="https://eslint.org/">埃斯林特</a>和<a href="https://stylelint.io/">样式林特</a>。</div></aside>
<h2 id="testing-in-all-shapes-how-does-this-all-work-together">各种形式的测试：这一切如何协同工作？<a class="headline-link" href="https://web.dev/ta-types/#testing-in-all-shapes-how-does-this-all-work-together">#</a></h2>
<p>在寻找所有这些问题的答案时，您可能会在一些类比中找到可能的解决方案。 特别是在网络和测试社区中，开发人员倾向于使用这些类比来让您了解应该使用哪种类型的测试数量。</p>
<img alt="A lot of shapes like pyramid, diamonds, ice cone, honeycombs and a trophy; representing test strategies." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&amp;w=1600 1600w" width="800">
<p>该图中描绘的以下五种策略是最常见的：</p>
<ul>
<li>测试金字塔</li>
<li>测试钻石</li>
<li>测试冰锥（也称为测试披萨）</li>
<li>测试蜂窝</li>
<li>测试奖杯</li>
</ul>
<p>这确实需要处理大量信息。 基于这一切，您应该如何决定匹配的测试策略？ 别担心，我们已经为您提供了保障。 在下一篇文章中，我们将更详细地讨论这些不同的策略，并解释如何选择最适合您的项目的策略。 敬请关注！ 🔥</p>
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow">这篇博文由 Ramona 撰写，并接受了以下人士的意见和评论<a href="https://web.dev/authors/jecelynyeen/">叶洁琳</a>（<a href="https://twitter.com/jecfish">推特</a>),<a href="https://www.linkedin.com/in/michael-hablich-2128646/">迈克尔·哈布里奇</a>（<a href="https://twitter.com/MHablich">推特</a>）， 和<a href="https://www.linkedin.com/in/sofia-yemelianova/">索菲亚·艾米利亚诺娃</a>。</div></aside>
<hr><p>We've all been there: what is a recurring coding meme that happens all too often in real life?
<img alt="A cupboard with two drawers you cannot open at the same time." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&amp;w=1600 1600w" width="800"></p>
<p>This meme sums it up quite nicely: each drawer works perfectly well individually, but in combination with the other drawer, they block each other and fail to function. You want both drawers to work well with each other and be operable at the same time.</p>
<img alt="The same cupboard but with two drawers you can open at the same time." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&amp;w=1600 1600w" width="800">
<p>Apply this to web development: you wrote some tests, maybe even achieved 100% test coverage, but your application still needs to work once other parts fall into place. The units may work well on their own but not in relation to each other. Writing some tests is crucial but it's only one part of the ideal test setup for your project. As a very first step, you need to determine what parts of the application quality you need to ensure and how you can achieve that.</p>
<p>Simply put, you need a plan before you start writing the actual test code. To approach the topic of how to test practically, let's start with a clean slate and answer two basic questions:</p>
<ul>
<li>How do you want to test?</li>
<li>What do you want to test?</li>
</ul>
<p>This article focuses on the general things you need to know to answer the first question. To start from a common ground, let's first learn what testing modes exist and then focus on the common types of testing. In later articles, we will answer the second question, combine the answers, and find the testing strategy that works best for your project. Let's go! 🙌</p>
<h2 id="start-with-the-basics-general-testing-modes">Start with the basics: General testing modes <a class="headline-link" href="https://web.dev/ta-types/#start-with-the-basics-general-testing-modes">#</a></h2>
<p>When answering the question of how to test, the first point to clarify is very abstract. Should you test manually or let a computer take over? It's important, however, not to fall into binary thinking here.</p>
<h3 id="manual-testing-versus-automated-testing">Manual testing versus automated testing <a class="headline-link" href="https://web.dev/ta-types/#manual-testing-versus-automated-testing">#</a></h3>
<p>If you ask quality assurance engineers to define testing, they will probably break it down into two "modes" first:</p>
<ul>
<li><strong>Manual testing</strong>. This is a typical testing method conducted by actual people. A quality assurance engineer click through the application, check if it works and, at the same time, try to break it. The most common way is exploratory testing, where the engineer investigates the application using their knowledge of the application against a predefined path or checklist.</li>
<li><strong>Automated testing</strong>. This is a type of testing conducted by a computer. Quality assurance engineers implement it to automate away repetitive and monotonous tests.</li>
</ul>
<p>This series of guides will mostly focus on automated testing. However, you shouldn't focus on only one way of testing. Even if automation saves a lot of time and effort, humans and manual testing will always play a vital role. Rather, test automation should free up people to focus on exploratory testing and creative problem-solving. For example, ensuring the quality of user experiences or protecting the high-risk business logic. In other words, automation has your back. ❤️</p>
<h3 id="opaque-box-versus-clear-box">Opaque box versus clear box <a class="headline-link" href="https://web.dev/ta-types/#opaque-box-versus-clear-box">#</a></h3>
<p>So, you have defined the general modes of testing. However, that's not enough yet. To plan the testing strategy, there is one more question to answer: should you know how your application works under the hood or is it better to test without this knowledge? Depending on the answer, there are two procedures to choose from for deriving and selecting test cases:</p>
<ul>
<li><strong>Opaque box testing</strong> (or black box testing). It is based on analyzing a component or system's functional or non-functional requirements (specifications) without considering its internal structure.</li>
<li><strong>Clear box testing</strong> (or white box testing) is a procedure that takes into account the internal structure of said box. In other words, how your application works under the hood.</li>
</ul>
<p>Both procedures can be applied to manual and automated testing. However, some aspects of general testing modes may focus more on one of the two—we will cover that later. For now, let's further break down test automation into types.</p>
<h2 id="test-automation-types-how-do-you-want-to-test">Test automation types: How do you want to test? <a class="headline-link" href="https://web.dev/ta-types/#test-automation-types-how-do-you-want-to-test">#</a></h2>
<p>As you get closer to answering the "how" question, you have already decided to do some manual testing. However, choosing and applying test automation types is a bit more challenging. The types of automation testing are closely related to the metrics you want to create in your projects. So let's take a closer look at the most important ones.</p>
<p>As illustrated in the meme mentioned earlier, you have already come across two types: unit testing and integration testing. End-to-end testing is the third important one to consider. But that isn't all of them still. Let's take a closer look.</p>
<h3 id="unit-testing">Unit testing <a class="headline-link" href="https://web.dev/ta-types/#unit-testing">#</a></h3>
<p>Unit testing is a testing type in which minor testable parts or units of an application are individually and independently tested for proper operation. These units can vary in scope from functions, classes, or interfaces, to services or complete components. Their primary attributes are execution speed, isolation, and comfortable maintainability. If you want to dive deeper into unit testing, head over to this <a href="https://en.wikipedia.org/wiki/Unit_testing" rel="noopener">guide on unit testing</a>.</p>
<img alt="A simplified depiction of unit testing showing input and output." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&amp;w=1600 1600w" width="800">
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> Possible tools include but aren't limited to <a href="https://vitest.dev/">Vitest</a> and <a href="https://jestjs.io/">Jest</a>. </div></aside>
<h3 id="integration-testing">Integration testing <a class="headline-link" href="https://web.dev/ta-types/#integration-testing">#</a></h3>
<p>Integration testing focuses on interactions between components or systems. In other words, on how well they work together. Typical examples of integration tests are API or component tests.</p>
<img alt="A simplified depiction of integration testing showing how two unit working together." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&amp;w=1600 1600w" width="800">
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> The tools you may consider using are often the same as those mentioned in the <a href="https://web.dev/ta-types/#unit-testing">unit testing section</a> and can also include frameworks providing component testing, for example, <a href="https://webdriver.io/">WebdriverIO</a> and <a href="https://www.cypress.io/">Cypress</a>. </div></aside>
<h3 id="end-to-end-testing">End-to-end testing <a class="headline-link" href="https://web.dev/ta-types/#end-to-end-testing">#</a></h3>
<p>These tests are often called UI tests and this name explains their function even better. These tests interact with your application's UI, including the complete application stack, and test your application from one end to the other.</p>
<img alt="A simplified depiction of end-to-end testing showing a computer as a robot, looking at a workflow." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&amp;w=1600 1600w" width="800">
<p>They resemble a system test if you refer to the theory of quality assurance. These tests simulate a genuine user and their interactions. End-to-end tests take more runtime because they involve the whole system and more runtime requires more computing power. As a result, this additional effort results in higher maintenance costs.</p>
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> The tools you might use for end-to-end testing include but aren't limited to <a href="https://webdriver.io/">WebdriverIO</a>, <a href="https://www.cypress.io/">Cypress</a>, <a href="https://playwright.dev/">Playwright</a>, <a href="https://www.selenium.dev/">Selenium</a>. </div></aside>
<h4 id="visual-ui-testing">Visual UI testing <a class="headline-link" href="https://web.dev/ta-types/#visual-ui-testing">#</a></h4>
<p>An interesting subcategory of UI tests is visual tests. These tests are extended end-to-end tests that provide a means to verify the visible output of an application. Such a test takes a screenshot after a change and another screenshot containing the “status quo” (or golden file), then provides those results to a human reviewer to inspect and check. In other words, it helps find “visual bugs” in the appearance of a page, beyond purely functional bugs and not explicitly written down into assertions.</p>
<h3 id="static-analysis">Static analysis <a class="headline-link" href="https://web.dev/ta-types/#static-analysis">#</a></h3>
<p>There's one more thing to introduce here: static analysis. It isn't a testing type in the textbook sense. However, it will be an essential aspect in quality assurance strategies later on. You can imagine it working like a spell check function: it scans your code for more significant defects and syntax errors without running the program, thus detecting code style issues. This simple measure can prevent many bugs. This is a good point to learn about Static Analysis if you want to get to know it in more detail.</p>
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> The tools you might use for static analysis include but aren't limited to <a href="https://eslint.org/">Eslint</a> and <a href="https://stylelint.io/">StyleLint</a>.  </div></aside>
<h2 id="testing-in-all-shapes-how-does-this-all-work-together">Testing in all shapes: How does this all work together? <a class="headline-link" href="https://web.dev/ta-types/#testing-in-all-shapes-how-does-this-all-work-together">#</a></h2>
<p>While searching for answers to all these questions, you might find a possible solution in some analogies. In the web and testing communities specifically, developers tend to use these analogies to give you an idea of how many tests you should use of which type.</p>
<img alt="A lot of shapes like pyramid, diamonds, ice cone, honeycombs and a trophy; representing test strategies." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&amp;w=1600 1600w" width="800">
<p>The following five strategies depicted in this image are the most common ones:</p>
<ul>
<li>Test Pyramid</li>
<li>Test Diamond</li>
<li>Test Ice Cone (also known as Test Pizza)</li>
<li>Test Honeycomb</li>
<li>Test Trophy</li>
</ul>
<p>This is truly a lot of information to process. How should you decide on a matching test strategy based on all this? Don't worry, we've got you covered. In the next article, we will discuss these different strategies in more detail and explain how to choose the best fit for your project. Stay tuned! 🔥</p>
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> This blog post was written by Ramona, with input and review from <a href="https://web.dev/authors/jecelynyeen/">Jecelyn Yeen</a> (<a href="https://twitter.com/jecfish">Twitter</a>), <a href="https://www.linkedin.com/in/michael-hablich-2128646/">Michael Hablich</a> (<a href="https://twitter.com/MHablich">Twitter</a>), and <a href="https://www.linkedin.com/in/sofia-yemelianova/">Sofia Emelianova</a>. </div></aside>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[六月网络平台新功能]]></title>
            <link>https://web.dev/web-platform-06-2023/</link>
            <guid>https://web.dev/web-platform-06-2023/</guid>
            <content:encoded><![CDATA[<div>
    <h1>GPT总结</h1>
    <summary>2023年6月，Firefox 114成为稳定版本，这个月只有一个浏览器发布。请查看测试版浏览器发布部分，了解即将成为稳定版本的几个功能的详细信息。

WebTransport API：Firefox 114包括WebTransport API，这是对WebSockets的现代更新，支持多个流、单向流和无序传递。

SVG crossorigin属性：Firefox 114还包括crossorigin属性，在SVG的<img>和<feimage>元素上，为元素获取的数据提供了配置跨域资源共享（CORS）请求的支持。这与HTML的crossorigin属性的工作方式相同。

测试版浏览器发布：测试版浏览器版本可以让您预览下一个稳定版本中的功能。这是一个测试新功能或可能影响您网站的删除功能的好时机。新的测试版是Firefox 115和Safari 17，Chrome 115和Safari 16.6仍在进行中。这些发布为平台带来了许多出色的功能。请查看发布说明以获取所有详细信息，以下只是一些亮点。

Firefox 115支持CSS动画组合属性animation-composition。一旦这个版本的Firefox在7月4日成为稳定版本，animation-composition将在所有三个主要引擎中得到支持。

与Firefox 115一起实现互操作性的还有一组Array和TypedArray的方法。Array.toReversed()、Array.toSorted()、Array.toSpliced()、Array.with()、</feimage></summary>
    <div>
    <div>OriginTitle: New to the web platform in June</div>

    </div></div><h2 id="stable-browser-releases">稳定的浏览器版本<a class="headline-link" href="https://web.dev/web-platform-06-2023/#stable-browser-releases">#</a></h2>
<p>2023年6月<a href="https://developer.mozilla.org/docs/Mozilla/Firefox/Releases/114" rel="noopener">火狐114</a>变得稳定，所以本月这是一个浏览器问题。 查看测试版浏览器版本部分，了解一旦这些测试版稳定后即将实现互操作的多项功能的详细信息。</p>
<aside class="aside flow bg-state-bad-bg color-state-bad-text"><p class="cluster color-state-bad-text"><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Error sign">   <path fill-rule="evenodd" clip-rule="evenodd" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-2h2v2h-2zm0-10v6h2V7h-2z"></path> </svg></span><strong>警告</strong></p><div class=" flow">我们在这些帖子中包含从 MDN 中提取的浏览器兼容性数据，这些数据对于最新的浏览器版本可能尚未更新。 该帖子一旦出现在帖子中，就会显示正确的信息<a href="https://github.com/mdn/browser-compat-data/releases">浏览器兼容数据发布</a>。</div></aside>
<h3 id="webtransport-api">网络传输API<a class="headline-link" href="https://web.dev/web-platform-06-2023/#webtransport-api">#</a></h3>
<p>火狐 114 包括<a href="https://developer.mozilla.org/docs/Web/API/WebTransport_API" rel="noopener">网络传输API</a>，WebSocket 的现代更新，提供对多个流、单向流和无序交付的支持。</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">浏览器支持</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 97，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      97
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">火狐 114，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      114
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">边缘 97，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      97
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari，不支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported">
<p></p></span>
</li><p></p>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/API/WebTransport#browser_compatibility" target="_blank">来源</a>
</div>
<h3 id="the-svg-crossorigin-attribute">SVG<code>跨域</code>属性<a class="headline-link" href="https://web.dev/web-platform-06-2023/#the-svg-crossorigin-attribute">#</a></h3>
<p>Firefox 114 还包括<a href="https://developer.mozilla.org/docs/Web/SVG/Attribute/crossorigin" rel="noopener"><code>跨域</code>属性</a>，在<code></code>和<code></code>SVG 中的元素，提供对元素获取数据的跨源资源共享 (CORS) 请求的配置支持。 这与 HTML 的工作方式相同<a href="https://developer.mozilla.org/docs/Web/HTML/Attributes/crossorigin" rel="noopener"><code>跨域</code></a>属性。</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">浏览器支持</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">铬，不支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported">
<p></p></span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="firefox">
<span class="visually-hidden">火狐 114，支持</span>
</span>
<span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
114
</span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="edge">
<span class="visually-hidden">边缘，不支持</span>
</span>
<span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported"><p></p>
<p></p></span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="safari">
<span class="visually-hidden">Safari，不支持</span>
</span>
<span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported"><p></p>
<p></p></span>
</li><p></p>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/API/SVGImageElement/crossorigin#browser_compatibility" target="_blank">来源</a>
</div>
<h2 id="beta-browser-releases">测试版浏览器发布<a class="headline-link" href="https://web.dev/web-platform-06-2023/#beta-browser-releases">#</a></h2>
<p>Beta 浏览器版本可让您预览浏览器下一个稳定版本中的内容。 现在是测试新功能或删除的好时机，这些功能或删除可能会在发布该版本之前影响您的网站。 新的测试版是<a href="https://developer.mozilla.org/docs/Mozilla/Firefox/Releases/115" rel="noopener">火狐115</a>， 和<a href="https://developer.apple.com/documentation/safari-release-notes/safari-16_6-release-notes" rel="noopener">狩猎17</a>和<a href="https://developer.chrome.com/blog/chrome-115-beta/" rel="noopener">铬115</a>和<a href="https://developer.apple.com/documentation/safari-release-notes/safari-16_6-release-notes" rel="noopener">Safari 16.6</a>仍在进行中。 这些版本为该平台带来了许多出色的功能。 查看发行说明以了解所有详细信息，这里仅列出一些亮点。</p>
<p>火狐115支持CSS<a href="https://developer.mozilla.org/docs/Web/CSS/animation-composition" rel="noopener"><code>动画合成</code></a>财产。 一旦该版本的 Firefox 于 7 月 4 日变得稳定，<code>动画合成</code>将在所有三个主要引擎中得到支持。 在文章中了解更多信息<a href="https://developer.chrome.com/articles/css-animation-composition/" rel="noopener">指定多个动画效果如何与animation-composition合成</a>。</p>
<p>与 Firefox 115 实现互操作性的还有一组方法<code>大批</code>和<code>类型数组</code>。<code>Array.toReversed()</code>,<code>Array.toSorted()</code>,<code>Array.toSpliced()</code>,<code>数组.with()</code>,<code>TypedArrays.toReversed()</code>,<code>TypedArrays.toSorted()</code>， 和<code>TypedArrays.with()</code>返回一个新数组，其中包含已浅复制的元素。</p>
<p>Safari 17 Beta 中有一大堆新功能和修复。 Safari 17 新增<a href="https://blog.tomayac.com/2023/06/07/web-apps-on-macos-sonoma-14-beta/" rel="noopener">网络应用程序</a>到 macOS 索诺玛。 这意味着您可以从“文件”菜单或“共享表”将网站添加到 Dock，它将在自己的窗口中打开。</p>
<p>Safari 17 还带来了一些可互操作的功能——<a href="https://developer.mozilla.org/docs/Web/CSS/contain-intrinsic-size" rel="noopener"><code>包含内在尺寸</code></a>,<a href="https://developer.mozilla.org/docs/Web/CSS/@counter-style" rel="noopener"><code>@计数器风格</code></a>,<a href="https://developer.mozilla.org/docs/Web/CSS/@font-face/size-adjust" rel="noopener">@font-face 大小调整</a>，以及<a href="https://developer.mozilla.org/docs/Web/CSS/@media/overflow-block" rel="noopener"><code>溢出块</code></a>和<a href="https://developer.mozilla.org/docs/Web/CSS/@media/overflow-inline" rel="noopener"><code>内嵌溢出</code></a>Safari 17 发布时，所有主要引擎都将提供媒体功能。</p>
<p><em>拍摄者<a href="https://unsplash.com/@rodrigospabreu" rel="noopener">罗德里戈·阿布鲁</a>。</em></p>
<hr><h2 id="stable-browser-releases">Stable browser releases <a class="headline-link" href="https://web.dev/web-platform-06-2023/#stable-browser-releases">#</a></h2>
<p>In June 2023 <a href="https://developer.mozilla.org/docs/Mozilla/Firefox/Releases/114" rel="noopener">Firefox 114</a> became stable, so it's a single browser issue this month. Check out the beta browser releases section for details of several features that are about to become interoperable once those betas become stable.</p>
<aside class="aside flow bg-state-bad-bg color-state-bad-text"><p class="cluster color-state-bad-text"><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Error sign">   <path fill-rule="evenodd" clip-rule="evenodd" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-2h2v2h-2zm0-10v6h2V7h-2z"></path> </svg></span><strong>Caution</strong></p><div class=" flow"> We include browser compatibility data pulled from MDN in these posts which may not have been updated yet for very recent browser releases. The post will show the correct information as soon as it appears in the <a href="https://github.com/mdn/browser-compat-data/releases">browser-compat-data release</a>. </div></aside>
<h3 id="webtransport-api">WebTransport API <a class="headline-link" href="https://web.dev/web-platform-06-2023/#webtransport-api">#</a></h3>
<p>Firefox 114 includes the <a href="https://developer.mozilla.org/docs/Web/API/WebTransport_API" rel="noopener">WebTransport API</a>, a modern update to WebSockets providing support for multiple streams, unidirectional streams, and out-of-order delivery.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 97, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      97
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 114, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      114
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 97, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      97
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari, Not supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported">
<p></p></span>
</li><p></p>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/API/WebTransport#browser_compatibility" target="_blank">Source</a>
</div>
<h3 id="the-svg-crossorigin-attribute">The SVG <code>crossorigin</code> attribute <a class="headline-link" href="https://web.dev/web-platform-06-2023/#the-svg-crossorigin-attribute">#</a></h3>
<p>Firefox 114 also includes the <a href="https://developer.mozilla.org/docs/Web/SVG/Attribute/crossorigin" rel="noopener"><code>crossorigin</code> attribute</a>, on the <code>&lt;image&gt;</code> and <code>&lt;feImage&gt;</code> elements in SVG, provides support for configuration of the Cross-Origin Resource Sharing (CORS) requests for the element's fetched data. This works in the same way as the HTML <a href="https://developer.mozilla.org/docs/Web/HTML/Attributes/crossorigin" rel="noopener"><code>crossorigin</code></a> attribute.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome, Not supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported">
<p></p></span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="firefox">
<span class="visually-hidden">Firefox 114, Supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
114
</span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="edge">
<span class="visually-hidden">Edge, Not supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported"><p></p>
<p></p></span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="safari">
<span class="visually-hidden">Safari, Not supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported"><p></p>
<p></p></span>
</li><p></p>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/API/SVGImageElement/crossorigin#browser_compatibility" target="_blank">Source</a>
</div>
<h2 id="beta-browser-releases">Beta browser releases <a class="headline-link" href="https://web.dev/web-platform-06-2023/#beta-browser-releases">#</a></h2>
<p>Beta browser versions give you a preview of things that will be in the next stable version of the browser. It's a great time to test new features, or removals, that could impact your site before the world gets that release. New betas are <a href="https://developer.mozilla.org/docs/Mozilla/Firefox/Releases/115" rel="noopener">Firefox 115</a>, and <a href="https://developer.apple.com/documentation/safari-release-notes/safari-16_6-release-notes" rel="noopener">Safari 17</a> with <a href="https://developer.chrome.com/blog/chrome-115-beta/" rel="noopener">Chrome 115</a> and <a href="https://developer.apple.com/documentation/safari-release-notes/safari-16_6-release-notes" rel="noopener">Safari 16.6</a> still ongoing. These releases bring many great features to the platform. Check out the release notes for all of the details, here are just a few highlights.</p>
<p>Firefox 115 supports the CSS <a href="https://developer.mozilla.org/docs/Web/CSS/animation-composition" rel="noopener"><code>animation-composition</code></a> property. Once this version of Firefox becomes stable on July 4th, <code>animation-composition</code> will be supported in all three major engines. Learn more in the article <a href="https://developer.chrome.com/articles/css-animation-composition/" rel="noopener">Specify how multiple animation effects should composite with animation-composition</a>.</p>
<p>Also reaching interoperability with Firefox 115 are a set of methods for <code>Array</code> and <code>TypedArray</code>.  <code>Array.toReversed()</code>, <code>Array.toSorted()</code>, <code>Array.toSpliced()</code>, <code>Array.with()</code>, <code>TypedArrays.toReversed()</code>, <code>TypedArrays.toSorted()</code>, and <code>TypedArrays.with()</code> return a new array with elements that have been shallow copied.</p>
<p>There is a whole stack of new features and fixes in the Safari 17 beta. Safari 17 adds <a href="https://blog.tomayac.com/2023/06/07/web-apps-on-macos-sonoma-14-beta/" rel="noopener">Web Apps</a> to macOS Sonoma. This means you can add a website to the Dock from the File menu or Share Sheet, and it will open in its own window.</p>
<p>Safari 17 also brings some features to interoperable status—<a href="https://developer.mozilla.org/docs/Web/CSS/contain-intrinsic-size" rel="noopener"><code>contain-intrinsic-size</code></a>, <a href="https://developer.mozilla.org/docs/Web/CSS/@counter-style" rel="noopener"><code>@counter-style</code></a>, <a href="https://developer.mozilla.org/docs/Web/CSS/@font-face/size-adjust" rel="noopener">@font-face size-adjust</a>, and the <a href="https://developer.mozilla.org/docs/Web/CSS/@media/overflow-block" rel="noopener"><code>overflow-block</code></a> and <a href="https://developer.mozilla.org/docs/Web/CSS/@media/overflow-inline" rel="noopener"><code>overflow-inline</code></a> media features will be available in all major engines when Safari 17 ships.</p>
<p><em>Photo by <a href="https://unsplash.com/@rodrigospabreu" rel="noopener">Rodrigo Abreu</a>.</em></p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[原始私有文件系统]]></title>
            <link>https://web.dev/origin-private-file-system/</link>
            <guid>https://web.dev/origin-private-file-system/</guid>
            <content:encoded><![CDATA[<div>
    <h1>GPT总结</h1>
    <summary>这篇文章介绍了原始私有文件系统（Origin Private File System）的概念和用法。原始私有文件系统允许Web应用程序在其自己的特定来源的虚拟文件系统中存储和操作文件，包括低级文件操作、逐字节访问和文件流处理。它在所有主要浏览器中得到支持，并由Web超文本应用技术工作组（WHATWG）在文件系统生存标准中进行了标准化。

传统的Web文件处理方式是通过上传文件到服务器或在客户端上打开文件进行编辑，然后通过JavaScript下载修改后的文件。而现代的Web文件处理方式是使用文件系统访问API中的三个选择器方法（showOpenFilePicker()、showSaveFilePicker()和showDirectoryPicker()），实现了直接在文件系统中打开、保存和选择文件的流程。

原始私有文件系统与用户可见文件系统不同，它不是供用户查看和操作的，而是私有的，只能由网站的来源访问。每个来源都有自己独立的原始私有文件系统，与其他来源完全隔离。原始私有文件系统受到浏览器配额限制，当用户清除浏览数据时，原始私有文件系统也会被删除。

在使用原始私有文件系统时，可以创建、访问、写入、移动、重命名、删除和列出文件和文件夹。在Web Worker中使用原始私有文件系统可以实</summary>
    <div>
    <div>OriginTitle: The origin private file system</div>

    </div></div><aside class="aside flow bg-state-good-bg color-state-good-text"><p class="cluster "><span class="aside__icon box-block "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128" style="enable-background:new 0 0 128 128" xml:space="preserve"><path d="M7.5 123.3c2.2 2.4 11.6-1.9 19-5.3C32 115.4 54 106.3 65 101.6c3-1.2 7.3-2.9 10.4-7 2.8-3.6 10-19-4.6-34.7-15-16-30.4-11.5-36.2-7.5A28.5 28.5 0 0 0 27.3 63c-5.2 11.6-12.7 32.9-15.7 41.3-2.3 6.1-6.4 16.5-4.1 19z" fill="currentColor"></path><path d="M18 86.8s.7 6.5 6.1 14.6c6.3 9.6 15 11.2 15 11.2l-5.8 2.4s-6.5-2-12.7-10.4c-3.8-5.3-5-11.6-5-11.6l2.3-6.2zm-5.6 15.4s1.5 5.6 4.7 9.7c3.8 5 8.6 6.5 8.6 6.5l-4.5 2s-3.3-.8-7-5.5c-2.9-3.5-3.7-7.6-3.7-7.6l1.9-5.1z" fill="currentColor"></path><path d="M10 116.4c-.2-.5-.2-1 0-1.4l25.4-53 4.2 16-26.8 38.7c-.7 1-2.3 1-2.8-.2z" style="opacity:.44" fill="currentColor"></path><path d="M41.6 83.2c12 14 25.5 12.2 30 8.6 4.5-3.5 8.1-15.6-3.7-29.3C55.3 48.2 41.3 52.2 38 55.3s-7.4 15.1 3.5 27.9z" style="fill: var(--color-state-good-bg);"></path><path d="M82.5 89c-4.3-3.7-6.6-3-9.7-1.8a26 26 0 0 1-18.9 0l2.6-6.2c5 1.7 8.7 1 12-1 4-2.4 9.6-5.6 18.3 1.6 3.6 3 7.3 5.1 10 4.2 2-.7 3-3.6 3.6-6l.2-1.3c.4-3.7 1.2-11.6 7.1-15.7 6.4-4.3 13-4.3 13-4.3l1.2 12c-3-.5-5.2.1-7 1-6.7 3.8-.8 18.2-11.3 23-10.1 4.8-18.4-3.3-21-5.6zM45.4 73.7l-4.3-3.9c8-8.9 5.8-15.4 4.3-20.2A26.4 26.4 0 0 1 44 38.8c-3-3.8-4.4-7.8-4.5-8-1.9-5.7-.5-11.2 2.8-16.4C48.7 4 60.5 4 60.5 4l4 10.5c-3-.1-12.8 0-15.8 4.8-3.8 6-1.3 9.6-1.2 10 .8-1 1.5-1.7 2.2-2.3 4.8-4.2 9-4.8 11.6-4.6a11 11 0 0 1 7.6 4.2c2 2.7 3 6.2 2.3 9.4a11 11 0 0 1-5.8 7.4 16 16 0 0 1-13 1.5v.3l.6 2c1.8 5.4 5 14.1-7.6 26.5zm7.4-37.5c.5.4 1.1.8 1.8 1 2 .8 4.4.6 7-.8 1.5-.9 1.7-1.7 1.7-2 .2-.9 0-2-.7-2.8a2.8 2.8 0 0 0-2-1.2c-1.6-.2-3.6.8-5.6 2.6-1 .9-1.7 2-2.3 3.2zm10 39.1-6.2-.1s3-16.7 12.5-19.5c1.8-.5 3.7-1 5.7-1.3l4-.8c.1-1.6-.5-3.6-1.3-5.9-.6-1.7-1.2-3.5-1.5-5.5-.6-3.9.4-7.3 3-9.6 3-2.9 7.9-3.8 13.4-2.5 3.2.7 5.5 2.2 7.6 3.6 2.9 2 4.6 3 8.2.5 4.3-2.9-1.4-14.3-4.4-21l11.3-4.6c1.5 3.3 8.8 20.3 4 30a11.5 11.5 0 0 1-8.1 6.2c-8 1.8-12.6-1.3-16-3.6-1.6-1-3-1.9-4.6-2.3-10.6-3 4.2 12.6-2.7 19.6-4.2 4.2-14.4 5.3-15 5.5-6.6 1.6-10 11.3-10 11.3z" fill="currentColor"></path><path d="M44 38.8c-.2 2.2-.3 3.5.3 6.4 2.7 2 8.7 2 8.7 2l-.6-2v-.3c-6.1-3-8.4-6.1-8.4-6.1zm-12.5 9.8-10.3-5 5.1-7.5 8.2 5.4zm-15.2-14A26 26 0 0 1 5 28.9l5.2-6c1.6 1.2 5 3.5 7.2 3.8l-1.1 7.9zM25.6 21.3 18 18.8a18 18 0 0 0 .7-8.3l7.9-1.3c.6 4 .3 8.2-1 12zM73 15.3l7.9-1.7L83 23.9l-7.8 1.7zM92.5 17.8 87 12c2.8-2.8 3.5-6.3 3.5-6.4L98.4 7c-.1.6-1.1 6.3-6 10.9zM95.5 48.6l7-2.2 2.3 7.7-7 2.1zM97.5 113l-7.9-1c.3-2.7-1.8-6.2-2.4-7l6.4-4.8c.5.6 4.7 6.4 4 12.8zM120.4 102.9c-3-.5-6-.6-9.1-.5l-.3-8c3.5-.2 7 0 10.6.6l-1.2 7.9zM109.6 113.9l5.6-5.7 7.8 7.6-5.6 5.7zM93.1 63.3 99 70l-6.6 5.8-5.8-6.6z" fill="currentColor"></path></svg> </span><strong>庆典</strong></p><div class=" flow">原始私有文件系统允许 Web 应用程序在其自己的特定原始虚拟文件系统中存储和操作文件，包括低级文件操作、逐字节访问和文件流。 所有主要浏览器都支持原始私有文件系统。</div></aside>
<h2 id="browser-support">浏览器支持<a class="headline-link" href="https://web.dev/origin-private-file-system/#browser-support">#</a></h2>
<p>原始私有文件系统受到现代浏览器的支持，并由Web超文本应用技术工作组（<a href="https://whatwg.org/" rel="noopener">WHATWG</a>） 在里面<a href="https://fs.spec.whatwg.org/" rel="noopener">文件系统生活标准</a>。</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">浏览器支持</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 86，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      86
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">火狐 111，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      111
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">边缘 86，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      86
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 15.2，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      15.2
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/API/StorageManager/getDirectory#browser_compatibility" target="_blank">来源</a>
</div>
<h2 id="motivation">动机<a class="headline-link" href="https://web.dev/origin-private-file-system/#motivation">#</a></h2>
<p>当您想到计算机上的文件时，您可能会想到文件层次结构：组织在文件夹中的文件，您可以使用操作系统的文件资源管理器进行浏览。 例如，在 Windows 上，对于名为 Tom 的用户，他们的待办事项列表可能位于<code>C:\Users\Tom\Documents\ToDo.txt</code>。 在这个例子中，<code>待办事项.txt</code>是文件名，并且<code>用户</code>,<code>汤姆</code>， 和<code>文件</code>是文件夹名称。<code>C：\</code>在 Windows 上代表驱动器的根目录。</p>
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow">在本文中，我使用术语<em>文件夹</em>和<em>目录</em>可互换，忽略文件系统概念（目录）和图形用户界面之间的差异<a href="https://en.wikipedia.org/wiki/Directory_%28computing%29#Folder_metaphor">隐喻</a>（文件夹）。</div></aside>
<h3 id="traditional-way-of-working-with-files-on-the-web">在网络上处理文件的传统方式<a class="headline-link" href="https://web.dev/origin-private-file-system/#traditional-way-of-working-with-files-on-the-web">#</a></h3>
<p>要在 Web 应用程序中编辑待办事项列表，这是传统流程：</p>
<ol>
<li>用户<em>上传</em>将文件发送到服务器或<em>打开</em>它在客户端上<a href="https://developer.mozilla.org/docs/Web/HTML/Element/input/file" rel="noopener"><code></code></a>。</li>
<li>用户进行更改，然后<em>下载</em>注入的结果文件<a href="https://developer.mozilla.org/docs/Web/API/HTMLAnchorElement/download" rel="noopener"><code>&amp;lt;a download="ToDo.txt&amp;gt;</code></a>你以编程方式<a href="https://developer.mozilla.org/docs/Web/API/HTMLElement/click" rel="noopener"><code>点击（）</code></a>通过 JavaScript。</li>
<li>要打开文件夹，您可以使用特殊属性<a href="https://developer.mozilla.org/docs/Web/API/HTMLInputElement/webkitdirectory" rel="noopener"><code></code></a>，尽管有其专有名称，但实际上具有通用浏览器支持。</li>
</ol>
<h3 id="modern-way-of-working-with-files-on-the-web">在网络上处理文件的现代方式<a class="headline-link" href="https://web.dev/origin-private-file-system/#modern-way-of-working-with-files-on-the-web">#</a></h3>
<p>此流程并不代表用户如何看待编辑文件，并且意味着用户最终会下载<em>副本</em>他们的输入文件。 因此，文件系统访问 API 引入了三种选择器方法 -<a href="https://developer.mozilla.org/docs/Web/API/Window/showOpenFilePicker" rel="noopener"><code>显示打开文件选择器()</code></a>,<a href="https://developer.mozilla.org/docs/Web/API/Window/showSaveFilePicker" rel="noopener"><code>显示保存文件选择器()</code></a>， 和<a href="https://developer.mozilla.org/docs/Web/API/Window/showDirectoryPicker" rel="noopener"><code>显示目录选择器()</code></a>——正如他们的名字所暗示的那样。 它们启用如下流程：</p>
<ol>
<li>打开<code>待办事项.txt</code>和<code>显示打开文件选择器()</code>，并得到一个<a href="https://developer.mozilla.org/docs/Web/API/FileSystemFileHandle" rel="noopener"><code>文件系统文件句柄</code></a>目的。</li>
<li>来自<code>文件系统文件句柄</code>对象，得到一个<a href="https://developer.mozilla.org/docs/Web/API/File" rel="noopener"><code>文件</code></a>通过调用文件句柄<a href="https://developer.mozilla.org/docs/Web/API/FileSystemFileHandle/getFile" rel="noopener"><code>获取文件()</code></a>方法。</li>
<li>修改文件，然后调用<a href="https://developer.mozilla.org/docs/Web/API/FileSystemHandle/requestPermission" rel="noopener"><code>requestPermission({模式: '读写'})</code></a>在手柄上。</li>
<li>如果用户接受权限请求，请将更改保存回原始文件。</li>
<li>或者，致电<code>显示保存文件选择器()</code>并让用户选择一个新文件。 （如果用户选择以前打开的文件，其内容将被覆盖。）对于重复保存，您可以保留文件句柄，这样就不必再次显示文件保存对话框。</li>
</ol>
<h3 id="restrictions-of-working-with-files-on-the-web">在 Web 上处理文件的限制<a class="headline-link" href="https://web.dev/origin-private-file-system/#restrictions-of-working-with-files-on-the-web">#</a></h3>
<p>可通过这些方法访问的文件和文件夹位于所谓的<em>用户可见</em>文件系统。 从网络保存的文件，特别是可执行文件，都标有<a href="https://textslashplain.com/2016/04/04/downloads-and-the-mark-of-the-web/" rel="noopener">网络标记</a>，因此在执行潜在危险文件之前，操作系统可以显示额外的警告。 作为一项附加的安全功能，从 Web 获取的文件也受到以下保护：<a href="https://safebrowsing.google.com/" rel="noopener">安全浏览</a>，为了简单起见，在本文中，您可以将其视为基于云的病毒扫描。 当您使用文件系统访问 API 将数据写入文件时，写入不是就地的，而是使用临时文件。 除非通过所有这些安全检查，否则文件本身不会被修改。 正如您可以想象的那样，尽管在可能的情况下进行了改进，但这项工作使文件操作相对较慢，例如，<a href="https://bugs.chromium.org/p/chromium/issues/detail?id=1413443" rel="noopener">在 macOS 上</a>。 还是每<a href="https://developer.mozilla.org/docs/Web/API/FileSystemWritableFileStream/write" rel="noopener"><code>写（）</code></a>调用是独立的，因此它在幕后打开文件，查找给定的偏移量，最后写入数据。</p>
<h3 id="files-as-the-foundation-of-processing">文件作为处理的基础<a class="headline-link" href="https://web.dev/origin-private-file-system/#files-as-the-foundation-of-processing">#</a></h3>
<p>同时，文件是记录数据的绝佳方式。 例如，<a href="https://www.sqlite.org/" rel="noopener">SQLite</a>将整个数据库存储在单个文件中。 另一个例子是<a href="https://en.wikipedia.org/wiki/Mipmap" rel="noopener">mip贴图</a>用于图像处理。 Mipmap 是预先计算的、优化的图像序列，每个图像都是前一个图像的分辨率逐渐降低的表示，这使得缩放等许多操作更快。 那么，Web 应用程序如何才能获得文件的优势，同时又不会产生传统基于 Web 的文件处理的性能成本呢？ 答案是<em>原始私有文件系统</em>。</p>
<h2 id="the-user-visible-versus-the-origin-private-file-system">用户可见与原始私有文件系统<a class="headline-link" href="https://web.dev/origin-private-file-system/#the-user-visible-versus-the-origin-private-file-system">#</a></h2>
<p>与通过操作系统的文件资源管理器浏览的用户可见文件系统（您可以读取、写入、移动和重命名文件和文件夹）不同，原始私有文件系统并不意味着用户可以看到。 原始私有文件系统中的文件和文件夹，顾名思义，是私有的，更具体地说，是私有的。<a href="https://developer.mozilla.org/docs/Glossary/Origin" rel="noopener">起源</a>一个网站的。 通过键入发现页面的来源<a href="https://developer.mozilla.org/docs/Web/API/Location/origin" rel="noopener"><code>位置.原点</code></a>在开发工具控制台中。 例如，页面的来源<code>https://developer.chrome.com/articles/</code>是<code>https://developer.chrome.com</code>（也就是说，部分<code>/文章</code>是<em>不是</em>的一部分）。 您可以阅读有关起源理论的更多信息<a href="https://web.dev/same-site-same-origin/#origin">理解“同站”和“同源”</a>。 所有共享同源的页面都可以看到同源私有文件系统数据，因此<code>https://developer.chrome.com/docs/extensions/mv3/getstarted/extensions-101/</code>可以看到与前面示例相同的细节。 每个origin都有自己独立的origin私有文件系统，即各origin的origin私有文件系统<code>https://developer.chrome.com</code>与以下之一完全不同，<a href="https://web.dev/"><code>https://web.dev</code></a>。 在Windows上，用户可见文件系统的根目录是<code>C：\</code>。 源私有文件系统的等效项是通过调用异步方法访问的每个源的初始空根目录<a href="https://developer.mozilla.org/docs/Web/API/StorageManager/getDirectory" rel="noopener"><code>navigator.storage.getDirectory()</code></a>。 用户可见文件系统和原始私有文件系统的对比如下图所示。 该图显示，除了根目录之外，其他所有内容在概念上都是相同的，具有文件和文件夹的层次结构，可根据您的数据和存储需求进行组织和安排。</p>
<img alt="Diagram of the user-visible file system and the origin private file system with two exemplary file hierarchies. The entry point for the user-visible file system is a symbolic harddisk, the entry point for the origin private file system is calling of the method 'navigator.storage.getDirectory'." decoding="async" height="722" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format" srcset="https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&amp;w=1600 1600w" width="800">
<h2 id="specifics-of-the-origin-private-file-system">原始私有文件系统的细节<a class="headline-link" href="https://web.dev/origin-private-file-system/#specifics-of-the-origin-private-file-system">#</a></h2>
<p>就像浏览器中的其他存储机制一样（例如，<a href="https://developer.mozilla.org/docs/Web/API/Window/localStorage" rel="noopener">本地存储</a>或者<a href="https://developer.mozilla.org/docs/Web/API/IndexedDB_API/Using_IndexedDB" rel="noopener">索引数据库</a>），原始私有文件系统受浏览器配额限制。 当用户<a href="https://support.google.com/chrome/answer/2392709" rel="noopener">清除所有浏览数据</a>或者<a href="https://developer.chrome.com/docs/devtools/storage/cache/#deletecache" rel="noopener">所有站点数据</a>，原始私有文件系统也将被删除。 称呼<a href="https://developer.mozilla.org/docs/Web/API/StorageManager/estimate" rel="noopener"><code>navigator.storage.estimate()</code></a>并在生成的响应对象中看到<a href="https://developer.mozilla.org/docs/Web/API/StorageManager/estimate#usage" rel="noopener"><code>用法</code></a>条目查看您的应用程序已经消耗了多少存储空间，该存储空间按存储机制细分<a href="https://developer.mozilla.org/docs/Web/API/StorageManager/estimate#usagedetails" rel="noopener"><code>使用详情</code></a>对象，您想要查看的位置<code>文件系统</code>具体条目。 由于原始私有文件系统对用户不可见，因此没有权限提示，也没有安全浏览检查。</p>
<h2 id="getting-access-to-the-root-directory">获取根目录的访问权限<a class="headline-link" href="https://web.dev/origin-private-file-system/#getting-access-to-the-root-directory">#</a></h2>
<p>要访问根目录，请运行以下命令。 您最终会得到一个空目录句柄，更具体地说，是一个<a href="https://developer.mozilla.org/docs/Web/API/FileSystemDirectoryHandle" rel="noopener"><code>文件系统目录句柄</code></a>。</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">常量</span>操作根<span class="token operator">=</span> <span class="token keyword">等待</span>航海家<span class="token punctuation">。</span>贮存<span class="token punctuation">。</span><span class="token function">获取目录</span><span class="token punctuation">（</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br><span class="token comment">// 类型为“directory”的 FileSystemDirectoryHandle</span><br><span class="token comment">// 其名字是“”。</span><br>安慰<span class="token punctuation">。</span><span class="token function">日志</span><span class="token punctuation">（</span>操作根<span class="token punctuation">）</span><span class="token punctuation">;</span></code></pre>
</div><h2 id="main-thread-or-web-worker">主线程或Web Worker<a class="headline-link" href="https://web.dev/origin-private-file-system/#main-thread-or-web-worker">#</a></h2>
<p>有两种方式使用原始私有文件系统：<a href="https://developer.mozilla.org/docs/Glossary/Main_thread" rel="noopener">主线程</a>或在一个<a href="https://developer.mozilla.org/docs/Web/API/Worker" rel="noopener">网络工作者</a>。 Web Workers 无法阻塞主线程，这意味着在此上下文中 API 可以是同步的，这是主线程上通常不允许的模式。 同步 API 可以更快，因为它们避免了处理 Promise，并且文件操作通常在可编译为 WebAssembly 的 C 语言中是同步的。</p>
<div><pre class="language-c"><code class="language-c"><span class="token comment">// 这是同步 C 代码。</span><br>文件<span class="token operator">*</span>F<span class="token punctuation">;</span><br>F<span class="token operator">=</span> <span class="token function">福彭</span><span class="token punctuation">（</span><span class="token string">“示例.txt”</span><span class="token punctuation">,</span> <span class="token string">“w+”</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br><span class="token function">输出量</span><span class="token punctuation">（</span><span class="token string">“一些文字\n”</span><span class="token punctuation">,</span>F<span class="token punctuation">）</span><span class="token punctuation">;</span><br><span class="token function">关闭</span><span class="token punctuation">（</span>F<span class="token punctuation">）</span><span class="token punctuation">;</span></code></pre>
</div><p>如果您需要尽可能最快的文件操作和/或您处理<a href="https://developer.mozilla.org/es/docs/WebAssembly" rel="noopener">网络组装</a>, 跳至<a href="https://example.com/" rel="noopener">在 Web Worker 中使用原始私有文件系统</a>。 否则，您可以继续阅读。</p>
<h2 id="using-the-origin-private-file-system-on-the-main-thread">在主线程上使用原始私有文件系统<a class="headline-link" href="https://web.dev/origin-private-file-system/#using-the-origin-private-file-system-on-the-main-thread">#</a></h2>
<h3 id="creating-new-files-and-folders">创建新文件和文件夹<a class="headline-link" href="https://web.dev/origin-private-file-system/#creating-new-files-and-folders">#</a></h3>
<p>拥有根文件夹后，使用以下命令创建文件和文件夹<a href="https://developer.mozilla.org/docs/Web/API/FileSystemDirectoryHandle/getFileHandle" rel="noopener"><code>获取文件句柄()</code></a>和<a href="https://developer.mozilla.org/docs/Web/API/FileSystemDirectoryHandle/getDirectoryHandle" rel="noopener"><code>获取目录句柄()</code></a>分别方法。 通过传递<a href="https://developer.mozilla.org/docs/Web/API/FileSystemDirectoryHandle/getFileHandle#create" rel="noopener"><code>{创建：真}</code></a>，如果文件或文件夹不存在，则会创建该文件或文件夹。 通过使用新创建的目录作为起点调用这些函数来构建文件层次结构。</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">常量</span>文件句柄<span class="token operator">=</span> <span class="token keyword">等待</span>操作根<br>    <span class="token punctuation">。</span><span class="token function">获取文件句柄</span><span class="token punctuation">（</span><span class="token string">“我的第一个文件”</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">创造</span><span class="token operator">:</span> <span class="token boolean">真的</span><span class="token punctuation">}</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br><span class="token keyword">常量</span>目录句柄<span class="token operator">=</span> <span class="token keyword">等待</span>操作根<br>    <span class="token punctuation">。</span><span class="token function">获取目录句柄</span><span class="token punctuation">（</span><span class="token string">“我的第一个文件夹”</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">创造</span><span class="token operator">:</span> <span class="token boolean">真的</span><span class="token punctuation">}</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br><span class="token keyword">常量</span>嵌套文件句柄<span class="token operator">=</span> <span class="token keyword">等待</span>目录句柄<br>    <span class="token punctuation">。</span><span class="token function">获取文件句柄</span><span class="token punctuation">（</span><span class="token string">'我的第一个嵌套文件'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">创造</span><span class="token operator">:</span> <span class="token boolean">真的</span><span class="token punctuation">}</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br><span class="token keyword">常量</span>嵌套目录句柄<span class="token operator">=</span> <span class="token keyword">等待</span>目录句柄<br>    <span class="token punctuation">。</span><span class="token function">获取目录句柄</span><span class="token punctuation">（</span><span class="token string">“我的第一个嵌套文件夹”</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">创造</span><span class="token operator">:</span> <span class="token boolean">真的</span><span class="token punctuation">}</span><span class="token punctuation">）</span><span class="token punctuation">;</span></code></pre>
</div><img alt="The resulting file hierarchy from the earlier code sample." decoding="async" height="196" loading="lazy" sizes="(min-width: 438px) 438px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format" srcset="https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&amp;w=876 876w" width="438">
<h3 id="accessing-existing-files-and-folders">访问现有文件和文件夹<a class="headline-link" href="https://web.dev/origin-private-file-system/#accessing-existing-files-and-folders">#</a></h3>
<p>如果您知道他们的名字，请通过调用访问以前创建的文件和文件夹<code>获取文件句柄()</code>或者<code>获取目录句柄()</code>方法，传入文件或文件夹的名称。</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">常量</span>现有文件句柄<span class="token operator">=</span> <span class="token keyword">等待</span>操作根<span class="token punctuation">。</span><span class="token function">获取文件句柄</span><span class="token punctuation">（</span><span class="token string">“我的第一个文件”</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br><span class="token keyword">常量</span>现有目录句柄<span class="token operator">=</span> <span class="token keyword">等待</span>操作根<br>    <span class="token punctuation">。</span><span class="token function">获取目录句柄</span><span class="token punctuation">（</span>'我的第一个文件夹<span class="token punctuation">）</span><span class="token punctuation">;</span></code></pre>
</div><h3 id="getting-the-file-associated-with-a-file-handle-for-reading">获取与文件句柄关联的文件以供读取<a class="headline-link" href="https://web.dev/origin-private-file-system/#getting-the-file-associated-with-a-file-handle-for-reading">#</a></h3>
<p>A<code>文件系统文件句柄</code>代表文件系统上的一个文件。 获取关联的<code>文件</code>， 使用<a href="https://developer.mozilla.org/docs/Web/API/FileSystemFileHandle/getFile" rel="noopener"><code>获取文件()</code></a>方法。 A<code>文件</code>对象是一种特定的<a href="https://developer.mozilla.org/es/docs/Web/API/Blob" rel="noopener"><code>斑点</code></a>，并且可以在任何上下文中使用<code>斑点</code>能。 尤其，<a href="https://developer.mozilla.org/es/docs/Web/API/FileReader" rel="noopener"><code>文件阅读器</code></a>,<a href="https://developer.mozilla.org/es/docs/Web/API/URL/createObjectURL" rel="noopener"><code>URL.createObjectURL()</code></a>,<a href="https://developer.mozilla.org/es/docs/Web/API/createImageBitmap" rel="noopener"><code>创建图像位图()</code></a>， 和<a href="https://developer.mozilla.org/docs/Web/API/XMLHttpRequest/send" rel="noopener"><code>XMLHttpRequest.send()</code></a>两者都接受<code>斑点</code>和<code>文件</code>。 如果您愿意，获得<code>文件</code>从一个<code>文件系统文件句柄</code>“释放”数据，以便您可以访问它并将其提供给用户可见的文件系统。</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">常量</span>文件<span class="token operator">=</span> <span class="token keyword">等待</span>文件句柄<span class="token punctuation">。</span><span class="token function">获取文件</span><span class="token punctuation">（</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br>安慰<span class="token punctuation">。</span><span class="token function">日志</span><span class="token punctuation">（</span><span class="token keyword">等待</span>文件<span class="token punctuation">。</span><span class="token function">文本</span><span class="token punctuation">（</span><span class="token punctuation">）</span><span class="token punctuation">）</span><span class="token punctuation">;</span></code></pre>
</div><h3 id="writing-to-a-file-by-streaming">通过流式写入文件<a class="headline-link" href="https://web.dev/origin-private-file-system/#writing-to-a-file-by-streaming">#</a></h3>
<p>通过调用将数据流式传输到文件中<a href="https://developer.mozilla.org/docs/Web/API/FileSystemFileHandle/createWritable" rel="noopener"><code>创建可写()</code></a>这创建了一个<a href="https://developer.mozilla.org/docs/Web/API/FileSystemWritableFileStream" rel="noopener"><code>文件系统可写文件流</code></a>那么你<a href="https://developer.mozilla.org/docs/Web/API/FileSystemWritableFileStream/write" rel="noopener"><code>写（）</code></a>内容。 最后，你需要<a href="https://developer.mozilla.org/docs/Web/API/WritableStream/close" rel="noopener"><code>关闭（）</code></a>溪流。</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">常量</span>内容<span class="token operator">=</span> <span class="token string">“一些文字”</span><span class="token punctuation">;</span><br><span class="token comment">// 获取可写流。</span><br><span class="token keyword">常量</span>可写<span class="token operator">=</span> <span class="token keyword">等待</span>文件句柄<span class="token punctuation">。</span><span class="token function">创建可写</span><span class="token punctuation">（</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br><span class="token comment">// 将文件内容写入流中。</span><br><span class="token keyword">等待</span>可写<span class="token punctuation">。</span><span class="token function">写</span><span class="token punctuation">（</span>内容<span class="token punctuation">）</span><span class="token punctuation">;</span><br><span class="token comment">// 关闭保留内容的流。</span><br><span class="token keyword">等待</span>可写<span class="token punctuation">。</span><span class="token function">关闭</span><span class="token punctuation">（</span><span class="token punctuation">）</span><span class="token punctuation">;</span></code></pre>
</div><h3 id="deleting-files-and-folders">删除文件和文件夹<a class="headline-link" href="https://web.dev/origin-private-file-system/#deleting-files-and-folders">#</a></h3>
<p>通过调用文件或目录句柄的特定删除文件和文件夹<a href="https://developer.mozilla.org/docs/Web/API/FileSystemHandle/remove" rel="noopener"><code>消除（）</code></a>方法。 要删除包含所有子文件夹的文件夹，请传递<a href="https://developer.mozilla.org/docs/Web/API/FileSystemHandle/remove#recursive" rel="noopener"><code>{递归：真}</code></a>选项。</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">等待</span>文件句柄<span class="token punctuation">。</span><span class="token function">消除</span><span class="token punctuation">（</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br><span class="token keyword">等待</span>目录句柄<span class="token punctuation">。</span><span class="token function">消除</span><span class="token punctuation">（</span><span class="token punctuation">{</span><span class="token literal-property property">递归的</span><span class="token operator">:</span> <span class="token boolean">真的</span><span class="token punctuation">}</span><span class="token punctuation">）</span><span class="token punctuation">;</span></code></pre>
</div><aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow">这<code>消除（）</code>该方法目前仅在 Chrome 中实现。 您可以通过以下方式进行功能检测支持<code>FileSystemFileHandle.prototype 中的“删除”</code>。</div></aside>
<p>或者，如果您知道目录中要删除的文件或文件夹的名称，请使用<a href="https://developer.mozilla.org/docs/Web/API/FileSystemDirectoryHandle/removeEntry" rel="noopener"><code>删除条目()</code></a>方法。</p>
<div><pre class="language-js"><code class="language-js">目录句柄<span class="token punctuation">。</span><span class="token function">删除条目</span><span class="token punctuation">（</span><span class="token string">'我的第一个嵌套文件'</span><span class="token punctuation">）</span><span class="token punctuation">;</span></code></pre>
</div><aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow">作为一个快速提示，<code>等待 (等待 navigator.storage.getDirectory()).remove({recursive: true})</code>是清除整个原始私有文件系统的最快方法。</div></aside>
<h3 id="moving-and-renaming-files-and-folders">移动和重命名文件和文件夹<a class="headline-link" href="https://web.dev/origin-private-file-system/#moving-and-renaming-files-and-folders">#</a></h3>
<p>使用以下命令重命名和移动文件和文件夹<a href="https://github.com/whatwg/fs/pull/10" rel="noopener"><code>移动（）</code></a>方法。 移动和重命名可以同时进行，也可以单独进行。</p>
<div><pre class="language-js"><code class="language-js"><span class="token comment">// 重命名文件。</span><br><span class="token keyword">等待</span>文件句柄<span class="token punctuation">。</span><span class="token function">移动</span><span class="token punctuation">（</span><span class="token string">“我的第一个重命名文件”</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br><span class="token comment">// 将文件移动到另一个目录。</span><br><span class="token keyword">等待</span>文件句柄<span class="token punctuation">。</span><span class="token function">移动</span><span class="token punctuation">（</span>嵌套目录句柄<span class="token punctuation">）</span><span class="token punctuation">;</span><br><span class="token comment">// 将文件移动到另一个目录并重命名。</span><br><span class="token keyword">等待</span>文件句柄<br>    <span class="token punctuation">。</span><span class="token function">移动</span><span class="token punctuation">（</span>嵌套目录句柄<span class="token punctuation">,</span> <span class="token string">“我的第一个重命名文件现在是嵌套文件”</span><span class="token punctuation">）</span><span class="token punctuation">;</span></code></pre>
</div><aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow">Chrome 中尚未实现重命名和移动文件夹。 您也无法将文件从原始私有文件系统移动到用户可见的文件系统。 你可以<a href="https://web.dev/origin-private-file-system/#copying-a-file-from-the-origin-private-file-system-to-the-user-visible-file-system">复制</a>不过，他们。</div></aside>
<h3 id="resolving-the-path-of-a-file-or-folder">解析文件或文件夹的路径<a class="headline-link" href="https://web.dev/origin-private-file-system/#resolving-the-path-of-a-file-or-folder">#</a></h3>
<p>要了解给定文件或文件夹相对于参考目录的位置，请使用<a href="https://developer.mozilla.org/docs/Web/API/FileSystemDirectoryHandle/resolve" rel="noopener"><code>解决（）</code></a>方法，传递给它一个<code>文件系统句柄</code>作为论点。 要获取原始私有文件系统中文件或文件夹的完整路径，请使用根目录作为参考目录，通过以下方式获取<code>navigator.storage.getDirectory()</code>。</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">常量</span>相对路径<span class="token operator">=</span> <span class="token keyword">等待</span>操作根<span class="token punctuation">。</span><span class="token function">解决</span><span class="token punctuation">（</span>嵌套目录句柄<span class="token punctuation">）</span><span class="token punctuation">;</span><br><span class="token comment">// `relativePath` 是 `['我的第一个文件夹', '我的第一个嵌套文件夹']`。</span></code></pre>
</div><h3 id="checking-if-two-file-or-folder-handles-point-to-the-same-file-or-folder">检查两个文件或文件夹句柄是否指向同一个文件或文件夹<a class="headline-link" href="https://web.dev/origin-private-file-system/#checking-if-two-file-or-folder-handles-point-to-the-same-file-or-folder">#</a></h3>
<p>有时您有两个句柄，但不知道它们是否指向同一个文件或文件夹。 要检查是否是这种情况，请使用<a href="https://developer.mozilla.org/docs/Web/API/FileSystemHandle/isSameEntry" rel="noopener"><code>isSameEntry()</code></a>方法。</p>
<div><pre class="language-js"><code class="language-js">文件句柄<span class="token punctuation">。</span><span class="token function">是同一个条目</span><span class="token punctuation">（</span>嵌套文件句柄<span class="token punctuation">）</span><span class="token punctuation">;</span><br><span class="token comment">// 返回“假”。</span></code></pre>
</div><h2 id="listing-the-contents-of-a-folder">列出文件夹的内容<a class="headline-link" href="https://web.dev/origin-private-file-system/#listing-the-contents-of-a-folder">#</a></h2>
<p><code>文件系统目录句柄</code>是一个<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Iteration_protocols#the_async_iterator_and_async_iterable_protocols" rel="noopener">异步迭代器</a>你用一个迭代<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/for-await...of" rel="noopener"><code>等待…的</code></a>环形。 作为异步迭代器，它还支持<a href="https://developer.mozilla.org/docs/Web/API/FileSystemDirectoryHandle/entries" rel="noopener"><code>条目（）</code></a>， 这<a href="https://developer.mozilla.org/docs/Web/API/FileSystemDirectoryHandle/values" rel="noopener"><code>值（）</code></a>，以及<a href="https://developer.mozilla.org/docs/Web/API/FileSystemDirectoryHandle/keys" rel="noopener"><code>键()</code></a>方法，您可以根据需要的信息进行选择：</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">为了</span> <span class="token keyword">等待</span> <span class="token punctuation">（</span><span class="token keyword">让</span> <span class="token punctuation">[</span>姓名<span class="token punctuation">,</span>处理<span class="token punctuation">]</span> <span class="token keyword">的</span>目录句柄<span class="token punctuation">）</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><br><span class="token keyword">为了</span> <span class="token keyword">等待</span> <span class="token punctuation">（</span><span class="token keyword">让</span> <span class="token punctuation">[</span>姓名<span class="token punctuation">,</span>处理<span class="token punctuation">]</span> <span class="token keyword">的</span>目录句柄<span class="token punctuation">。</span><span class="token function">条目</span><span class="token punctuation">（</span><span class="token punctuation">）</span><span class="token punctuation">）</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><br><span class="token keyword">为了</span> <span class="token keyword">等待</span> <span class="token punctuation">（</span><span class="token keyword">让</span>处理<span class="token keyword">的</span>目录句柄<span class="token punctuation">。</span><span class="token function">价值观</span><span class="token punctuation">（</span><span class="token punctuation">）</span><span class="token punctuation">）</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><br><span class="token keyword">为了</span> <span class="token keyword">等待</span> <span class="token punctuation">（</span><span class="token keyword">让</span>姓名<span class="token keyword">的</span>目录句柄<span class="token punctuation">。</span><span class="token function">键</span><span class="token punctuation">（</span><span class="token punctuation">）</span><span class="token punctuation">）</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre>
</div><h2 id="recursively-listing-the-contents-of-a-folder-and-all-subfolders">递归列出文件夹及其所有子文件夹的内容<a class="headline-link" href="https://web.dev/origin-private-file-system/#recursively-listing-the-contents-of-a-folder-and-all-subfolders">#</a></h2>
<p>处理异步循环和与递归配对的函数很容易出错。 下面的函数可以作为列出文件夹及其所有子文件夹的内容（包括所有文件及其大小）的起点。 如果您不需要文件大小，则可以简化该功能，如其所示<code>DirectoryEntryPromises.push</code>，不推<code>处理.getFile()</code>承诺，但是<code>处理</code>直接地。</p>
<div><pre class="language-js"><code class="language-js">  <span class="token keyword">常量</span>递归获取目录条目<span class="token operator">=</span> <span class="token keyword">异步</span> <span class="token punctuation">（</span><br>目录句柄<span class="token punctuation">,</span><br>相对路径<span class="token operator">=</span> <span class="token string">'.'</span><span class="token punctuation">,</span><br>  <span class="token punctuation">）</span> <span class="token operator">=&amp;gt;</span> <span class="token punctuation">{</span><br>    <span class="token keyword">常量</span>文件句柄<span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>    <span class="token keyword">常量</span>目录句柄<span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>    <span class="token keyword">常量</span>条目<span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><br>    <span class="token comment">// 获取目录中文件和文件夹的迭代器。</span><br>    <span class="token keyword">常量</span>目录迭代器<span class="token operator">=</span>目录句柄<span class="token punctuation">。</span><span class="token function">价值观</span><span class="token punctuation">（</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br>    <span class="token keyword">常量</span>目录条目承诺<span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>    <span class="token keyword">为了</span> <span class="token keyword">等待</span> <span class="token punctuation">（</span><span class="token keyword">常量</span>处理<span class="token keyword">的</span>目录迭代器<span class="token punctuation">）</span> <span class="token punctuation">{</span><br>      <span class="token keyword">常量</span>嵌套路径<span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>相对路径<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>处理<span class="token punctuation">。</span>姓名<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>      <span class="token keyword">如果</span> <span class="token punctuation">（</span>处理<span class="token punctuation">。</span>种类<span class="token operator">===</span> <span class="token string">'文件'</span><span class="token punctuation">）</span> <span class="token punctuation">{</span><br>文件句柄<span class="token punctuation">。</span><span class="token function">推</span><span class="token punctuation">（</span><span class="token punctuation">{</span>处理<span class="token punctuation">,</span>嵌套路径<span class="token punctuation">}</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br>目录条目承诺<span class="token punctuation">。</span><span class="token function">推</span><span class="token punctuation">（</span><br>处理<span class="token punctuation">。</span><span class="token function">获取文件</span><span class="token punctuation">（</span><span class="token punctuation">）</span><span class="token punctuation">。</span><span class="token function">然后</span><span class="token punctuation">（</span><span class="token punctuation">（</span><span class="token parameter">文件</span><span class="token punctuation">）</span> <span class="token operator">=&amp;gt;</span> <span class="token punctuation">{</span><br>            <span class="token keyword">返回</span> <span class="token punctuation">{</span><br>              <span class="token literal-property property">姓名</span><span class="token operator">:</span>处理<span class="token punctuation">。</span>姓名<span class="token punctuation">,</span><br>              <span class="token literal-property property">种类</span><span class="token operator">:</span>处理<span class="token punctuation">。</span>种类<span class="token punctuation">,</span><br>              <span class="token literal-property property">尺寸</span><span class="token operator">:</span>文件<span class="token punctuation">。</span>尺寸<span class="token punctuation">,</span><br>              <span class="token literal-property property">类型</span><span class="token operator">:</span>文件<span class="token punctuation">。</span>类型<span class="token punctuation">,</span><br>              <span class="token literal-property property">上一次更改</span><span class="token operator">:</span>文件<span class="token punctuation">。</span>上一次更改<span class="token punctuation">,</span><br>              <span class="token literal-property property">相对路径</span><span class="token operator">:</span>嵌套路径<span class="token punctuation">,</span><br>处理<br>            <span class="token punctuation">}</span><span class="token punctuation">;</span><br>          <span class="token punctuation">}</span><span class="token punctuation">）</span><span class="token punctuation">,</span><br>        <span class="token punctuation">）</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span> <span class="token keyword">别的</span> <span class="token keyword">如果</span> <span class="token punctuation">（</span>处理<span class="token punctuation">。</span>种类<span class="token operator">===</span> <span class="token string">'目录'</span><span class="token punctuation">）</span> <span class="token punctuation">{</span><br>目录句柄<span class="token punctuation">。</span><span class="token function">推</span><span class="token punctuation">（</span><span class="token punctuation">{</span>处理<span class="token punctuation">,</span>嵌套路径<span class="token punctuation">}</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br>目录条目承诺<span class="token punctuation">。</span><span class="token function">推</span><span class="token punctuation">（</span><br>          <span class="token punctuation">（</span><span class="token keyword">异步</span> <span class="token punctuation">（</span><span class="token punctuation">）</span> <span class="token operator">=&amp;gt;</span> <span class="token punctuation">{</span><br>            <span class="token keyword">返回</span> <span class="token punctuation">{</span><br>              <span class="token literal-property property">姓名</span><span class="token operator">:</span>处理<span class="token punctuation">。</span>姓名<span class="token punctuation">,</span><br>              <span class="token literal-property property">种类</span><span class="token operator">:</span>处理<span class="token punctuation">。</span>种类<span class="token punctuation">,</span><br>              <span class="token literal-property property">相对路径</span><span class="token operator">:</span>嵌套路径<span class="token punctuation">,</span><br>              <span class="token literal-property property">条目</span><span class="token operator">:</span><br>                  <span class="token keyword">等待</span> <span class="token function">递归获取目录条目</span><span class="token punctuation">（</span>处理<span class="token punctuation">,</span>嵌套路径<span class="token punctuation">）</span><span class="token punctuation">,</span><br>处理<span class="token punctuation">,</span><br>            <span class="token punctuation">}</span><span class="token punctuation">;</span><br>          <span class="token punctuation">}</span><span class="token punctuation">）</span><span class="token punctuation">（</span><span class="token punctuation">）</span><span class="token punctuation">,</span><br>        <span class="token punctuation">）</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">常量</span>目录条目<span class="token operator">=</span> <span class="token keyword">等待</span>承诺<span class="token punctuation">。</span><span class="token function">全部</span><span class="token punctuation">（</span>目录条目承诺<span class="token punctuation">）</span><span class="token punctuation">;</span><br>目录条目<span class="token punctuation">。</span><span class="token function">对于每个</span><span class="token punctuation">（</span><span class="token punctuation">（</span><span class="token parameter">目录项</span><span class="token punctuation">）</span> <span class="token operator">=&amp;gt;</span> <span class="token punctuation">{</span><br>条目<span class="token punctuation">[</span>目录项<span class="token punctuation">。</span>姓名<span class="token punctuation">]</span> <span class="token operator">=</span>目录项<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br>    <span class="token keyword">返回</span>条目<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
</div><h2 id="using-the-origin-private-file-system-in-a-web-worker">在 Web Worker 中使用原始私有文件系统<a class="headline-link" href="https://web.dev/origin-private-file-system/#using-the-origin-private-file-system-in-a-web-worker">#</a></h2>
<p>如前所述，Web Workers 无法阻止主线程，这就是在这种情况下允许使用同步方法的原因。</p>
<h3 id="getting-a-synchronous-access-handle">获取同步访问句柄<a class="headline-link" href="https://web.dev/origin-private-file-system/#getting-a-synchronous-access-handle">#</a></h3>
<p>最快的文件操作的入口点是<a href="https://developer.mozilla.org/docs/Web/API/FileSystemSyncAccessHandle" rel="noopener"><code>文件系统同步访问句柄</code></a>，从常规获得<a href="https://developer.mozilla.org/docs/Web/API/FileSystemFileHandle" rel="noopener"><code>文件系统文件句柄</code></a>通过致电<a href="https://developer.mozilla.org/docs/Web/API/FileSystemFileHandle/createSyncAccessHandle" rel="noopener"><code>创建同步访问句柄()</code></a>。</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">常量</span>文件句柄<span class="token operator">=</span> <span class="token keyword">等待</span>操作根<br>    <span class="token punctuation">。</span><span class="token function">获取文件句柄</span><span class="token punctuation">（</span><span class="token string">'我的高速文件.txt'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">创造</span><span class="token operator">:</span> <span class="token boolean">真的</span><span class="token punctuation">}</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br><span class="token keyword">常量</span>同步访问句柄<span class="token operator">=</span> <span class="token keyword">等待</span>文件句柄<span class="token punctuation">。</span><span class="token function">创建同步访问句柄</span><span class="token punctuation">（</span><span class="token punctuation">）</span><span class="token punctuation">;</span></code></pre>
</div><aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow">这可能看起来令人困惑，但实际上你得到了一个<em>同步</em> <code>文件系统同步访问句柄</code>从常规的<code>文件系统文件句柄</code>。 另请注意，<code>创建同步访问句柄()</code>方法是<em>异步</em>， 尽管<code>同步</code>以它的名义。</div></aside>
<h3 id="synchronous-in-place-file-methods">同步就地文件方法<a class="headline-link" href="https://web.dev/origin-private-file-system/#synchronous-in-place-file-methods">#</a></h3>
<p>一旦拥有同步访问句柄，您就可以访问所有同步的快速就地文件方法。</p>
<ul>
<li><a href="https://developer.mozilla.org/docs/Web/API/FileSystemSyncAccessHandle/getSize" rel="noopener"><code>获取大小()</code></a>：返回文件的大小（以字节为单位）。</li>
<li><a href="https://developer.mozilla.org/docs/Web/API/FileSystemSyncAccessHandle/write" rel="noopener"><code>写（）</code></a>：将缓冲区的内容写入（可选）给定的偏移量，并返回写入的字节数。 检查返回的写入字节数允许调用者检测和处理错误和部分写入。</li>
<li><a href="https://developer.mozilla.org/docs/Web/API/FileSystemSyncAccessHandle/read" rel="noopener"><code>读（）</code></a>：将文件的内容读入缓冲区，可以选择在给定的偏移量处。</li>
<li><a href="https://developer.mozilla.org/docs/Web/API/FileSystemSyncAccessHandle/truncate" rel="noopener"><code>截短（）</code></a>：将文件大小调整为给定大小。</li>
<li><a href="https://developer.mozilla.org/docs/Web/API/FileSystemSyncAccessHandle/flush" rel="noopener"><code>冲洗（）</code></a>：确保文件的内容包含通过以下方式完成的所有修改<code>写（）</code>。</li>
<li><a href="https://developer.mozilla.org/docs/Web/API/FileSystemSyncAccessHandle/close" rel="noopener"><code>关闭（）</code></a>：关闭访问句柄。</li>
</ul>
<p>这是一个使用上述所有方法的示例。</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">常量</span>操作根<span class="token operator">=</span> <span class="token keyword">等待</span>航海家<span class="token punctuation">。</span>贮存<span class="token punctuation">。</span><span class="token function">获取目录</span><span class="token punctuation">（</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br><span class="token keyword">常量</span>文件句柄<span class="token operator">=</span> <span class="token keyword">等待</span>操作根<span class="token punctuation">。</span><span class="token function">获取文件句柄</span><span class="token punctuation">（</span><span class="token string">'快速地'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">创造</span><span class="token operator">:</span> <span class="token boolean">真的</span><span class="token punctuation">}</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br><span class="token keyword">常量</span>访问句柄<span class="token operator">=</span> <span class="token keyword">等待</span>文件句柄<span class="token punctuation">。</span><span class="token function">创建同步访问句柄</span><span class="token punctuation">（</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br><br><span class="token keyword">常量</span>文本编码器<span class="token operator">=</span> <span class="token keyword">新的</span> <span class="token class-name">文本编码器</span><span class="token punctuation">（</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br><span class="token keyword">常量</span>文本解码器<span class="token operator">=</span> <span class="token keyword">新的</span> <span class="token class-name">文本解码器</span><span class="token punctuation">（</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br><br><span class="token comment">// 初始化该变量以获取文件的大小。</span><br><span class="token keyword">让</span>尺寸<span class="token punctuation">;</span><br><span class="token comment">// 文件的当前大小，最初为“0”。</span><br>尺寸<span class="token operator">=</span>访问句柄<span class="token punctuation">。</span><span class="token function">获取大小</span><span class="token punctuation">（</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br><span class="token comment">// 对内容进行编码以写入文件。</span><br><span class="token keyword">常量</span>内容<span class="token operator">=</span>文本编码器<span class="token punctuation">。</span><span class="token function">编码</span><span class="token punctuation">（</span><span class="token string">“一些文字”</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br><span class="token comment">// 将内容写入文件开头。</span><br>访问句柄<span class="token punctuation">。</span><span class="token function">写</span><span class="token punctuation">（</span>内容<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">在</span><span class="token operator">:</span>尺寸<span class="token punctuation">}</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br><span class="token comment">// 刷新更改。</span><br>访问句柄<span class="token punctuation">。</span><span class="token function">冲水</span><span class="token punctuation">（</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br><span class="token comment">// 文件的当前大小，现在为“9”（“Some text”的长度）。</span><br>尺寸<span class="token operator">=</span>访问句柄<span class="token punctuation">。</span><span class="token function">获取大小</span><span class="token punctuation">（</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br><br><span class="token comment">// 编码更多内容以写入文件。</span><br><span class="token keyword">常量</span>更多内容<span class="token operator">=</span>文本编码器<span class="token punctuation">。</span><span class="token function">编码</span><span class="token punctuation">（</span><span class="token string">“更多内容”</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br><span class="token comment">// 将内容写入文件末尾。</span><br>访问句柄<span class="token punctuation">。</span><span class="token function">写</span><span class="token punctuation">（</span>更多内容<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">在</span><span class="token operator">:</span>尺寸<span class="token punctuation">}</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br><span class="token comment">// 刷新更改。</span><br>访问句柄<span class="token punctuation">。</span><span class="token function">冲水</span><span class="token punctuation">（</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br><span class="token comment">// 文件的当前大小，现在为“21”（长度</span><br><span class="token comment">//“一些文本更多内容”）。</span><br>尺寸<span class="token operator">=</span>访问句柄<span class="token punctuation">。</span><span class="token function">获取大小</span><span class="token punctuation">（</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br><br><span class="token comment">// 准备文件长度的数据视图。</span><br><span class="token keyword">常量</span>数据视图<span class="token operator">=</span> <span class="token keyword">新的</span> <span class="token class-name">数据视图</span><span class="token punctuation">（</span><span class="token keyword">新的</span> <span class="token class-name">数组缓冲区</span><span class="token punctuation">（</span>尺寸<span class="token punctuation">）</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br><br><span class="token comment">// 将整个文件读入数据视图。</span><br>访问句柄<span class="token punctuation">。</span><span class="token function">读</span><span class="token punctuation">（</span>数据视图<span class="token punctuation">）</span><span class="token punctuation">;</span><br><span class="token comment">// 记录`“一些文本更多内容”`。</span><br>安慰<span class="token punctuation">。</span><span class="token function">日志</span><span class="token punctuation">（</span>文本解码器<span class="token punctuation">。</span><span class="token function">解码</span><span class="token punctuation">（</span>数据视图<span class="token punctuation">）</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br><br><span class="token comment">// 从偏移量 9 开始读入数据视图。</span><br>访问句柄<span class="token punctuation">。</span><span class="token function">读</span><span class="token punctuation">（</span>数据视图<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">在</span><span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">}</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br><span class="token comment">// 记录“更多内容”。</span><br>安慰<span class="token punctuation">。</span><span class="token function">日志</span><span class="token punctuation">（</span>文本解码器<span class="token punctuation">。</span><span class="token function">解码</span><span class="token punctuation">（</span>数据视图<span class="token punctuation">）</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br><br><span class="token comment">// 4 个字节后截断文件。</span><br>访问句柄<span class="token punctuation">。</span><span class="token function">截短</span><span class="token punctuation">（</span><span class="token number">4</span><span class="token punctuation">）</span><span class="token punctuation">;</span></code></pre>
</div><aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow">请注意，第一个参数为<code>读（）</code>和<code>写（）</code>是一个<a href="https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer"><code>数组缓冲区</code></a>或一个<code>数组缓冲区视图</code>像一个<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/DataView"><code>数据视图</code></a>。 您不能直接操作 a 的内容<code>数组缓冲区</code>。 相反，您创建其中之一<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/TypedArray">类型化数组对象</a>像一个<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Int8Array"><code>整型8数组</code></a>或一个<code>数据视图</code>对象以特定格式表示缓冲区，并使用它来读取和写入缓冲区的内容。</div></aside>
<h2 id="copying-a-file-from-the-origin-private-file-system-to-the-user-visible-file-system">将文件从原始私有文件系统复制到用户可见文件系统<a class="headline-link" href="https://web.dev/origin-private-file-system/#copying-a-file-from-the-origin-private-file-system-to-the-user-visible-file-system">#</a></h2>
<p>如上所述，无法将文件从原始私有文件系统移动到用户可见的文件系统，但您可以复制文件。 自从<code>显示保存文件选择器()</code>仅暴露在主线程上，但不在 Worker 线程中，请务必在那里运行代码。</p>
<div><pre class="language-js"><code class="language-js"><span class="token comment">// 在主线程上，而不是在 Worker 中。 这假设</span><br><span class="token comment">// `fileHandle` 就是你获取到的 `FileSystemFileHandle`</span><br><span class="token comment">// Worker 中的 `FileSystemSyncAccessHandle`</span><br><span class="token comment">// 线。 一定要先关闭Worker线程中的文件。</span><br><span class="token keyword">常量</span>文件句柄<span class="token operator">=</span> <span class="token keyword">等待</span>操作根<span class="token punctuation">。</span><span class="token function">获取文件句柄</span><span class="token punctuation">（</span><span class="token string">'快速地'</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br><span class="token keyword">尝试</span> <span class="token punctuation">{</span><br>  <span class="token comment">// 获取用户可见文件系统中新文件的文件句柄</span><br>  <span class="token comment">// 与原始私有文件系统中的文件同名。</span><br>  <span class="token keyword">常量</span>保存句柄<span class="token operator">=</span> <span class="token keyword">等待</span> <span class="token function">显示保存文件选择器</span><span class="token punctuation">（</span><span class="token punctuation">{</span><br>    <span class="token literal-property property">建议名称</span><span class="token operator">:</span>文件句柄<span class="token punctuation">。</span>姓名<span class="token operator">||</span> <span class="token string">”</span><br>  <span class="token punctuation">}</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br>  <span class="token keyword">常量</span>可写<span class="token operator">=</span> <span class="token keyword">等待</span>保存句柄<span class="token punctuation">。</span><span class="token function">创建可写</span><span class="token punctuation">（</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br>  <span class="token keyword">等待</span>可写<span class="token punctuation">。</span><span class="token function">写</span><span class="token punctuation">（</span><span class="token keyword">等待</span>文件句柄<span class="token punctuation">。</span><span class="token function">获取文件</span><span class="token punctuation">（</span><span class="token punctuation">）</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br>  <span class="token keyword">等待</span>可写<span class="token punctuation">。</span><span class="token function">关闭</span><span class="token punctuation">（</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span> <span class="token keyword">抓住</span> <span class="token punctuation">（</span>呃<span class="token punctuation">）</span> <span class="token punctuation">{</span><br>安慰<span class="token punctuation">。</span><span class="token function">错误</span><span class="token punctuation">（</span>呃<span class="token punctuation">。</span>姓名<span class="token punctuation">,</span>呃<span class="token punctuation">。</span>信息<span class="token punctuation">）</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</div><h2 id="debugging-the-origin-private-file-system">调试原始私有文件系统<a class="headline-link" href="https://web.dev/origin-private-file-system/#debugging-the-origin-private-file-system">#</a></h2>
<p>直到添加内置 DevTools 支持（请参阅<a href="https://crbug.com/1284595" rel="noopener">crbug/1284595</a>）， 使用<a href="https://chrome.google.com/webstore/detail/opfs-explorer/acndjpgkpaclldomagafnognkcgjignd" rel="noopener">OPFS浏览器</a>用于调试原始私有文件系统的 Chrome 扩展。 上面的屏幕截图来自该部分<a href="https://web.dev/origin-private-file-system/#creating-new-files-and-folders">创建新文件和文件夹</a>顺便说一句，是直接从扩展中获取的。</p>
<img alt="The OPFS Explorer Chrome DevTools extension in the Chrome Web Store." decoding="async" height="612" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format" srcset="https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&amp;w=1600 1600w" width="800">
<p>安装扩展程序后，打开 Chrome DevTools，选择<strong>OPFS浏览器</strong>选项卡，然后您就可以检查文件层次结构了。 通过单击文件名将文件从原始私有文件系统保存到用户可见的文件系统，并通过单击垃圾桶图标删除文件和文件夹。</p>
<h2 id="demo">演示<a class="headline-link" href="https://web.dev/origin-private-file-system/#demo">#</a></h2>
<p>查看正在运行的原始私有文件系统（如果您安装了 OPFS Explorer 扩展）<a href="https://sqlite-wasm-opfs.glitch.me/" rel="noopener">演示</a>使用它作为编译为 WebAssembly 的 SQLite 数据库的后端。 请务必查看<a href="https://glitch.com/edit/#!/sqlite-wasm-opfs" rel="noopener">Glitch 上的源代码</a>。 请注意，下面的嵌入版本不使用原始私有文件系统后端（因为 iframe 是跨域的），但是当您在单独的选项卡中打开演示时，它会使用原始私有文件系统后端。</p>
<div class="glitch-embed-wrap" style="height: 420px; width: 100%;">
  <iframe allow="camera; clipboard-read; clipboard-write; encrypted-media; geolocation; microphone; midi" loading="lazy" src="https://glitch.com/embed/#!/embed/sqlite-wasm-opfs?attributionHidden=true&amp;sidebarCollapsed=true&amp;previewSize=100" style="height: 100%; width: 100%; border: 0;" title="sqlite-wasm-opfs on Glitch"></iframe>
</div>
<h2 id="conclusions">结论<a class="headline-link" href="https://web.dev/origin-private-file-system/#conclusions">#</a></h2>
<p>WHATWG 指定的原始私有文件系统塑造了我们在网络上使用文件和与之交互的方式。 它实现了用户可见文件系统无法实现的新用例。 所有主要浏览器供应商——Apple、Mozilla 和 Google——都参与其中并拥有共同的愿景。 原始私有文件系统的开发在很大程度上是一项协作工作，开发人员和用户的反馈对其进展至关重要。 随着我们不断完善和改进标准，反馈<a href="https://github.com/whatwg/fs" rel="noopener">Whatwg/fs 存储库</a>欢迎以问题或请求请求的形式提出。</p>
<h2 id="related-links">相关链接<a class="headline-link" href="https://web.dev/origin-private-file-system/#related-links">#</a></h2>
<ul>
<li><a href="https://fs.spec.whatwg.org/" rel="noopener">文件系统标准规范</a></li>
<li><a href="https://github.com/whatwg/fs" rel="noopener">文件系统标准存储库</a></li>
<li><a href="https://webkit.org/blog/12257/the-file-system-access-api-with-origin-private-file-system/" rel="noopener">带有 Origin 私有文件系统 WebKit 的文件系统 API 帖子</a></li>
<li><a href="https://chrome.google.com/webstore/detail/opfs-explorer/acndjpgkpaclldomagafnognkcgjignd" rel="noopener">OPFS 资源管理器扩展</a></li>
</ul>
<h2 id="acknowledgements">致谢<a class="headline-link" href="https://web.dev/origin-private-file-system/#acknowledgements">#</a></h2>
<p>这篇文章的评论者是<a href="https://github.com/a-sully" rel="noopener">奥斯汀·萨利</a>,<a href="https://ca.linkedin.com/in/enoel19" rel="noopener">艾蒂安·诺尔</a>， 和<a href="https://rachelandrew.co.uk/" rel="noopener">雷切尔·安德鲁</a>。 英雄形象由<a href="https://unsplash.com/@rumpf" rel="noopener">克里斯蒂娜·伦普夫</a>在<a href="https://unsplash.com/photos/XWDMmk-yW7Q" rel="noopener">未飞溅</a>。</p>
<hr><aside class="aside flow bg-state-good-bg color-state-good-text"><p class="cluster "><span class="aside__icon box-block "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128" style="enable-background:new 0 0 128 128" xml:space="preserve"><path d="M7.5 123.3c2.2 2.4 11.6-1.9 19-5.3C32 115.4 54 106.3 65 101.6c3-1.2 7.3-2.9 10.4-7 2.8-3.6 10-19-4.6-34.7-15-16-30.4-11.5-36.2-7.5A28.5 28.5 0 0 0 27.3 63c-5.2 11.6-12.7 32.9-15.7 41.3-2.3 6.1-6.4 16.5-4.1 19z" fill="currentColor"></path><path d="M18 86.8s.7 6.5 6.1 14.6c6.3 9.6 15 11.2 15 11.2l-5.8 2.4s-6.5-2-12.7-10.4c-3.8-5.3-5-11.6-5-11.6l2.3-6.2zm-5.6 15.4s1.5 5.6 4.7 9.7c3.8 5 8.6 6.5 8.6 6.5l-4.5 2s-3.3-.8-7-5.5c-2.9-3.5-3.7-7.6-3.7-7.6l1.9-5.1z" fill="currentColor"></path><path d="M10 116.4c-.2-.5-.2-1 0-1.4l25.4-53 4.2 16-26.8 38.7c-.7 1-2.3 1-2.8-.2z" style="opacity:.44" fill="currentColor"></path><path d="M41.6 83.2c12 14 25.5 12.2 30 8.6 4.5-3.5 8.1-15.6-3.7-29.3C55.3 48.2 41.3 52.2 38 55.3s-7.4 15.1 3.5 27.9z" style="fill: var(--color-state-good-bg);"></path><path d="M82.5 89c-4.3-3.7-6.6-3-9.7-1.8a26 26 0 0 1-18.9 0l2.6-6.2c5 1.7 8.7 1 12-1 4-2.4 9.6-5.6 18.3 1.6 3.6 3 7.3 5.1 10 4.2 2-.7 3-3.6 3.6-6l.2-1.3c.4-3.7 1.2-11.6 7.1-15.7 6.4-4.3 13-4.3 13-4.3l1.2 12c-3-.5-5.2.1-7 1-6.7 3.8-.8 18.2-11.3 23-10.1 4.8-18.4-3.3-21-5.6zM45.4 73.7l-4.3-3.9c8-8.9 5.8-15.4 4.3-20.2A26.4 26.4 0 0 1 44 38.8c-3-3.8-4.4-7.8-4.5-8-1.9-5.7-.5-11.2 2.8-16.4C48.7 4 60.5 4 60.5 4l4 10.5c-3-.1-12.8 0-15.8 4.8-3.8 6-1.3 9.6-1.2 10 .8-1 1.5-1.7 2.2-2.3 4.8-4.2 9-4.8 11.6-4.6a11 11 0 0 1 7.6 4.2c2 2.7 3 6.2 2.3 9.4a11 11 0 0 1-5.8 7.4 16 16 0 0 1-13 1.5v.3l.6 2c1.8 5.4 5 14.1-7.6 26.5zm7.4-37.5c.5.4 1.1.8 1.8 1 2 .8 4.4.6 7-.8 1.5-.9 1.7-1.7 1.7-2 .2-.9 0-2-.7-2.8a2.8 2.8 0 0 0-2-1.2c-1.6-.2-3.6.8-5.6 2.6-1 .9-1.7 2-2.3 3.2zm10 39.1-6.2-.1s3-16.7 12.5-19.5c1.8-.5 3.7-1 5.7-1.3l4-.8c.1-1.6-.5-3.6-1.3-5.9-.6-1.7-1.2-3.5-1.5-5.5-.6-3.9.4-7.3 3-9.6 3-2.9 7.9-3.8 13.4-2.5 3.2.7 5.5 2.2 7.6 3.6 2.9 2 4.6 3 8.2.5 4.3-2.9-1.4-14.3-4.4-21l11.3-4.6c1.5 3.3 8.8 20.3 4 30a11.5 11.5 0 0 1-8.1 6.2c-8 1.8-12.6-1.3-16-3.6-1.6-1-3-1.9-4.6-2.3-10.6-3 4.2 12.6-2.7 19.6-4.2 4.2-14.4 5.3-15 5.5-6.6 1.6-10 11.3-10 11.3z" fill="currentColor"></path><path d="M44 38.8c-.2 2.2-.3 3.5.3 6.4 2.7 2 8.7 2 8.7 2l-.6-2v-.3c-6.1-3-8.4-6.1-8.4-6.1zm-12.5 9.8-10.3-5 5.1-7.5 8.2 5.4zm-15.2-14A26 26 0 0 1 5 28.9l5.2-6c1.6 1.2 5 3.5 7.2 3.8l-1.1 7.9zM25.6 21.3 18 18.8a18 18 0 0 0 .7-8.3l7.9-1.3c.6 4 .3 8.2-1 12zM73 15.3l7.9-1.7L83 23.9l-7.8 1.7zM92.5 17.8 87 12c2.8-2.8 3.5-6.3 3.5-6.4L98.4 7c-.1.6-1.1 6.3-6 10.9zM95.5 48.6l7-2.2 2.3 7.7-7 2.1zM97.5 113l-7.9-1c.3-2.7-1.8-6.2-2.4-7l6.4-4.8c.5.6 4.7 6.4 4 12.8zM120.4 102.9c-3-.5-6-.6-9.1-.5l-.3-8c3.5-.2 7 0 10.6.6l-1.2 7.9zM109.6 113.9l5.6-5.7 7.8 7.6-5.6 5.7zM93.1 63.3 99 70l-6.6 5.8-5.8-6.6z" fill="currentColor"></path></svg> </span><strong>Celebration</strong></p><div class=" flow"> The origin private file system allows web apps to store and manipulate files in their very own origin-specific virtual filesystem, including low-level file manipulation, byte-by-byte access, and file streaming. The origin private file system is supported across all major browsers. </div></aside>
<h2 id="browser-support">Browser support <a class="headline-link" href="https://web.dev/origin-private-file-system/#browser-support">#</a></h2>
<p>The origin private file system is supported by modern browsers and is standardized by the Web Hypertext Application Technology Working Group (<a href="https://whatwg.org/" rel="noopener">WHATWG</a>) in the <a href="https://fs.spec.whatwg.org/" rel="noopener">File System Living Standard</a>.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 86, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      86
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 111, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      111
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 86, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      86
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 15.2, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      15.2
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/API/StorageManager/getDirectory#browser_compatibility" target="_blank">Source</a>
</div>
<h2 id="motivation">Motivation <a class="headline-link" href="https://web.dev/origin-private-file-system/#motivation">#</a></h2>
<p>When you think of files on your computer, you probably think about a file hierarchy: files organized in folders that you can explore with your operating system's file explorer. For example, on Windows, for a user called Tom, their To Do list might live in <code>C:\Users\Tom\Documents\ToDo.txt</code>. In this example, <code>ToDo.txt</code> is the file name, and <code>Users</code>, <code>Tom</code>, and <code>Documents</code> are folder names. <code>C:\</code> on Windows  represents the root directory of the drive.</p>
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> In this article, I use the terms <em>folder</em> and <em>directory</em> interchangeably, disregarding the difference between the file system concept (directory) and the graphical user interface <a href="https://en.wikipedia.org/wiki/Directory_%28computing%29#Folder_metaphor">metaphor</a> (folder). </div></aside>
<h3 id="traditional-way-of-working-with-files-on-the-web">Traditional way of working with files on the web <a class="headline-link" href="https://web.dev/origin-private-file-system/#traditional-way-of-working-with-files-on-the-web">#</a></h3>
<p>To edit the To Do list in a web application, this is the traditional flow:</p>
<ol>
<li>The user <em>uploads</em> the file to a server or <em>opens</em> it on the client with <a href="https://developer.mozilla.org/docs/Web/HTML/Element/input/file" rel="noopener"><code>&lt;input type="file"&gt;</code></a>.</li>
<li>The user makes their changes, and then <em>downloads</em> the resulting file with an injected <a href="https://developer.mozilla.org/docs/Web/API/HTMLAnchorElement/download" rel="noopener"><code>&lt;a download="ToDo.txt&gt;</code></a> that you programmatically <a href="https://developer.mozilla.org/docs/Web/API/HTMLElement/click" rel="noopener"><code>click()</code></a> via JavaScript.</li>
<li>For opening folders, you use a special attribute in <a href="https://developer.mozilla.org/docs/Web/API/HTMLInputElement/webkitdirectory" rel="noopener"><code>&lt;input type="file" webkitdirectory&gt;</code></a>, which, despite its proprietary name, has practically universal browser support.</li>
</ol>
<h3 id="modern-way-of-working-with-files-on-the-web">Modern way of working with files on the web <a class="headline-link" href="https://web.dev/origin-private-file-system/#modern-way-of-working-with-files-on-the-web">#</a></h3>
<p>This flow is not representative of how users think of editing files, and means users end up with downloaded <em>copies</em> of their input files. Therefore,  the File System Access API introduced three picker methods—<a href="https://developer.mozilla.org/docs/Web/API/Window/showOpenFilePicker" rel="noopener"><code>showOpenFilePicker()</code></a>, <a href="https://developer.mozilla.org/docs/Web/API/Window/showSaveFilePicker" rel="noopener"><code>showSaveFilePicker()</code></a>, and <a href="https://developer.mozilla.org/docs/Web/API/Window/showDirectoryPicker" rel="noopener"><code>showDirectoryPicker()</code></a>—that do exactly what their name suggests. They enable a flow as follows:</p>
<ol>
<li>Open <code>ToDo.txt</code> with <code>showOpenFilePicker()</code>, and get a <a href="https://developer.mozilla.org/docs/Web/API/FileSystemFileHandle" rel="noopener"><code>FileSystemFileHandle</code></a> object.</li>
<li>From the <code>FileSystemFileHandle</code> object, get a <a href="https://developer.mozilla.org/docs/Web/API/File" rel="noopener"><code>File</code></a> by calling the file handle's <a href="https://developer.mozilla.org/docs/Web/API/FileSystemFileHandle/getFile" rel="noopener"><code>getFile()</code></a> method.</li>
<li>Modify the file, then call <a href="https://developer.mozilla.org/docs/Web/API/FileSystemHandle/requestPermission" rel="noopener"><code>requestPermission({mode: 'readwrite'})</code></a> on the handle.</li>
<li>If the user accepts the permission request, save the changes back to the original file.</li>
<li>Alternatively, call <code>showSaveFilePicker()</code> and let the user pick a new file. (If the user picks a previously opened file, its contents will be overwritten.) For repeat saves, you can keep the file handle around, so you don't have to show the file save dialog again.</li>
</ol>
<h3 id="restrictions-of-working-with-files-on-the-web">Restrictions of working with files on the web <a class="headline-link" href="https://web.dev/origin-private-file-system/#restrictions-of-working-with-files-on-the-web">#</a></h3>
<p>Files and folders that are accessible via these methods live in what can be called the <em>user-visible</em> file system. Files saved from the web, and executable files specifically, are marked with the <a href="https://textslashplain.com/2016/04/04/downloads-and-the-mark-of-the-web/" rel="noopener">mark of the web</a>, so there's an additional warning the operating system can show before a potentially dangerous file gets executed. As an additional security feature, files obtained from the web are also protected by <a href="https://safebrowsing.google.com/" rel="noopener">Safe Browsing</a>, which, for the sake of simplicity and in the context of this article, you can think of as a cloud-based virus scan. When you write data to a file using the File System Access API, writes are  not in-place, but use a temporary file. The file itself is not modified unless it passes all these security checks. As you can imagine, this work makes file operations relatively slow, despite improvements applied where possible, for example, <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=1413443" rel="noopener">on macOS</a>. Still every <a href="https://developer.mozilla.org/docs/Web/API/FileSystemWritableFileStream/write" rel="noopener"><code>write()</code></a> call is self-contained, so under the hood it opens the file, seeks to the given offset, and finally writes data.</p>
<h3 id="files-as-the-foundation-of-processing">Files as the foundation of processing <a class="headline-link" href="https://web.dev/origin-private-file-system/#files-as-the-foundation-of-processing">#</a></h3>
<p>At the same time, files are an excellent way to record data. For example, <a href="https://www.sqlite.org/" rel="noopener">SQLite</a> stores entire databases in a single file. Another example are <a href="https://en.wikipedia.org/wiki/Mipmap" rel="noopener">mipmaps</a> used in image processing. Mipmaps are pre-calculated, optimized sequences of images, each of which is a progressively lower resolution representation of the previous, which makes many operations like zooming faster. So how can web applications get the benefits of files, but without the performance costs of traditional web-based file processing? The answer is the <em>origin private file system</em>.</p>
<h2 id="the-user-visible-versus-the-origin-private-file-system">The user-visible versus the origin private file system <a class="headline-link" href="https://web.dev/origin-private-file-system/#the-user-visible-versus-the-origin-private-file-system">#</a></h2>
<p>Unlike the user-visible file system browsed via the operating system's file explorer, with files and folders you can read, write, move, and rename, the origin private file system is not meant to be seen by users. Files and folders in the origin private file system, as the name suggests, are private, and more concretely, private to the <a href="https://developer.mozilla.org/docs/Glossary/Origin" rel="noopener">origin</a> of a site. Discover the origin of a page by typing <a href="https://developer.mozilla.org/docs/Web/API/Location/origin" rel="noopener"><code>location.origin</code></a> in the DevTools Console. For example, the origin of the page <code>https://developer.chrome.com/articles/</code> is <code>https://developer.chrome.com</code> (that is, the part <code>/articles</code> is <em>not</em> part of the origin). You can read more about the theory of origins in <a href="https://web.dev/same-site-same-origin/#origin">Understanding "same-site" and "same-origin"</a>. All pages that share the same origin can see the same origin private file system data, so <code>https://developer.chrome.com/docs/extensions/mv3/getstarted/extensions-101/</code> can see the same details as the previous example. Each origin has its own independent origin private file system, which means the origin private file system of <code>https://developer.chrome.com</code> is completely distinct from the one of, say, <a href="https://web.dev/"><code>https://web.dev</code></a>. On Windows, the root directory of the user-visible file system is <code>C:\</code>. The equivalent for the origin private file system is an initially empty root directory per origin accessed by calling the asynchronous method <a href="https://developer.mozilla.org/docs/Web/API/StorageManager/getDirectory" rel="noopener"><code>navigator.storage.getDirectory()</code></a>. For a comparison of the user-visible file system and the origin private file system, see the following diagram. The diagram shows that apart from the root directory, everything else is conceptually the same, with a hierarchy of files and folders to organize and arrange as needed for your data and storage needs.</p>
<img alt="Diagram of the user-visible file system and the origin private file system with two exemplary file hierarchies. The entry point for the user-visible file system is a symbolic harddisk, the entry point for the origin private file system is calling of the method 'navigator.storage.getDirectory'." decoding="async" height="722" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format" srcset="https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&amp;w=1600 1600w" width="800">
<h2 id="specifics-of-the-origin-private-file-system">Specifics of the origin private file system <a class="headline-link" href="https://web.dev/origin-private-file-system/#specifics-of-the-origin-private-file-system">#</a></h2>
<p>Just like other storage mechanisms in the browser (for example, <a href="https://developer.mozilla.org/docs/Web/API/Window/localStorage" rel="noopener">localStorage</a> or <a href="https://developer.mozilla.org/docs/Web/API/IndexedDB_API/Using_IndexedDB" rel="noopener">IndexedDB</a>), the origin private file system is subject to browser quota restrictions. When a user <a href="https://support.google.com/chrome/answer/2392709" rel="noopener">clears all browsing data</a> or <a href="https://developer.chrome.com/docs/devtools/storage/cache/#deletecache" rel="noopener">all site data</a>, the origin private file system will be deleted, too. Call <a href="https://developer.mozilla.org/docs/Web/API/StorageManager/estimate" rel="noopener"><code>navigator.storage.estimate()</code></a> and in the resulting response object see the <a href="https://developer.mozilla.org/docs/Web/API/StorageManager/estimate#usage" rel="noopener"><code>usage</code></a> entry to see how much storage your app already consumes, which is broken down by storage mechanism in the <a href="https://developer.mozilla.org/docs/Web/API/StorageManager/estimate#usagedetails" rel="noopener"><code>usageDetails</code></a> object, where you want to look at the <code>fileSystem</code> entry specifically. Since the origin private file system is not visible to the user, there are no permissions prompts and no Safe Browsing checks.</p>
<h2 id="getting-access-to-the-root-directory">Getting access to the root directory <a class="headline-link" href="https://web.dev/origin-private-file-system/#getting-access-to-the-root-directory">#</a></h2>
<p>To get access to the root directory, run the command below. You end up with an empty directory handle, more specifically, a <a href="https://developer.mozilla.org/docs/Web/API/FileSystemDirectoryHandle" rel="noopener"><code>FileSystemDirectoryHandle</code></a>.</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> opfsRoot <span class="token operator">=</span> <span class="token keyword">await</span> navigator<span class="token punctuation">.</span>storage<span class="token punctuation">.</span><span class="token function">getDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// A FileSystemDirectoryHandle whose type is "directory"</span><br><span class="token comment">// and whose name is "".</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>opfsRoot<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div><h2 id="main-thread-or-web-worker">Main thread or Web Worker <a class="headline-link" href="https://web.dev/origin-private-file-system/#main-thread-or-web-worker">#</a></h2>
<p>There are two ways of using the origin private file system: on the <a href="https://developer.mozilla.org/docs/Glossary/Main_thread" rel="noopener">main thread</a> or in a <a href="https://developer.mozilla.org/docs/Web/API/Worker" rel="noopener">Web Worker</a>. Web Workers cannot block the main thread, which means in this context APIs can be synchronous, a pattern generally disallowed on the main thread. Synchronous APIs can be faster as they avoid having to deal with promises, and file operations are typically synchronous in languages like C that can be compiled to WebAssembly.</p>
<div><pre class="language-c"><code class="language-c"><span class="token comment">// This is synchronous C code.</span><br>FILE <span class="token operator">*</span>f<span class="token punctuation">;</span><br>f <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"example.txt"</span><span class="token punctuation">,</span> <span class="token string">"w+"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token function">fputs</span><span class="token punctuation">(</span><span class="token string">"Some text\n"</span><span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token function">fclose</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div><p>If you need the fastest possible file operations and/or you deal with <a href="https://developer.mozilla.org/es/docs/WebAssembly" rel="noopener">WebAssembly</a>, skip down to <a href="https://example.com/" rel="noopener">Using the origin private file system in a Web Worker</a>. Else, you can read on.</p>
<h2 id="using-the-origin-private-file-system-on-the-main-thread">Using the origin private file system on the main thread <a class="headline-link" href="https://web.dev/origin-private-file-system/#using-the-origin-private-file-system-on-the-main-thread">#</a></h2>
<h3 id="creating-new-files-and-folders">Creating new files and folders <a class="headline-link" href="https://web.dev/origin-private-file-system/#creating-new-files-and-folders">#</a></h3>
<p>Once you have a root folder, create files and folders using the <a href="https://developer.mozilla.org/docs/Web/API/FileSystemDirectoryHandle/getFileHandle" rel="noopener"><code>getFileHandle()</code></a> and the <a href="https://developer.mozilla.org/docs/Web/API/FileSystemDirectoryHandle/getDirectoryHandle" rel="noopener"><code>getDirectoryHandle()</code></a> methods respectively. By passing <a href="https://developer.mozilla.org/docs/Web/API/FileSystemDirectoryHandle/getFileHandle#create" rel="noopener"><code>{create: true}</code></a>, the file or folder will be created if it doesn't exist. Build up a hierarchy of files by calling these functions using a newly created directory as the starting point.</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> fileHandle <span class="token operator">=</span> <span class="token keyword">await</span> opfsRoot<br>    <span class="token punctuation">.</span><span class="token function">getFileHandle</span><span class="token punctuation">(</span><span class="token string">'my first file'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">create</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> directoryHandle <span class="token operator">=</span> <span class="token keyword">await</span> opfsRoot<br>    <span class="token punctuation">.</span><span class="token function">getDirectoryHandle</span><span class="token punctuation">(</span><span class="token string">'my first folder'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">create</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> nestedFileHandle <span class="token operator">=</span> <span class="token keyword">await</span> directoryHandle<br>    <span class="token punctuation">.</span><span class="token function">getFileHandle</span><span class="token punctuation">(</span><span class="token string">'my first nested file'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">create</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> nestedDirectoryHandle <span class="token operator">=</span> <span class="token keyword">await</span> directoryHandle<br>    <span class="token punctuation">.</span><span class="token function">getDirectoryHandle</span><span class="token punctuation">(</span><span class="token string">'my first nested folder'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">create</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div><img alt="The resulting file hierarchy from the earlier code sample." decoding="async" height="196" loading="lazy" sizes="(min-width: 438px) 438px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format" srcset="https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&amp;w=876 876w" width="438">
<h3 id="accessing-existing-files-and-folders">Accessing existing files and folders <a class="headline-link" href="https://web.dev/origin-private-file-system/#accessing-existing-files-and-folders">#</a></h3>
<p>If you know their name, access previously created files and folders by calling the <code>getFileHandle()</code> or the <code>getDirectoryHandle()</code> methods, passing in the name of the file or folder.</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> existingFileHandle <span class="token operator">=</span> <span class="token keyword">await</span> opfsRoot<span class="token punctuation">.</span><span class="token function">getFileHandle</span><span class="token punctuation">(</span><span class="token string">'my first file'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> existingDirectoryHandle <span class="token operator">=</span> <span class="token keyword">await</span> opfsRoot<br>    <span class="token punctuation">.</span><span class="token function">getDirectoryHandle</span><span class="token punctuation">(</span>'my first folder<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div><h3 id="getting-the-file-associated-with-a-file-handle-for-reading">Getting the file associated with a file handle for reading <a class="headline-link" href="https://web.dev/origin-private-file-system/#getting-the-file-associated-with-a-file-handle-for-reading">#</a></h3>
<p>A <code>FileSystemFileHandle</code> represents a file on the file system. To obtain the associated <code>File</code>, use the <a href="https://developer.mozilla.org/docs/Web/API/FileSystemFileHandle/getFile" rel="noopener"><code>getFile()</code></a> method. A <code>File</code> object is a specific kind of <a href="https://developer.mozilla.org/es/docs/Web/API/Blob" rel="noopener"><code>Blob</code></a>, and can be used in any context that a <code>Blob</code> can. In particular, <a href="https://developer.mozilla.org/es/docs/Web/API/FileReader" rel="noopener"><code>FileReader</code></a>, <a href="https://developer.mozilla.org/es/docs/Web/API/URL/createObjectURL" rel="noopener"><code>URL.createObjectURL()</code></a>, <a href="https://developer.mozilla.org/es/docs/Web/API/createImageBitmap" rel="noopener"><code>createImageBitmap()</code></a>, and <a href="https://developer.mozilla.org/docs/Web/API/XMLHttpRequest/send" rel="noopener"><code>XMLHttpRequest.send()</code></a> accept both <code>Blobs</code> and <code>Files</code>. If you will, obtaining a <code>File</code> from a <code>FileSystemFileHandle</code> "frees" the data, so you can access it and make it available to the user-visible file system.</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> file <span class="token operator">=</span> <span class="token keyword">await</span> fileHandle<span class="token punctuation">.</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">await</span> file<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div><h3 id="writing-to-a-file-by-streaming">Writing to a file by streaming <a class="headline-link" href="https://web.dev/origin-private-file-system/#writing-to-a-file-by-streaming">#</a></h3>
<p>Stream data into a file by calling <a href="https://developer.mozilla.org/docs/Web/API/FileSystemFileHandle/createWritable" rel="noopener"><code>createWritable()</code></a> which creates a <a href="https://developer.mozilla.org/docs/Web/API/FileSystemWritableFileStream" rel="noopener"><code>FileSystemWritableFileStream</code></a> to that you then <a href="https://developer.mozilla.org/docs/Web/API/FileSystemWritableFileStream/write" rel="noopener"><code>write()</code></a> the contents. At the end, you need to <a href="https://developer.mozilla.org/docs/Web/API/WritableStream/close" rel="noopener"><code>close()</code></a> the stream.</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> contents <span class="token operator">=</span> <span class="token string">'Some text'</span><span class="token punctuation">;</span><br><span class="token comment">// Get a writable stream.</span><br><span class="token keyword">const</span> writable <span class="token operator">=</span> <span class="token keyword">await</span> fileHandle<span class="token punctuation">.</span><span class="token function">createWritable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// Write the contents of the file to the stream.</span><br><span class="token keyword">await</span> writable<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>contents<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// Close the stream, which persists the contents.</span><br><span class="token keyword">await</span> writable<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div><h3 id="deleting-files-and-folders">Deleting files and folders <a class="headline-link" href="https://web.dev/origin-private-file-system/#deleting-files-and-folders">#</a></h3>
<p>Delete files and folders by calling their file or directory handle's particular <a href="https://developer.mozilla.org/docs/Web/API/FileSystemHandle/remove" rel="noopener"><code>remove()</code></a> method. To delete a folder including all subfolders, pass the <a href="https://developer.mozilla.org/docs/Web/API/FileSystemHandle/remove#recursive" rel="noopener"><code>{recursive: true}</code></a> option.</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">await</span> fileHandle<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">await</span> directoryHandle<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">recursive</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div><aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> The <code>remove()</code> method is currently only implemented in Chrome. You can feature-detect support via <code>'remove' in FileSystemFileHandle.prototype</code>. </div></aside>
<p>As an alternative, if you know the name of the to-be-deleted file or folder in a directory, use the <a href="https://developer.mozilla.org/docs/Web/API/FileSystemDirectoryHandle/removeEntry" rel="noopener"><code>removeEntry()</code></a> method.</p>
<div><pre class="language-js"><code class="language-js">directoryHandle<span class="token punctuation">.</span><span class="token function">removeEntry</span><span class="token punctuation">(</span><span class="token string">'my first nested file'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div><aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> As a quick tip, <code>await (await navigator.storage.getDirectory()).remove({recursive: true})</code> is the fastest way to clear the entire origin private file system. </div></aside>
<h3 id="moving-and-renaming-files-and-folders">Moving and renaming files and folders <a class="headline-link" href="https://web.dev/origin-private-file-system/#moving-and-renaming-files-and-folders">#</a></h3>
<p>Rename and move files and folders using the <a href="https://github.com/whatwg/fs/pull/10" rel="noopener"><code>move()</code></a> method. Moving and renaming can happen together or in isolation.</p>
<div><pre class="language-js"><code class="language-js"><span class="token comment">// Rename a file.</span><br><span class="token keyword">await</span> fileHandle<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token string">'my first renamed file'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// Move a file to another directory.</span><br><span class="token keyword">await</span> fileHandle<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span>nestedDirectoryHandle<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// Move a file to another directory and rename it.</span><br><span class="token keyword">await</span> fileHandle<br>    <span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span>nestedDirectoryHandle<span class="token punctuation">,</span> <span class="token string">'my first renamed and now nested file'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div><aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> Renaming and moving folders is not implemented yet in Chrome. You also can't move files from the origin private file system to the user-visible file system. You can <a href="https://web.dev/origin-private-file-system/#copying-a-file-from-the-origin-private-file-system-to-the-user-visible-file-system">copy</a> them, though. </div></aside>
<h3 id="resolving-the-path-of-a-file-or-folder">Resolving the path of a file or folder <a class="headline-link" href="https://web.dev/origin-private-file-system/#resolving-the-path-of-a-file-or-folder">#</a></h3>
<p>To learn where a given file or folder is located  in relation to a reference directory, use the <a href="https://developer.mozilla.org/docs/Web/API/FileSystemDirectoryHandle/resolve" rel="noopener"><code>resolve()</code></a> method, passing it a <code>FileSystemHandle</code> as the argument. To obtain the full path of a file or folder in the origin private file system, use the root directory as the reference directory obtained via <code>navigator.storage.getDirectory()</code>.</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> relativePath <span class="token operator">=</span> <span class="token keyword">await</span> opfsRoot<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>nestedDirectoryHandle<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// `relativePath` is `['my first folder', 'my first nested folder']`.</span></code></pre>
</div><h3 id="checking-if-two-file-or-folder-handles-point-to-the-same-file-or-folder">Checking if two file or folder handles point to the same file or folder <a class="headline-link" href="https://web.dev/origin-private-file-system/#checking-if-two-file-or-folder-handles-point-to-the-same-file-or-folder">#</a></h3>
<p>Sometimes you have two handles and don't know if they point at the same file or folder. To check whether this is the case, use the <a href="https://developer.mozilla.org/docs/Web/API/FileSystemHandle/isSameEntry" rel="noopener"><code>isSameEntry()</code></a> method.</p>
<div><pre class="language-js"><code class="language-js">fileHandle<span class="token punctuation">.</span><span class="token function">isSameEntry</span><span class="token punctuation">(</span>nestedFileHandle<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// Returns `false`.</span></code></pre>
</div><h2 id="listing-the-contents-of-a-folder">Listing the contents of a folder <a class="headline-link" href="https://web.dev/origin-private-file-system/#listing-the-contents-of-a-folder">#</a></h2>
<p><code>FileSystemDirectoryHandle</code> is an <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Iteration_protocols#the_async_iterator_and_async_iterable_protocols" rel="noopener">asynchronous iterator</a> that you iterate over with a <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/for-await...of" rel="noopener"><code>for await…of</code></a> loop. As an asynchronous iterator, it also supports the <a href="https://developer.mozilla.org/docs/Web/API/FileSystemDirectoryHandle/entries" rel="noopener"><code>entries()</code></a>, the <a href="https://developer.mozilla.org/docs/Web/API/FileSystemDirectoryHandle/values" rel="noopener"><code>values()</code></a>, and the <a href="https://developer.mozilla.org/docs/Web/API/FileSystemDirectoryHandle/keys" rel="noopener"><code>keys()</code></a> methods, from which you can choose depending on what information you need:</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">[</span>name<span class="token punctuation">,</span> handle<span class="token punctuation">]</span> <span class="token keyword">of</span> directoryHandle<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><br><span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">[</span>name<span class="token punctuation">,</span> handle<span class="token punctuation">]</span> <span class="token keyword">of</span> directoryHandle<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><br><span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">let</span> handle <span class="token keyword">of</span> directoryHandle<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><br><span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">let</span> name <span class="token keyword">of</span> directoryHandle<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre>
</div><h2 id="recursively-listing-the-contents-of-a-folder-and-all-subfolders">Recursively listing the contents of a folder and all subfolders <a class="headline-link" href="https://web.dev/origin-private-file-system/#recursively-listing-the-contents-of-a-folder-and-all-subfolders">#</a></h2>
<p>Dealing with asynchronous loops and functions paired with recursion is easy to get wrong. The function below can serve as a starting point for listing the contents of a folder and all its subfolders, including all files and their sizes. You can simplify the function if you don't need the file sizes by, where it says <code>directoryEntryPromises.push</code>, not pushing the <code>handle.getFile()</code> promise, but the <code>handle</code> directly.</p>
<div><pre class="language-js"><code class="language-js">  <span class="token keyword">const</span> getDirectoryEntriesRecursive <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><br>    directoryHandle<span class="token punctuation">,</span><br>    relativePath <span class="token operator">=</span> <span class="token string">'.'</span><span class="token punctuation">,</span><br>  <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> fileHandles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> directoryHandles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> entries <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><br>    <span class="token comment">// Get an iterator of the files and folders in the directory.</span><br>    <span class="token keyword">const</span> directoryIterator <span class="token operator">=</span> directoryHandle<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> directoryEntryPromises <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>    <span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">const</span> handle <span class="token keyword">of</span> directoryIterator<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">const</span> nestedPath <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>relativePath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>handle<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>      <span class="token keyword">if</span> <span class="token punctuation">(</span>handle<span class="token punctuation">.</span>kind <span class="token operator">===</span> <span class="token string">'file'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        fileHandles<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> handle<span class="token punctuation">,</span> nestedPath <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        directoryEntryPromises<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><br>          handle<span class="token punctuation">.</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><br>            <span class="token keyword">return</span> <span class="token punctuation">{</span><br>              <span class="token literal-property property">name</span><span class="token operator">:</span> handle<span class="token punctuation">.</span>name<span class="token punctuation">,</span><br>              <span class="token literal-property property">kind</span><span class="token operator">:</span> handle<span class="token punctuation">.</span>kind<span class="token punctuation">,</span><br>              <span class="token literal-property property">size</span><span class="token operator">:</span> file<span class="token punctuation">.</span>size<span class="token punctuation">,</span><br>              <span class="token literal-property property">type</span><span class="token operator">:</span> file<span class="token punctuation">.</span>type<span class="token punctuation">,</span><br>              <span class="token literal-property property">lastModified</span><span class="token operator">:</span> file<span class="token punctuation">.</span>lastModified<span class="token punctuation">,</span><br>              <span class="token literal-property property">relativePath</span><span class="token operator">:</span> nestedPath<span class="token punctuation">,</span><br>              handle<br>            <span class="token punctuation">}</span><span class="token punctuation">;</span><br>          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>        <span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>handle<span class="token punctuation">.</span>kind <span class="token operator">===</span> <span class="token string">'directory'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        directoryHandles<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> handle<span class="token punctuation">,</span> nestedPath <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        directoryEntryPromises<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><br>          <span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><br>            <span class="token keyword">return</span> <span class="token punctuation">{</span><br>              <span class="token literal-property property">name</span><span class="token operator">:</span> handle<span class="token punctuation">.</span>name<span class="token punctuation">,</span><br>              <span class="token literal-property property">kind</span><span class="token operator">:</span> handle<span class="token punctuation">.</span>kind<span class="token punctuation">,</span><br>              <span class="token literal-property property">relativePath</span><span class="token operator">:</span> nestedPath<span class="token punctuation">,</span><br>              <span class="token literal-property property">entries</span><span class="token operator">:</span><br>                  <span class="token keyword">await</span> <span class="token function">getDirectoryEntriesRecursive</span><span class="token punctuation">(</span>handle<span class="token punctuation">,</span> nestedPath<span class="token punctuation">)</span><span class="token punctuation">,</span><br>              handle<span class="token punctuation">,</span><br>            <span class="token punctuation">}</span><span class="token punctuation">;</span><br>          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>        <span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">const</span> directoryEntries <span class="token operator">=</span> <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>directoryEntryPromises<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    directoryEntries<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">directoryEntry</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><br>      entries<span class="token punctuation">[</span>directoryEntry<span class="token punctuation">.</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> directoryEntry<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">return</span> entries<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
</div><h2 id="using-the-origin-private-file-system-in-a-web-worker">Using the origin private file system in a Web Worker <a class="headline-link" href="https://web.dev/origin-private-file-system/#using-the-origin-private-file-system-in-a-web-worker">#</a></h2>
<p>As outlined before, Web Workers can't block the main thread, which is why in this context synchronous methods are allowed.</p>
<h3 id="getting-a-synchronous-access-handle">Getting a synchronous access handle <a class="headline-link" href="https://web.dev/origin-private-file-system/#getting-a-synchronous-access-handle">#</a></h3>
<p>The entry point to the fastest possible file operations is a <a href="https://developer.mozilla.org/docs/Web/API/FileSystemSyncAccessHandle" rel="noopener"><code>FileSystemSyncAccessHandle</code></a>, obtained from a regular <a href="https://developer.mozilla.org/docs/Web/API/FileSystemFileHandle" rel="noopener"><code>FileSystemFileHandle</code></a> by calling <a href="https://developer.mozilla.org/docs/Web/API/FileSystemFileHandle/createSyncAccessHandle" rel="noopener"><code>createSyncAccessHandle()</code></a>.</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> fileHandle <span class="token operator">=</span> <span class="token keyword">await</span> opfsRoot<br>    <span class="token punctuation">.</span><span class="token function">getFileHandle</span><span class="token punctuation">(</span><span class="token string">'my highspeed file.txt'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">create</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> syncAccessHandle <span class="token operator">=</span> <span class="token keyword">await</span> fileHandle<span class="token punctuation">.</span><span class="token function">createSyncAccessHandle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div><aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> It might seem confusing, but you actually get a <em>synchronous</em> <code>FileSystemSyncAccessHandle</code> from a regular <code>FileSystemFileHandle</code>. Also note that the <code>createSyncAccessHandle()</code> method is <em>asynchronous</em>, despite the <code>Sync</code> in its name. </div></aside>
<h3 id="synchronous-in-place-file-methods">Synchronous in-place file methods <a class="headline-link" href="https://web.dev/origin-private-file-system/#synchronous-in-place-file-methods">#</a></h3>
<p>Once you have a synchronous access handle, you get access to fast in-place file methods that are all synchronous.</p>
<ul>
<li><a href="https://developer.mozilla.org/docs/Web/API/FileSystemSyncAccessHandle/getSize" rel="noopener"><code>getSize()</code></a>: Returns the size of the file in bytes.</li>
<li><a href="https://developer.mozilla.org/docs/Web/API/FileSystemSyncAccessHandle/write" rel="noopener"><code>write()</code></a>: Writes the content of a buffer into the, optionally at a given offset, and returns the number of written bytes. Checking the returned number of written bytes allows callers to detect and handle errors and partial writes.</li>
<li><a href="https://developer.mozilla.org/docs/Web/API/FileSystemSyncAccessHandle/read" rel="noopener"><code>read()</code></a>: Reads the contents of the file into a buffer, optionally at a given offset.</li>
<li><a href="https://developer.mozilla.org/docs/Web/API/FileSystemSyncAccessHandle/truncate" rel="noopener"><code>truncate()</code></a>: Resizes the file to the given size.</li>
<li><a href="https://developer.mozilla.org/docs/Web/API/FileSystemSyncAccessHandle/flush" rel="noopener"><code>flush()</code></a>: Ensures that the contents of the file contain all the modifications done through <code>write()</code>.</li>
<li><a href="https://developer.mozilla.org/docs/Web/API/FileSystemSyncAccessHandle/close" rel="noopener"><code>close()</code></a>: Closes the access handle.</li>
</ul>
<p>Here is an example that uses all the methods mentioned above.</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> opfsRoot <span class="token operator">=</span> <span class="token keyword">await</span> navigator<span class="token punctuation">.</span>storage<span class="token punctuation">.</span><span class="token function">getDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> fileHandle <span class="token operator">=</span> <span class="token keyword">await</span> opfsRoot<span class="token punctuation">.</span><span class="token function">getFileHandle</span><span class="token punctuation">(</span><span class="token string">'fast'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">create</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> accessHandle <span class="token operator">=</span> <span class="token keyword">await</span> fileHandle<span class="token punctuation">.</span><span class="token function">createSyncAccessHandle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> textEncoder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> textDecoder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextDecoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Initialize this variable for the size of the file.</span><br><span class="token keyword">let</span> size<span class="token punctuation">;</span><br><span class="token comment">// The current size of the file, initially `0`.</span><br>size <span class="token operator">=</span> accessHandle<span class="token punctuation">.</span><span class="token function">getSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// Encode content to write to the file.</span><br><span class="token keyword">const</span> content <span class="token operator">=</span> textEncoder<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">'Some text'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// Write the content at the beginning of the file.</span><br>accessHandle<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">at</span><span class="token operator">:</span> size<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// Flush the changes.</span><br>accessHandle<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// The current size of the file, now `9` (the length of "Some text").</span><br>size <span class="token operator">=</span> accessHandle<span class="token punctuation">.</span><span class="token function">getSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Encode more content to write to the file.</span><br><span class="token keyword">const</span> moreContent <span class="token operator">=</span> textEncoder<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">'More content'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// Write the content at the end of the file.</span><br>accessHandle<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>moreContent<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">at</span><span class="token operator">:</span> size<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// Flush the changes.</span><br>accessHandle<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// The current size of the file, now `21` (the length of</span><br><span class="token comment">// "Some textMore content").</span><br>size <span class="token operator">=</span> accessHandle<span class="token punctuation">.</span><span class="token function">getSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Prepare a data view of the length of the file.</span><br><span class="token keyword">const</span> dataView <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataView</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayBuffer</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Read the entire file into the data view.</span><br>accessHandle<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>dataView<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// Logs `"Some textMore content"`.</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>textDecoder<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>dataView<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Read starting at offset 9 into the data view.</span><br>accessHandle<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>dataView<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">at</span><span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// Logs `"More content"`.</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>textDecoder<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>dataView<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Truncate the file after 4 bytes.</span><br>accessHandle<span class="token punctuation">.</span><span class="token function">truncate</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div><aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> Note that the first parameter for <code>read()</code> and <code>write()</code> is an <a href="https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer"><code>ArrayBuffer</code></a> or an <code>ArrayBufferView</code> like a <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/DataView"><code>DataView</code></a>. You cannot directly manipulate the contents of an <code>ArrayBuffer</code>. Instead, you create one of the <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/TypedArray">typed array objects</a> like an <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Int8Array"><code>Int8Array</code></a> or a <code>DataView</code> object which represents the buffer in a specific format, and use that to read and write the contents of the buffer. </div></aside>
<h2 id="copying-a-file-from-the-origin-private-file-system-to-the-user-visible-file-system">Copying a file from the origin private file system to the user-visible file system <a class="headline-link" href="https://web.dev/origin-private-file-system/#copying-a-file-from-the-origin-private-file-system-to-the-user-visible-file-system">#</a></h2>
<p>As mentioned above, moving files from the origin private file system to the user-visible file system isn't possible, but you can copy files. Since <code>showSaveFilePicker()</code> is only exposed on the main thread, but not in the Worker thread, be sure to run the code there.</p>
<div><pre class="language-js"><code class="language-js"><span class="token comment">// On the main thread, not in the Worker. This assumes</span><br><span class="token comment">// `fileHandle` is the `FileSystemFileHandle` you obtained</span><br><span class="token comment">// the `FileSystemSyncAccessHandle` from in the Worker</span><br><span class="token comment">// thread. Be sure to close the file in the Worker thread first.</span><br><span class="token keyword">const</span> fileHandle <span class="token operator">=</span> <span class="token keyword">await</span> opfsRoot<span class="token punctuation">.</span><span class="token function">getFileHandle</span><span class="token punctuation">(</span><span class="token string">'fast'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">try</span> <span class="token punctuation">{</span><br>  <span class="token comment">// Obtain a file handle to a new file in the user-visible file system</span><br>  <span class="token comment">// with the same name as the file in the origin private file system.</span><br>  <span class="token keyword">const</span> saveHandle <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">showSaveFilePicker</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>    <span class="token literal-property property">suggestedName</span><span class="token operator">:</span> fileHandle<span class="token punctuation">.</span>name <span class="token operator">||</span> <span class="token string">''</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> writable <span class="token operator">=</span> <span class="token keyword">await</span> saveHandle<span class="token punctuation">.</span><span class="token function">createWritable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">await</span> writable<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token keyword">await</span> fileHandle<span class="token punctuation">.</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">await</span> writable<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>name<span class="token punctuation">,</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</div><h2 id="debugging-the-origin-private-file-system">Debugging the origin private file system <a class="headline-link" href="https://web.dev/origin-private-file-system/#debugging-the-origin-private-file-system">#</a></h2>
<p>Until built-in DevTools support is added (see <a href="https://crbug.com/1284595" rel="noopener">crbug/1284595</a>), use the <a href="https://chrome.google.com/webstore/detail/opfs-explorer/acndjpgkpaclldomagafnognkcgjignd" rel="noopener">OPFS Explorer</a> Chrome extension to debug the origin private file system. The screenshot above from the section <a href="https://web.dev/origin-private-file-system/#creating-new-files-and-folders">Creating new files and folders</a> is taken straight from the extension by the way.</p>
<img alt="The OPFS Explorer Chrome DevTools extension in the Chrome Web Store." decoding="async" height="612" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format" srcset="https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&amp;w=1600 1600w" width="800">
<p>After installing the extension, open the Chrome DevTools, select the <strong>OPFS Explorer</strong> tab, and you're then ready to inspect the file hierarchy. Save files from the origin private file system to the user-visible file system by clicking the file name and delete files and folders by clicking the trash can icon.</p>
<h2 id="demo">Demo <a class="headline-link" href="https://web.dev/origin-private-file-system/#demo">#</a></h2>
<p>See the origin private file system in action (if you install the OPFS Explorer extension) in a <a href="https://sqlite-wasm-opfs.glitch.me/" rel="noopener">demo</a> that uses it as a backend for a SQLite database compiled to WebAssembly. Be sure to check out the <a href="https://glitch.com/edit/#!/sqlite-wasm-opfs" rel="noopener">source code on Glitch</a>. Note how the embedded version below does not use the origin private file system backend (because the iframe is cross-origin), but when you open the demo in a separate tab, it does.</p>
<div class="glitch-embed-wrap" style="height: 420px; width: 100%;">
  <iframe allow="camera; clipboard-read; clipboard-write; encrypted-media; geolocation; microphone; midi" loading="lazy" src="https://glitch.com/embed/#!/embed/sqlite-wasm-opfs?attributionHidden=true&amp;sidebarCollapsed=true&amp;previewSize=100" style="height: 100%; width: 100%; border: 0;" title="sqlite-wasm-opfs on Glitch"></iframe>
</div>
<h2 id="conclusions">Conclusions <a class="headline-link" href="https://web.dev/origin-private-file-system/#conclusions">#</a></h2>
<p>The origin private file system, as specified by the WHATWG, has shaped the way we use and interact with files on the web. It has enabled new use cases that were impossible to achieve with the user-visible file system. All major browser vendors—Apple, Mozilla, and Google—are on-board and share a joint vision. The development of the origin private file system is very much a collaborative effort, and feedback from developers and users is essential to its progress. As we continue to refine and improve the standard, feedback on the <a href="https://github.com/whatwg/fs" rel="noopener">whatwg/fs repository</a> in the form of Issues or Pull Requests is welcome.</p>
<h2 id="related-links">Related links <a class="headline-link" href="https://web.dev/origin-private-file-system/#related-links">#</a></h2>
<ul>
<li><a href="https://fs.spec.whatwg.org/" rel="noopener">File System Standard spec</a></li>
<li><a href="https://github.com/whatwg/fs" rel="noopener">File System Standard repo</a></li>
<li><a href="https://webkit.org/blog/12257/the-file-system-access-api-with-origin-private-file-system/" rel="noopener">The File System API with Origin Private File System WebKit post</a></li>
<li><a href="https://chrome.google.com/webstore/detail/opfs-explorer/acndjpgkpaclldomagafnognkcgjignd" rel="noopener">OPFS Explorer extension</a></li>
</ul>
<h2 id="acknowledgements">Acknowledgements <a class="headline-link" href="https://web.dev/origin-private-file-system/#acknowledgements">#</a></h2>
<p>This article was reviewed by <a href="https://github.com/a-sully" rel="noopener">Austin Sully</a>, <a href="https://ca.linkedin.com/in/enoel19" rel="noopener">Etienne Noël</a>, and <a href="https://rachelandrew.co.uk/" rel="noopener">Rachel Andrew</a>. Hero image by <a href="https://unsplash.com/@rumpf" rel="noopener">Christina Rumpf</a> on <a href="https://unsplash.com/photos/XWDMmk-yW7Q" rel="noopener">Unsplash</a>.</p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[所有主要引擎中的新 CSS 颜色空间和功能]]></title>
            <link>https://web.dev/color-spaces-and-functions/</link>
            <guid>https://web.dev/color-spaces-and-functions/</guid>
            <content:encoded><![CDATA[<div>
    <h1>GPT总结</h1>
    <summary>这篇文章介绍了CSS现在支持的新功能和颜色空间，以及它们在各个主要浏览器引擎中的支持情况。现在，CSS可以支持超出sRGB色域的颜色空间，包括高清（HD）显示器的色域。通过新的函数，我们可以更好地在网页上使用颜色。

文章提到了一些已经存在的函数，如rgb()、hsl()和hwb()，它们可以访问sRGB色域内的颜色。现在，浏览器还支持color()函数，这是一种规范化的访问任何RGB颜色空间内颜色的方式，包括sRGB、Display P3和Rec2020。文章中给出了一些使用这些函数的示例。

此外，文章还介绍了几个允许访问sRGB以外颜色空间的函数，如lch()、lab()、oklch()和oklab()。

最后，文章提到了color-mix()函数，它可以在任何颜色空间中将一种颜色混合到另一种颜色中。文章中给出了一个使用color-mix()函数的示例。

这些新的函数和颜色空间将为网页带来更加鲜艳的高清颜色。文章还提供了一个高清渐变生成器的链接，供读者参考和灵感。</summary>
    <div>
    <div>OriginTitle: New CSS color spaces and functions in all major engines</div>

    </div></div><aside class="aside flow bg-state-good-bg color-state-good-text"><p class="cluster "><span class="aside__icon box-block "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128" style="enable-background:new 0 0 128 128" xml:space="preserve"><path d="M7.5 123.3c2.2 2.4 11.6-1.9 19-5.3C32 115.4 54 106.3 65 101.6c3-1.2 7.3-2.9 10.4-7 2.8-3.6 10-19-4.6-34.7-15-16-30.4-11.5-36.2-7.5A28.5 28.5 0 0 0 27.3 63c-5.2 11.6-12.7 32.9-15.7 41.3-2.3 6.1-6.4 16.5-4.1 19z" fill="currentColor"></path><path d="M18 86.8s.7 6.5 6.1 14.6c6.3 9.6 15 11.2 15 11.2l-5.8 2.4s-6.5-2-12.7-10.4c-3.8-5.3-5-11.6-5-11.6l2.3-6.2zm-5.6 15.4s1.5 5.6 4.7 9.7c3.8 5 8.6 6.5 8.6 6.5l-4.5 2s-3.3-.8-7-5.5c-2.9-3.5-3.7-7.6-3.7-7.6l1.9-5.1z" fill="currentColor"></path><path d="M10 116.4c-.2-.5-.2-1 0-1.4l25.4-53 4.2 16-26.8 38.7c-.7 1-2.3 1-2.8-.2z" style="opacity:.44" fill="currentColor"></path><path d="M41.6 83.2c12 14 25.5 12.2 30 8.6 4.5-3.5 8.1-15.6-3.7-29.3C55.3 48.2 41.3 52.2 38 55.3s-7.4 15.1 3.5 27.9z" style="fill: var(--color-state-good-bg);"></path><path d="M82.5 89c-4.3-3.7-6.6-3-9.7-1.8a26 26 0 0 1-18.9 0l2.6-6.2c5 1.7 8.7 1 12-1 4-2.4 9.6-5.6 18.3 1.6 3.6 3 7.3 5.1 10 4.2 2-.7 3-3.6 3.6-6l.2-1.3c.4-3.7 1.2-11.6 7.1-15.7 6.4-4.3 13-4.3 13-4.3l1.2 12c-3-.5-5.2.1-7 1-6.7 3.8-.8 18.2-11.3 23-10.1 4.8-18.4-3.3-21-5.6zM45.4 73.7l-4.3-3.9c8-8.9 5.8-15.4 4.3-20.2A26.4 26.4 0 0 1 44 38.8c-3-3.8-4.4-7.8-4.5-8-1.9-5.7-.5-11.2 2.8-16.4C48.7 4 60.5 4 60.5 4l4 10.5c-3-.1-12.8 0-15.8 4.8-3.8 6-1.3 9.6-1.2 10 .8-1 1.5-1.7 2.2-2.3 4.8-4.2 9-4.8 11.6-4.6a11 11 0 0 1 7.6 4.2c2 2.7 3 6.2 2.3 9.4a11 11 0 0 1-5.8 7.4 16 16 0 0 1-13 1.5v.3l.6 2c1.8 5.4 5 14.1-7.6 26.5zm7.4-37.5c.5.4 1.1.8 1.8 1 2 .8 4.4.6 7-.8 1.5-.9 1.7-1.7 1.7-2 .2-.9 0-2-.7-2.8a2.8 2.8 0 0 0-2-1.2c-1.6-.2-3.6.8-5.6 2.6-1 .9-1.7 2-2.3 3.2zm10 39.1-6.2-.1s3-16.7 12.5-19.5c1.8-.5 3.7-1 5.7-1.3l4-.8c.1-1.6-.5-3.6-1.3-5.9-.6-1.7-1.2-3.5-1.5-5.5-.6-3.9.4-7.3 3-9.6 3-2.9 7.9-3.8 13.4-2.5 3.2.7 5.5 2.2 7.6 3.6 2.9 2 4.6 3 8.2.5 4.3-2.9-1.4-14.3-4.4-21l11.3-4.6c1.5 3.3 8.8 20.3 4 30a11.5 11.5 0 0 1-8.1 6.2c-8 1.8-12.6-1.3-16-3.6-1.6-1-3-1.9-4.6-2.3-10.6-3 4.2 12.6-2.7 19.6-4.2 4.2-14.4 5.3-15 5.5-6.6 1.6-10 11.3-10 11.3z" fill="currentColor"></path><path d="M44 38.8c-.2 2.2-.3 3.5.3 6.4 2.7 2 8.7 2 8.7 2l-.6-2v-.3c-6.1-3-8.4-6.1-8.4-6.1zm-12.5 9.8-10.3-5 5.1-7.5 8.2 5.4zm-15.2-14A26 26 0 0 1 5 28.9l5.2-6c1.6 1.2 5 3.5 7.2 3.8l-1.1 7.9zM25.6 21.3 18 18.8a18 18 0 0 0 .7-8.3l7.9-1.3c.6 4 .3 8.2-1 12zM73 15.3l7.9-1.7L83 23.9l-7.8 1.7zM92.5 17.8 87 12c2.8-2.8 3.5-6.3 3.5-6.4L98.4 7c-.1.6-1.1 6.3-6 10.9zM95.5 48.6l7-2.2 2.3 7.7-7 2.1zM97.5 113l-7.9-1c.3-2.7-1.8-6.2-2.4-7l6.4-4.8c.5.6 4.7 6.4 4 12.8zM120.4 102.9c-3-.5-6-.6-9.1-.5l-.3-8c3.5-.2 7 0 10.6.6l-1.2 7.9zM109.6 113.9l5.6-5.7 7.8 7.6-5.6 5.7zM93.1 63.3 99 70l-6.6 5.8-5.8-6.6z" fill="currentColor"></path></svg> </span><strong>庆典</strong></p><div class=" flow">此网络功能现已在所有三个主要浏览器引擎中提供！</div></aside>
<p>CSS 现在支持颜色空间，允许我们访问 sRGB 之外的颜色<a href="https://developer.chrome.com/articles/high-definition-css-color-guide/#what-is-a-color-gamut" rel="noopener">色域</a>。 这意味着您可以使用 HD 色域中的颜色来支持 HD（高清）显示器。 此支持附带新功能，可以更好地利用网络上的颜色。</p>
<h2 id="accessing-color-spaces-from-css">从 CSS 访问颜色空间<a class="headline-link" href="https://web.dev/color-spaces-and-functions/#accessing-color-spaces-from-css">#</a></h2>
<p>我们已经有许多函数可以让我们访问 sRGB 色域内的颜色——<code>RGB()</code>,<code>HSL()</code>， 和<code>hwb()</code>。 现在浏览器支持的是<code>颜色（）</code>函数，一种访问任何 RGB 颜色空间内颜色的标准化方法。 这包括 sRGB、Display P3 和 Rec2020。 您可以在以下 CSS 中看到一些示例：</p>
<div><pre class="language-css"><code class="language-css"><span class="token selector">.valid-css-颜色-函数颜色</span> <span class="token punctuation">{</span><br>  <span class="token property">--srgb</span><span class="token punctuation">:</span> <span class="token function">颜色</span><span class="token punctuation">（</span>srgb 1 1 1<span class="token punctuation">）</span><span class="token punctuation">;</span><br>  <span class="token property">--srgb-线性</span><span class="token punctuation">:</span> <span class="token function">颜色</span><span class="token punctuation">（</span>srgb-线性 100% 100% 100% / 50%<span class="token punctuation">）</span><span class="token punctuation">;</span><br>  <span class="token property">--显示-p3</span><span class="token punctuation">:</span> <span class="token function">颜色</span><span class="token punctuation">（</span>显示-p3 1 1 1<span class="token punctuation">）</span><span class="token punctuation">;</span><br>  <span class="token property">--rec2020</span><span class="token punctuation">:</span> <span class="token function">颜色</span><span class="token punctuation">（</span>记录2020 0 0 0<span class="token punctuation">）</span><span class="token punctuation">;</span><br>  <span class="token property">--a98-rgb</span><span class="token punctuation">:</span> <span class="token function">颜色</span><span class="token punctuation">（</span>a98-RGB 1 1 1 / 25%<span class="token punctuation">）</span><span class="token punctuation">;</span><br>  <span class="token property">--原照片</span><span class="token punctuation">:</span> <span class="token function">颜色</span><span class="token punctuation">（</span>prophoto-rgb 0% 0% 0%<span class="token punctuation">）</span><span class="token punctuation">;</span><br>  <span class="token property">--xyz</span><span class="token punctuation">:</span> <span class="token function">颜色</span><span class="token punctuation">（</span>XYZ 1 1 1<span class="token punctuation">）</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</div><div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">浏览器支持</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 111，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      111
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">火狐 113，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">边缘 111，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      111
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 15，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      15
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/CSS/color_value/color#browser_compatibility" target="_blank">来源</a>
</div>
<p>还支持多种功能，允许使用 sRGB 访问以外的色彩空间<code>lch()</code>,<code>实验室（）</code>,<code>oklch()</code>， 和<code>oklab()</code>。</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">浏览器支持</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 111，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      111
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">火狐 113，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">边缘 111，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      111
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 15，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      15
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/CSS/color_value/lch#browser_compatibility" target="_blank">来源</a>
</div>
<p>您可以在中了解所有这些不同的色彩空间<a href="https://developer.chrome.com/articles/high-definition-css-color-guide/" rel="noopener">高清 CSS 色彩指南</a>。</p>
<h2 id="the-color-mix-function">这<code>颜色混合()</code>功能<a class="headline-link" href="https://web.dev/color-spaces-and-functions/#the-color-mix-function">#</a></h2>
<p>除了这些新的色彩空间之外，所有引擎现在都支持<code>颜色混合()</code>功能。 此功能可以在任何颜色空间中将一种颜色混合到另一种颜色中。 在下面的 CSS 中，在 srgb 颜色空间中，25% 的蓝色混合成白色。</p>
<div><pre class="language-css"><code class="language-css"><span class="token selector">。例子</span> <span class="token punctuation">{</span><br>  <span class="token property">背景颜色</span><span class="token punctuation">:</span> <span class="token function">颜色混合</span><span class="token punctuation">（</span>在 srgb 中<span class="token punctuation">,</span>蓝色 25%<span class="token punctuation">,</span>白色的<span class="token punctuation">）</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</div><div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">浏览器支持</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 111，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      111
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">火狐 113，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">边缘 111，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      111
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 16.2，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      16.2
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/CSS/color_value/color-mix#browser_compatibility" target="_blank">来源</a>
</div>
<p><a href="https://developer.chrome.com/blog/css-color-mix/" rel="noopener">学习更多关于<code>颜色混合()</code></a></p>
<p>这些新功能和色彩空间有望为网络带来鲜艳的高清色彩。 要获得灵感，请首先使用高清渐变生成器创建一些漂亮的渐变，网址为<a href="https://gradient.style/" rel="noopener">渐变风格</a>。</p>
<p><em>英雄形象由<a href="https://unsplash.com/fr/@yogidan2012" rel="noopener">丹尼尔·李维斯·佩鲁西</a></em></p>
<hr><aside class="aside flow bg-state-good-bg color-state-good-text"><p class="cluster "><span class="aside__icon box-block "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128" style="enable-background:new 0 0 128 128" xml:space="preserve"><path d="M7.5 123.3c2.2 2.4 11.6-1.9 19-5.3C32 115.4 54 106.3 65 101.6c3-1.2 7.3-2.9 10.4-7 2.8-3.6 10-19-4.6-34.7-15-16-30.4-11.5-36.2-7.5A28.5 28.5 0 0 0 27.3 63c-5.2 11.6-12.7 32.9-15.7 41.3-2.3 6.1-6.4 16.5-4.1 19z" fill="currentColor"></path><path d="M18 86.8s.7 6.5 6.1 14.6c6.3 9.6 15 11.2 15 11.2l-5.8 2.4s-6.5-2-12.7-10.4c-3.8-5.3-5-11.6-5-11.6l2.3-6.2zm-5.6 15.4s1.5 5.6 4.7 9.7c3.8 5 8.6 6.5 8.6 6.5l-4.5 2s-3.3-.8-7-5.5c-2.9-3.5-3.7-7.6-3.7-7.6l1.9-5.1z" fill="currentColor"></path><path d="M10 116.4c-.2-.5-.2-1 0-1.4l25.4-53 4.2 16-26.8 38.7c-.7 1-2.3 1-2.8-.2z" style="opacity:.44" fill="currentColor"></path><path d="M41.6 83.2c12 14 25.5 12.2 30 8.6 4.5-3.5 8.1-15.6-3.7-29.3C55.3 48.2 41.3 52.2 38 55.3s-7.4 15.1 3.5 27.9z" style="fill: var(--color-state-good-bg);"></path><path d="M82.5 89c-4.3-3.7-6.6-3-9.7-1.8a26 26 0 0 1-18.9 0l2.6-6.2c5 1.7 8.7 1 12-1 4-2.4 9.6-5.6 18.3 1.6 3.6 3 7.3 5.1 10 4.2 2-.7 3-3.6 3.6-6l.2-1.3c.4-3.7 1.2-11.6 7.1-15.7 6.4-4.3 13-4.3 13-4.3l1.2 12c-3-.5-5.2.1-7 1-6.7 3.8-.8 18.2-11.3 23-10.1 4.8-18.4-3.3-21-5.6zM45.4 73.7l-4.3-3.9c8-8.9 5.8-15.4 4.3-20.2A26.4 26.4 0 0 1 44 38.8c-3-3.8-4.4-7.8-4.5-8-1.9-5.7-.5-11.2 2.8-16.4C48.7 4 60.5 4 60.5 4l4 10.5c-3-.1-12.8 0-15.8 4.8-3.8 6-1.3 9.6-1.2 10 .8-1 1.5-1.7 2.2-2.3 4.8-4.2 9-4.8 11.6-4.6a11 11 0 0 1 7.6 4.2c2 2.7 3 6.2 2.3 9.4a11 11 0 0 1-5.8 7.4 16 16 0 0 1-13 1.5v.3l.6 2c1.8 5.4 5 14.1-7.6 26.5zm7.4-37.5c.5.4 1.1.8 1.8 1 2 .8 4.4.6 7-.8 1.5-.9 1.7-1.7 1.7-2 .2-.9 0-2-.7-2.8a2.8 2.8 0 0 0-2-1.2c-1.6-.2-3.6.8-5.6 2.6-1 .9-1.7 2-2.3 3.2zm10 39.1-6.2-.1s3-16.7 12.5-19.5c1.8-.5 3.7-1 5.7-1.3l4-.8c.1-1.6-.5-3.6-1.3-5.9-.6-1.7-1.2-3.5-1.5-5.5-.6-3.9.4-7.3 3-9.6 3-2.9 7.9-3.8 13.4-2.5 3.2.7 5.5 2.2 7.6 3.6 2.9 2 4.6 3 8.2.5 4.3-2.9-1.4-14.3-4.4-21l11.3-4.6c1.5 3.3 8.8 20.3 4 30a11.5 11.5 0 0 1-8.1 6.2c-8 1.8-12.6-1.3-16-3.6-1.6-1-3-1.9-4.6-2.3-10.6-3 4.2 12.6-2.7 19.6-4.2 4.2-14.4 5.3-15 5.5-6.6 1.6-10 11.3-10 11.3z" fill="currentColor"></path><path d="M44 38.8c-.2 2.2-.3 3.5.3 6.4 2.7 2 8.7 2 8.7 2l-.6-2v-.3c-6.1-3-8.4-6.1-8.4-6.1zm-12.5 9.8-10.3-5 5.1-7.5 8.2 5.4zm-15.2-14A26 26 0 0 1 5 28.9l5.2-6c1.6 1.2 5 3.5 7.2 3.8l-1.1 7.9zM25.6 21.3 18 18.8a18 18 0 0 0 .7-8.3l7.9-1.3c.6 4 .3 8.2-1 12zM73 15.3l7.9-1.7L83 23.9l-7.8 1.7zM92.5 17.8 87 12c2.8-2.8 3.5-6.3 3.5-6.4L98.4 7c-.1.6-1.1 6.3-6 10.9zM95.5 48.6l7-2.2 2.3 7.7-7 2.1zM97.5 113l-7.9-1c.3-2.7-1.8-6.2-2.4-7l6.4-4.8c.5.6 4.7 6.4 4 12.8zM120.4 102.9c-3-.5-6-.6-9.1-.5l-.3-8c3.5-.2 7 0 10.6.6l-1.2 7.9zM109.6 113.9l5.6-5.7 7.8 7.6-5.6 5.7zM93.1 63.3 99 70l-6.6 5.8-5.8-6.6z" fill="currentColor"></path></svg> </span><strong>Celebration</strong></p><div class=" flow"> This web feature is now available in all three major browser engines! </div></aside>
<p>CSS now supports color spaces that allow us to access colors outside of the sRGB <a href="https://developer.chrome.com/articles/high-definition-css-color-guide/#what-is-a-color-gamut" rel="noopener">gamut</a>. This means that you can support HD (high definition) displays, using colors from HD gamuts. This support comes with new functions to make better use of color on the web.</p>
<h2 id="accessing-color-spaces-from-css">Accessing color spaces from CSS <a class="headline-link" href="https://web.dev/color-spaces-and-functions/#accessing-color-spaces-from-css">#</a></h2>
<p>We already have a number of functions that allow us to access colors within the sRGB gamut—<code>rgb()</code>, <code>hsl()</code>, and <code>hwb()</code>. Now supported in browsers is the <code>color()</code> function, a normalized way to access colors within any RGB color space. This includes sRGB, Display P3, and Rec2020. You can see some examples in the following CSS:</p>
<div><pre class="language-css"><code class="language-css"><span class="token selector">.valid-css-color-function-colors</span> <span class="token punctuation">{</span><br>  <span class="token property">--srgb</span><span class="token punctuation">:</span> <span class="token function">color</span><span class="token punctuation">(</span>srgb 1 1 1<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">--srgb-linear</span><span class="token punctuation">:</span> <span class="token function">color</span><span class="token punctuation">(</span>srgb-linear 100% 100% 100% / 50%<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">--display-p3</span><span class="token punctuation">:</span> <span class="token function">color</span><span class="token punctuation">(</span>display-p3 1 1 1<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">--rec2020</span><span class="token punctuation">:</span> <span class="token function">color</span><span class="token punctuation">(</span>rec2020 0 0 0<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">--a98-rgb</span><span class="token punctuation">:</span> <span class="token function">color</span><span class="token punctuation">(</span>a98-rgb 1 1 1 / 25%<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">--prophoto</span><span class="token punctuation">:</span> <span class="token function">color</span><span class="token punctuation">(</span>prophoto-rgb 0% 0% 0%<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">--xyz</span><span class="token punctuation">:</span> <span class="token function">color</span><span class="token punctuation">(</span>xyz 1 1 1<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</div><div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 111, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      111
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 113, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 111, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      111
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 15, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      15
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/CSS/color_value/color#browser_compatibility" target="_blank">Source</a>
</div>
<p>Also supported are several functions allowing access to color spaces other than sRGB using <code>lch()</code>, <code>lab()</code>, <code>oklch()</code>, and <code>oklab()</code>.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 111, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      111
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 113, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 111, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      111
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 15, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      15
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/CSS/color_value/lch#browser_compatibility" target="_blank">Source</a>
</div>
<p>You can learn about all of these different color spaces in the <a href="https://developer.chrome.com/articles/high-definition-css-color-guide/" rel="noopener">High definition CSS color guide</a>.</p>
<h2 id="the-color-mix-function">The <code>color-mix()</code> function <a class="headline-link" href="https://web.dev/color-spaces-and-functions/#the-color-mix-function">#</a></h2>
<p>As well as these new color spaces, all engines now support the <code>color-mix()</code> function. This function enables mixing of one color into another, in any of the color spaces. In the following CSS, 25% of blue is mixed into white, in the srgb color space.</p>
<div><pre class="language-css"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span><br>  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">color-mix</span><span class="token punctuation">(</span>in srgb<span class="token punctuation">,</span> blue 25%<span class="token punctuation">,</span> white<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</div><div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 111, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      111
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 113, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 111, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      111
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 16.2, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      16.2
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/CSS/color_value/color-mix#browser_compatibility" target="_blank">Source</a>
</div>
<p><a href="https://developer.chrome.com/blog/css-color-mix/" rel="noopener">Learn more about <code>color-mix()</code></a></p>
<p>These new functions and color spaces promise to bring vibrant HD color to the web. For inspiration, make a start by creating some beautiful gradients using the HD gradient generator at <a href="https://gradient.style/" rel="noopener">gradient.style</a>.</p>
<p><em>Hero image by <a href="https://unsplash.com/fr/@yogidan2012" rel="noopener">Daniele Levis Pelusi</a></em></p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[5月份网络平台新功能]]></title>
            <link>https://web.dev/web-platform-05-2023/</link>
            <guid>https://web.dev/web-platform-05-2023/</guid>
            <content:encoded><![CDATA[<div>
    <h1>GPT总结</h1>
    <summary>2023年5月，Firefox 113、Chrome 113、Chrome 114和Safari 16.5发布了稳定版。这对于Web平台意味着什么呢？

Chrome 113引入了WebGPU，这是WebGL和WebGL 2图形API的继任者。它提供了现代化的功能，如GPU计算、更低的GPU硬件访问开销、从单个图形设备渲染到多个画布的能力以及更好、更可预测的性能。

Chrome 113还包括了First-Party Sets（FPS）和CSS媒体特性等功能。FPS是隐私沙箱的一部分，它允许组织声明站点之间的关系，以便浏览器可以决定何时允许有限的第三方Cookie访问。CSS方面，Chrome 113引入了overflow-inline和overflow-block媒体特性，以及更新的媒体特性和线性缓动函数。

Firefox 113包括了CSS Color Level 4功能、更多对:nth-child()选择器的控制、压缩流API和弹出窗口API等功能。

Safari 16.5解决了一些问题，并添加了对CSS嵌套的支持。

Chrome 114引入了text-wrap: balance属性，用于平衡标题的显示效果。

Chrome 114还包括了CHIPS和Popover API等功能。CHIPS允许通过新的cookie属性Partitioned将第三方Cookie按顶级站点进行分</summary>
    <div>
    <div>OriginTitle: New to the web platform in May</div>

    </div></div><h2 id="stable-browser-releases">稳定的浏览器版本<a class="headline-link" href="https://web.dev/web-platform-05-2023/#stable-browser-releases">#</a></h2>
<p>2023 年 5 月，<a href="https://developer.mozilla.org/docs/Mozilla/Firefox/Releases/113" rel="noopener">火狐113</a>,<a href="https://developer.chrome.com/blog/new-in-chrome-113/" rel="noopener">铬113</a>,<a href="https://developer.chrome.com/blog/new-in-chrome-114/" rel="noopener">铬114</a>， 和<a href="https://developer.apple.com/documentation/safari-release-notes/safari-16_5-release-notes" rel="noopener">Safari 16.5</a>变得稳定。 让我们看看这对网络平台意味着什么。</p>
<aside class="aside flow bg-state-bad-bg color-state-bad-text"><p class="cluster color-state-bad-text"><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Error sign">   <path fill-rule="evenodd" clip-rule="evenodd" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-2h2v2h-2zm0-10v6h2V7h-2z"></path> </svg></span><strong>警告</strong></p><div class=" flow">我们在这些帖子中包含从 MDN 中提取的浏览器兼容性数据，这些数据对于最新的浏览器版本可能尚未更新。 该帖子一旦出现在帖子中，就会显示正确的信息<a href="https://github.com/mdn/browser-compat-data/releases">浏览器兼容数据发布</a>。</div></aside>
<h3 id="webgpu">网络GPU<a class="headline-link" href="https://web.dev/web-platform-05-2023/#webgpu">#</a></h3>
<p>Chrome 113 包括<a href="https://developer.chrome.com/blog/webgpu-release/" rel="noopener">网络GPU</a>，WebGL 和 WebGL 2 网络图形 API 的后继者。 它提供了现代功能，例如 GPU 计算、对 GPU 硬件的较低开销访问、从单个图形设备渲染到多个画布的能力，以及更好、更可预测的性能。</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">浏览器支持</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 113，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">火狐预览, 预览</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="preview" title="Preview" aria-label="Preview">
<p></p></span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="edge">
<span class="visually-hidden">边缘 113，支持</span>
</span>
<span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
113
</span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="safari">
<span class="visually-hidden">Safari，不支持</span>
</span>
<span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported"><p></p>
<p></p></span>
</li><p></p>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/API/GPU#browser_compatibility" target="_blank">来源</a>
</div>
<h3 id="first-party-sets">第一方套装<a class="headline-link" href="https://web.dev/web-platform-05-2023/#first-party-sets">#</a></h3>
<p><a href="https://developer.chrome.com/docs/privacy-sandbox/first-party-sets/" rel="noopener">第一方套装 (FPS)</a>是的一部分<a href="https://privacysandbox.com/" rel="noopener">隐私沙箱</a>。 它是组织声明站点之间关系的一种方式，以便浏览器可以决定何时允许对一组内的站点进行有限的第三方 cookie 访问。 FPS 开始在 Chrome 113 中分阶段推出。</p>
<h3 id="css-media-features-and-more">CSS 媒体功能及更多<a class="headline-link" href="https://web.dev/web-platform-05-2023/#css-media-features-and-more">#</a></h3>
<p>对于 CSS，Chrome 113 包括<code>内嵌溢出</code>和<code>溢出块</code>媒体功能。</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">浏览器支持</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 113，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">火狐 66，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      66
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">边缘 113，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari，不支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported">
<p></p></span>
</li><p></p>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/CSS/@media/overflow-inline#browser_compatibility" target="_blank">来源</a>
</div>
<p>还有<code>更新</code>媒体功能。</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">浏览器支持</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 113，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">火狐 102，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      102
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">边缘 113，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari，不支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported">
<p></p></span>
</li><p></p>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/CSS/@media/update-frequency#browser_compatibility" target="_blank">来源</a>
</div>
<p>还包括<code>线性()</code>缓动函数，您可以在文章中了解更多信息<a href="https://developer.chrome.com/articles/css-linear-easing-function/" rel="noopener">使用 CSS 创建复杂的动画曲线<code>线性()</code>缓动函数</a>。</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">浏览器支持</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 113，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">火狐 112，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      112
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">边缘 113，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari，不支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported">
<p></p></span>
</li><p></p>
  </ul>
</div>
<h3 id="css-color-level-4-features">CSS 颜色级别 4 功能<a class="headline-link" href="https://web.dev/web-platform-05-2023/#css-color-level-4-features">#</a></h3>
<p>火狐 113 包括<code>颜色（）</code>,<code>实验室（）</code>,<code>lch()</code>,<code>oklab()</code>,<code>oklch()</code>， 和<code>颜色混合()</code>函数符号，以及强制颜色调整属性。 这意味着所有三个主要引擎现在都支持新的色彩空间和功能。 您可以在中了解有关这些色彩空间和功能的更多信息<a href="https://web.dev/articles/high-definition-css-color-guide/">高清 CSS 色彩指南</a>。</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">浏览器支持</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 111，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      111
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">火狐 113，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">边缘 111，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      111
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 16.2，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      16.2
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/CSS/color_value/color-mix#browser_compatibility" target="_blank">来源</a>
</div>
<h3 id="more-control-over-nth-child-selections">更多控制<code>:第n个孩子()</code>选择<a class="headline-link" href="https://web.dev/web-platform-05-2023/#more-control-over-nth-child-selections">#</a></h3>
<p>Firefox 113 还添加了将选择器列表传递给<code>:第n个孩子()</code>和<code>第 n 个最后一个孩子()</code>。 了解更多相关信息，并查看帖子中的示例<a href="https://developer.chrome.com/articles/css-nth-child-of-s/" rel="noopener">使用 of S 语法更好地控制 :nth-child() 选择</a>。</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">浏览器支持</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 111，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      111
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">火狐 113，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">边缘 111，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      111
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 9，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      9
    </span>
    </li>
  </ul>
</div>
<h3 id="compressions-streams-api">压缩流 API<a class="headline-link" href="https://web.dev/web-platform-05-2023/#compressions-streams-api">#</a></h3>
<p>由于包含在 Firefox 113 中，压缩流 API 现在在所有三个主要引擎中均受支持，可以实现流的压缩和解压缩。 这意味着 JavaScript 应用程序不再需要捆绑压缩库。</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">浏览器支持</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 80，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      80
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">火狐 113，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">边缘 80，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      80
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 16.4，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      16.4
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/API/CompressionStream#browser_compatibility" target="_blank">来源</a>
</div>
<h3 id="css-nesting">CSS 嵌套<a class="headline-link" href="https://web.dev/web-platform-05-2023/#css-nesting">#</a></h3>
<p>Safari 16.5 解决了大部分问题，但还增加了对<a href="https://developer.chrome.com/articles/css-nesting/" rel="noopener">CSS 嵌套</a>，使用新的嵌套选择器<code>&amp;gt;</code>，用于嵌套相关的样式规则，其方式对于使用过预处理器的开发人员来说是熟悉的：</p>
<div><pre class="language-css"><code class="language-css"><span class="token selector">.嵌套</span> <span class="token punctuation">{</span><br>  <span class="token property">颜色</span><span class="token punctuation">:</span>亮粉色<span class="token punctuation">;</span><br><br>  <span class="token selector">&amp;gt; .是</span> <span class="token punctuation">{</span><br>    <span class="token property">颜色</span><span class="token punctuation">:</span>丽贝卡·普尔普尔<span class="token punctuation">;</span><br><br>    <span class="token selector">&amp;gt; .太棒了</span> <span class="token punctuation">{</span><br>      <span class="token property">颜色</span><span class="token punctuation">:</span>深粉色<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</div><div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">浏览器支持</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 112，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      112
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">火狐浏览器，不支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported">
<p></p></span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="edge">
<span class="visually-hidden">边缘 112，支持</span>
</span>
<span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
112
</span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="safari">
<span class="visually-hidden">Safari 16.5，支持</span>
</span>
<span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
16.5
</span>
</li><p></p>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/CSS/Nesting_selectors#browser_compatibility" target="_blank">来源</a>
</div>
<h3 id="balancing-headlines-with-text-wrap-balance">平衡头条新闻<code>文本换行：平衡</code> <a class="headline-link" href="https://web.dev/web-platform-05-2023/#balancing-headlines-with-text-wrap-balance">#</a></h3>
<p>从 Chrome 114 开始，您可以使用<code>文本换行：平衡</code>。 这使您可以平衡标题，避免最后一行只有一个单词的问题，从而提供更令人愉悦和可读的结果。 您可以在以下位置了解更多信息<a href="https://developer.chrome.com/blog/css-text-wrap-balance/" rel="noopener">CSS 文本换行：平衡</a>。</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">浏览器支持</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 114，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      114
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">火狐浏览器，不支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported">
<p></p></span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="edge">
<span class="visually-hidden">边缘 114，支持</span>
</span>
<span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
114
</span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="safari">
<span class="visually-hidden">Safari，不支持</span>
</span>
<span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported"><p></p>
<p></p></span>
</li><p></p>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/CSS/text-wrap#browser_compatibility" target="_blank">来源</a>
</div>
<h3 id="chips-cookies-having-independent-partitioned-state">CHIPS：具有独立分区状态的 Cookie<a class="headline-link" href="https://web.dev/web-platform-05-2023/#chips-cookies-having-independent-partitioned-state">#</a></h3>
<p>作为工作的一部分<a href="https://developer.chrome.com/docs/privacy-sandbox/third-party-cookie-phase-out/" rel="noopener">逐步淘汰第三方 cookie</a>,<a href="https://developer.chrome.com/docs/privacy-sandbox/chips/" rel="noopener">芯片</a>允许使用新的 cookie 属性选择加入由顶级站点分区的第三方 cookie<code>已分区</code>。 CHIPS 在 Chrome 114 中可用。</p>
<h3 id="the-popover-api">弹出框 API<a class="headline-link" href="https://web.dev/web-platform-05-2023/#the-popover-api">#</a></h3>
<p>Chrome 114 中还有<a href="https://developer.mozilla.org/docs/Web/API/Popover_API" rel="noopener">弹出框 API</a>使构建显示在所有其他 Web 应用程序 UI 之上的瞬态用户界面 (UI) 元素变得更加容易。</p>
<p>其中包括用户交互元素，如操作菜单、表单元素建议、内容选择器和教学 UI。</p>
<p>新的 popover 属性使任何元素都可以显示在<a href="https://developer.chrome.com/blog/top-layer-devtools/" rel="noopener">顶层</a>自动地。 这意味着开发人员不再需要担心定位、堆叠元素、焦点或键盘交互。</p>
<p>了解更多信息<a href="https://developer.chrome.com/blog/introducing-popover-api/" rel="noopener">介绍弹出框 API</a>。</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">浏览器支持</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 114，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      114
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 114，旗帜背后</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="flag" title="Behind a flag" aria-label="Behind a flag">
<p></p></span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="edge">
<span class="visually-hidden">边缘 114，支持</span>
</span>
<span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
114
</span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="safari">
<span class="visually-hidden">Safari 17，支持</span>
</span>
<span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
17 号
</span>
</li><p></p>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/API/ToggleEvent#browser_compatibility" target="_blank">来源</a>
</div>
<h2 id="beta-browser-releases">测试版浏览器发布<a class="headline-link" href="https://web.dev/web-platform-05-2023/#beta-browser-releases">#</a></h2>
<p>Beta 浏览器版本可让您预览浏览器下一个稳定版本中的内容。 现在是测试新功能或删除的好时机，这些功能或删除可能会在发布该版本之前影响您的网站。 新的测试版是<a href="https://developer.mozilla.org/docs/Mozilla/Firefox/Releases/114" rel="noopener">火狐114</a>,<a href="https://developer.chrome.com/blog/chrome-115-beta/" rel="noopener">铬115</a>， 和<a href="https://developer.apple.com/documentation/safari-release-notes/safari-16_6-release-notes" rel="noopener">Safari 16.6</a>。 这些版本为该平台带来了许多出色的功能。 查看发行说明以了解所有详细信息，这里仅列出一些亮点。</p>
<p>Chrome 115 包含多个 CSS 值<code>展示</code>财产。 这意味着<code>显示： 柔性</code>变成<code>显示：块柔性</code>和<code>显示：块</code>变成<code>显示：块流</code>。 单个值作为旧关键字进行维护，一旦进入 Chrome 稳定版，这将使多个值在所有引擎上可用。</p>
<p>Chrome 115 中还有<code>滚动时间轴</code>和<code>查看时间线</code>Web 动画规范的扩展。 这些使<a href="https://developer.chrome.com/articles/scroll-driven-animations/" rel="noopener">滚动驱动的动画</a>通过 CSS 和 JavaScript。</p>
<p>火狐 114 包括<a href="https://developer.mozilla.org/docs/Web/API/WebTransport_API" rel="noopener">网络传输API</a>，WebSocket 的现代更新，提供对多个流、单向流和无序交付的支持。</p>
<p><em>拍摄者<a href="https://unsplash.com/@photozace" rel="noopener">摄影王牌</a>。</em></p>
<hr><h2 id="stable-browser-releases">Stable browser releases <a class="headline-link" href="https://web.dev/web-platform-05-2023/#stable-browser-releases">#</a></h2>
<p>In May 2023, <a href="https://developer.mozilla.org/docs/Mozilla/Firefox/Releases/113" rel="noopener">Firefox 113</a>, <a href="https://developer.chrome.com/blog/new-in-chrome-113/" rel="noopener">Chrome 113</a>, <a href="https://developer.chrome.com/blog/new-in-chrome-114/" rel="noopener">Chrome 114</a>, and <a href="https://developer.apple.com/documentation/safari-release-notes/safari-16_5-release-notes" rel="noopener">Safari 16.5</a> became stable. Let's take a look at what this means for the web platform.</p>
<aside class="aside flow bg-state-bad-bg color-state-bad-text"><p class="cluster color-state-bad-text"><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Error sign">   <path fill-rule="evenodd" clip-rule="evenodd" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-2h2v2h-2zm0-10v6h2V7h-2z"></path> </svg></span><strong>Caution</strong></p><div class=" flow"> We include browser compatibility data pulled from MDN in these posts which may not have been updated yet for very recent browser releases. The post will show the correct information as soon as it appears in the <a href="https://github.com/mdn/browser-compat-data/releases">browser-compat-data release</a>. </div></aside>
<h3 id="webgpu">WebGPU <a class="headline-link" href="https://web.dev/web-platform-05-2023/#webgpu">#</a></h3>
<p>Chrome 113 includes <a href="https://developer.chrome.com/blog/webgpu-release/" rel="noopener">WebGPU</a>, the successor to the WebGL and WebGL 2 graphics APIs for the web. It provides modern features such as GPU compute, lower overhead access to GPU hardware, the ability to render to multiple canvases from a single graphics device, and better, more predictable performance.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 113, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox preview, Preview</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="preview" title="Preview" aria-label="Preview">
<p></p></span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="edge">
<span class="visually-hidden">Edge 113, Supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
113
</span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="safari">
<span class="visually-hidden">Safari, Not supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported"><p></p>
<p></p></span>
</li><p></p>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/API/GPU#browser_compatibility" target="_blank">Source</a>
</div>
<h3 id="first-party-sets">First-Party Sets <a class="headline-link" href="https://web.dev/web-platform-05-2023/#first-party-sets">#</a></h3>
<p><a href="https://developer.chrome.com/docs/privacy-sandbox/first-party-sets/" rel="noopener">First-Party Sets (FPS)</a> is part of the <a href="https://privacysandbox.com/" rel="noopener">Privacy Sandbox</a>. It is a way for organizations to declare relationships among sites, so that browsers can decide when to allow limited third-party cookie access for sites within a set. FPS began a staged rollout in Chrome 113.</p>
<h3 id="css-media-features-and-more">CSS media features and more <a class="headline-link" href="https://web.dev/web-platform-05-2023/#css-media-features-and-more">#</a></h3>
<p>For CSS, Chrome 113 includes the <code>overflow-inline</code> and <code>overflow-block</code> media features.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 113, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 66, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      66
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 113, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari, Not supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported">
<p></p></span>
</li><p></p>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/CSS/@media/overflow-inline#browser_compatibility" target="_blank">Source</a>
</div>
<p>And the <code>update</code> media feature.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 113, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 102, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      102
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 113, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari, Not supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported">
<p></p></span>
</li><p></p>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/CSS/@media/update-frequency#browser_compatibility" target="_blank">Source</a>
</div>
<p>Also included is the <code>linear()</code> easing function, which you can learn more about in the article <a href="https://developer.chrome.com/articles/css-linear-easing-function/" rel="noopener">Create complex animation curves in CSS with the <code>linear()</code> easing function</a>.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 113, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 112, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      112
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 113, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari, Not supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported">
<p></p></span>
</li><p></p>
  </ul>
</div>
<h3 id="css-color-level-4-features">CSS Color Level 4 features <a class="headline-link" href="https://web.dev/web-platform-05-2023/#css-color-level-4-features">#</a></h3>
<p>Firefox 113 includes the <code>color()</code>, <code>lab()</code>, <code>lch()</code>, <code>oklab()</code>, <code>oklch()</code>, and <code>color-mix()</code> functional notations, along with the forced-color-adjust property. This means that the new color spaces and functions are now supported across all three major engines. You can learn more about these color spaces and functions in the <a href="https://web.dev/articles/high-definition-css-color-guide/">High definition CSS color guide</a>.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 111, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      111
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 113, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 111, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      111
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 16.2, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      16.2
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/CSS/color_value/color-mix#browser_compatibility" target="_blank">Source</a>
</div>
<h3 id="more-control-over-nth-child-selections">More control over <code>:nth-child()</code> selections <a class="headline-link" href="https://web.dev/web-platform-05-2023/#more-control-over-nth-child-selections">#</a></h3>
<p>Firefox 113 also adds the ability to pass a selector list into <code>:nth-child()</code> and <code>nth-last-child()</code>. Learn more about this, and see examples in the post <a href="https://developer.chrome.com/articles/css-nth-child-of-s/" rel="noopener">More control over :nth-child() selections with the of S syntax</a>.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 111, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      111
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 113, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 111, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      111
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 9, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      9
    </span>
    </li>
  </ul>
</div>
<h3 id="compressions-streams-api">Compressions Streams API <a class="headline-link" href="https://web.dev/web-platform-05-2023/#compressions-streams-api">#</a></h3>
<p>Now supported in all three major engines due to inclusion in Firefox 113, the Compressions Streams API enables the compression and decompression of streams. This means that JavaScript applications no longer need to bundle a compression library.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 80, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      80
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 113, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 80, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      80
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 16.4, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      16.4
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/API/CompressionStream#browser_compatibility" target="_blank">Source</a>
</div>
<h3 id="css-nesting">CSS nesting <a class="headline-link" href="https://web.dev/web-platform-05-2023/#css-nesting">#</a></h3>
<p>Safari 16.5 mostly resolved issues, but also adds support for <a href="https://developer.chrome.com/articles/css-nesting/" rel="noopener">CSS Nesting</a>, with the new nesting selector <code>&gt;</code>, used to nest related style rules, in a way that will be familiar to developers who have used pre-processors:</p>
<div><pre class="language-css"><code class="language-css"><span class="token selector">.nesting</span> <span class="token punctuation">{</span><br>  <span class="token property">color</span><span class="token punctuation">:</span> hotpink<span class="token punctuation">;</span><br><br>  <span class="token selector">&gt; .is</span> <span class="token punctuation">{</span><br>    <span class="token property">color</span><span class="token punctuation">:</span> rebeccapurple<span class="token punctuation">;</span><br><br>    <span class="token selector">&gt; .awesome</span> <span class="token punctuation">{</span><br>      <span class="token property">color</span><span class="token punctuation">:</span> deeppink<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</div><div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 112, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      112
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox, Not supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported">
<p></p></span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="edge">
<span class="visually-hidden">Edge 112, Supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
112
</span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="safari">
<span class="visually-hidden">Safari 16.5, Supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
16.5
</span>
</li><p></p>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/CSS/Nesting_selectors#browser_compatibility" target="_blank">Source</a>
</div>
<h3 id="balancing-headlines-with-text-wrap-balance">Balancing headlines with <code>text-wrap: balance</code> <a class="headline-link" href="https://web.dev/web-platform-05-2023/#balancing-headlines-with-text-wrap-balance">#</a></h3>
<p>From Chrome 114 you can use <code>text-wrap: balance</code>. This allows you to balance headlines, avoiding the issue of having a single word on the final line, providing a more pleasing and readable result. You can find out more in <a href="https://developer.chrome.com/blog/css-text-wrap-balance/" rel="noopener">CSS text-wrap: balance</a>.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 114, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      114
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox, Not supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported">
<p></p></span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="edge">
<span class="visually-hidden">Edge 114, Supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
114
</span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="safari">
<span class="visually-hidden">Safari, Not supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported"><p></p>
<p></p></span>
</li><p></p>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/CSS/text-wrap#browser_compatibility" target="_blank">Source</a>
</div>
<h3 id="chips-cookies-having-independent-partitioned-state">CHIPS: Cookies Having Independent Partitioned State <a class="headline-link" href="https://web.dev/web-platform-05-2023/#chips-cookies-having-independent-partitioned-state">#</a></h3>
<p>As part of the work to <a href="https://developer.chrome.com/docs/privacy-sandbox/third-party-cookie-phase-out/" rel="noopener">phase out third-party cookies</a>, <a href="https://developer.chrome.com/docs/privacy-sandbox/chips/" rel="noopener">CHIPS</a> enables opting-in to third-party cookies being partitioned by top-level site using the new cookie attribute <code>Partitioned</code>. CHIPS is available in Chrome 114.</p>
<h3 id="the-popover-api">The Popover API <a class="headline-link" href="https://web.dev/web-platform-05-2023/#the-popover-api">#</a></h3>
<p>Also in Chrome 114 is the <a href="https://developer.mozilla.org/docs/Web/API/Popover_API" rel="noopener">Popover API</a> making it easier to build transient user interface (UI) elements that are displayed on top of all other web app UI.</p>
<p>These include user-interactive elements like action menus, form element suggestions, content pickers, and teaching UI.</p>
<p>The new popover attribute enables any element to be displayed in the <a href="https://developer.chrome.com/blog/top-layer-devtools/" rel="noopener">top layer</a> automatically. This means no more worrying about positioning, stacking elements, focus or keyboard interactions for the developer.</p>
<p>Learn more in <a href="https://developer.chrome.com/blog/introducing-popover-api/" rel="noopener">Introducing the popover API</a>.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 114, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      114
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 114, Behind a flag</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="flag" title="Behind a flag" aria-label="Behind a flag">
<p></p></span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="edge">
<span class="visually-hidden">Edge 114, Supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
114
</span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="safari">
<span class="visually-hidden">Safari 17, Supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
17
</span>
</li><p></p>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/API/ToggleEvent#browser_compatibility" target="_blank">Source</a>
</div>
<h2 id="beta-browser-releases">Beta browser releases <a class="headline-link" href="https://web.dev/web-platform-05-2023/#beta-browser-releases">#</a></h2>
<p>Beta browser versions give you a preview of things that will be in the next stable version of the browser. It's a great time to test new features, or removals, that could impact your site before the world gets that release. New betas are <a href="https://developer.mozilla.org/docs/Mozilla/Firefox/Releases/114" rel="noopener">Firefox 114</a>, <a href="https://developer.chrome.com/blog/chrome-115-beta/" rel="noopener">Chrome 115</a>, and <a href="https://developer.apple.com/documentation/safari-release-notes/safari-16_6-release-notes" rel="noopener">Safari 16.6</a>. These releases bring many great features to the platform. Check out the release notes for all of the details, here are just a few highlights.</p>
<p>Chrome 115 includes multiple values for the CSS <code>display</code> property. This means that <code>display: flex</code> becomes <code>display: block flex</code> and <code>display: block</code> becomes <code>display: block flow</code>. The single values are maintained as legacy keywords, and once in Chrome Stable this makes the multiple values available accross all engines.</p>
<p>Also in Chrome 115 are the <code>ScrollTimeline</code> and <code>ViewTimeline</code> extensions to the Web Animations specification. These enable <a href="https://developer.chrome.com/articles/scroll-driven-animations/" rel="noopener">scroll-driven animations</a> via CSS and JavaScript.</p>
<p>Firefox 114 includes the <a href="https://developer.mozilla.org/docs/Web/API/WebTransport_API" rel="noopener">WebTransport API</a>, a modern update to WebSockets providing support for multiple streams, unidirectional streams, and out-of-order delivery.</p>
<p><em>Photo by <a href="https://unsplash.com/@photozace" rel="noopener">Photoz ace</a>.</em></p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[部署 AVIF 以获得响应更快的网站]]></title>
            <link>https://web.dev/avif-updates-2023/</link>
            <guid>https://web.dev/avif-updates-2023/</guid>
            <content:encoded><![CDATA[<div>
    <h1>GPT总结</h1>
    <summary>AVIF是一种新的图像格式，在网络上迅速流行起来，因为它具有高压缩率、高效性能和广泛的采用。AVIF是一种开放、免版税的图像格式，基于由开放媒体联盟标准化的AV1视频编解码器。本文将概述AVIF在生态系统中的采用情况，以及开发人员可以从AVIF中获得的静态图像和动画的性能和质量优势。

AVIF生态系统的最新情况是什么？
自Chrome、Firefox和Safari引入AVIF以来，AVIF在网络上的使用量稳步增长；几乎所有的浏览器都支持AVIF。

仅在Chrome中，AVIF的使用量在Chrome稳定版添加AVIF支持后的一年多时间里增长到了约1%。

一些图像CDN（内容分发网络），如Akamai、Cloudflare、Cloudinary和Imgix，今天都在提供AVIF图像服务。在一篇宣布支持AVIF的博文中，Imgix报告称与JPEG相比，AVIF可以节省60%的文件大小，与WebP相比可以节省35%。这种文件大小的节省不仅可以带来显著的存储节省，还可以帮助页面加载更快，从而提高最大内容绘制（LCP）时间。LCP是核心Web指标之一，表示页面上最大内容</summary>
    <div>
    <div>OriginTitle: Deploying AVIF for more responsive websites</div>

    </div></div><p><a href="https://aomedia.org/avif/" rel="noopener">AVIF</a>是一种新的图像格式，由于其高压缩率、高效的性能和广泛的采用而在网络上迅速流行。 AVIF 是一种开放、免版税的图像格式，基于开放媒体联盟标准化的 AV1 视频编解码器。 本博文将概述生态系统中如何采用 AVIF，以及开发人员可以从 AVIF 获得静态图像和动画的哪些性能和质量优势。</p>
<h2 id="whats-new-with-the-avif-ecosystem">AVIF 生态系统有哪些新变化？<a class="headline-link" href="https://web.dev/avif-updates-2023/#whats-new-with-the-avif-ecosystem">#</a></h2>
<p>自从在 Chrome、Firefox 和 Safari 中引入 AVIF 以来，AVIF 在网络上的使用量一直在稳步增长；<a href="https://caniuse.com/avif" rel="noopener">几乎所有浏览器</a>今天支持AVIF。</p>
<p>仅在 Chrome 中，在 Chrome 稳定版添加 AVIF 支持后的一年多时间里，AVIF 使用率就增长了约 1%。</p>
<figure>
  <img alt="A line graph of AVIF usage in Chrome from May 2021 to March 2023. Support has steadily grown from 0% to just beneath 1.4%." decoding="async" height="367" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&amp;w=1600 1600w" width="800">
</figure>
<p>许多图像 CDN，例如<a href="https://techdocs.akamai.com/ivm/changelog/apr-07-2021-new-policy-filters-and-avif-image-format" rel="noopener">阿卡迈</a>,<a href="https://blog.cloudflare.com/images-avif-blur-bundle/" rel="noopener">云耀</a>,<a href="https://cloudinary.com/blog/how_to_adopt_avif_for_images_with_cloudinary" rel="noopener">云数</a>和<a href="https://blog.imgix.com/2021/10/27/avif-limited-availability" rel="noopener">伊姆吉克斯</a>今天提供 AVIF 图像。 在一个<a href="https://blog.imgix.com/2021/10/27/avif-limited-availability" rel="noopener">博客文章</a>在宣布支持 AVIF 后，Imgix 报告称，与 JPEG 相比，文件大小节省了 60%，与 WebP 相比，文件大小节省了 35%。 这些文件大小的节省不仅可以显着节省存储空间，而且还有助于更快地加载页面、更快地生成内容<a href="https://web.dev/lcp/">最大内容涂料 (LCP)</a>次。 LCP 是其中之一<a href="https://web.dev/learn-core-web-vitals/">核心网络生命力</a>，并表示页面上最大内容块的加载速度。 使用现代编解码器来压缩图像是其中之一<a href="https://web.dev/optimize-lcp/">关键技术</a>以减少LCP。<a href="https://developer.chrome.com/docs/lighthouse/overview/" rel="noopener">灯塔</a>是一个很棒的 Chrome 开发者工具，用于测试您的网站并查看<a href="https://developer.chrome.com/en/docs/lighthouse/performance/uses-webp-images/" rel="noopener">AVIF 会带来多少节省</a>。</p>
<p>WordPress 是<a href="https://www.wpbeginner.com/beginners-guide/ultimate-list-of-wordpress-stats-facts-and-other-research/" rel="noopener">最受欢迎</a>世界上最大的网站平台，并且有许多插件可供开发人员将图像转换为 AVIF，例如：</p>
<ul>
<li><a href="https://wordpress.org/plugins/autoptimize/" rel="noopener">自动优化</a></li>
<li><a href="https://wordpress.org/plugins/webp-converter-for-media/" rel="noopener">转换为媒体</a></li>
<li><a href="https://ewww.io/" rel="noopener">EWW图像优化器</a></li>
<li><a href="https://optimole.com/" rel="noopener">奥普莫勒</a></li>
<li><a href="https://shortpixel.com/" rel="noopener">短像素图像优化器</a></li>
</ul>
<p>对于更多实践开发人员来说，诸如<a href="https://imagemagick.org/index.php" rel="noopener">图像魔术师</a>和<a href="https://ffmpeg.org/" rel="noopener">FFmpeg</a>是一个很好的起点。</p>
<h2 id="avif-encode-speed">AVIF编码速度<a class="headline-link" href="https://web.dev/avif-updates-2023/#avif-encode-speed">#</a></h2>
<p>快速的编码速度和高视觉质量对于大规模部署图像压缩至关重要。 过去两年AVIF软件编码速度有了显着提高。 与其他现代静态图像格式相比，AVIF 生成的文件较小，但视觉质量相似（请参见下图，越低越好），但也<a href="https://storage.googleapis.com/avif-comparison/subset1.html" rel="noopener">编码速度更快</a>。</p>
<figure>
  <img alt="A bar chart comparing various image codec file sizes as a percentage of the output of TurboJPEG. AVIF is lowest, then JPEG XL, then WebP, and finally MozJPEG." decoding="async" height="415" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&amp;w=1600 1600w" width="800">
</figure>
<p>下图（越高越好）说明了 AVIF 编码速度与其他图像格式的比较。 WebP 等上一代编解码器受益于不太复杂（但效率也较低）的压缩算法。 通过多线程编码方案，AVIF 在常见用例中实现了类似的性能，同时提供了显着的压缩增益。</p>
<figure>
  <img alt="A comparison of image codec encoding speed. The compared encoders are average AVIF, average JPEG XL, average WebP (one thread), and average MozJPEG (one thread). AVIF is generally one of the fastest image encoders in terms of best quality and default effort, but is the slowest of all encoders for on-the-fly performance." decoding="async" height="433" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&amp;w=1600 1600w" width="800">
</figure>
<p>对于对更详细的编码速度和视觉质量比较感兴趣的开发人员，<a href="https://storage.googleapis.com/avif-comparison/index.html" rel="noopener">图像编码比较</a>网站包含可重复的基准测试结果。</p>
<p>虽然 AVIF 和 WebP 等现代图像编解码器的软件实现针对 x86 和 ARM 处理器架构进行了优化，但大规模压缩大量图像的计算成本可能很高。 降低压缩成本的一种替代方法是探索硬件加速。<a href="https://www.blue-dot.io/" rel="noopener">蓝点</a>开发了一种在可编程 FPGA 上运行的硬件加速 Pulsar-AVIF 编码器，例如 AMD 的 Alveo U250。 与基于软件的 avifenc 相比，Pulsar-AVIF 的速度提高了 7 至 23 倍，并且具有类似的性能<a href="https://www.blue-dot.io/avif-speed-quality-benchmark/" rel="noopener">压缩效率</a>。</p>
<div class="table-wrapper scrollbar">
  <table>
    <thead>
      <tr>
        <th>编码器</th>
        <th>编码时间（毫秒）</th>
        <th>每秒帧数</th>
        <th>CPU利用率</th>
        <th>硬件规格</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>
          脉冲星-AVIF<br>
          (FPGA)
        </td>
        <td>60</td>
        <td>409.85</td>
        <td>305%</td>
        <td>
          AMD Alveo U250 1ea + 英特尔(R) 至强(R)<br>
          Platinum 8171 CPU，2.6GHz，10 核
        </td>
      </tr>
      <tr>
        <td>
          阿维芬<br>
          （利巴姆）
        </td>
        <td>405</td>
        <td>59.26</td>
        <td>3200%</td>
        <td>
          Intel(R) Xeon(R) Platinum 8370C CPU 为<br>
          2.8GHz，32核
        </td>
      </tr>
      <tr>
        <td>
          阿维芬<br>
          (SVT-AV1)
        </td>
        <td>1325</td>
        <td>18.11</td>
        <td>3200%</td>
        <td>
          Intel(R) Xeon(R) Platinum 8370C CPU 为<br>
          2.8GHz，32核
        </td>
      </tr>
    </tbody>
    <caption>
      AVIF编码速度比较<br>
      <ul>
        <li>测试集：Kodak（24 张 768x512 图像）</li>
        <li>同时编码 24 个图像（24 个进程）</li>
        <li>每个软件编码过程由4个线程执行。 (-j 4)</li>
      </ul>
    </caption>
  </table>
</div>
<p>开发者可以使用云虚拟机部署Pulsar-AVIF编码器，例如<a href="https://learn.microsoft.com/en-us/azure/virtual-machines/np-series" rel="noopener">Azure NP 系列</a>。</p>
<h2 id="avif-features-for-responsive-web-pages">响应式网页的 AVIF 功能<a class="headline-link" href="https://web.dev/avif-updates-2023/#avif-features-for-responsive-web-pages">#</a></h2>
<p>AVIF 有一些有趣的功能，有助于提供响应更快的网页。 这次我们将深入研究动画 AVIF，这是迄今为止在网络上提供炫酷动画的最有效方式。</p>
<h3 id="animated-avif">动画 AVIF<a class="headline-link" href="https://web.dev/avif-updates-2023/#animated-avif">#</a></h3>
<p>动画<a href="https://en.wikipedia.org/wiki/GIF" rel="noopener">动图</a>还是<a href="https://almanac.httparchive.org/en/2022/media#gifs-animated-and-not" rel="noopener">一种流行的格式</a>尽管已经 35 岁，但仍致力于动画图像。 动画 GIF 的最大缺点是仅支持 256 色，压缩效果差，导致文件大小非常大，同时还限制了实际用例的分辨率或帧速率。 相比之下，动画 AVIF 编码实际上与 AV1 视频编码方案相同，与动画 GIF 相比，它可以显着节省文件大小。</p>
<p>我们运行了一个简单的基准测试，将一组动画 GIF 编码为 AVIF 和 JPEG XL。 在测试集中，与原始 GIF 文件相比，平均文件大小节省百分比约为 86%，与动画 JPEG XL 文件相比，平均文件大小节省百分比约为 73%*。</p>
<figure>
  <img alt="A comparison of animated image codec performance. AVIF outperforms GIF and JPEG XL in terms of both average and median file size." decoding="async" height="371" loading="lazy" sizes="(min-width: 600px) 600px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&amp;w=1200 1200w" width="600">
  <figcaption>
     * libavif 和 libjxl 版本：libavif 版本 4cff6a3（libaom 版本 v3.5.0）、libjxl 版本 176b1c03。 测试集：15 个示例 GIF<a href="https://commons.wikimedia.org/wiki/Category:Animated_GIF_files." rel="noopener">维基百科</a>。
  </figcaption>
</figure>
<p>Chrome、Firefox 和 Safari 都支持动画 AVIF 播放。</p>
<p>FFmpeg 是一种用于创建动画 AVIF 文件的工具，下面是使用 FFmpeg 将 GIF 转换为 AVIF 的基本示例：</p>
<div><pre class="language-bash"><code class="language-bash">ffmpeg-i<span class="token string">”<span class="token variable">$INPUT_GIF</span>”</span>-crf<span class="token variable">$CRF</span>-b:v<span class="token number">0</span> <span class="token string">”<span class="token variable">$输出</span>.avif”</span></code></pre>
</div><p><code>$CRF</code>是所需的输出质量，其范围为<code>0</code>到<code>63</code>。 较低的值意味着更好的质量和更大的文件大小。<code>0</code>用途<a href="https://en.wikipedia.org/wiki/Lossless_compression" rel="noopener">无损压缩</a>。 从值开始<code>23</code>适用于小型动画 AVIF 文件。</p>
<p>FFmpeg 默认使用 libaom 来编码 AVIF 图像，但也可以使用<a href="https://github.com/xiph/rav1e" rel="noopener">拉夫1e</a>或者<a href="https://gitlab.com/AOMediaCodec/SVT-AV1" rel="noopener">SVT-AV1</a>有空的时候。 有关编码器选择、调整编码参数以实现速度/质量权衡的更多信息，请参阅<a href="https://trac.ffmpeg.org/wiki/Encode/AV1" rel="noopener">FFmpeg 的 AV1 编码指南</a>。</p>
<p>另一个用例是将 AV1 视频重新打包为 AVIF，而不重新编码原始文件。 这比解码/编码原始 AV1 文件要便宜得多，并且使 AV1 视频可用于<code></code>元素。 通过<code>-c:v 复制</code>FFmpeg 可以做到这一点。</p>
<div><pre class="language-bash"><code class="language-bash">ffmpeg-i<span class="token string">”<span class="token variable">$INPUT_AV1_VIDEO</span>”</span>-c:v 复制 -an<span class="token string">”<span class="token variable">$输出</span>.avif”</span></code></pre>
</div><h2 id="conclusions">结论<a class="headline-link" href="https://web.dev/avif-updates-2023/#conclusions">#</a></h2>
<p>自推出以来，AVIF 在网络上的使用量一直在稳步增长，并受到浏览器、图像 CDN、WordPress 插件和编码工具的广泛支持。 总而言之，AVIF 是在网络上提供图像的绝佳选择； AVIF 可以快速编码和解码，同时提供最佳质量或最小的文件大小，无论您更喜欢您的网站。 AVIF 是在网络上提供动画的最有效方式。 如果您有疑问、意见或功能请求，请联系<a href="https://groups.google.com/a/aomedia.org/g/av1-discuss" rel="noopener">av1-讨论邮件列表</a>,<a href="https://github.com/AOMediaCodec/community/wiki" rel="noopener">AOM Github 社区</a>， 和<a href="https://github.com/AOMediaCodec/av1-avif/wiki" rel="noopener">AVIF 维基</a>。</p>
<p><em>英雄形象来自<a href="https://unsplash.com/photos/oXlXu2qukGE" rel="noopener">未飞溅</a>， 经过<a href="https://unsplash.com/@amal_z7z" rel="noopener">阿迈勒小号
</a>。</em></p>
<hr><p><a href="https://aomedia.org/avif/" rel="noopener">AVIF</a> is a new image format that is quickly gaining popularity on the web because of its high compression rates, efficient performance, and broad adoption. AVIF is an open, royalty-free image format that is based on the AV1 video codec standardized by the Alliance for Open Media. This blog post will provide an overview of how AVIF is adopted in the ecosystem, and what kind of performance and quality benefits developers can expect from AVIF for still images and animations.</p>
<h2 id="whats-new-with-the-avif-ecosystem">What’s new with the AVIF ecosystem? <a class="headline-link" href="https://web.dev/avif-updates-2023/#whats-new-with-the-avif-ecosystem">#</a></h2>
<p>Since the introduction of AVIF in Chrome, Firefox and Safari, usage of AVIF on the web has been growing steadily; <a href="https://caniuse.com/avif" rel="noopener">almost all browsers</a> support AVIF today.</p>
<p>In Chrome alone, AVIF usage grew to approximately one percent in a little over a year after Chrome added AVIF support in stable.</p>
<figure>
  <img alt="A line graph of AVIF usage in Chrome from May 2021 to March 2023. Support has steadily grown from 0% to just beneath 1.4%." decoding="async" height="367" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&amp;w=1600 1600w" width="800">
</figure>
<p>A number of image CDNs, such as <a href="https://techdocs.akamai.com/ivm/changelog/apr-07-2021-new-policy-filters-and-avif-image-format" rel="noopener">Akamai</a>, <a href="https://blog.cloudflare.com/images-avif-blur-bundle/" rel="noopener">Cloudflare</a>, <a href="https://cloudinary.com/blog/how_to_adopt_avif_for_images_with_cloudinary" rel="noopener">Cloudinary</a> and <a href="https://blog.imgix.com/2021/10/27/avif-limited-availability" rel="noopener">Imgix</a> are serving AVIF images today. In a <a href="https://blog.imgix.com/2021/10/27/avif-limited-availability" rel="noopener">blog post</a> announcing AVIF support, Imgix reported 60% file size savings compared to JPEG and 35% savings compared to WebP. These file size savings lead to significant storage savings, but also help pages load faster, yielding faster <a href="https://web.dev/lcp/">Largest Contentful Paint (LCP)</a> times. LCP is one of the <a href="https://web.dev/learn-core-web-vitals/">Core Web Vitals</a>, and represents how quickly the largest block of content on the page has loaded. Using modern codecs to compress images is one of the <a href="https://web.dev/optimize-lcp/">key techniques</a> to reduce LCP. <a href="https://developer.chrome.com/docs/lighthouse/overview/" rel="noopener">Lighthouse</a> is a great Chrome developer tool for testing your web site and to see <a href="https://developer.chrome.com/en/docs/lighthouse/performance/uses-webp-images/" rel="noopener">how much savings AVIF would bring</a>.</p>
<p>WordPress is the <a href="https://www.wpbeginner.com/beginners-guide/ultimate-list-of-wordpress-stats-facts-and-other-research/" rel="noopener">most popular</a> website platform in the world, and there are number of plugins available for developers to convert their images to AVIF, such as:</p>
<ul>
<li><a href="https://wordpress.org/plugins/autoptimize/" rel="noopener">AutoOptimize</a></li>
<li><a href="https://wordpress.org/plugins/webp-converter-for-media/" rel="noopener">Converted for Media</a></li>
<li><a href="https://ewww.io/" rel="noopener">EWWW Image Optimizer</a></li>
<li><a href="https://optimole.com/" rel="noopener">Optimole</a></li>
<li><a href="https://shortpixel.com/" rel="noopener">ShortPixel Image Optimizer</a></li>
</ul>
<p>For more hands-on developers, tools like <a href="https://imagemagick.org/index.php" rel="noopener">ImageMagick</a> and <a href="https://ffmpeg.org/" rel="noopener">FFmpeg</a> are a good starting point.</p>
<h2 id="avif-encode-speed">AVIF encode speed <a class="headline-link" href="https://web.dev/avif-updates-2023/#avif-encode-speed">#</a></h2>
<p>Fast encoding speed and high visual quality are critical for deploying image compression at scale. AVIF software encoding speed has improved significantly over the past two years. Compared to other modern still image formats, AVIF produces smaller files with similar visual quality (see the following graph, lower is better) but is also <a href="https://storage.googleapis.com/avif-comparison/subset1.html" rel="noopener">faster to encode</a>.</p>
<figure>
  <img alt="A bar chart comparing various image codec file sizes as a percentage of the output of TurboJPEG. AVIF is lowest, then JPEG XL, then WebP, and finally MozJPEG." decoding="async" height="415" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&amp;w=1600 1600w" width="800">
</figure>
<p>The chart below (higher is better) illustrates how AVIF encoding speed compares to other image formats. Previous generation codecs like WebP benefit from the less complex (but also less efficient) compression algorithms. With a multi-threaded encoding scheme, AVIF achieves similar performance for common use cases while delivering significant compression gains.</p>
<figure>
  <img alt="A comparison of image codec encoding speed. The compared encoders are average AVIF, average JPEG XL, average WebP (one thread), and average MozJPEG (one thread). AVIF is generally one of the fastest image encoders in terms of best quality and default effort, but is the slowest of all encoders for on-the-fly performance." decoding="async" height="433" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&amp;w=1600 1600w" width="800">
</figure>
<p>For developers interested in more detailed encoding speed and visual quality comparisons, the <a href="https://storage.googleapis.com/avif-comparison/index.html" rel="noopener">Image Coding Comparisons</a> site contains reproducible benchmark results.</p>
<p>While software implementations for modern image codecs like AVIF and WebP are optimized for x86 and ARM processors architectures, compressing vast amounts of images at scale can be computationally expensive. One alternative to reduce compression costs is to explore hardware acceleration. <a href="https://www.blue-dot.io/" rel="noopener">Bluedot</a> has developed a hardware accelerated Pulsar-AVIF encoder running on programmable FPGAs, such as AMD's Alveo U250. Compared to software based avifenc, Pulsar-AVIF delivers a 7 to 23 times speed improvement with similar <a href="https://www.blue-dot.io/avif-speed-quality-benchmark/" rel="noopener">compression efficiency</a>.</p>
<div class="table-wrapper scrollbar">
  <table>
    <thead>
      <tr>
        <th>Encoder</th>
        <th>Encode time (ms)</th>
        <th>Frames per second</th>
        <th>CPU utilization</th>
        <th>Hardware specification</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>
          Pulsar-AVIF<br>
          (FPGA)
        </td>
        <td>60</td>
        <td>409.85</td>
        <td>305%</td>
        <td>
          AMD Alveo U250 1ea + Intel(R) Xeon(R)<br>
          Platinum 8171 CPU at 2.6GHz, 10 cores
        </td>
      </tr>
      <tr>
        <td>
          avifenc<br>
          (libaom)
        </td>
        <td>405</td>
        <td>59.26</td>
        <td>3200%</td>
        <td>
          Intel(R) Xeon(R) Platinum 8370C CPU at<br>
          2.8GHz, 32 cores
        </td>
      </tr>
      <tr>
        <td>
          avifenc<br>
          (SVT-AV1)
        </td>
        <td>1325</td>
        <td>18.11</td>
        <td>3200%</td>
        <td>
          Intel(R) Xeon(R) Platinum 8370C CPU at<br>
          2.8GHz, 32 cores
        </td>
      </tr>
    </tbody>
    <caption>
      AVIF encode speed comparison<br>
      <ul>
        <li>Test set: Kodak (24 images of 768x512)</li>
        <li>Encoding 24 images simultaneously (24 processes)</li>
        <li>Each software encoding process is executed with 4 threads. (-j 4)</li>
      </ul>
    </caption>
  </table>
</div>
<p>Developers can deploy Pulsar-AVIF encoder with cloud virtual machines, such as <a href="https://learn.microsoft.com/en-us/azure/virtual-machines/np-series" rel="noopener">Azure NP-Series</a>.</p>
<h2 id="avif-features-for-responsive-web-pages">AVIF features for responsive web pages <a class="headline-link" href="https://web.dev/avif-updates-2023/#avif-features-for-responsive-web-pages">#</a></h2>
<p>AVIF has a few interesting features that will help to deliver more responsive web pages. This time we’ll dive a bit into animated AVIFs, which are by far the most efficient way of delivering cool animations on the web.</p>
<h3 id="animated-avif">Animated AVIF <a class="headline-link" href="https://web.dev/avif-updates-2023/#animated-avif">#</a></h3>
<p>Animated <a href="https://en.wikipedia.org/wiki/GIF" rel="noopener">GIF</a> is still <a href="https://almanac.httparchive.org/en/2022/media#gifs-animated-and-not" rel="noopener">a popular format</a> for animated images, despite being 35 years old. Biggest drawbacks of animated GIFs are the support for 256 colors only and poor compression leading to very large file sizes while also limiting the resolution or frame rate for practical use cases. In contrast, animated AVIF coding is actually the same as AV1 video coding scheme which provides significant file size savings compared to animated GIF.</p>
<p>We ran a simple benchmark where we encoded a set of animated GIFs to both AVIF and JPEG XL. Over the test set, median file size savings percentage was approximately 86% compared to original GIF files and about 73% compared to animated JPEG XL files*.</p>
<figure>
  <img alt="A comparison of animated image codec performance. AVIF outperforms GIF and JPEG XL in terms of both average and median file size." decoding="async" height="371" loading="lazy" sizes="(min-width: 600px) 600px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&amp;w=1200 1200w" width="600">
  <figcaption>
    * libavif and libjxl versions: libavif version 4cff6a3 (libaom version v3.5.0), libjxl version 176b1c03. Test set: 15 sample GIFs from <a href="https://commons.wikimedia.org/wiki/Category:Animated_GIF_files." rel="noopener">Wikipedia</a>.
  </figcaption>
</figure>
<p>Chrome, Firefox and Safari all support animated AVIF playbacks.</p>
<p>FFmpeg is one tool to use for creating animated AVIF files, here’s a basic example of converting a GIF to AVIF using FFmpeg:</p>
<div><pre class="language-bash"><code class="language-bash">ffmpeg -i <span class="token string">"<span class="token variable">$INPUT_GIF</span>"</span> -crf <span class="token variable">$CRF</span> -b:v <span class="token number">0</span> <span class="token string">"<span class="token variable">$OUTPUT</span>.avif"</span></code></pre>
</div><p><code>$CRF</code> is the desired output quality on a scale of <code>0</code> to <code>63</code>. Lower values mean better quality and greater file size. <code>0</code> uses <a href="https://en.wikipedia.org/wiki/Lossless_compression" rel="noopener">lossless compression</a>. Start with a value of <code>23</code> for small animated AVIF files.</p>
<p>FFmpeg uses libaom by default for encoding AVIF images, but it can also use <a href="https://github.com/xiph/rav1e" rel="noopener">rav1e</a> or <a href="https://gitlab.com/AOMediaCodec/SVT-AV1" rel="noopener">SVT-AV1</a> when available. More information about encoder choices, tuning the encoding parameters for speed/quality trade-offs can be found in <a href="https://trac.ffmpeg.org/wiki/Encode/AV1" rel="noopener">FFmpeg's AV1 encoding guide</a>.</p>
<p>Another use case is to repackage an AV1 video into AVIF without re-encoding the original file. This is significantly cheaper than decoding/encoding the original AV1 file and makes the AV1 video available for use with the <code>&lt;img&gt;</code> element. Passing <code>-c:v copy</code> to FFmpeg can do this.</p>
<div><pre class="language-bash"><code class="language-bash">ffmpeg -i <span class="token string">"<span class="token variable">$INPUT_AV1_VIDEO</span>"</span> -c:v copy -an <span class="token string">"<span class="token variable">$OUTPUT</span>.avif"</span></code></pre>
</div><h2 id="conclusions">Conclusions <a class="headline-link" href="https://web.dev/avif-updates-2023/#conclusions">#</a></h2>
<p>AVIF use on the web has been steadily increasing since launch and is widely supported by browsers, image CDNs, WordPress plugins and encoding tools. All in all, AVIF is a great choice for serving images on the web; AVIF is fast to encode and decode while providing the best quality or smallest file size, whichever you prefer for your website. AVIF is the most efficient way to deliver animations on the web. If you have questions, comments, or feature requests, please reach out on the <a href="https://groups.google.com/a/aomedia.org/g/av1-discuss" rel="noopener">av1-discuss mailing list</a>, <a href="https://github.com/AOMediaCodec/community/wiki" rel="noopener">AOM Github community</a>, and <a href="https://github.com/AOMediaCodec/av1-avif/wiki" rel="noopener">AVIF wiki</a>.</p>
<p><em>Hero image from <a href="https://unsplash.com/photos/oXlXu2qukGE" rel="noopener">Unsplash</a>, by <a href="https://unsplash.com/@amal_z7z" rel="noopener">Amal S
</a>.</em></p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[redBus 如何改进其网站的 Next Paint 交互 (INP) 并将销售额提高 7%]]></title>
            <link>https://web.dev/redbus-inp/</link>
            <guid>https://web.dev/redbus-inp/</guid>
            <content:encoded><![CDATA[<div>
    <h1>GPT总结</h1>
    <summary>本文介绍了redBus如何通过优化Interaction to Next Paint (INP)指标来改善其网站的性能和用户体验。redBus通过使用Google的web-vitals JavaScript库来跟踪INP和其他重要的用户体验指标，并使用ELK分析前端收集到的数据。他们发现搜索页面的滚动和日期更改交互导致INP较差，因此他们采取了一系列优化措施，如对滚动事件进行防抖处理、使用requestAnimationFrame回调来优化渲染工作等。这些优化措施显著提高了搜索页面的INP，并使销售额增加了7%。此外，他们还通过减少不必要的重新渲染来优化了输入字段的交互，进一步提高了INP。通过优化INP，redBus成功改善了网站的性能和用户体验，取得了良好的商业效果。</summary>
    <div>
    <div>OriginTitle: How redBus improved their website's Interaction to Next Paint (INP) and increased sales by 7%</div>

    </div></div><p>网络及其功能正在快速发展。 您现在可以在 Web 上构建丰富且功能齐全的体验，这些体验可以实现本机应用程序在功能方面的大部分功能。</p>
<p>JavaScript 是整个网络交互的主要驱动力，但如果不小心使用，交互可能会感觉缓慢，并导致用户认为您的网站没有响应或完全损坏。 值得庆幸的是，<a href="https://web.dev/inp/">与下一个油漆的相互作用 (INP)</a>创建指标是为了解决这个特定的用户体验问题。</p>
<p>INP 测量页面在其生命周期内进行的所有交互，并报告代表网站响应用户输入的速度的单个值。 简单地说，如果一个页面的 INP 等于或低于<a href="https://web.dev/inp/#what-is-a-good-inp-score">良好的门槛</a>，与页面进行的所有交互都可以说是可靠且快速的。</p>
<p><a href="https://www.redbus.in/" rel="noopener">红巴士</a>位于印度的巴士预订和票务网站，即使在 INP 仍被视为实验性指标的时期，也付出了巨大的努力来改进其网站的 INP。 经过他们的努力，他们的销售额增加了 7%，再次说明了网络性能与业务健康之间的关系。 以下是 redBus 为提高网站 INP 所做的努力。</p>
<h2 id="top-goals">首要目标<a class="headline-link" href="https://web.dev/redbus-inp/#top-goals">#</a></h2>
<p>当 redBus 开始优化其网站的 INP 时，他们想到了三个目标：</p>
<ol>
<li>无论网络速度和设备功能如何，都专注于交互延迟，为用户提供更好的用户体验。</li>
<li>优化他们的网站以尽可能快地保持互动。</li>
<li>确保 API 的响应尽可能轻，以确保数据快速传输到前端。</li>
</ol>
<h2 id="the-journey">旅程<a class="headline-link" href="https://web.dev/redbus-inp/#the-journey">#</a></h2>
<p>redBus 通过两种方式对交互延迟进行分类：</p>
<ol>
<li>客户端 JavaScript 阻塞导致的交互延迟。 当交互使用过多的 JavaScript 来阻塞主线程时，渲染会延迟，这会影响页面的 INP。</li>
<li>API 调用导致的网络延迟。 虽然网络活动不是 INP 测量的内容，但在较慢的网络上，或者如果请求导致大量响应，依赖于远程 API 调用的交互可能会感觉缓慢。</li>
</ol>
<p>redBus 最初非常有信心他们网站的 INP 会很好，但是<a href="https://en.wikipedia.org/wiki/Real_user_monitoring" rel="noopener">真实用户监控 (RUM)</a>该指标第 95 个百分位数的数据讲述了一个不同的故事。</p>
<h2 id="how-redbus-measured-inp">redBus 如何测量 INP<a class="headline-link" href="https://web.dev/redbus-inp/#how-redbus-measured-inp">#</a></h2>
<p>redBus 依靠的是<a href="https://github.com/GoogleChrome/web-vitals" rel="noopener"><code>网络生命周期</code>JavaScript 库</a>由 Google 构建，不仅可以跟踪 INP，还可以跟踪其网站上所有页面的所有重要用户体验指标。 除了<code>网络生命周期</code>JavaScript库，使用redBus<a href="https://www.elastic.co/what-is/elk-stack" rel="noopener">麋鹿</a>分析前端收集的 INP 数据。</p>
<p>但是，您如何跟踪网站的 INP<a href="https://web.dev/lab-and-field-data-differences/#field-data">场</a>可能与 redBus 解决问题的方式完全不同。 我们强烈建议您阅读<a href="https://web.dev/find-slow-interactions-in-the-field/">如何发现现场缓慢的互动</a>了解如何最好地跟踪您网站的 INP，然后<a href="https://web.dev/diagnose-slow-interactions-in-the-lab/">如何在实验室中重现它们</a>在你开始之前<a href="https://web.dev/optimize-inp/">优化交互</a>。</p>
<p>一旦 redBus 拥有了跟踪 INP 的系统，他们就能够分析数据，以便更好地了解交互速度慢的情况。</p>
<figure>
  <img alt="A screenshot of the ELK logging system reporting INP values for analysis." decoding="async" height="287" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
     redBus 用于分析从现场收集的 INP 值的日志系统的屏幕截图。 （<a href="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png" rel="noopener" target="_blank">单击此图像的更高分辨率版本</a>.)
  </figcaption>
</figure>
<h2 id="use-cases">用例<a class="headline-link" href="https://web.dev/redbus-inp/#use-cases">#</a></h2>
<p>当用户在redBus网站上搜索票价时，他们可以更改搜索页面上的日期，以筛选所需目的地的选定票价。 更改此页面上的日期的交互速度很慢，并且是 INP 较差的一个原因。</p>
<p>此外，当用户滚动浏览票价时，会从 API 延迟加载其他票价。<a href="https://web.dev/inp/#whats-in-an-interaction">尽管滚动本身并不影响 INP 的测量</a>， 这<code>滚动</code>事件侦听器本身安排了许多必须在主线程上运行的工作。 这项工作导致了主线程上的争用，从而增加了交互延迟，导致搜索页面上的 INP 较差。</p>
<figure>
  <video autoplay="" loop="" muted="" playsinline="">
    <source src="https://web-dev.imgix.net/video/jL3OLOhcWUQDnR4XjewLBx4e3PC3/xcxqqKz4JaUO9yQlS3Ex.webm" type="video/webm">
  </video>
  <figcaption>
     延迟加载行为用于在滚动时从 API 加载额外票价。 （<a href="https://web-dev.imgix.net/video/jL3OLOhcWUQDnR4XjewLBx4e3PC3/xcxqqKz4JaUO9yQlS3Ex.webm" rel="noopener" target="_blank">点击查看该视频的更高分辨率版本</a>.)
  </figcaption>
</figure>
<h2 id="how-redbus-optimized-inp-for-the-search-page">redBus 如何针对搜索页面优化 INP<a class="headline-link" href="https://web.dev/redbus-inp/#how-redbus-optimized-inp-for-the-search-page">#</a></h2>
<p>为了提高搜索页面的INP，redBus做了几处优化：</p>
<ul>
<li>这<a href="https://developer.mozilla.org/docs/Web/API/Element/scroll_event" rel="noopener"><code>滚动</code></a>事件处理程序是<a href="https://web.dev/debounce-your-input-handlers/">去抖</a>为了减少在给定时间段内触发事件回调的次数。 通过降低频率<code>滚动</code>事件回调运行后，主线程能够更快地响应搜索页面上的用户交互。</li>
<li>由此产生的渲染工作通过使用优先级<a href="https://developer.mozilla.org/docs/Web/API/window/requestAnimationFrame" rel="noopener"><code>请求动画帧</code></a>打回来。<code>请求动画帧</code>告诉浏览器回调中的工作必须在下一帧之前完成。</li>
</ul>
<figure>
  <img alt="A screenshot of the performance panel in Chrome DevTools showing the redBus website firing scroll event callbacks which are not debounced. The result is that the main thread becomes blocked." decoding="async" height="500" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
     之前：滚动处理程序在没有应用于事件回调的去抖动的情况下触发。 主线程上存在相当多的阻塞任务，这会延迟交互。 
  </figcaption>
</figure>
<figure>
  <img alt="A screenshot of the performance panel in Chrome DevTools showing the redBus website firing scroll event callbacks which are debounced. The result is that the main thread is less blocked because the scroll event handlers fire far less frequently." decoding="async" height="500" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
     之后：滚动处理程序在应用去抖动的情况下触发。 滚动事件回调触发的频率较低，使主线程有更多机会响应用户交互。 
  </figcaption>
</figure>
<p>此外，对搜索结果页面还进行了以下进一步优化：</p>
<ul>
<li>在搜索结果页面上倒数第二个卡上获取新批次的结果，以便通过提前触发延迟加载来改善用户体验和视觉性能。</li>
<li>延迟加载期间每次网络调用获取的结果较少。 通过将获取结果从 30 个减少到 10 个，观察到 INP 范围从 870 到 900 减少到 350 到 370。</li>
</ul>
<figure>
  <video autoplay="" loop="" muted="" playsinline="">
    <source src="https://web-dev.imgix.net/video/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ZjeONw0InjN2H5FEU0PM.webm" type="video/webm">
  </video>
  <figcaption>
     延迟加载行为用于在滚动时从 API 加载额外票价。 （<a href="https://web-dev.imgix.net/video/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ZjeONw0InjN2H5FEU0PM.webm" rel="noopener" target="_blank">点击查看该视频的更高分辨率版本</a>.)
  </figcaption>
</figure>
<p>虽然这些变化显着提高了搜索页面的 INP，但仍然存在一个问题：<a href="https://developer.mozilla.org/docs/Web/API/HTMLElement/change_event" rel="noopener"><code>改变</code></a>搜索页面输入字段上的事件将调用昂贵的减速器函数来更新用户界面。 这导致用户界面不必要的重新渲染，从而影响了页面的 INP。</p>
<figure>
  <video autoplay="" loop="" muted="" playsinline="">
    <source src="https://web-dev.imgix.net/video/jL3OLOhcWUQDnR4XjewLBx4e3PC3/9A46NHqYLxgWLkFsKGmF.webm" type="video/webm">
  </video>
  <figcaption>
     当用户在输入字段中键入时，控制台中会报告 INP 值。 在实验室环境中观察到的最终 INP 值 344 属于“需要改进”阈值。 （<a href="https://web-dev.imgix.net/video/jL3OLOhcWUQDnR4XjewLBx4e3PC3/9A46NHqYLxgWLkFsKGmF.webm" rel="noopener" target="_blank">点击查看该视频的更高分辨率版本</a>.)
  </figcaption>
</figure>
<p>为了优化这种交互，redBus 在本地管理输入组件的状态并将其与<a href="https://react-redux.js.org/" rel="noopener">终极版</a>仅当输入时才存储<a href="https://developer.mozilla.org/docs/Web/API/Element/blur_event" rel="noopener"><code>模糊</code></a>事件被解雇。 此更改减少了重新渲染的次数，并通过降低调用减速器的频率消除了不需要的用户界面重新渲染。</p>
<figure>
  <video autoplay="" loop="" muted="" playsinline="">
    <source src="https://web-dev.imgix.net/video/jL3OLOhcWUQDnR4XjewLBx4e3PC3/gD8RNByfNP8IsjytGbXZ.webm" type="video/webm">
  </video>
  <figcaption>
     由于在输入字段更改时调用减速器的频率较低，因此改进了 INP。 （<a href="https://web-dev.imgix.net/video/jL3OLOhcWUQDnR4XjewLBx4e3PC3/gD8RNByfNP8IsjytGbXZ.webm" rel="noopener" target="_blank">点击查看该视频的更高分辨率版本</a>.)
  </figcaption>
</figure>
<p>通过这一更改，页面的 INP 提高了 72%，从而带来更快、更流畅的用户体验，让用户更有可能参与其中。</p>
<h2 id="business-impact">商业冲击<a class="headline-link" href="https://web.dev/redbus-inp/#business-impact">#</a></h2>
<p>业务健康状况和页面性能之间的关系是众所周知的。 尽管与其他 Core Web Vitals 相比，INP 是一个相对较新的指标，但 redBus 通过专注于改进这一以用户为中心的重要性能指标，观察到了更好的业务成果。<strong>结果是销售额总体增长了 7%。</strong></p>
<p>简而言之，INP 帮助在 redBus 网站上描绘了运行时性能问题的图景。 知道需要改进后，redBus 能够观察问题、重现问题，并使用这些关键信息进行有利于 redBus 及其业务的优化。</p>
<hr><p>The web and its capabilities are evolving at a fast pace. You can now build rich and full-featured experiences on the web that can achieve much of what native applications can in terms of capabilities.</p>
<p>JavaScript is a primary driver for interactivity across the web, but if it's not used with care, interactions can feel sluggish, and lead users to perceive your website to be non-responsive or altogether broken. Thankfully, the <a href="https://web.dev/inp/">Interaction to Next Paint (INP)</a> metric was created to address this specific user experience problem.</p>
<p>INP measures all interactions made with a page during its lifecycle, and reports a single value that is representative of a website's speed in responding to user inputs. Simply put, if a page's INP is at or below the <a href="https://web.dev/inp/#what-is-a-good-inp-score">good threshold</a>, all interactions made with a page can be said to be reliably fast.</p>
<p><a href="https://www.redbus.in/" rel="noopener">redBus</a>, a bus booking and ticketing website based in India, undertook a substantial effort to improve their website's INP, even during the time when it was still considered an experimental metric. As a result of their efforts, they were able to increase sales by 7%, illustrating once again the relationship between web performance and business health. Here's what redBus did to improve their website's INP.</p>
<h2 id="top-goals">Top goals <a class="headline-link" href="https://web.dev/redbus-inp/#top-goals">#</a></h2>
<p>When redBus set out to optimize their website's INP, they had three goals in mind:</p>
<ol>
<li>Provide a better user experience for users by focusing on interaction latency regardless of network speed and device capabilities.</li>
<li>Optimize their website to keep interactions as fast as possible.</li>
<li>Ensure that responses from their API were as light as possible to ensure fast data transfer to the front end.</li>
</ol>
<h2 id="the-journey">The journey <a class="headline-link" href="https://web.dev/redbus-inp/#the-journey">#</a></h2>
<p>redBus categorized interaction latency in two ways:</p>
<ol>
<li>Interaction latency caused by blocking JavaScript on the client. When interactions use excessive JavaScript that blocks the main thread, rendering is delayed, and this affects a page's INP.</li>
<li>Network latency caused by API calls. While network activity is not something that INP measures, an interaction reliant on a call to a remote API can feel sluggish on slower networks, or if requests result in large responses.</li>
</ol>
<p>redBus was initially quite confident that the INP for their website would be good, but the <a href="https://en.wikipedia.org/wiki/Real_user_monitoring" rel="noopener">Real User Monitoring (RUM)</a> data for this metric at the 95th percentile told a different story.</p>
<h2 id="how-redbus-measured-inp">How redBus measured INP <a class="headline-link" href="https://web.dev/redbus-inp/#how-redbus-measured-inp">#</a></h2>
<p>redBus relied on the <a href="https://github.com/GoogleChrome/web-vitals" rel="noopener"><code>web-vitals</code> JavaScript library</a> built by Google to track not just INP, but all important user experience metrics for all pages across their website. In addition to the <code>web-vitals</code> JavaScript library, redBus used <a href="https://www.elastic.co/what-is/elk-stack" rel="noopener">ELK</a> to analyze INP data that was collected on the front end.</p>
<p>However, how you track your website's INP in <a href="https://web.dev/lab-and-field-data-differences/#field-data">the field</a> may be quite different from how redBus approached the problem. We highly recommend that you read about <a href="https://web.dev/find-slow-interactions-in-the-field/">how to find slow interactions in the field</a> to learn how to best to track INP for your websites, and subsequently <a href="https://web.dev/diagnose-slow-interactions-in-the-lab/">how to reproduce them in the lab</a> before you begin <a href="https://web.dev/optimize-inp/">optimizing interactions</a>.</p>
<p>Once redBus had a system in place for tracking INP, they were able to analyze the data in order to gain a better understanding of where slow interactivity was present.</p>
<figure>
  <img alt="A screenshot of the ELK logging system reporting INP values for analysis." decoding="async" height="287" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
    A screenshot of the logging system used by redBus to analyze INP values collected from the field. (<a href="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png" rel="noopener" target="_blank">Click for a higher resolution version of this image</a>.)
  </figcaption>
</figure>
<h2 id="use-cases">Use cases <a class="headline-link" href="https://web.dev/redbus-inp/#use-cases">#</a></h2>
<p>When users search for fares on the redBus website, they can change the date on the search page to filter selected fares for the desired destination. The interaction to change the date on this page was slow, and was a cause of poor INP.</p>
<p>Additionally, when a user scrolls through fares, additional fares are lazy-loaded from the API. <a href="https://web.dev/inp/#whats-in-an-interaction">Though scrolling itself isn't factored in how INP is measured</a>, the <code>scroll</code> event listener itself schedules a lot of work that must run on the main thread. This work was causing contention on the main thread that increased interaction latency, leading to poor INP on the search page.</p>
<figure>
  <video autoplay="" loop="" muted="" playsinline="">
    <source src="https://web-dev.imgix.net/video/jL3OLOhcWUQDnR4XjewLBx4e3PC3/xcxqqKz4JaUO9yQlS3Ex.webm" type="video/webm">
  </video>
  <figcaption>
    The lazy-loading behavior used to load additional fares from the API on scroll. (<a href="https://web-dev.imgix.net/video/jL3OLOhcWUQDnR4XjewLBx4e3PC3/xcxqqKz4JaUO9yQlS3Ex.webm" rel="noopener" target="_blank">Click for a higher resolution version of this video</a>.)
  </figcaption>
</figure>
<h2 id="how-redbus-optimized-inp-for-the-search-page">How redBus optimized INP for the search page <a class="headline-link" href="https://web.dev/redbus-inp/#how-redbus-optimized-inp-for-the-search-page">#</a></h2>
<p>To improve the search page's INP, redBus made several optimizations:</p>
<ul>
<li>The <a href="https://developer.mozilla.org/docs/Web/API/Element/scroll_event" rel="noopener"><code>scroll</code></a> event handler was <a href="https://web.dev/debounce-your-input-handlers/">debounced</a> in order to reduce the amount of times the event callback would fire in a given period. By lowering the frequency in which <code>scroll</code> event callback ran, the main thread was able to respond more quickly to user interactions on the search page.</li>
<li>The resulting rendering work was prioritized by using a <a href="https://developer.mozilla.org/docs/Web/API/window/requestAnimationFrame" rel="noopener"><code>requestAnimationFrame</code></a> callback. <code>requestAnimationFrame</code> tells the browser that the work in the callback must be done before the next frame.</li>
</ul>
<figure>
  <img alt="A screenshot of the performance panel in Chrome DevTools showing the redBus website firing scroll event callbacks which are not debounced. The result is that the main thread becomes blocked." decoding="async" height="500" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
    Before: scroll handlers firing without debouncing applied to the event callback. A considerable number of blocking tasks on the main thread are present, which will delay interactions.
  </figcaption>
</figure>
<figure>
  <img alt="A screenshot of the performance panel in Chrome DevTools showing the redBus website firing scroll event callbacks which are debounced. The result is that the main thread is less blocked because the scroll event handlers fire far less frequently." decoding="async" height="500" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
    After: scroll handlers firing with debouncing applied. The scroll event callbacks fire less frequently, giving the main thread more opportunities to respond to user interactions.
  </figcaption>
</figure>
<p>Additionally, the following further optimizations were made to the search results page:</p>
<ul>
<li>New batches of results were fetched on the second to last card on the search results page in order to improve the user experience and visual performance by triggering lazy loading earlier.</li>
<li>Fewer results were fetched on each network call during lazy loading. By reducing fetches from 30 to 10 results, a reduction in INP ranges at 870 to 900 down to 350 to 370 were observed.</li>
</ul>
<figure>
  <video autoplay="" loop="" muted="" playsinline="">
    <source src="https://web-dev.imgix.net/video/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ZjeONw0InjN2H5FEU0PM.webm" type="video/webm">
  </video>
  <figcaption>
    The lazy-loading behavior used to load additional fares from the API on scroll. (<a href="https://web-dev.imgix.net/video/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ZjeONw0InjN2H5FEU0PM.webm" rel="noopener" target="_blank">Click for a higher resolution version of this video</a>.)
  </figcaption>
</figure>
<p>While these changes significantly improved the INP of the search page, there was still the problem where the <a href="https://developer.mozilla.org/docs/Web/API/HTMLElement/change_event" rel="noopener"><code>change</code></a> event on the search page's input fields would call an expensive reducer function to update the user interface. This resulted in unnecessary rerendering of the user interface, which affected the page's INP.</p>
<figure>
  <video autoplay="" loop="" muted="" playsinline="">
    <source src="https://web-dev.imgix.net/video/jL3OLOhcWUQDnR4XjewLBx4e3PC3/9A46NHqYLxgWLkFsKGmF.webm" type="video/webm">
  </video>
  <figcaption>
    INP values reported in the console while the user types in an input field. The resulting INP value of 344 observed in a lab setting falls within the "need improvement" thresholds. (<a href="https://web-dev.imgix.net/video/jL3OLOhcWUQDnR4XjewLBx4e3PC3/9A46NHqYLxgWLkFsKGmF.webm" rel="noopener" target="_blank">Click for a higher resolution version of this video</a>.)
  </figcaption>
</figure>
<p>To optimize this interaction, redBus managed the state of input components locally and synced it with the <a href="https://react-redux.js.org/" rel="noopener">Redux</a> store only when an input's <a href="https://developer.mozilla.org/docs/Web/API/Element/blur_event" rel="noopener"><code>blur</code></a> event was fired. This change reduced the number of rerenders and eliminated unwanted rerendering of the user interface by calling the reducer less frequently.</p>
<figure>
  <video autoplay="" loop="" muted="" playsinline="">
    <source src="https://web-dev.imgix.net/video/jL3OLOhcWUQDnR4XjewLBx4e3PC3/gD8RNByfNP8IsjytGbXZ.webm" type="video/webm">
  </video>
  <figcaption>
    Improved INP as a result of calling the reducer less frequently on an input field change. (<a href="https://web-dev.imgix.net/video/jL3OLOhcWUQDnR4XjewLBx4e3PC3/gD8RNByfNP8IsjytGbXZ.webm" rel="noopener" target="_blank">Click for a higher resolution version of this video</a>.)
  </figcaption>
</figure>
<p>With this change, the page's INP improved by 72%, resulting in a faster and smoother user experience that users are more likely to engage with.</p>
<h2 id="business-impact">Business impact <a class="headline-link" href="https://web.dev/redbus-inp/#business-impact">#</a></h2>
<p>The relationship between business health and page performance is well-known. Though INP is a relatively new metric compared to other Core Web Vitals, redBus observed better business outcomes by focusing on improving this important user-centric performance metric. <strong>The result was a 7% overall increase in sales.</strong></p>
<p>In short, INP helped to paint a picture of runtime performance issues on the redBus website. With the knowledge that there were improvements to be made, redBus was able to observe the problem, reproduce it, and use that crucial information to make optimizations that were beneficial to redBus and its business.</p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[介绍基线]]></title>
            <link>https://web.dev/introducing-baseline/</link>
            <guid>https://web.dev/introducing-baseline/</guid>
            <content:encoded><![CDATA[<div>
    <h1>GPT总结</h1>
    <summary>这篇文章介绍了Baseline的概念和目的。Baseline是一个用于判断网站或Web应用程序中的功能或API是否安全使用的指标。由于Web平台的快速变化，开发者很难跟上所有的变化。为了解决这个问题，Google改进了自己的沟通渠道，并与其他浏览器厂商和相关公司合作，形成了WebDX社区小组，共同思考如何提供平台的清晰度。Baseline是一个不断变化的标准，包括在最新两个主要浏览器版本中完全支持的功能。通过将支持与Baseline关联，可以为开发者和利益相关者提供明确的支持水平。未来，Google将继续在web.dev上推广Baseline，并提供支持Baseline特性集的小部件。同时，他们也将努力确保Chrome中的新功能尽快成为Baseline的一部分，并收集开发者的反馈意见。</summary>
    <div>
    <div>OriginTitle: Introducing Baseline</div>

    </div></div><p>Baseline 可帮助您一目了然地了解某个功能或 API 在您的网站或 Web 应用程序中使用是否安全。 在这篇文章中，了解产生这个概念的想法，以及我们希望它如何帮助您。</p>
<div class="youtube">  <lite-youtube videoid="eZa3BgGaAeA">  </lite-youtube></div>
<h2 id="keeping-up-with-changes-to-the-web-platform">跟上网络平台的变化<a class="headline-link" href="https://web.dev/introducing-baseline/#keeping-up-with-changes-to-the-web-platform">#</a></h2>
<p>当今的网络变化很快。 我们的浏览器是<em>常绿</em>，每个月都有新功能登陆稳定的浏览器。 这是令人兴奋的，但它也带来了问题。 Web 开发人员如何跟上所有这些变化？ 您如何知道何时可以安全使用某项功能？ 什么时候是开始学习和投资新功能的合适时机？</p>
<p>过去，我们经常通过将浏览器支持与某个浏览器版本（例如 Internet Explorer 11）联系起来来向利益相关者解释浏览器支持，因为非常青浏览器创建的沙子中的界限对每个人来说都是清楚的。 如今，情况往往看起来不太清晰，因为有如此多的功能落地，检查对我们使用的所有东西的支持需要做大量的工作。</p>
<p>我们知道这对开发人员来说是一个多大的问题，因为您一直以来<a href="https://web.dev/deep-dive-into-developer-pain-points/">告诉我们这是一个问题</a>。 两年多前，我们决定这是一个我们想要尝试解决的问题。</p>
<h2 id="getting-our-own-house-in-order">把我们自己的房子整理好<a class="headline-link" href="https://web.dev/introducing-baseline/#getting-our-own-house-in-order">#</a></h2>
<p>我们认识到，我们将实验性内容与网站上的稳定内容混合在一起，增加了对功能状态的混乱。 因此，我们提高了自己沟通渠道的清晰度。 我们现在使用 web.dev 发布有关稳定网络的内容，我们现在可以将这些内容描述为 Baseline 的一部分，以及那些非常接近该状态的内容。 我们还强调其他浏览器的工作，因为我们共同努力提高平台的互操作性。</p>
<p>在 web.dev 上，您会找到诸如以下内容<a href="https://web.dev/tags/newly-interoperable/">新的互操作性</a>系列，庆祝所有三个主要引擎现在都支持的功能。 我们还有每月系列，涵盖<a href="https://web.dev/tags/new-to-the-web/">网络平台有什么新变化</a>分享所有浏览器的工作成果，以及有关 Interop 2023 的更新。该网站也是我们在性能、可访问性和基本 Web 开发技能等方面的最佳实践指南的所在地。</p>
<p>在<a href="https://developer.chrome.com/" rel="noopener">开发者.chrome.com</a>您可以了解 Chrome 为网络平台带来的新事物。 其中一些东西是实验性的，或者目前仅在 Chrome 中。 我们在developer.chrome.com 上发布的许多内容都将登陆其他浏览器，我们希望很快就能庆祝它们的互操作时刻，但我们希望您清楚地了解它们的状态和浏览器支持。</p>
<p>我们还向我们发布的所有内容以及我们的团队在会议上讨论功能时添加了明确的浏览器支持信息。</p>
<p>文档对于新功能的采用非常重要，今年我们确保在 Chrome 中登陆的新功能在 MDN 上都有文档。 例如，查看以下文档<a href="https://developer.mozilla.org/docs/Web/API/View_Transitions_API" rel="noopener">查看转场</a>和<a href="https://developer.mozilla.org/docs/Web/API/WebGPU_API" rel="noopener">网络GPU</a>。 我们也帮忙支持<a href="https://openwebdocs.org/" rel="noopener">打开网络文档</a>他们向 MDN 贡献整个 Web 平台的文档。</p>
<h2 id="working-with-others">与他人合作<a class="headline-link" href="https://web.dev/introducing-baseline/#working-with-others">#</a></h2>
<p>改进我们的工作很重要，但是为了解决更大的问题，我们需要与其他人合作。 我们已经通过以下方式与其他浏览器供应商和相关公司的合作伙伴成功合作：<a href="https://web.dev/interop-2022-wrapup/">互操作 2022</a>和<a href="https://web.dev/interop-2023/">2023年</a>。 形成<a href="https://www.w3.org/community/webdx/" rel="noopener">WebDX 社区组</a>让每个人聚集在一起思考整个平台的清晰度问题。</p>
<p>该小组正在共同致力于一项<a href="https://github.com/web-platform-dx/feature-set" rel="noopener">功能集</a>，一种对 Web 平台功能进行分组以显示其支持状态的方法，此功能集是 Baseline 概念的关键。</p>
<h2 id="creating-platform-wide-clarity-with-baseline">使用 Baseline 创建平台范围内的清晰度<a class="headline-link" href="https://web.dev/introducing-baseline/#creating-platform-wide-clarity-with-baseline">#</a></h2>
<p><a href="https://web.dev/baseline">基线</a>在浏览器常青的世界里，这条线很难辨认。 主要浏览器的最新两个版本完全支持的所有内容都将成为 Baseline 的一部分。 因此，如果您的库声明使用的所有功能都是 Baseline 的一部分，那么开发人员就会明白您的意思。 在为新应用程序创建提案时，您可以向利益相关者解释浏览器支持将与基线相关联，从而使每个人都清楚支持级别。</p>
<p>从今天开始，您将开始看到页面上出现基线<a href="https://developer.mozilla.org/docs/Web/CSS/grid" rel="noopener">在 MDN 上</a>，以及关于<a href="https://web.dev/baseline-features/">网络开发</a>。</p>
<p>由于 Baseline 将是一条不断变化的产品线，每个月都会有新功能成为该系列的一部分，因此每年我们都会在某个时刻发布一部分属于 Baseline 的功能。 例如，为了更加清晰，您可以将支持与 Baseline 24 联系起来。</p>
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow">我们也对能够逐年比较基线的情况感到非常兴奋。 基线 24 和基线 25 之间有何变化？ 这将会很有趣。</div></aside>
<h2 id="whats-next">下一步是什么？<a class="headline-link" href="https://web.dev/introducing-baseline/#whats-next">#</a></h2>
<p>我们将继续在 web.dev 上推出 Baseline。 阅读文章或教程时，您将能够看到所描述的功能何时是基线的一部分。 您不会在完成某件事后意识到它使用的东西没有良好的浏览器支持。</p>
<p>我们将提供您可以在自己的文章或库中使用的小部件，表明对基线功能集的支持。</p>
<p>我们还将努力确保我们在 Chrome 中登陆的新功能尽快成为 Baseline 的一部分。 请留意未来的帖子，我们将更多地讨论这项工作。</p>
<p>我们将收集开发人员的反馈，以了解这个想法在实践中如何运作，以及您还希望看到什么。 密切关注<a href="https://web.dev/baseline/">基线页</a>，或立即通过以下方式提供反馈<a href="https://www.w3.org/community/webdx/" rel="noopener">WebDX 社区组</a>。</p>
<hr><p>Baseline helps you to see, at a glance, whether a feature or API is safe to use in your site or web applications. In this post, learn about the ideas that led to this concept, and how we hope it will help you.</p>
<div class="youtube">  <lite-youtube videoid="eZa3BgGaAeA">  </lite-youtube></div>
<h2 id="keeping-up-with-changes-to-the-web-platform">Keeping up with changes to the web platform <a class="headline-link" href="https://web.dev/introducing-baseline/#keeping-up-with-changes-to-the-web-platform">#</a></h2>
<p>The web of today changes rapidly. Our browsers are <em>evergreen</em>, with new features landing in stable browsers each month. This is exciting, however it also poses problems. How do web developers keep up with all of this change? How do you know when it's safe to use a feature? When is it the right time to start to learn, and to invest in new features?</p>
<p>In the past, we often explained browser support to stakeholders by tying it to a certain browser release (for example, Internet Explorer 11) because the line in the sand a non-evergreen browser created was clear to everyone. Today, the landscape can often seem less clear, with so many features landing it's a lot of work to check support for everything we use.</p>
<p>We know how much of a problem this is to developers, because you have consistently <a href="https://web.dev/deep-dive-into-developer-pain-points/">told us that it's a problem</a>. Over two years ago we decided it was a problem we wanted to try to address.</p>
<h2 id="getting-our-own-house-in-order">Getting our own house in order <a class="headline-link" href="https://web.dev/introducing-baseline/#getting-our-own-house-in-order">#</a></h2>
<p>We recognized that we were adding to confusion about the status of features, mixing experimental things in with stable content on our sites. So, we've improved the clarity of our own communication channels. We now use web.dev to publish content about the stable web, those things that we can now describe as part of Baseline, and those that are very close to that status. We also highlight the work of other browsers, as we all work together to improve the interoperability of the platform.</p>
<p>On web.dev you'll find content such as the <a href="https://web.dev/tags/newly-interoperable/">newly interoperable</a> series, celebrating features that are now supported in all three major engines. We also have our monthly series, covering <a href="https://web.dev/tags/new-to-the-web/">what's new to the web platform</a> sharing the work of all browsers, and updates about Interop 2023. This site is also home to our best practices guidance in subjects such as performance, accessibility, and fundamental web development skills.</p>
<p>On <a href="https://developer.chrome.com/" rel="noopener">developer.chrome.com</a> you can learn about the new things that Chrome is bringing to the web platform. Some of these things are experimental, or only in Chrome right now. Many of the things we post about on developer.chrome.com are coming to other browsers, and we hope to celebrate their interoperable moments very soon, but we want you to have clarity about their status and browser support.</p>
<p>We have also been adding clear browser support information to everything that we publish, and when our team talks about features at conferences.</p>
<p>Documentation is really important for adoption of new features, and this year we've made sure that the new features we are landing in Chrome have documentation over on MDN. For example, take a look at the documentation for <a href="https://developer.mozilla.org/docs/Web/API/View_Transitions_API" rel="noopener">View Transitions</a> and <a href="https://developer.mozilla.org/docs/Web/API/WebGPU_API" rel="noopener">WebGPU</a>. We also help support <a href="https://openwebdocs.org/" rel="noopener">Open Web Docs</a> who contribute documentation for the entire web platform to MDN.</p>
<h2 id="working-with-others">Working with others <a class="headline-link" href="https://web.dev/introducing-baseline/#working-with-others">#</a></h2>
<p>Improving what we do was important, however to address the bigger issue we needed to work with others. We've been successfully working with our partners at other browser vendors and related companies through <a href="https://web.dev/interop-2022-wrapup/">Interop 2022</a> and <a href="https://web.dev/interop-2023/">2023</a>. Forming the <a href="https://www.w3.org/community/webdx/" rel="noopener">WebDX Community Group</a> brought everyone together to think about this issue of clarity across the platform as a whole.</p>
<p>The group is working together on a <a href="https://github.com/web-platform-dx/feature-set" rel="noopener">feature set</a>, a way to group web platform features to show their support status, and this feature-set is key to the concept of Baseline.</p>
<h2 id="creating-platform-wide-clarity-with-baseline">Creating platform-wide clarity with Baseline <a class="headline-link" href="https://web.dev/introducing-baseline/#creating-platform-wide-clarity-with-baseline">#</a></h2>
<p><a href="https://web.dev/baseline">Baseline</a> is the line in the sand that is hard to identify in a world of evergreen browsers. Everything that is fully supported in the most recent two versions of major browsers will be part of Baseline. Therefore if your library states that all features used are part of Baseline, developers know what you mean. When creating a proposal for a new application, you can explain to stakeholders that browser support will be tied to Baseline, thus creating clarity for everyone as to levels of support.</p>
<p>From today you will start to see Baseline appearing on pages <a href="https://developer.mozilla.org/docs/Web/CSS/grid" rel="noopener">on MDN</a>, and on <a href="https://web.dev/baseline-features/">web.dev</a>.</p>
<p>As Baseline will be a continuously moving line, with new features becoming part of that set each month, every year we will publish a cut of features that are part of Baseline at one moment in time. For extra clarity, you can tie support to Baseline 24, for example.</p>
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> We're also quite excited by the ability to compare year-on-year what Baseline looks like. What will have changed between Baseline 24 and Baseline 25? That will be interesting to see. </div></aside>
<h2 id="whats-next">What's next? <a class="headline-link" href="https://web.dev/introducing-baseline/#whats-next">#</a></h2>
<p>We'll be continuing the rollout of Baseline across web.dev. When reading an article or tutorial, you'll be able to see when the features described are part of Baseline. You won't get part of the way through something and realize it uses something that doesn't have good browser support.</p>
<p>We'll be providing widgets that you can use on your own articles or libraries, indicating support for the Baseline feature set.</p>
<p>We'll also be working to ensure that new features we are landing in Chrome become part of Baseline as quickly as possible. Watch out for future posts where we'll talk more about that work.</p>
<p>And we'll be gathering feedback from developers to find out how this idea is working in practice, and what more you would like to see. Keep an eye on the <a href="https://web.dev/baseline/">Baseline page</a>, or offer feedback right now via the <a href="https://www.w3.org/community/webdx/" rel="noopener">WebDX Community Group</a>.</p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[推进交互到下一个绘画]]></title>
            <link>https://web.dev/inp-cwv/</link>
            <guid>https://web.dev/inp-cwv/</guid>
            <content:encoded><![CDATA[<div>
    <h1>GPT总结</h1>
    <summary>这篇文章介绍了Chrome浏览器的Web Vitals计划，该计划旨在帮助开发人员关注对于优秀用户体验至关重要的指标——核心Web Vitals。其中一个关注的重点是响应能力，即网页对用户交互的快速反应能力。

文章首先提到了第一次输入延迟（FID）作为衡量响应能力的核心Web Vitals指标，但也指出了FID的局限性。为了更有效地解决这些局限性，Chrome团队引入了一项实验性指标——Interaction to Next Paint（INP），并在2022年开始与社区合作测试其有效性。

经过一年的测试和社区反馈，INP已经不再是实验性指标。从2024年3月开始，INP将取代FID成为新的核心Web Vitals响应能力指标。

文章详细介绍了INP相对于FID的优势和改进之处。INP不仅考虑了所有交互，而不仅仅是第一次交互，还测量了从交互开始到浏览器能够绘制下一帧的整个持续时间。这使得INP比FID更全面地衡量了用户感知的响应能力。

为了帮助开发人员过渡到INP，Chrome团队提供了更新的API和工具，并提供了优</summary>
    <div>
    <div>OriginTitle: Advancing Interaction to Next Paint</div>

    </div></div><p>Chrome 的使命<a href="https://web.dev/vitals/">网络生命体征计划</a>是为了帮助开发人员专注于对卓越用户体验至关重要的指标——核心网络生命力。 我们一直关注的用户体验的一个重要方面是响应能力，这是网页对用户交互快速做出反应的能力。</p>
<p><a href="https://web.dev/fid/">首次输入延迟 (FID)</a>是衡量响应能力的核心网络重要指标，但正如我们过去所写的，有<a href="https://web.dev/better-responsiveness-metric/">FID 的已知局限性</a>。 这促使我们探索并寻求有关（当时）的反馈<a href="https://web.dev/responsiveness/">实验指标</a>更有效地解决这些限制。 2022 年，我们宣布<a href="https://web.dev/inp/">与下一个油漆的相互作用 (INP)</a>作为这个新指标，我们将其广泛应用于我们的工具中，并开始与社区合作测试其功效。</p>
<p>经过又一年的测试和收集社区反馈后，我们准备卸下训练轮并宣布 INP 不再是实验性的。 此外，自 2024 年 3 月起，我们还致力于将 INP 推广为新的响应能力核心 Web 重要指标，取代 FID。</p>
<p>在这篇文章中，我们将详细介绍该决定背后的动机、具体的变化以及如何开始。 有关这如何影响 Google 搜索的更多信息，请参阅<a href="https://developers.google.com/search/blog/2023/05/introducing-inp" rel="noopener">他们的博客文章</a>。</p>
<h2 id="a-better-responsiveness-metric">更好的响应指标<a class="headline-link" href="https://web.dev/inp-cwv/#a-better-responsiveness-metric">#</a></h2>
<p>当我们<a href="https://blog.chromium.org/2020/05/introducing-web-vitals-essential-metrics.html" rel="noopener">介绍</a>它是 2020 年核心 Web 的重要组成部分。它为开发人员提供了一种衡量响应能力的新方法<em>正如真实用户体验的那样</em>，这一直是 Web Vitals 计划的重要组成部分。 与仅近似页面交互性的类似指标不同，例如<a href="https://web.dev/tbt/">总阻塞时间 (TBT)</a>和<a href="https://web.dev/tti/">交互时间 (TTI)</a>——FID直接衡量用户体验。 至关重要的是，由于真实用户与页面交互的方式，页面可能具有较慢的 TBT 或 TTI，但仍然被认为具有响应能力。</p>
<p>虽然 FID 确实改进了我们衡量响应能力的方式，但它也并非没有局限性。 这个名字本身实际上给出了两个这样的限制：“第一次输入”和“延迟”。 FID仅报告响应能力<em>第一的</em>用户与页面交互的时间。 尽管第一印象很重要，但第一次互动并不一定代表<em>全部</em>交互贯穿页面的整个生命周期。 此外，FID 仅测量<em>输入延迟</em>第一次交互的一部分，这是浏览器在开始处理交互之前必须等待的时间（由于主线程繁忙）。</p>
<p>输入INP。 INP 不仅仅测量第一次相互作用，<a href="https://web.dev/inp/#whats-in-an-interaction"><em>全部</em>互动</a>考虑在内，报告页面整个生命周期中最慢的页面之一。 而且，INP 不仅仅测量延迟部分，而是测量从交互开始到事件处理程序直到浏览器能够绘制下一帧的整个持续时间。 因此，交互<em>下一个油漆</em>。 这些实现细节使 INP 成为比 FID 更全面的用户感知响应度衡量标准。</p>
<h2 id="evolving-inp">不断发展的INP<a class="headline-link" href="https://web.dev/inp-cwv/#evolving-inp">#</a></h2>
<p>从今天开始，INP 不再是实验性的，而是将被视为<a href="https://web.dev/vitals/#pending"><em>待办的</em>核心网络重要指标</a>。 这是一个新名称，表明 INP 已证明其已准备好取代 FID，但我们目前还没有做出改变。 为了给生态系统留出调整的时间，INP 将于 2024 年 3 月正式成为稳定的 Core Web Vital 指标。</p>
<figure>
  <img alt="Graphic showing the timeline of INP phases, starting from when Chrome announced experimental support for INP in May 2022, to today in May 2023 when Chrome is announcing that INP is now a non-experimental, pending Core Web Vital metric, and finally to March 2024 when INP becomes a stable Core Web Vital metric, replacing FID." decoding="async" height="270" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
    显示 INP 阶段时间线的图表。
  </figcaption>
</figure>
<p>通过我们的工具，您将开始看到 INP，而无需<code>实验性的</code>前缀或图标。 如果您以编程方式使用来自以下任何 API 的 INP 数据，则需要更新代码以切换到非实验 INP 字段。</p>
<div class="table-wrapper scrollbar">
  <table>
    <thead>
      <tr>
        <th>工具</th>
        <th>已弃用的字段</th>
        <th>新领域</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>CrUX API</td>
        <td><code>实验交互到下一个油漆</code></td>
        <td><code>与下一个绘制的交互</code></td>
      </tr>
      <tr>
        <td>CrUX 历史 API</td>
        <td><code>实验交互到下一个油漆</code></td>
        <td><code>与下一个绘制的交互</code></td>
      </tr>
      <tr>
        <td>CrUX BigQuery</td>
        <td><code>实验.interaction_to_next_paint</code></td>
        <td><code>与下一个绘制的交互</code></td>
      </tr>
      <tr>
        <td>PageSpeed 见解 API</td>
        <td><code>实验交互到下一个油漆</code></td>
        <td><code>与下一个绘制的交互</code></td>
      </tr>
      <tr>
        <td>灯塔报告*</td>
        <td><code>下一个绘画的实验交互</code></td>
        <td><code>与下一次绘制的交互</code></td>
      </tr>
    </tbody>
    <caption style="max-width: 60ch;">
      API 与其旧 INP 字段名称和新 INP 字段名称的映射。<br>
      * Lighthouse 将在版本 11 中停止使用实验性 INP 字段。
    </caption>
  </table>
</div>
<p>为了简化过渡并避免破坏任何下游应用程序，这些 API 将继续为实验性 INP 领域提供另外 90 天的服务。 对实验性 INP 字段的 API 支持将于 2023 年 8 月 8 日结束。</p>
<p>同时，FID 仍将是核心网络至关重要，直至 2024 年 3 月。届时，INP 将加入<a href="https://web.dev/lcp/">最大内容涂料 (LCP)</a>和<a href="https://web.dev/cls/">累积布局偏移 (CLS)</a>作为三个稳定的核心网络生命。 在未来的更新中，我们将分享更多有关更改的准确时间以及 FID 被替换为 Core Web Vital 后的计划的信息。</p>
<h2 id="getting-started-with-inp">INP 入门<a class="headline-link" href="https://web.dev/inp-cwv/#getting-started-with-inp">#</a></h2>
<style>
   .inp-移动{ 
     显示方式：内嵌； 
   } 

   .inp-桌面 { 
     显示：无； 
   } 

   @media 屏幕和（最小宽度：640px）{ 
     .inp-移动{ 
       显示：无； 
     } 

     .inp-桌面 { 
       显示方式：内嵌； 
     } 
   } 
</style>
<figure>
  <svg title="A diagram of the INP thresholds. An INP at or below 200 milliseconds is considered good. Between 200 and 500 milliseconds suggests a page's responsiveness needs improvement. Anything over 500 milliseconds means that a page's responsiveness is poor." class="inp-mobile" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0" y="0" viewBox="0 0 296.6 220.2" style="enable-background:new 0 0 296.6 220.2" xml:space="preserve"><style>.st0{fill:#2979FF} .st1{fill-rule:evenodd;clip-rule:evenodd;fill:#0CCE6B} .st2{fill:#191919} .st3{fill-rule:evenodd;clip-rule:evenodd ;fill:#FFA400} .st4{fill-rule:evenodd;clip-rule:evenodd;fill:#FF4E42} @media screen 和 (prefers-color-scheme: light){.st2{fill:#191919}} [ data-user-theme=light] .st2 {fill:#191919} @media screen 和 (prefers-color-scheme: dark){.st2{fill:#fff}} [data-user-theme=dark] .st2 {填充：#fff}</style><path class="st0" d="M83.3 63V0h11.9v63H83.3zm26.3 0V0h13.8l25.3 42.2h.7l-.7-12.1V0h11.8v63H148l-26.8-44.6h-.7l.7 12.1V63h-11.6zm65.4 0V0h22.2c4.1 0 7.7.8 10.9 2.5s5.8 4 7.7 7 2.9 6.4 2.9 10.4c0 3.9-1 7.4-2.9 10.4s-4.5 5.4-7.7 7c-3.2 1.7-6.9 2.5-10.9 2.5h-15.6V28.6h15.9c2.1 0 3.8-.4 5.2-1.2s2.5-1.9 3.2-3.2c.7-1.3 1.1-2.8 1.1-4.3s-.4-2.9-1.1-4.2c-.7-1.3-1.8-2.3-3.2-3.2s-3.1-1.2-5.2-1.2h-10.7V63H175z"></path><path class="st1" d="M0 137.1h96v38.4H0v-38.4z"></path><path class="st2" d="M34 161c-.6 0-1.2-.1-1.8-.3-.5-.2-1-.5-1.4-.9-.4-.4-.7-.9-1-1.4-.2-.6-.3-1.1-.3-1.8 0-.6.1-1.2.3-1.8.2-.6.6-1 1-1.4.4-.4.9-.7 1.4-.9.5-.2 1.1-.3 1.8-.3s1.3.1 1.8.3c.6.2 1 .6 1.4 1l-.9.9c-.2-.2-.4-.4-.6-.5-.2-.1-.5-.3-.8-.3-.3-.1-.6-.1-.9-.1-.4 0-.8.1-1.2.2-.4.1-.7.4-1 .6-.3.3-.5.6-.7 1-.2.4-.2.8-.2 1.3s.1.9.2 1.3c.2.4.4.7.7 1 .3.3.6.5 1 .7.4.1.8.2 1.2.2.4 0 .8-.1 1.1-.2.3-.1.6-.3.9-.5.3-.2.5-.5.6-.8.2-.3.3-.6.3-1H34v-1.2h4.2v.7c0 .6-.1 1.2-.3 1.7-.2.5-.5.9-.9 1.3s-.8.6-1.3.8c-.5.3-1.1.4-1.7.4zm9.5 0c-.6 0-1.2-.1-1.8-.3-.5-.2-1-.5-1.4-1-.4-.4-.7-.9-.9-1.4-.2-.5-.3-1.1-.3-1.8 0-.6.1-1.2.3-1.8.2-.5.5-1 .9-1.4.4-.4.9-.7 1.4-1 .5-.2 1.1-.3 1.8-.3.6 0 1.2.1 1.8.3.5.2 1 .6 1.4 1 .4.4.7.9.9 1.4.2.5.3 1.1.3 1.8 0 .6-.1 1.2-.3 1.8-.2.5-.5 1-.9 1.4-.4.4-.9.7-1.4 1-.5.2-1.1.3-1.8.3zm0-1.2c.6 0 1.1-.1 1.6-.4.5-.3.8-.7 1.1-1.1.3-.5.4-1.1.4-1.7 0-.6-.1-1.2-.4-1.7-.3-.5-.7-.9-1.1-1.1-.5-.3-1-.4-1.6-.4-.6 0-1.1.1-1.6.4-.5.3-.8.7-1.1 1.1-.3.5-.4 1-.4 1.7 0 .6.1 1.2.4 1.7.3.5.7.9 1.1 1.1.5.3 1 .4 1.6.4zm9.9 1.2c-.6 0-1.2-.1-1.8-.3-.5-.2-1-.5-1.4-1-.4-.4-.7-.9-.9-1.4-.2-.5-.3-1.1-.3-1.8 0-.6.1-1.2.3-1.8.2-.5.5-1 .9-1.4.4-.4.9-.7 1.4-1 .5-.2 1.1-.3 1.8-.3.6 0 1.2.1 1.8.3.5.2 1 .6 1.4 1 .4.4.7.9.9 1.4.2.5.3 1.1.3 1.8 0 .6-.1 1.2-.3 1.8-.2.5-.5 1-.9 1.4-.4.4-.9.7-1.4 1-.6.2-1.2.3-1.8.3zm0-1.2c.6 0 1.1-.1 1.6-.4.5-.3.8-.7 1.1-1.1.3-.5.4-1.1.4-1.7 0-.6-.1-1.2-.4-1.7-.3-.5-.7-.9-1.1-1.1-.5-.3-1-.4-1.6-.4-.6 0-1.1.1-1.6.4-.5.3-.8.7-1.1 1.1-.3.5-.4 1-.4 1.7 0 .6.1 1.2.4 1.7.3.5.7.9 1.1 1.1.5.3 1 .4 1.6.4zm6 1.1v-8.6h2.8c.9 0 1.7.2 2.3.5.7.4 1.2.9 1.5 1.5.4.6.5 1.4.5 2.2 0 .8-.2 1.6-.5 2.2-.4.6-.9 1.2-1.5 1.5-.6.4-1.4.5-2.3.5h-2.8zm1.3-1.3h1.4c.6 0 1.2-.1 1.7-.4.5-.3.8-.6 1.1-1 .2-.5.4-1 .4-1.6 0-.6-.1-1.2-.4-1.6-.2-.5-.6-.8-1.1-1-.5-.3-1-.4-1.7-.4h-1.4v6z"></path><path class="st3" d="M96 137.1h105.6v38.4H96v-38.4z"></path><path class="st2" d="M130.8 153.9v-8.6h1.6l3.9 6.3h.1l-.1-1.7v-4.7h1.3v8.6h-1.4l-4.1-6.6h-.1l.1 1.7v5h-1.3zm8.7 0v-8.6h5.2v1.2h-3.9v6.1h3.9v1.2h-5.2zm.7-3.7V149h4.1v1.2h-4.1zm6.2 3.7v-8.6h5.2v1.2h-3.9v6.1h3.9v1.2h-5.2zm.7-3.7V149h4.1v1.2h-4.1zm6.1 3.7v-8.6h2.8c.9 0 1.7.2 2.3.5.7.4 1.2.9 1.5 1.5.4.6.5 1.4.5 2.2s-.2 1.6-.5 2.2c-.4.6-.9 1.2-1.5 1.5-.6.4-1.4.5-2.3.5h-2.8zm1.3-1.3h1.4c.6 0 1.2-.1 1.7-.4.5-.2.8-.6 1.1-1 .2-.5.4-1 .4-1.6 0-.6-.1-1.2-.4-1.6-.2-.5-.6-.8-1.1-1-.5-.2-1-.4-1.7-.4h-1.4v6zm9.9 1.4c-.5 0-.9-.1-1.3-.3-.4-.2-.8-.4-1.1-.8-.3-.4-.5-.8-.7-1.3l1.2-.5c.1.5.3.9.7 1.2.3.3.7.5 1.2.5.3 0 .5 0 .8-.1.2-.1.4-.2.6-.4s.2-.4.2-.7c0-.3-.1-.5-.2-.7-.1-.2-.3-.3-.6-.5s-.6-.3-1-.5l-.5-.2c-.2-.1-.5-.2-.7-.3-.2-.1-.5-.3-.7-.5-.2-.2-.4-.4-.5-.7-.1-.3-.2-.6-.2-.9 0-.4.1-.8.3-1.2.2-.4.5-.6.9-.8.4-.2.9-.3 1.4-.3.6 0 1 .1 1.4.3.4.2.7.4.9.7.2.3.4.5.4.8l-1.2.5c0-.2-.1-.3-.2-.5s-.3-.3-.5-.4c-.2-.1-.4-.2-.8-.2-.2 0-.5.1-.7.2-.2.1-.4.2-.5.4-.1.2-.2.3-.2.6s.1.6.4.8c.3.2.6.4 1.1.5l.6.2c.3.1.6.2.8.3.3.1.5.3.7.5.2.2.4.4.5.7.1.3.2.6.2 1s-.1.8-.3 1.2c-.2.3-.4.6-.7.8-.3.2-.6.3-.9.4s-.5.2-.8.2zM107 167.9v-8.6h1.3v8.6H107zm3.2 0v-8.6h1.8l2.5 6.5h.1l2.5-6.5h1.8v8.6h-1.3V163l.1-1.5h-.1l-2.5 6.4h-1l-2.5-6.4h-.1l.1 1.5v4.9h-1.4zm10.6 0v-8.6h3c.5 0 1 .1 1.4.3.4.2.8.5 1 .9.3.4.4.9.4 1.4 0 .5-.1 1-.4 1.4-.2.4-.6.7-1 .9-.4.2-.9.3-1.4.3h-2.2v-1.2h2.3c.3 0 .6-.1.8-.2.2-.1.4-.3.5-.5.1-.2.2-.4.2-.7 0-.2-.1-.4-.2-.7-.1-.2-.3-.4-.5-.5-.2-.1-.5-.2-.8-.2h-1.7v7.3h-1.4zm7.2 0v-8.6h3c.5 0 1 .1 1.4.3.4.2.7.5 1 .9.2.4.4.8.4 1.4 0 .3-.1.7-.2 1s-.3.6-.6.8c-.3.2-.6.4-1 .6-.4.1-.8.2-1.2.2h-2.1v-1.2h2.3c.3 0 .5-.1.7-.2.2-.1.4-.3.5-.5.1-.2.2-.5.2-.7 0-.2-.1-.5-.2-.7-.1-.2-.3-.4-.5-.5-.2-.1-.5-.2-.8-.2h-1.7v7.4H128zm2-4h1.5l2.7 3.9v.1h-1.5l-2.7-4zm9.3 4.1c-.6 0-1.2-.1-1.8-.3-.5-.2-1-.5-1.4-1-.4-.4-.7-.9-.9-1.4-.2-.5-.3-1.1-.3-1.8s.1-1.2.3-1.8c.2-.5.5-1 .9-1.4.4-.4.9-.7 1.4-1 .5-.2 1.1-.3 1.8-.3.6 0 1.2.1 1.8.3.5.2 1 .6 1.4 1 .4.4.7.9.9 1.4.2.5.3 1.1.3 1.8s-.1 1.2-.3 1.8c-.2.5-.5 1-.9 1.4-.4.4-.9.7-1.4 1-.6.2-1.2.3-1.8.3zm0-1.2c.6 0 1.1-.1 1.6-.4.5-.3.8-.7 1.1-1.1.3-.5.4-1.1.4-1.7 0-.6-.1-1.2-.4-1.7-.3-.5-.7-.9-1.1-1.1-.5-.3-1-.4-1.6-.4-.6 0-1.1.1-1.6.4-.5.3-.8.7-1.1 1.1-.3.5-.4 1-.4 1.7 0 .6.1 1.2.4 1.7.3.5.7.9 1.1 1.1.5.3 1 .4 1.6.4zm7.9 1.1-3-8.6h1.4l1.9 5.7.3 1h.1l.3-1 2-5.7h1.4l-3.1 8.6h-1.3zm5.6 0v-8.6h5.2v1.2h-3.9v6.1h3.9v1.2h-5.2zm.7-3.7V163h4.1v1.2h-4.1zm6.2 3.7v-8.6h1.8l2.5 6.5h.1l2.5-6.5h1.8v8.6H167V163l.1-1.5h-.1l-2.5 6.4h-1l-2.5-6.4h-.1l.1 1.5v4.9h-1.3zm10.6 0v-8.6h5.2v1.2h-3.9v6.1h3.9v1.2h-5.2zm.7-3.7V163h4.1v1.2H171zm6.1 3.7v-8.6h1.6l3.9 6.3h.1l-.1-1.7v-4.7h1.3v8.6h-1.4l-4.1-6.6h-.1l.1 1.7v5h-1.3zm10.5 0V160h1.3v7.9h-1.3zm-2.4-7.4v-1.2h6.1v1.2h-6.1z"></path><path class="st4" d="M200.6 137.1h96v38.4h-96v-38.4z"></path><path class="st2" d="M232.5 160.9v-8.6h3c.5 0 1 .1 1.4.3.4.2.8.5 1 .9.3.4.4.9.4 1.4 0 .5-.1 1-.4 1.4-.2.4-.6.7-1 .9-.4.2-.9.3-1.4.3h-2.2v-1.2h2.3c.3 0 .6-.1.8-.2.2-.1.4-.3.5-.5.1-.2.2-.4.2-.7 0-.2-.1-.4-.2-.7-.1-.2-.3-.4-.5-.5-.2-.1-.5-.2-.8-.2h-1.7v7.3h-1.4zm11 .1c-.6 0-1.2-.1-1.8-.3-.5-.2-1-.5-1.4-1-.4-.4-.7-.9-.9-1.4-.2-.5-.3-1.1-.3-1.8s.1-1.2.3-1.8c.2-.5.5-1 .9-1.4.4-.4.9-.7 1.4-1 .5-.2 1.1-.3 1.8-.3.6 0 1.2.1 1.8.3.5.2 1 .6 1.4 1 .4.4.7.9.9 1.4.2.5.3 1.1.3 1.8s-.1 1.2-.3 1.8c-.2.5-.5 1-.9 1.4-.4.4-.9.7-1.4 1-.5.2-1.1.3-1.8.3zm0-1.2c.6 0 1.1-.1 1.6-.4.5-.3.8-.7 1.1-1.1.3-.5.4-1.1.4-1.7 0-.6-.1-1.2-.4-1.7-.3-.5-.7-.9-1.1-1.1-.5-.3-1-.4-1.6-.4-.6 0-1.1.1-1.6.4-.5.3-.8.7-1.1 1.1-.3.5-.4 1-.4 1.7 0 .6.1 1.2.4 1.7.3.5.7.9 1.1 1.1.6.3 1.1.4 1.6.4zm9.9 1.2c-.6 0-1.2-.1-1.8-.3-.5-.2-1-.5-1.4-1-.4-.4-.7-.9-.9-1.4-.2-.5-.3-1.1-.3-1.8s.1-1.2.3-1.8c.2-.5.5-1 .9-1.4.4-.4.9-.7 1.4-1 .5-.2 1.1-.3 1.8-.3.6 0 1.2.1 1.8.3.5.2 1 .6 1.4 1 .4.4.7.9.9 1.4.2.5.3 1.1.3 1.8s-.1 1.2-.3 1.8c-.2.5-.5 1-.9 1.4-.4.4-.9.7-1.4 1-.6.2-1.1.3-1.8.3zm0-1.2c.6 0 1.1-.1 1.6-.4.5-.3.8-.7 1.1-1.1.3-.5.4-1.1.4-1.7 0-.6-.1-1.2-.4-1.7-.3-.5-.7-.9-1.1-1.1-.5-.3-1-.4-1.6-.4-.6 0-1.1.1-1.6.4-.5.3-.8.7-1.1 1.1-.3.5-.4 1-.4 1.7 0 .6.1 1.2.4 1.7.3.5.7.9 1.1 1.1.5.3 1 .4 1.6.4zm6 1.1v-8.6h3c.5 0 1 .1 1.4.3.4.2.7.5 1 .9.2.4.4.8.4 1.4 0 .3-.1.7-.2 1s-.3.6-.6.8c-.3.2-.6.4-1 .6-.4.1-.8.2-1.2.2h-2.1v-1.2h2.3c.3 0 .5-.1.7-.2.2-.1.4-.3.5-.5.1-.2.2-.5.2-.7 0-.2-.1-.5-.2-.7-.1-.2-.3-.4-.5-.5-.2-.1-.5-.2-.8-.2h-1.7v7.4h-1.2zm2-4h1.5l2.7 3.9v.1H264l-2.6-4zM178.1 219.9c-.5 0-1-.1-1.5-.3-.5-.2-1-.5-1.4-1-.4-.4-.7-1-.8-1.7l1.5-.6c.1.6.4 1 .8 1.4.4.4.9.5 1.4.5.6 0 1.1-.2 1.5-.6.4-.4.6-.9.6-1.5s-.2-1.1-.6-1.5c-.4-.4-.9-.6-1.5-.6-.4 0-.7.1-1 .2-.3.1-.5.4-.7.6l-1.7-.8.7-5.5h5.9v1.6h-4.5l-.4 2.9h.1c.2-.2.5-.3.8-.5.3-.1.7-.2 1.2-.2.6 0 1.2.2 1.7.5s1 .7 1.3 1.3c.3.5.5 1.2.5 1.9s-.2 1.3-.5 1.9c-.3.6-.8 1-1.3 1.3-.7.5-1.4.7-2.1.7zm9.9 0c-.7 0-1.3-.1-1.9-.4-.5-.3-1-.7-1.4-1.2-.4-.5-.7-1.1-.9-1.8-.2-.7-.3-1.4-.3-2.2 0-.8.1-1.6.3-2.2.2-.7.5-1.3.9-1.8s.9-.9 1.4-1.2c.6-.3 1.2-.5 1.9-.5s1.3.2 1.9.5c.6.3 1 .7 1.4 1.2.4.5.7 1.1.9 1.8.2.7.3 1.4.3 2.2 0 .8-.1 1.6-.3 2.2-.2.7-.5 1.3-.9 1.8s-.9.9-1.4 1.2c-.6.2-1.2.4-1.9.4zm.1-1.7c.6 0 1-.2 1.5-.5.4-.4.7-.9 1-1.5.2-.6.3-1.3.3-2.1s-.1-1.5-.3-2.1c-.2-.6-.5-1.1-1-1.5-.4-.4-.9-.5-1.5-.5s-1.1.2-1.5.5c-.4.4-.7.8-.9 1.5-.2.6-.3 1.3-.3 2.1s.1 1.5.3 2.1c.2.6.5 1.1.9 1.5.4.3.9.5 1.5.5zm10.5 1.7c-.7 0-1.3-.1-1.9-.4-.5-.3-1-.7-1.4-1.2-.4-.5-.7-1.1-.9-1.8-.2-.7-.3-1.4-.3-2.2 0-.8.1-1.6.3-2.2.2-.7.5-1.3.9-1.8s.9-.9 1.4-1.2c.6-.3 1.2-.5 1.9-.5s1.3.2 1.9.5c.6.3 1 .7 1.4 1.2.4.5.7 1.1.9 1.8.2.7.3 1.4.3 2.2 0 .8-.1 1.6-.3 2.2-.2.7-.5 1.3-.9 1.8s-.9.9-1.4 1.2c-.6.2-1.2.4-1.9.4zm0-1.7c.6 0 1-.2 1.5-.5.4-.4.7-.9 1-1.5.2-.6.3-1.3.3-2.1s-.1-1.5-.3-2.1c-.2-.6-.5-1.1-1-1.5-.4-.4-.9-.5-1.5-.5s-1.1.2-1.5.5c-.4.4-.7.8-.9 1.5-.2.6-.3 1.3-.3 2.1s.1 1.5.3 2.1c.2.6.5 1.1.9 1.5.4.3.9.5 1.5.5zm10 1.4v-8.2h1.6v1.1h.1c.2-.3.4-.5.6-.7.3-.2.6-.4.9-.5.3-.1.7-.2 1-.2.6 0 1.1.1 1.5.4.4.3.7.7.9 1.1.3-.4.6-.8 1.1-1.1.5-.3 1-.5 1.7-.5 1 0 1.7.3 2.1.9.5.6.7 1.4.7 2.3v5.2h-1.7v-4.9c0-.7-.1-1.1-.4-1.4-.3-.3-.7-.5-1.2-.5-.4 0-.7.1-1 .3-.3.2-.5.5-.7.9-.2.4-.2.8-.2 1.2v4.4h-1.7v-4.9c0-.7-.1-1.1-.4-1.4-.3-.3-.7-.5-1.2-.5-.4 0-.7.1-1 .3-.3.2-.5.5-.7.9-.2.4-.2.8-.2 1.2v4.4h-1.8zm17.2.3c-.6 0-1.2-.1-1.7-.3-.5-.2-.9-.5-1.2-.8-.3-.3-.5-.7-.7-1.1l1.5-.7c.2.4.5.8.8 1 .4.2.8.3 1.2.3.4 0 .8-.1 1.1-.2.3-.2.5-.4.5-.8 0-.2-.1-.4-.2-.6-.1-.1-.3-.3-.6-.4-.2-.1-.5-.2-.8-.2l-1-.2c-.4-.1-.8-.3-1.1-.5-.3-.2-.6-.5-.8-.8-.2-.3-.3-.7-.3-1.1 0-.5.1-.9.4-1.3.3-.4.7-.6 1.1-.8.5-.2 1-.3 1.6-.3.5 0 1 .1 1.4.2.4.1.8.3 1.1.6.3.3.6.6.8 1l-1.5.7c-.2-.4-.4-.6-.7-.8-.3-.1-.6-.2-1-.2s-.7.1-1 .2c-.3.2-.4.4-.4.6 0 .3.1.5.4.7.2.2.5.3.9.4l1.2.3c.8.2 1.4.5 1.8.9.4.4.6.9.6 1.5 0 .5-.2 1-.5 1.4-.3.4-.7.7-1.2.9-.6.2-1.1.4-1.7.4zM69 220v-1.6s.2-.1.4-.4c.2-.2.5-.5.8-.9l1.1-1.1 1-1c.3-.3.5-.6.7-.8.3-.3.5-.6.7-.8.2-.2.3-.5.4-.7.1-.2.1-.5.1-.8 0-.3-.1-.5-.2-.8-.1-.3-.3-.4-.6-.6-.3-.1-.6-.2-1-.2s-.7.1-1 .2c-.3.1-.5.3-.6.6-.1.2-.3.4-.3.7l-1.5-.6c.1-.3.2-.5.4-.8.2-.3.4-.5.7-.8.3-.3.6-.5 1-.6.4-.2.9-.3 1.4-.2.7 0 1.3.2 1.9.5.5.3.9.7 1.2 1.2.3.5.4 1 .4 1.6 0 .5-.1.9-.2 1.3-.2.4-.4.8-.7 1.2-.3.4-.5.7-.8 1l-.5.5c-.2.2-.4.5-.7.7l-.7.7-.6.6-.4.4h4.8v1.6H69zm13.2.2c-.7 0-1.3-.1-1.9-.4-.5-.3-1-.7-1.4-1.2-.4-.5-.7-1.1-.9-1.8-.2-.7-.3-1.4-.3-2.2 0-.8.1-1.6.3-2.2.2-.7.5-1.3.9-1.8s.9-.9 1.4-1.2c.6-.3 1.2-.5 1.9-.5s1.3.2 1.9.5c.6.3 1 .7 1.4 1.2.4.5.7 1.1.9 1.8.2.7.3 1.4.3 2.2 0 .8-.1 1.6-.3 2.2-.2.7-.5 1.3-.9 1.8s-.9.9-1.4 1.2c-.6.3-1.2.4-1.9.4zm0-1.6c.6 0 1-.2 1.5-.5.4-.4.7-.9 1-1.5.2-.6.3-1.3.3-2.1s-.1-1.5-.3-2.1c-.2-.6-.5-1.1-1-1.5-.4-.4-.9-.5-1.5-.5s-1.1.2-1.5.5c-.4.4-.7.8-.9 1.5-.2.6-.3 1.3-.3 2.1s.1 1.5.3 2.1c.2.6.5 1.1.9 1.5.4.3.9.5 1.5.5zm10.5 1.6c-.7 0-1.3-.1-1.9-.4-.5-.3-1-.7-1.4-1.2-.4-.5-.7-1.1-.9-1.8-.2-.7-.3-1.4-.3-2.2 0-.8.1-1.6.3-2.2.2-.7.5-1.3.9-1.8s.9-.9 1.4-1.2c.6-.3 1.2-.5 1.9-.5s1.3.2 1.9.5c.6.3 1 .7 1.4 1.2.4.5.7 1.1.9 1.8.2.7.3 1.4.3 2.2 0 .8-.1 1.6-.3 2.2-.2.7-.5 1.3-.9 1.8s-.9.9-1.4 1.2c-.6.3-1.2.4-1.9.4zm0-1.6c.6 0 1-.2 1.5-.5.4-.4.7-.9 1-1.5.2-.6.3-1.3.3-2.1s-.1-1.5-.3-2.1c-.2-.6-.5-1.1-1-1.5-.4-.4-.9-.5-1.5-.5s-1.1.2-1.5.5c-.4.4-.7.8-.9 1.5-.2.6-.3 1.3-.3 2.1s.1 1.5.3 2.1c.2.6.5 1.1.9 1.5.5.3 1 .5 1.5.5zm10 1.4v-8.2h1.6v1.1h.1c.2-.3.4-.5.6-.7.3-.2.6-.4.9-.5.3-.1.7-.2 1-.2.6 0 1.1.1 1.5.4.4.3.7.7.9 1.1.3-.4.6-.8 1.1-1.1.5-.3 1-.5 1.7-.5 1 0 1.7.3 2.1.9.5.6.7 1.4.7 2.3v5.2h-1.7v-4.9c0-.7-.1-1.1-.4-1.4-.3-.3-.7-.5-1.2-.5-.4 0-.7.1-1 .3-.3.2-.5.5-.7.9-.2.4-.2.8-.2 1.2v4.4H108v-4.9c0-.7-.1-1.1-.4-1.4-.3-.3-.7-.5-1.2-.5-.4 0-.7.1-1 .3-.3.2-.5.5-.7.9-.2.4-.2.8-.2 1.2v4.4h-1.8zm17.2.2c-.6 0-1.2-.1-1.7-.3-.5-.2-.9-.5-1.2-.8-.3-.3-.5-.7-.7-1.1l1.5-.7c.2.4.5.8.8 1 .4.2.8.3 1.2.3.4 0 .8-.1 1.1-.2.3-.2.5-.4.5-.8 0-.2-.1-.4-.2-.6-.1-.1-.3-.3-.6-.4-.2-.1-.5-.2-.8-.2l-1-.2c-.4-.1-.8-.3-1.1-.5-.3-.2-.6-.5-.8-.8-.2-.3-.3-.7-.3-1.1 0-.5.1-.9.4-1.3.3-.4.7-.6 1.1-.8.5-.2 1-.3 1.6-.3.5 0 1 .1 1.4.2.4.1.8.3 1.1.6.3.3.6.6.8 1l-1.5.7c-.2-.4-.4-.6-.7-.8-.3-.1-.6-.2-1-.2s-.7.1-1 .2c-.3.2-.4.4-.4.6 0 .3.1.5.4.7.2.2.5.3.9.4l1.2.3c.8.2 1.4.5 1.8.9.4.4.6.9.6 1.5 0 .5-.2 1-.5 1.4-.3.4-.7.7-1.2.9-.5.3-1.1.4-1.7.4zM42.4 96.3V82h1.7v14.3h-1.7zm4.6 0V86.1h1.6v1.5h.1c.3-.5.7-.9 1.3-1.3.6-.4 1.3-.5 2-.5 1.2 0 2.2.4 2.8 1.1.6.7 1 1.7 1 2.9v6.5h-1.7V90c0-1-.2-1.7-.7-2.1-.5-.4-1.1-.6-1.8-.6-.6 0-1.1.2-1.5.5-.4.3-.8.7-1 1.2-.2.5-.4 1-.4 1.6v5.7H47zm10-10.2h6v1.5h-6v-1.5zm1.8 7.5V83.3h1.7v10c0 .5.1.9.3 1.2s.6.4 1.1.4c.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.5-.6-.7-1.3-.7-2.2zm10.3 3c-1 0-1.9-.2-2.6-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.6-1.7-.6-2.8 0-1 .2-1.9.6-2.7s1-1.5 1.7-2 1.6-.8 2.6-.8 1.9.2 2.6.7c.7.4 1.3 1.1 1.7 1.8.4.8.6 1.7.6 2.7v.5H65V90h7c0-.3-.1-.6-.2-.9-.1-.3-.3-.6-.5-.9-.2-.3-.6-.5-.9-.7-.4-.2-.8-.3-1.4-.3-.7 0-1.2.2-1.7.5s-.8.8-1.1 1.4c-.3.6-.4 1.2-.4 2 0 .9.2 1.6.5 2.2.3.6.8 1 1.3 1.3.5.3 1.1.4 1.7.4.8 0 1.4-.2 1.8-.5.5-.4.9-.8 1.2-1.3l1.4.7c-.4.8-1 1.4-1.7 1.9-.9.6-1.8.8-2.9.8zm6.7-.3V86.1h1.6v1.6h.1c.1-.4.4-.7.7-1 .3-.3.7-.5 1.1-.7s.8-.2 1.2-.2h.7c.2 0 .3.1.5.2v1.8c-.2-.1-.5-.2-.7-.2-.2-.1-.5-.1-.7-.1-.5 0-1 .1-1.4.4-.4.3-.7.7-1 1.1-.2.5-.4 1-.4 1.5v5.7h-1.7zm10.4.3c-.8 0-1.4-.1-2-.4s-1-.7-1.3-1.2c-.3-.5-.5-1.1-.5-1.8 0-.8.2-1.4.6-1.9.4-.5.9-.9 1.5-1.2.7-.3 1.4-.4 2.2-.4.4 0 .9 0 1.2.1s.7.2 1 .3c.3.1.5.2.7.3v-.6c0-.8-.3-1.4-.8-1.8-.5-.5-1.2-.7-2-.7-.6 0-1.1.1-1.6.4-.5.2-.9.6-1.1 1l-1.3-1c.3-.4.6-.7 1-1 .4-.3.9-.5 1.4-.7.5-.2 1.1-.2 1.6-.2 1.4 0 2.5.4 3.2 1.1.8.7 1.2 1.7 1.2 3v6.5h-1.6v-1.5h-.1c-.2.3-.4.6-.7.8s-.7.5-1.1.7c-.5.2-1 .2-1.5.2zm.1-1.5c.6 0 1.1-.1 1.6-.4.5-.3.9-.7 1.2-1.2.3-.5.5-1 .5-1.6-.3-.2-.7-.4-1.2-.5s-1-.2-1.5-.2c-1 0-1.7.2-2.1.6-.4.4-.7.9-.7 1.5s.2 1 .6 1.4 1 .4 1.6.4zm11.8 1.5c-1 0-1.9-.2-2.7-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.7-1.7-.7-2.8 0-1 .2-2 .7-2.8.4-.8 1.1-1.5 1.8-1.9.8-.5 1.7-.7 2.7-.7 1.1 0 2.1.3 2.8.8.7.5 1.3 1.2 1.6 2l-1.5.6c-.2-.6-.6-1.1-1.1-1.4-.5-.3-1.1-.5-1.8-.5-.6 0-1.2.2-1.7.5s-.9.8-1.2 1.4c-.3.6-.5 1.3-.5 2 0 .8.2 1.4.5 2 .3.6.7 1 1.2 1.4.5.3 1.1.5 1.7.5.7 0 1.3-.2 1.9-.5s.9-.8 1.2-1.4l1.5.6c-.3.8-.9 1.5-1.6 2s-1.9.8-3 .8zm5.5-10.5h6v1.5h-6v-1.5zm1.7 7.5V83.3h1.7v10c0 .5.1.9.3 1.2s.6.4 1.1.4c.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8s-.7-1.3-.7-2.2zm6.5 2.7V86.1h1.7v10.2h-1.7zm.9-12c-.3 0-.6-.1-.9-.4s-.4-.5-.4-.9c0-.3.1-.6.4-.9.2-.2.5-.4.9-.4.3 0 .6.1.9.4.2.2.4.5.4.9 0 .3-.1.6-.4.9-.3.2-.6.4-.9.4zm8.1 12.3c-1 0-1.9-.2-2.7-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.7-1.7-.7-2.8 0-1 .2-1.9.7-2.8.4-.8 1.1-1.5 1.8-2 .8-.5 1.7-.7 2.7-.7 1 0 1.9.2 2.7.7.8.5 1.4 1.1 1.9 2s.7 1.7.7 2.7c0 1-.2 1.9-.7 2.8-.4.8-1.1 1.5-1.9 1.9-.8.6-1.7.8-2.7.8zm0-1.5c.6 0 1.2-.2 1.7-.5s1-.8 1.3-1.3c.3-.6.5-1.3.5-2.1s-.2-1.5-.5-2.1-.8-1-1.3-1.3c-.5-.3-1.1-.5-1.7-.5-.6 0-1.2.2-1.7.5s-1 .7-1.3 1.3-.5 1.3-.5 2.1.2 1.5.5 2.1c.3.6.8 1 1.3 1.3.5.4 1.1.5 1.7.5zm7 1.2V86.1h1.6v1.5h.1c.3-.5.7-.9 1.3-1.3.6-.4 1.3-.5 2-.5 1.2 0 2.2.4 2.8 1.1.6.7 1 1.7 1 2.9v6.5h-1.7V90c0-1-.2-1.7-.7-2.1-.5-.4-1.1-.6-1.8-.6-.6 0-1.1.2-1.5.5-.4.3-.8.7-1 1.2-.2.5-.4 1-.4 1.6v5.7h-1.7zM143 86.1h6v1.5h-6v-1.5zm1.7 7.5V83.3h1.7v10c0 .5.1.9.3 1.2s.6.4 1.1.4c.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.4-.6-.7-1.3-.7-2.2zm10.5 3c-1 0-1.9-.2-2.7-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.7-1.7-.7-2.8 0-1 .2-1.9.7-2.8.4-.8 1.1-1.5 1.8-2 .8-.5 1.7-.7 2.7-.7 1 0 1.9.2 2.7.7.8.5 1.4 1.1 1.9 2 .4.8.7 1.7.7 2.7 0 1-.2 1.9-.7 2.8-.4.8-1.1 1.5-1.9 1.9-.8.6-1.7.8-2.7.8zm0-1.5c.6 0 1.2-.2 1.7-.5s1-.8 1.3-1.3c.3-.6.5-1.3.5-2.1s-.2-1.5-.5-2.1c-.3-.6-.8-1-1.3-1.3-.5-.3-1.1-.5-1.7-.5-.6 0-1.2.2-1.7.5s-1 .7-1.3 1.3c-.3.6-.5 1.3-.5 2.1s.2 1.5.5 2.1c.3.6.8 1 1.3 1.3.5.4 1.1.5 1.7.5zm12.2 1.2V82h2.1l7.2 11.4h.1l-.1-2.8V82h1.7v14.3h-1.8l-7.5-11.9h-.1l.1 2.8v9.2h-1.7zm18.2.3c-1 0-1.9-.2-2.6-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.6-1.7-.6-2.8 0-1 .2-1.9.6-2.7.4-.8 1-1.5 1.7-2s1.6-.8 2.6-.8 1.9.2 2.6.7c.7.4 1.3 1.1 1.7 1.8.4.8.6 1.7.6 2.7v.5h-8.8V90h7c0-.3-.1-.6-.2-.9-.1-.3-.3-.6-.5-.9-.2-.3-.6-.5-.9-.7-.4-.2-.8-.3-1.4-.3-.7 0-1.2.2-1.7.5s-.8.8-1.1 1.4c-.3.6-.4 1.2-.4 2 0 .9.2 1.6.5 2.2.3.6.8 1 1.3 1.3.5.3 1.1.4 1.7.4.8 0 1.4-.2 1.8-.5.5-.4.9-.8 1.2-1.3l1.4.7c-.4.8-1 1.4-1.7 1.9-1 .6-1.9.8-3 .8zm5.5-.3 4.1-5.9h.2l2.9-4.3h2l-4 5.6h-.1l-3.1 4.6h-2zm.1-10.2h1.9l3.2 4.5h.1l4 5.7h-2l-3-4.5h-.1l-4.1-5.7zm9.9 0h6v1.5h-6v-1.5zm1.8 7.5V83.3h1.7v10c0 .5.1.9.3 1.2.2.3.6.4 1.1.4.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.4-.6-.7-1.3-.7-2.2zm11.2 2.7V82h4.8c.8 0 1.5.2 2.2.5.7.4 1.2.8 1.6 1.5.4.6.6 1.4.6 2.2 0 .8-.2 1.6-.6 2.2-.4.6-.9 1.1-1.6 1.5-.7.4-1.4.5-2.2.5H215v-1.6h4c.6 0 1-.1 1.4-.4.4-.3.7-.6.9-1 .2-.4.3-.8.3-1.2s-.1-.8-.3-1.2c-.2-.4-.5-.7-.9-1-.4-.3-.9-.4-1.4-.4h-3.2v12.7h-1.7zm14.1.3c-.8 0-1.4-.1-2-.4s-1-.7-1.3-1.2-.5-1.1-.5-1.8c0-.8.2-1.4.6-1.9s.9-.9 1.5-1.2c.7-.3 1.4-.4 2.2-.4.4 0 .9 0 1.2.1s.7.2 1 .3c.3.1.5.2.7.3v-.6c0-.8-.3-1.4-.8-1.8-.5-.5-1.2-.7-2-.7-.6 0-1.1.1-1.6.4-.5.2-.9.6-1.1 1l-1.3-1c.3-.4.6-.7 1-1 .4-.3.9-.5 1.4-.7s1.1-.2 1.6-.2c1.4 0 2.5.4 3.2 1.1.8.7 1.2 1.7 1.2 3v6.5h-1.6v-1.5h-.1c-.2.3-.4.6-.7.8s-.7.5-1.1.7c-.6.2-1 .2-1.5.2zm.1-1.5c.6 0 1.1-.1 1.6-.4.5-.3.9-.7 1.2-1.2.3-.5.5-1 .5-1.6-.3-.2-.7-.4-1.2-.5s-1-.2-1.5-.2c-1 0-1.7.2-2.1.6-.4.4-.7.9-.7 1.5s.2 1 .6 1.4 1 .4 1.6.4zm7.4 1.2V86.1h1.7v10.2h-1.7zm.8-12c-.3 0-.6-.1-.9-.4s-.4-.5-.4-.9c0-.3.1-.6.4-.9.2-.2.5-.4.9-.4.3 0 .6.1.9.4.2.2.4.5.4.9 0 .3-.1.6-.4.9-.2.2-.5.4-.9.4zm3.5 12V86.1h1.6v1.5h.1c.3-.5.7-.9 1.3-1.3.6-.4 1.3-.5 2-.5 1.2 0 2.2.4 2.8 1.1.6.7 1 1.7 1 2.9v6.5h-1.7V90c0-1-.2-1.7-.7-2.1-.5-.4-1.1-.6-1.8-.6-.6 0-1.1.2-1.5.5-.4.3-.8.7-1 1.2-.2.5-.4 1-.4 1.6v5.7H240zm10.1-10.2h6v1.5h-6v-1.5zm1.7 7.5V83.3h1.7v10c0 .5.1.9.3 1.2s.6.4 1.1.4c.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8s-.7-1.3-.7-2.2zM96 172.8c-2.4 0-4.3 1.9-4.3 4.3 0 2 1.4 3.7 3.3 4.2v20.1h2v-20.1c1.9-.5 3.3-2.1 3.3-4.2 0-2.3-1.9-4.3-4.3-4.3zM201.6 172.6c-2.4 0-4.3 1.9-4.3 4.3 0 2 1.4 3.7 3.3 4.2v19.8h2v-19.8c1.9-.5 3.3-2.1 3.3-4.2 0-2.4-1.9-4.3-4.3-4.3z"></path></svg>
  <svg title="A diagram of the INP thresholds. An INP at or below 200 milliseconds is considered good. Between 200 and 500 milliseconds suggests a page's responsiveness needs improvement. Anything over 500 milliseconds means that a page's responsiveness is poor." class="inp-desktop" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0" y="0" viewBox="0 0 658.4 113.6" style="enable-background:new 0 0 658.4 113.6" xml:space="preserve"><style>.st0{填充：#2979FF} v.st1{填充规则：evenodd；剪辑规则：evenodd；填充：#0CCE6B} .st2 {填充：#191919} .st3{填充规则：evenodd；剪辑规则： Evenodd;fill: #FFA400} .st4{fill-rule:evenodd;clip-rule:evenodd;fill:#FF4E42} @media screen 和 (prefers-color-scheme: light){.st2{fill: #191919}} @media screen and (prefers-color-scheme: dark){.st2{fill: #fff}} [data-user-theme=dark] .st2{fill: #fff}</style><path class="st0" d="M30.2 68.7V0h13v68.7h-13zm28.7 0V0H74l27.7 46.1h.8l-.8-13.2V0h12.9v68.7H101L71.7 20.1h-.8l.8 13.2v35.4H58.9zm71.3 0V0h24.2c4.4 0 8.4.9 11.9 2.7 3.5 1.8 6.3 4.4 8.4 7.6 2.1 3.3 3.1 7 3.1 11.3 0 4.3-1 8.1-3.1 11.4-2.1 3.3-4.9 5.8-8.4 7.7-3.5 1.8-7.5 2.7-11.9 2.7h-17V31.2h17.4c2.2 0 4.1-.4 5.7-1.3 1.5-.9 2.7-2.1 3.5-3.5.8-1.4 1.2-3 1.2-4.7 0-1.7-.4-3.2-1.2-4.6-.8-1.4-1.9-2.6-3.5-3.5-1.5-.9-3.4-1.3-5.7-1.3h-11.6v56.5h-13z"></path><path class="st1" d="M303.2 14.9h115.2v43.2H303.2V14.9z"></path><path class="st2" d="M345.3 41.5c-.7 0-1.3-.1-1.9-.4-.6-.2-1.1-.6-1.6-1s-.8-1-1.1-1.6c-.3-.6-.4-1.3-.4-2s.1-1.4.4-2c.3-.6.6-1.1 1.1-1.6.5-.5 1-.8 1.6-1 .6-.2 1.2-.4 1.9-.4s1.4.1 2 .4c.6.2 1.1.6 1.6 1.1l-1 1c-.2-.2-.4-.4-.7-.6-.3-.2-.5-.3-.9-.4-.3-.1-.6-.1-1-.1-.5 0-.9.1-1.3.3-.4.2-.8.4-1.1.7-.3.3-.6.7-.8 1.1-.2.4-.3.9-.3 1.5s.1 1 .3 1.5c.2.4.5.8.8 1.1.3.3.7.6 1.1.7.4.2.9.2 1.3.2s.8-.1 1.2-.2c.4-.1.7-.3 1-.5.3-.2.5-.5.7-.8.2-.3.3-.7.3-1.1h-3.3v-1.3h4.6v.8c0 .7-.1 1.3-.4 1.9-.2.6-.6 1-1 1.5-.4.4-.9.7-1.5.9-.3.2-.9.3-1.6.3zm10.5 0c-.7 0-1.4-.1-2-.4-.6-.3-1.1-.6-1.6-1.1-.4-.5-.8-1-1-1.6-.2-.6-.4-1.2-.4-1.9s.1-1.3.4-1.9c.2-.6.6-1.1 1-1.6s1-.8 1.6-1.1c.6-.3 1.3-.4 2-.4s1.4.1 2 .4c.6.2 1.1.6 1.6 1.1.5.5.8 1 1 1.6.2.6.4 1.2.4 1.9s-.1 1.3-.4 1.9c-.2.6-.6 1.1-1 1.6s-1 .8-1.6 1.1-1.2.4-2 .4zm0-1.4c.6 0 1.2-.2 1.8-.5.5-.3.9-.7 1.2-1.3s.5-1.2.5-1.9-.2-1.3-.5-1.9-.7-1-1.2-1.3c-.5-.3-1.1-.5-1.8-.5-.6 0-1.2.2-1.8.5-.5.3-.9.7-1.2 1.3s-.5 1.2-.5 1.9.2 1.3.5 1.9.7 1 1.2 1.3c.6.4 1.2.5 1.8.5zm11 1.4c-.7 0-1.4-.1-2-.4-.6-.3-1.1-.6-1.6-1.1-.4-.5-.8-1-1-1.6-.2-.6-.4-1.2-.4-1.9s.1-1.3.4-1.9c.2-.6.6-1.1 1-1.6s1-.8 1.6-1.1c.6-.3 1.3-.4 2-.4s1.4.1 2 .4c.6.2 1.1.6 1.6 1.1.5.5.8 1 1 1.6.2.6.4 1.2.4 1.9s-.1 1.3-.4 1.9c-.2.6-.6 1.1-1 1.6s-1 .8-1.6 1.1-1.3.4-2 .4zm0-1.4c.6 0 1.2-.2 1.8-.5.5-.3.9-.7 1.2-1.3s.5-1.2.5-1.9-.2-1.3-.5-1.9-.7-1-1.2-1.3c-.5-.3-1.1-.5-1.8-.5-.6 0-1.2.2-1.8.5-.5.3-.9.7-1.2 1.3s-.5 1.2-.5 1.9.2 1.3.5 1.9.7 1 1.2 1.3c.6.4 1.2.5 1.8.5zm6.6 1.2v-9.5h3c1 0 1.9.2 2.6.6.7.4 1.3 1 1.7 1.7s.6 1.5.6 2.5c0 .9-.2 1.8-.6 2.5s-1 1.3-1.7 1.7c-.7.4-1.6.6-2.6.6h-3zm1.5-1.4h1.5c.7 0 1.3-.1 1.8-.4.5-.3.9-.7 1.2-1.2.3-.5.4-1.1.4-1.8s-.1-1.3-.4-1.8c-.3-.5-.7-.9-1.2-1.2-.5-.3-1.1-.4-1.8-.4h-1.5v6.8z"></path><path class="st3" d="M418.4 14.9h124.8v43.2H418.4V14.9z"></path><path class="st2" d="M460.8 33.3v-9.5h1.7l4.3 7h.1l-.1-1.8v-5.2h1.5v9.5h-1.5l-4.5-7.4h-.1l.1 1.8v5.5h-1.5zm9.7 0v-9.5h5.8v1.4H472V32h4.3v1.4h-5.8zm.7-4.1v-1.4h4.6v1.4h-4.6zm6.9 4.1v-9.5h5.8v1.4h-4.3V32h4.3v1.4h-5.8zm.8-4.1v-1.4h4.6v1.4h-4.6zm6.8 4.1v-9.5h3c1 0 1.9.2 2.6.6.7.4 1.3 1 1.7 1.7s.6 1.5.6 2.5c0 .9-.2 1.8-.6 2.5s-1 1.3-1.7 1.7c-.7.4-1.6.6-2.6.6h-3zm1.5-1.4h1.5c.7 0 1.3-.1 1.8-.4.5-.3.9-.7 1.2-1.2.3-.5.4-1.1.4-1.8s-.1-1.3-.4-1.8c-.3-.5-.7-.9-1.2-1.2-.5-.3-1.1-.4-1.8-.4h-1.5v6.8zm10.9 1.6c-.5 0-1-.1-1.5-.3-.5-.2-.9-.5-1.2-.9-.3-.4-.6-.9-.8-1.5l1.4-.6c.1.5.4.9.8 1.3.4.3.8.5 1.3.5.3 0 .6-.1.8-.2.3-.1.5-.3.6-.5.2-.2.2-.5.2-.8 0-.3-.1-.5-.2-.7-.1-.2-.3-.4-.6-.5-.3-.2-.7-.3-1.1-.5l-.6-.2c-.3-.1-.5-.2-.8-.4-.3-.1-.5-.3-.7-.5-.2-.2-.4-.5-.5-.7-.1-.3-.2-.6-.2-1 0-.5.1-.9.4-1.3.2-.4.6-.7 1-.9.4-.2 1-.4 1.6-.4.6 0 1.1.1 1.5.3.4.2.7.5 1 .8.2.3.4.6.5.9l-1.3.6c-.1-.2-.2-.4-.3-.5-.1-.2-.3-.3-.5-.4-.2-.1-.5-.2-.8-.2-.3 0-.5.1-.8.2-.2.1-.4.2-.6.4-.1.2-.2.4-.2.6 0 .3.1.6.4.8s.7.4 1.2.6l.6.2c.3.1.6.2.9.4.3.1.6.3.8.6.2.2.4.5.6.8.1.3.2.7.2 1.2s-.1.9-.3 1.3c-.2.4-.4.6-.8.9-.3.2-.7.4-1 .5-.3 0-.7.1-1 .1zM434.4 49.3v-9.5h1.5v9.5h-1.5zm3.6 0v-9.5h2l2.8 7.3h.1l2.8-7.3h2v9.5h-1.4v-5.4l.1-1.7h-.1l-2.8 7.1h-1.2l-2.8-7.1h-.1l.1 1.7v5.4H438zm11.7 0v-9.5h3.3c.6 0 1.1.1 1.6.4.5.2.9.6 1.1 1 .3.4.4.9.4 1.5s-.1 1.1-.4 1.5c-.3.4-.7.8-1.1 1-.5.2-1 .4-1.6.4h-2.5v-1.4h2.5c.4 0 .7-.1.9-.2.2-.1.4-.3.5-.6.1-.2.2-.5.2-.8 0-.3-.1-.5-.2-.7-.1-.2-.3-.4-.5-.6-.2-.2-.5-.2-.9-.2h-1.8v8.2h-1.5zm8 0v-9.5h3.3c.6 0 1.1.1 1.6.4.5.2.8.6 1.1 1s.4.9.4 1.5c0 .4-.1.8-.2 1.1s-.4.7-.7.9c-.3.3-.6.5-1 .6-.4.1-.9.2-1.4.2h-2.3v-1.3h2.5c.3 0 .6-.1.8-.2.2-.1.4-.3.6-.6.2-.2.2-.5.2-.8 0-.3-.1-.5-.2-.7-.1-.2-.3-.4-.5-.6-.2-.1-.5-.2-.9-.2h-1.9v8.2h-1.4zm2.2-4.4h1.7l3 4.3v.1h-1.7l-3-4.4zm10.3 4.6c-.7 0-1.4-.1-2-.4-.6-.3-1.1-.6-1.6-1.1-.4-.5-.8-1-1-1.6-.2-.6-.4-1.2-.4-1.9s.1-1.3.4-1.9c.2-.6.6-1.1 1-1.6s1-.8 1.6-1.1c.6-.3 1.3-.4 2-.4s1.4.1 2 .4c.6.2 1.1.6 1.6 1.1.5.5.8 1 1 1.6.2.6.4 1.2.4 1.9s-.1 1.3-.4 1.9c-.2.6-.6 1.1-1 1.6s-1 .8-1.6 1.1c-.6.3-1.2.4-2 .4zm0-1.4c.6 0 1.2-.2 1.8-.5.5-.3.9-.7 1.2-1.3.3-.5.5-1.2.5-1.9s-.2-1.3-.5-1.9c-.3-.5-.7-1-1.2-1.3-.5-.3-1.1-.5-1.8-.5s-1.2.2-1.8.5c-.5.3-.9.7-1.2 1.3-.3.5-.5 1.2-.5 1.9s.2 1.3.5 1.9c.3.5.7 1 1.2 1.3.6.4 1.2.5 1.8.5zm8.8 1.2-3.4-9.5h1.6l2.2 6.3.3 1.1h.1l.4-1.1 2.2-6.3h1.6l-3.5 9.5H479zm6.2 0v-9.5h5.8v1.4h-4.3V48h4.3v1.4h-5.8zm.8-4.1v-1.4h4.6v1.4H486zm6.8 4.1v-9.5h2l2.8 7.3h.1l2.8-7.3h2v9.5H501v-5.4l.1-1.7h-.1l-2.8 7.1H497l-2.8-7.1h-.1l.1 1.7v5.4h-1.4zm11.8 0v-9.5h5.8v1.4h-4.3V48h4.3v1.4h-5.8zm.8-4.1v-1.4h4.6v1.4h-4.6zm6.8 4.1v-9.5h1.7l4.3 7h.1l-.1-1.8v-5.2h1.5v9.5h-1.5l-4.5-7.4h-.1l.1 1.8v5.5h-1.5zm11.7 0v-8.8h1.5v8.8h-1.5zm-2.7-8.2v-1.4h6.8v1.4h-6.8z"></path><path class="st4" d="M543.2 14.9h115.2v43.2H543.2V14.9z"></path><path class="st2" d="M582.9 41.3v-9.5h3.3c.6 0 1.1.1 1.6.4.5.2.9.6 1.1 1 .3.4.4.9.4 1.5s-.1 1.1-.4 1.5c-.3.4-.7.8-1.1 1-.5.2-1 .4-1.6.4h-2.5v-1.4h2.5c.4 0 .7-.1.9-.2.2-.1.4-.3.5-.6.1-.2.2-.5.2-.8 0-.3-.1-.5-.2-.7-.1-.2-.3-.4-.5-.6-.2-.2-.5-.2-.9-.2h-1.8v8.2h-1.5zm12.3.2c-.7 0-1.4-.1-2-.4-.6-.3-1.1-.6-1.6-1.1-.4-.5-.8-1-1-1.6-.2-.6-.4-1.2-.4-1.9s.1-1.3.4-1.9c.2-.6.6-1.1 1-1.6s1-.8 1.6-1.1c.6-.3 1.3-.4 2-.4s1.4.1 2 .4c.6.2 1.1.6 1.6 1.1.5.5.8 1 1 1.6.2.6.4 1.2.4 1.9s-.1 1.3-.4 1.9c-.2.6-.6 1.1-1 1.6s-1 .8-1.6 1.1c-.7.3-1.3.4-2 .4zm0-1.4c.6 0 1.2-.2 1.8-.5.5-.3.9-.7 1.2-1.3.3-.5.5-1.2.5-1.9s-.2-1.3-.5-1.9c-.3-.5-.7-1-1.2-1.3-.5-.3-1.1-.5-1.8-.5-.6 0-1.2.2-1.8.5-.5.3-.9.7-1.2 1.3-.3.5-.5 1.2-.5 1.9s.2 1.3.5 1.9c.3.5.7 1 1.2 1.3.6.4 1.1.5 1.8.5zm10.9 1.4c-.7 0-1.4-.1-2-.4-.6-.3-1.1-.6-1.6-1.1-.4-.5-.8-1-1-1.6-.2-.6-.4-1.2-.4-1.9s.1-1.3.4-1.9c.2-.6.6-1.1 1-1.6s1-.8 1.6-1.1c.6-.3 1.3-.4 2-.4s1.4.1 2 .4c.6.2 1.1.6 1.6 1.1.5.5.8 1 1 1.6.2.6.4 1.2.4 1.9s-.1 1.3-.4 1.9c-.2.6-.6 1.1-1 1.6s-1 .8-1.6 1.1c-.6.3-1.3.4-2 .4zm0-1.4c.6 0 1.2-.2 1.8-.5.5-.3.9-.7 1.2-1.3.3-.5.5-1.2.5-1.9s-.2-1.3-.5-1.9c-.3-.5-.7-1-1.2-1.3-.5-.3-1.1-.5-1.8-.5s-1.2.2-1.8.5c-.5.3-.9.7-1.2 1.3-.3.5-.5 1.2-.5 1.9s.2 1.3.5 1.9c.3.5.7 1 1.2 1.3.6.4 1.2.5 1.8.5zm6.7 1.2v-9.5h3.3c.6 0 1.1.1 1.6.4.5.2.8.6 1.1 1s.4.9.4 1.5c0 .4-.1.8-.2 1.1s-.4.7-.7.9c-.3.3-.6.5-1 .6-.4.1-.9.2-1.4.2h-2.3v-1.3h2.5c.3 0 .6-.1.8-.2.2-.1.4-.3.6-.6.2-.2.2-.5.2-.8 0-.3-.1-.5-.2-.7-.1-.2-.3-.4-.5-.6-.2-.1-.5-.2-.9-.2h-1.9v8.2h-1.4zm2.2-4.4h1.7l3 4.3v.1H618l-3-4.4zM517.7 102.9c-.6 0-1.1-.1-1.7-.3-.6-.2-1-.6-1.5-1-.4-.5-.7-1.1-.9-1.8l1.7-.7c.2.6.4 1.1.8 1.5.4.4.9.6 1.6.6.7 0 1.2-.2 1.6-.6.4-.4.7-1 .7-1.6 0-.7-.2-1.2-.6-1.6-.4-.4-1-.7-1.6-.7-.4 0-.8.1-1.1.2-.3.2-.6.4-.8.7l-1.8-.8.7-6h6.4v1.7h-4.9l-.4 3.2h.1c.3-.2.6-.4.9-.5.4-.1.8-.2 1.3-.2.7 0 1.3.2 1.9.5.6.3 1 .8 1.4 1.4.4.6.5 1.3.5 2 0 .8-.2 1.5-.5 2.1-.4.6-.8 1.1-1.5 1.4-.7.3-1.5.5-2.3.5zm10.8 0c-.7 0-1.4-.2-2-.5-.6-.3-1.1-.8-1.5-1.3-.4-.6-.8-1.2-1-2-.2-.8-.3-1.6-.3-2.4 0-.9.1-1.7.3-2.5.2-.8.6-1.4 1-2 .4-.6.9-1 1.5-1.3.6-.3 1.3-.5 2-.5.8 0 1.4.2 2 .5.6.3 1.1.8 1.5 1.3.4.6.8 1.2 1 2 .2.8.3 1.6.3 2.5 0 .9-.1 1.7-.3 2.4-.2.8-.5 1.4-1 2-.4.6-.9 1-1.5 1.3-.6.3-1.2.5-2 .5zm0-1.8c.6 0 1.1-.2 1.6-.6.4-.4.8-.9 1-1.6.2-.7.4-1.4.4-2.2 0-.8-.1-1.6-.4-2.3-.2-.7-.6-1.2-1-1.6-.4-.4-1-.6-1.6-.6-.6 0-1.2.2-1.6.6-.4.4-.8.9-1 1.6-.2.7-.4 1.4-.4 2.3 0 .8.1 1.6.4 2.2.2.7.6 1.2 1 1.6.5.4 1 .6 1.6.6zm11.4 1.8c-.7 0-1.4-.2-2-.5-.6-.3-1.1-.8-1.5-1.3-.4-.6-.8-1.2-1-2-.2-.8-.3-1.6-.3-2.4 0-.9.1-1.7.3-2.5.2-.8.6-1.4 1-2 .4-.6.9-1 1.5-1.3.6-.3 1.3-.5 2-.5.8 0 1.4.2 2 .5.6.3 1.1.8 1.5 1.3.4.6.8 1.2 1 2 .2.8.3 1.6.3 2.5 0 .9-.1 1.7-.3 2.4-.2.8-.5 1.4-1 2-.4.6-.9 1-1.5 1.3-.5.3-1.2.5-2 .5zm.1-1.8c.6 0 1.1-.2 1.6-.6.4-.4.8-.9 1-1.6.2-.7.4-1.4.4-2.2 0-.8-.1-1.6-.4-2.3-.2-.7-.6-1.2-1-1.6-.4-.4-1-.6-1.6-.6-.6 0-1.2.2-1.6.6-.4.4-.8.9-1 1.6-.2.7-.4 1.4-.4 2.3 0 .8.1 1.6.4 2.2.2.7.6 1.2 1 1.6.4.4.9.6 1.6.6zm10.8 1.5v-8.8h1.8V95h.1c.2-.3.4-.5.7-.8s.6-.4.9-.5c.4-.1.7-.2 1.1-.2.7 0 1.2.2 1.7.5s.8.7 1 1.2c.3-.5.7-.8 1.2-1.2.5-.3 1.1-.5 1.8-.5 1 0 1.8.3 2.3 1 .5.6.8 1.5.8 2.5v5.7h-1.9v-5.4c0-.7-.2-1.2-.5-1.5-.3-.3-.7-.5-1.3-.5-.4 0-.8.1-1.1.4-.3.2-.6.6-.8 1s-.3.9-.3 1.3v4.7h-1.9v-5.4c0-.7-.2-1.2-.5-1.5-.3-.3-.8-.5-1.3-.5-.4 0-.8.1-1.1.4-.3.2-.6.6-.7 1s-.3.9-.3 1.3v4.7h-1.7zm18.6.3c-.7 0-1.3-.1-1.8-.3-.5-.2-.9-.5-1.3-.9-.3-.4-.6-.8-.7-1.2l1.7-.7c.2.5.5.8.9 1.1.4.2.8.4 1.3.4s.9-.1 1.2-.2c.3-.2.5-.4.5-.8 0-.2-.1-.5-.2-.6s-.4-.3-.6-.4l-.9-.3-1.1-.2c-.4-.1-.8-.3-1.2-.5-.4-.2-.7-.5-.9-.9-.2-.4-.3-.8-.3-1.2 0-.5.2-1 .5-1.4.3-.4.7-.7 1.2-.9.5-.2 1.1-.3 1.7-.3.6 0 1.1.1 1.5.2.5.1.9.3 1.2.6.3.3.6.6.8 1l-1.6.7c-.2-.4-.5-.7-.8-.8-.3-.2-.7-.2-1.1-.2-.4 0-.8.1-1.1.3-.3.2-.4.4-.4.7 0 .3.1.5.4.7.3.2.6.3 1 .4l1.3.3c.9.2 1.5.6 2 1 .4.4.7 1 .7 1.6 0 .6-.2 1.1-.5 1.5-.3.4-.8.7-1.3 1-.8.2-1.5.3-2.1.3zM389.2 102.6v-1.8l.4-.4.9-.9c.4-.4.7-.8 1.1-1.2l1.1-1.1.8-.8c.3-.3.6-.6.8-.9.2-.3.3-.5.4-.8.1-.2.1-.5.1-.8 0-.3-.1-.6-.2-.8-.1-.3-.4-.5-.7-.6-.3-.2-.6-.2-1.1-.2-.4 0-.7.1-1 .2-.3.2-.5.4-.7.6-.2.2-.3.5-.3.7l-1.7-.7c.1-.3.2-.6.4-.9.2-.3.4-.6.8-.9.3-.3.7-.5 1.1-.7.4-.2.9-.3 1.5-.3.8 0 1.4.2 2 .5.6.3 1 .7 1.3 1.2.3.5.5 1.1.5 1.7 0 .5-.1 1-.3 1.5-.2.5-.4.9-.7 1.3-.3.4-.6.7-.9 1-.2.1-.4.3-.6.6-.2.2-.5.5-.7.8l-.8.8-.7.7-.4.4h5.2v1.7h-7.6zm14.2.3c-.7 0-1.4-.2-2-.5-.6-.3-1.1-.8-1.5-1.3-.4-.6-.8-1.2-1-2-.2-.8-.3-1.6-.3-2.4 0-.9.1-1.7.3-2.5.2-.8.6-1.4 1-2 .4-.6.9-1 1.5-1.3.6-.3 1.3-.5 2-.5.8 0 1.4.2 2 .5.6.3 1.1.8 1.5 1.3.4.6.8 1.2 1 2 .2.8.3 1.6.3 2.5 0 .9-.1 1.7-.3 2.4-.2.8-.5 1.4-1 2-.4.6-.9 1-1.5 1.3-.5.3-1.2.5-2 .5zm0-1.8c.6 0 1.1-.2 1.6-.6.4-.4.8-.9 1-1.6.2-.7.4-1.4.4-2.2 0-.8-.1-1.6-.4-2.3-.2-.7-.6-1.2-1-1.6-.4-.4-1-.6-1.6-.6-.6 0-1.2.2-1.6.6-.4.4-.8.9-1 1.6-.2.7-.4 1.4-.4 2.3 0 .8.1 1.6.4 2.2.2.7.6 1.2 1 1.6.5.4 1 .6 1.6.6zm11.5 1.8c-.7 0-1.4-.2-2-.5-.6-.3-1.1-.8-1.5-1.3-.4-.6-.8-1.2-1-2-.2-.8-.3-1.6-.3-2.4 0-.9.1-1.7.3-2.5.2-.8.6-1.4 1-2 .4-.6.9-1 1.5-1.3.6-.3 1.3-.5 2-.5.8 0 1.4.2 2 .5.6.3 1.1.8 1.5 1.3.4.6.8 1.2 1 2 .2.8.3 1.6.3 2.5 0 .9-.1 1.7-.3 2.4-.2.8-.5 1.4-1 2-.4.6-.9 1-1.5 1.3-.6.3-1.3.5-2 .5zm0-1.8c.6 0 1.1-.2 1.6-.6.4-.4.8-.9 1-1.6.2-.7.4-1.4.4-2.2 0-.8-.1-1.6-.4-2.3-.2-.7-.6-1.2-1-1.6-.4-.4-1-.6-1.6-.6-.6 0-1.2.2-1.6.6-.4.4-.8.9-1 1.6-.2.7-.4 1.4-.4 2.3 0 .8.1 1.6.4 2.2.2.7.6 1.2 1 1.6.4.4.9.6 1.6.6zm10.8 1.5v-8.8h1.8V95h.1c.2-.3.4-.5.7-.8s.6-.4.9-.5c.4-.1.7-.2 1.1-.2.7 0 1.2.2 1.7.5s.8.7 1 1.2c.3-.5.7-.8 1.2-1.2.5-.3 1.1-.5 1.8-.5 1 0 1.8.3 2.3 1 .5.6.8 1.5.8 2.5v5.7h-1.9v-5.4c0-.7-.2-1.2-.5-1.5-.3-.3-.7-.5-1.3-.5-.4 0-.8.1-1.1.4-.3.2-.6.6-.8 1s-.3.9-.3 1.3v4.7h-1.9v-5.4c0-.7-.2-1.2-.5-1.5-.3-.3-.8-.5-1.3-.5-.4 0-.8.1-1.1.4-.3.2-.6.6-.7 1s-.3.9-.3 1.3v4.7h-1.7zm18.6.3c-.7 0-1.3-.1-1.8-.3-.5-.2-.9-.5-1.3-.9-.3-.4-.6-.8-.7-1.2l1.7-.7c.2.5.5.8.9 1.1.4.2.8.4 1.3.4s.9-.1 1.2-.2c.3-.2.5-.4.5-.8 0-.2-.1-.5-.2-.6-.2-.2-.4-.3-.6-.4l-.9-.3-1.1-.2c-.4-.1-.8-.3-1.2-.5-.4-.2-.7-.5-.9-.9-.2-.4-.3-.8-.3-1.2 0-.5.2-1 .5-1.4.3-.4.7-.7 1.2-.9.5-.2 1.1-.3 1.7-.3.6 0 1.1.1 1.5.2.5.1.9.3 1.2.6.3.3.6.6.8 1l-1.6.7c-.2-.4-.5-.7-.8-.8-.3-.2-.7-.2-1.1-.2-.4 0-.8.1-1.1.3-.3.2-.4.4-.4.7 0 .3.1.5.4.7.3.2.6.3 1 .4l1.3.3c.9.2 1.5.6 2 1 .4.4.7 1 .7 1.6 0 .6-.2 1.1-.5 1.5-.3.4-.8.7-1.3 1-.8.2-1.4.3-2.1.3zM0 113.3V99h1.7v14.3H0zm4.6 0v-10.2h1.6v1.5h.1c.3-.5.7-.9 1.3-1.3.6-.4 1.3-.5 2-.5 1.2 0 2.2.4 2.8 1.1.6.7 1 1.7 1 2.9v6.5h-1.7V107c0-1-.2-1.7-.7-2.1-.5-.4-1.1-.6-1.8-.6-.6 0-1.1.2-1.5.5-.4.3-.8.7-1 1.2-.2.5-.4 1-.4 1.6v5.7H4.6zm10-10.2h6v1.5h-6v-1.5zm1.8 7.5v-10.4h1.7v10c0 .5.1.9.3 1.2.2.3.6.4 1.1.4.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.5-.5-.7-1.2-.7-2.1zm10.3 3c-1 0-1.9-.2-2.6-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.6-1.7-.6-2.8 0-1 .2-1.9.6-2.7.4-.8 1-1.5 1.7-2s1.6-.8 2.6-.8 1.9.2 2.6.7c.7.4 1.3 1.1 1.7 1.8.4.8.6 1.7.6 2.7v.5h-8.8V107h7c0-.3-.1-.6-.2-.9-.1-.3-.3-.6-.5-.9-.2-.3-.6-.5-.9-.7-.4-.2-.8-.3-1.4-.3-.7 0-1.2.2-1.7.5s-.8.8-1.1 1.4c-.3.6-.4 1.2-.4 2 0 .9.2 1.6.5 2.2.3.6.8 1 1.3 1.3.5.3 1.1.4 1.7.4.8 0 1.4-.2 1.8-.5.5-.4.9-.8 1.2-1.3l1.4.7c-.4.8-1 1.4-1.7 1.9-1 .5-1.9.8-3 .8zm6.7-.3v-10.2H35v1.6h.1c.1-.4.4-.7.7-1 .3-.3.7-.5 1.1-.7.4-.2.8-.2 1.2-.2h.7c.2 0 .3.1.5.2v1.8c-.2-.1-.5-.2-.7-.2-.2-.1-.5-.1-.7-.1-.5 0-1 .1-1.4.4-.4.3-.7.7-1 1.1-.2.5-.4 1-.4 1.5v5.7h-1.7zm10.4.3c-.8 0-1.4-.1-2-.4-.6-.3-1-.7-1.3-1.2-.3-.5-.5-1.1-.5-1.8 0-.8.2-1.4.6-1.9.4-.5.9-.9 1.5-1.2.7-.3 1.4-.4 2.2-.4.4 0 .9 0 1.2.1.4.1.7.2 1 .3.3.1.5.2.7.3v-.6c0-.8-.3-1.4-.8-1.8-.5-.5-1.2-.7-2-.7-.6 0-1.1.1-1.6.4-.5.2-.9.6-1.1 1l-1.3-1c.3-.4.6-.7 1-1 .4-.3.9-.5 1.4-.7.5-.2 1.1-.2 1.6-.2 1.4 0 2.5.4 3.2 1.1.8.7 1.2 1.7 1.2 3v6.5h-1.6v-1.5h-.1c-.2.3-.4.6-.7.8-.3.3-.7.5-1.1.7-.5.1-1 .2-1.5.2zm.1-1.5c.6 0 1.1-.1 1.6-.4.5-.3.9-.7 1.2-1.2.3-.5.5-1 .5-1.6-.3-.2-.7-.4-1.2-.5-.5-.1-1-.2-1.5-.2-1 0-1.7.2-2.1.6-.4.4-.7.9-.7 1.5s.2 1 .6 1.4c.4.2 1 .4 1.6.4zm11.7 1.5c-1 0-1.9-.2-2.7-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.7-1.7-.7-2.8 0-1 .2-2 .7-2.8.4-.8 1.1-1.5 1.8-1.9.8-.5 1.7-.7 2.7-.7 1.1 0 2.1.3 2.8.8.7.5 1.3 1.2 1.6 2l-1.5.6c-.2-.6-.6-1.1-1.1-1.4-.5-.3-1.1-.5-1.8-.5-.6 0-1.2.2-1.7.5s-.9.8-1.2 1.4c-.3.6-.5 1.3-.5 2 0 .8.2 1.4.5 2 .3.6.7 1 1.2 1.4.5.3 1.1.5 1.7.5.7 0 1.3-.2 1.9-.5.5-.3.9-.8 1.2-1.4l1.5.6c-.3.8-.9 1.5-1.6 2-.9.5-1.8.8-3 .8zm5.5-10.5h6v1.5h-6v-1.5zm1.8 7.5v-10.4h1.7v10c0 .5.1.9.3 1.2.2.3.6.4 1.1.4.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.4-.5-.7-1.2-.7-2.1zm6.5 2.7v-10.2h1.7v10.2h-1.7zm.9-12.1c-.3 0-.6-.1-.9-.4-.2-.2-.4-.5-.4-.9 0-.3.1-.6.4-.9.2-.2.5-.4.9-.4.3 0 .6.1.9.4.2.2.4.5.4.9 0 .3-.1.6-.4.9-.3.3-.6.4-.9.4zm8.1 12.4c-1 0-1.9-.2-2.7-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.7-1.7-.7-2.8 0-1 .2-1.9.7-2.8.4-.8 1.1-1.5 1.8-2 .8-.5 1.7-.7 2.7-.7 1 0 1.9.2 2.7.7.8.5 1.4 1.1 1.9 2 .4.8.7 1.7.7 2.7 0 1-.2 1.9-.7 2.8-.4.8-1.1 1.5-1.9 1.9-.8.5-1.7.8-2.7.8zm0-1.6c.6 0 1.2-.2 1.7-.5s1-.8 1.3-1.3c.3-.6.5-1.3.5-2.1s-.2-1.5-.5-2.1c-.3-.6-.8-1-1.3-1.3-.5-.3-1.1-.5-1.7-.5-.6 0-1.2.2-1.7.5s-1 .7-1.3 1.3c-.3.6-.5 1.3-.5 2.1s.2 1.5.5 2.1c.3.6.8 1 1.3 1.3.5.4 1.1.5 1.7.5zm7 1.3v-10.2H87v1.5h.1c.3-.5.7-.9 1.3-1.3.6-.4 1.3-.5 2-.5 1.2 0 2.2.4 2.8 1.1.6.7 1 1.7 1 2.9v6.5h-1.7V107c0-1-.2-1.7-.7-2.1-.5-.4-1.1-.6-1.8-.6-.6 0-1.1.2-1.5.5-.4.3-.8.7-1 1.2-.2.5-.4 1-.4 1.6v5.7h-1.7zm15.1-10.2h6v1.5h-6v-1.5zm1.8 7.5v-10.4h1.7v10c0 .5.1.9.3 1.2.2.3.6.4 1.1.4.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.4-.5-.7-1.2-.7-2.1zm10.5 3c-1 0-1.9-.2-2.7-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.7-1.7-.7-2.8 0-1 .2-1.9.7-2.8.4-.8 1.1-1.5 1.8-2 .8-.5 1.7-.7 2.7-.7 1 0 1.9.2 2.7.7.8.5 1.4 1.1 1.9 2 .4.8.7 1.7.7 2.7 0 1-.2 1.9-.7 2.8-.4.8-1.1 1.5-1.9 1.9-.8.5-1.7.8-2.7.8zm0-1.6c.6 0 1.2-.2 1.7-.5s1-.8 1.3-1.3c.3-.6.5-1.3.5-2.1s-.2-1.5-.5-2.1c-.3-.6-.8-1-1.3-1.3-.5-.3-1.1-.5-1.7-.5-.6 0-1.2.2-1.7.5s-1 .7-1.3 1.3c-.3.6-.5 1.3-.5 2.1s.2 1.5.5 2.1c.3.6.8 1 1.3 1.3.5.4 1.1.5 1.7.5zm12.2 1.3V99h2.1l7.2 11.4h.1l-.1-2.8V99h1.7v14.3h-1.8l-7.5-11.9h-.1l.1 2.8v9.2H125zm18.2.3c-1 0-1.9-.2-2.6-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.6-1.7-.6-2.8 0-1 .2-1.9.6-2.7.4-.8 1-1.5 1.7-2s1.6-.8 2.6-.8 1.9.2 2.6.7c.7.4 1.3 1.1 1.7 1.8.4.8.6 1.7.6 2.7v.5h-8.8V107h7c0-.3-.1-.6-.2-.9-.1-.3-.3-.6-.5-.9-.2-.3-.6-.5-.9-.7-.4-.2-.8-.3-1.4-.3-.7 0-1.2.2-1.7.5s-.8.8-1.1 1.4c-.3.6-.4 1.2-.4 2 0 .9.2 1.6.5 2.2.3.6.8 1 1.3 1.3.5.3 1.1.4 1.7.4.8 0 1.4-.2 1.8-.5.5-.4.9-.8 1.2-1.3l1.4.7c-.4.8-1 1.4-1.7 1.9-1 .5-1.9.8-3 .8zm5.5-.3 4.1-5.9h.2l2.9-4.3h2l-4 5.6h-.1l-3.1 4.6h-2zm.1-10.2h1.9l3.2 4.5h.1l4 5.7h-2l-3-4.5h-.1l-4.1-5.7zm9.9 0h6v1.5h-6v-1.5zm1.8 7.5v-10.4h1.7v10c0 .5.1.9.3 1.2.2.3.6.4 1.1.4.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.4-.5-.7-1.2-.7-2.1zm11.2 2.7V99h4.8c.8 0 1.5.2 2.2.5.7.4 1.2.8 1.6 1.5.4.6.6 1.4.6 2.2 0 .8-.2 1.6-.6 2.2-.4.6-.9 1.1-1.6 1.5-.7.4-1.4.5-2.2.5h-3.9v-1.6h4c.6 0 1-.1 1.4-.4.4-.3.7-.6.9-1 .2-.4.3-.8.3-1.2 0-.4-.1-.8-.3-1.2-.2-.4-.5-.7-.9-1-.4-.3-.9-.4-1.4-.4h-3.2v12.7h-1.7zm14 .3c-.8 0-1.4-.1-2-.4-.6-.3-1-.7-1.3-1.2-.3-.5-.5-1.1-.5-1.8 0-.8.2-1.4.6-1.9.4-.5.9-.9 1.5-1.2.7-.3 1.4-.4 2.2-.4.4 0 .9 0 1.2.1.4.1.7.2 1 .3.3.1.5.2.7.3v-.6c0-.8-.3-1.4-.8-1.8-.5-.5-1.2-.7-2-.7-.6 0-1.1.1-1.6.4-.5.2-.9.6-1.1 1l-1.3-1c.3-.4.6-.7 1-1 .4-.3.9-.5 1.4-.7.5-.2 1.1-.2 1.6-.2 1.4 0 2.5.4 3.2 1.1.8.7 1.2 1.7 1.2 3v6.5h-1.6v-1.5h-.1c-.2.3-.4.6-.7.8-.3.3-.7.5-1.1.7-.5.1-.9.2-1.5.2zm.2-1.5c.6 0 1.1-.1 1.6-.4.5-.3.9-.7 1.2-1.2.3-.5.5-1 .5-1.6-.3-.2-.7-.4-1.2-.5-.5-.1-1-.2-1.5-.2-1 0-1.7.2-2.1.6-.4.4-.7.9-.7 1.5s.2 1 .6 1.4c.4.2 1 .4 1.6.4zm7.4 1.2v-10.2h1.7v10.2h-1.7zm.8-12.1c-.3 0-.6-.1-.9-.4-.2-.2-.4-.5-.4-.9 0-.3.1-.6.4-.9.2-.2.5-.4.9-.4.3 0 .6.1.9.4.2.2.4.5.4.9 0 .3-.1.6-.4.9-.3.3-.5.4-.9.4zm3.5 12.1v-10.2h1.6v1.5h.1c.3-.5.7-.9 1.3-1.3.6-.4 1.3-.5 2-.5 1.2 0 2.2.4 2.8 1.1.6.7 1 1.7 1 2.9v6.5h-1.7V107c0-1-.2-1.7-.7-2.1-.5-.4-1.1-.6-1.8-.6-.6 0-1.1.2-1.5.5-.4.3-.8.7-1 1.2-.2.5-.4 1-.4 1.6v5.7h-1.7zm10-10.2h6v1.5h-6v-1.5zm1.8 7.5v-10.4h1.7v10c0 .5.1.9.3 1.2.2.3.6.4 1.1.4.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.4-.5-.7-1.2-.7-2.1zM418.1 55.2c-1.8 0-3.3 1.5-3.3 3.3 0 1.5 1 2.7 2.3 3.1V83h2V61.6c1.3-.4 2.3-1.7 2.3-3.1 0-1.8-1.5-3.3-3.3-3.3zM546.5 58.6c0-1.8-1.5-3.3-3.3-3.3s-3.3 1.5-3.3 3.3c0 1.5 1 2.7 2.3 3.1v21.2h2V61.7c1.3-.4 2.3-1.6 2.3-3.1z"></path></svg>
  <figcaption>
    该图显示了良好和不良 INP 的阈值。
  </figcaption>
</figure>
<p>不要等到 2024 年 INP 成为核心 Web 关键才开始改进它。 您的网站很可能位于<a href="https://httparchive.org/reports/chrome-ux-report#cruxFastFid" rel="noopener">93%</a>在移动设备上具有良好 FID 性能的网站； 然而，您可能会惊讶地发现，只有<a href="https://httparchive.org/reports/chrome-ux-report#cruxFastInp" rel="noopener">65%</a>的网站在移动设备上具有良好的 INP。 INP 描绘了一幅更准确的响应能力图景，因此这些数字可以帮助我们更清楚地看到我们面前的改进空间。</p>
<p>要了解您的网站是否存在 INP 问题、如何解决这些问题以及所有 INP 问题，最好的起点是<a href="https://web.dev/optimize-inp/">INP优化指南</a>。 无论您是第一次学习响应能力还是性能专家，我们都添加了许多新指南，让每个人都能尽可能轻松地学习如何衡量和优化 INP。</p>
<p>INP 可能需要一些时间来学习，但这没关系。 为了帮助您专注于具有最大投资回报率的优化，今年早些时候我们发布了<a href="https://web.dev/top-cwv-2023/">一篇博文</a>将我们的指导提炼为改善核心网络生命力的最有效建议。 具体来说，我们写了三种同样适用于优化 FID 和 INP 的必备技术：避免或分解长任务、避免不必要的 JavaScript 以及避免大量渲染更新。 您可以了解有关这些以及许多其他 INP 优化技术的更多信息<a href="https://web.dev/optimize-inp/">我们的文档</a>。</p>
<h2 id="the-road-ahead">前方的路<a class="headline-link" href="https://web.dev/inp-cwv/#the-road-ahead">#</a></h2>
<p>响应能力的新标准已经设定，我们很高兴看到社区迎接挑战以提供更好的用户体验。 早期<a href="https://groups.google.com/g/web-vitals-feedback" rel="noopener">反馈</a>和<a href="https://web.dev/tags/case-study/">实例探究</a>一直充满希望，但我们知道，对于许多人来说，这可能是一条漫长而陌生的道路。 我们努力通过改进使这一旅程尽可能轻松<a href="https://github.com/w3c/longtasks/blob/main/loaf-explainer.md" rel="noopener">诊断</a>,<a href="https://web.dev/vitals-tools/">工具</a>， 和<a href="https://web.dev/optimize-inp/">文档</a>一路为开发者提供帮助。</p>
<p>请继续关注 INP 2024 年 3 月确切毕业日期的更新。尽管该指标不再是实验性的，但我们始终愿意接受反馈：<a href="mailto:web-vitals-feedback@googlegroups.com" rel="noopener">web-vitals-feedback@googlegroups.com</a>帮助我们整体改进 INP 和 Web Vitals 计划。</p>
<p><em>英雄形象来自<a href="https://unsplash.com/" rel="noopener">未飞溅</a>， 经过<a href="https://unsplash.com/@agebarros" rel="noopener">阿吉·巴罗斯</a>。</em></p>
<hr><p>Chrome's mission with the <a href="https://web.dev/vitals/">Web Vitals program</a> is to help developers focus on the metrics that are essential to great user experiences—the Core Web Vitals. One important aspect of the user experience that we've been focusing on is responsiveness, which is the ability of a web page to react quickly to user interactions.</p>
<p><a href="https://web.dev/fid/">First Input Delay (FID)</a> is the Core Web Vital metric that measures responsiveness, but as we've written in the past, there are <a href="https://web.dev/better-responsiveness-metric/">known limitations of FID</a>. This led us to explore and seek feedback on a (then) <a href="https://web.dev/responsiveness/">experimental metric</a> that addresses these limitations more effectively. In 2022, we announced <a href="https://web.dev/inp/">Interaction to Next Paint (INP)</a> as  that new metric, made it widely available in our tools, and started working with the community to test its efficacy.</p>
<p>After another year of testing and gathering feedback from the community, we're ready to take the training wheels off and announce that INP is no longer experimental. Furthermore, effective March 2024, we're also committed to promoting INP as the new Core Web Vital metric for responsiveness, replacing FID.</p>
<p>In this post, we'll cover more about the motivation behind the decision, exactly what's changing, and how to get started. For more on how this affects Google Search, refer to <a href="https://developers.google.com/search/blog/2023/05/introducing-inp" rel="noopener">their blog post</a>.</p>
<h2 id="a-better-responsiveness-metric">A better responsiveness metric <a class="headline-link" href="https://web.dev/inp-cwv/#a-better-responsiveness-metric">#</a></h2>
<p>FID was a huge step forward when we <a href="https://blog.chromium.org/2020/05/introducing-web-vitals-essential-metrics.html" rel="noopener">introduced</a> it as a Core Web Vital in 2020. It offered developers a new way to measure responsiveness <em>as real users experience it</em>, which has always been an important part of the Web Vitals program. Unlike similar metrics that only approximate page interactivity—like <a href="https://web.dev/tbt/">Total Blocking Time (TBT)</a> and <a href="https://web.dev/tti/">Time To Interactive (TTI)</a>—FID directly measures the user experience. Crucially, a page could have slow TBT or TTI and still be perceived as responsive, because of the way real users interact with the page.</p>
<p>While it did improve the way we measure responsiveness, FID wasn't without limitations. The name itself actually gives away two such limitations: "first input" and "delay".  FID only reports the responsiveness of the <em>first</em> time a user interacts with the page. Even though first impressions are important, the first interaction is not necessarily representative of <em>all</em> interactions throughout the life of a page. Further, FID only measures the <em>input delay</em> portion of the first interaction, which is the amount of time the browser had to wait (due to main thread busyness) before even beginning to handle the interaction.</p>
<p>Enter INP. Rather than only measuring the first interaction, INP takes <a href="https://web.dev/inp/#whats-in-an-interaction"><em>all</em> interactions</a> into account, reporting one of the slowest over the entire lifetime of the page. And, rather than only measuring the delay portion, INP measures the full duration from the start of the interaction, through the event handler, and until the browser is able to paint the next frame. Hence, Interaction to <em>Next Paint</em>. These implementation details make INP a much more comprehensive measure of user-perceived responsiveness than FID.</p>
<h2 id="evolving-inp">Evolving INP <a class="headline-link" href="https://web.dev/inp-cwv/#evolving-inp">#</a></h2>
<p>Starting today, INP is no longer experimental and will instead be considered a <a href="https://web.dev/vitals/#pending"><em>pending</em> Core Web Vital metric</a>. This is a new designation to indicate that INP has proven its readiness to replace FID—but we're not making the change just yet. To give the ecosystem time to adjust, INP will officially become a stable Core Web Vital metric in March 2024.</p>
<figure>
  <img alt="Graphic showing the timeline of INP phases, starting from when Chrome announced experimental support for INP in May 2022, to today in May 2023 when Chrome is announcing that INP is now a non-experimental, pending Core Web Vital metric, and finally to March 2024 when INP becomes a stable Core Web Vital metric, replacing FID." decoding="async" height="270" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
    Graphic showing the timeline of INP phases.
  </figcaption>
</figure>
<p>Across our tools, you'll start to see INP without the <code>experimental</code> prefix or icon. If you programmatically consume INP data from any of the following APIs, you'll need to update your code to switch over to the non-experimental INP field.</p>
<div class="table-wrapper scrollbar">
  <table>
    <thead>
      <tr>
        <th>Tool</th>
        <th>Deprecated field</th>
        <th>New field</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>CrUX API</td>
        <td><code>experimental_interaction_to_next_paint</code></td>
        <td><code>interaction_to_next_paint</code></td>
      </tr>
      <tr>
        <td>CrUX History API</td>
        <td><code>experimental_interaction_to_next_paint</code></td>
        <td><code>interaction_to_next_paint</code></td>
      </tr>
      <tr>
        <td>CrUX BigQuery</td>
        <td><code>experimental.interaction_to_next_paint</code></td>
        <td><code>interaction_to_next_paint</code></td>
      </tr>
      <tr>
        <td>PageSpeed Insights API</td>
        <td><code>experimental_interaction_to_next_paint</code></td>
        <td><code>interaction_to_next_paint</code></td>
      </tr>
      <tr>
        <td>Lighthouse report*</td>
        <td><code>experimental-interaction-to-next-paint</code></td>
        <td><code>interaction-to-next-paint</code></td>
      </tr>
    </tbody>
    <caption style="max-width: 60ch;">
      Map of APIs to their old and new INP field name.<br>
      * Lighthouse will stop using the experimental INP field in version 11.
    </caption>
  </table>
</div>
<p>To ease the transition and avoid breaking any downstream applications, these APIs will continue to serve the experimental INP field for another 90 days. API support for the experimental INP field will end on August 8, 2023.</p>
<p>Meanwhile, FID will remain a Core Web Vital until March 2024. At that time, INP will join <a href="https://web.dev/lcp/">Largest Contentful Paint (LCP)</a> and <a href="https://web.dev/cls/">Cumulative Layout Shift (CLS)</a> as the three stable Core Web Vitals. In a future update, we'll share more information about the precise timing of the change and the plan for FID after it's replaced as a Core Web Vital.</p>
<h2 id="getting-started-with-inp">Getting started with INP <a class="headline-link" href="https://web.dev/inp-cwv/#getting-started-with-inp">#</a></h2>
<style>
  .inp-mobile {
    display: inline;
  }

  .inp-desktop {
    display: none;
  }

  @media screen and (min-width: 640px) {
    .inp-mobile {
      display: none;
    }

    .inp-desktop {
      display: inline;
    }
  }
</style>
<figure>
  <svg title="A diagram of the INP thresholds. An INP at or below 200 milliseconds is considered good. Between 200 and 500 milliseconds suggests a page's responsiveness needs improvement. Anything over 500 milliseconds means that a page's responsiveness is poor." class="inp-mobile" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0" y="0" viewBox="0 0 296.6 220.2" style="enable-background:new 0 0 296.6 220.2" xml:space="preserve"><style>.st0{fill:#2979FF} .st1{fill-rule:evenodd;clip-rule:evenodd;fill:#0CCE6B} .st2{fill:#191919} .st3{fill-rule:evenodd;clip-rule:evenodd;fill:#FFA400} .st4{fill-rule:evenodd;clip-rule:evenodd;fill:#FF4E42} @media screen and (prefers-color-scheme: light){.st2{fill:#191919}} [data-user-theme=light] .st2 {fill:#191919} @media screen and (prefers-color-scheme: dark){.st2{fill:#fff}} [data-user-theme=dark] .st2{fill:#fff}</style><path class="st0" d="M83.3 63V0h11.9v63H83.3zm26.3 0V0h13.8l25.3 42.2h.7l-.7-12.1V0h11.8v63H148l-26.8-44.6h-.7l.7 12.1V63h-11.6zm65.4 0V0h22.2c4.1 0 7.7.8 10.9 2.5s5.8 4 7.7 7 2.9 6.4 2.9 10.4c0 3.9-1 7.4-2.9 10.4s-4.5 5.4-7.7 7c-3.2 1.7-6.9 2.5-10.9 2.5h-15.6V28.6h15.9c2.1 0 3.8-.4 5.2-1.2s2.5-1.9 3.2-3.2c.7-1.3 1.1-2.8 1.1-4.3s-.4-2.9-1.1-4.2c-.7-1.3-1.8-2.3-3.2-3.2s-3.1-1.2-5.2-1.2h-10.7V63H175z"></path><path class="st1" d="M0 137.1h96v38.4H0v-38.4z"></path><path class="st2" d="M34 161c-.6 0-1.2-.1-1.8-.3-.5-.2-1-.5-1.4-.9-.4-.4-.7-.9-1-1.4-.2-.6-.3-1.1-.3-1.8 0-.6.1-1.2.3-1.8.2-.6.6-1 1-1.4.4-.4.9-.7 1.4-.9.5-.2 1.1-.3 1.8-.3s1.3.1 1.8.3c.6.2 1 .6 1.4 1l-.9.9c-.2-.2-.4-.4-.6-.5-.2-.1-.5-.3-.8-.3-.3-.1-.6-.1-.9-.1-.4 0-.8.1-1.2.2-.4.1-.7.4-1 .6-.3.3-.5.6-.7 1-.2.4-.2.8-.2 1.3s.1.9.2 1.3c.2.4.4.7.7 1 .3.3.6.5 1 .7.4.1.8.2 1.2.2.4 0 .8-.1 1.1-.2.3-.1.6-.3.9-.5.3-.2.5-.5.6-.8.2-.3.3-.6.3-1H34v-1.2h4.2v.7c0 .6-.1 1.2-.3 1.7-.2.5-.5.9-.9 1.3s-.8.6-1.3.8c-.5.3-1.1.4-1.7.4zm9.5 0c-.6 0-1.2-.1-1.8-.3-.5-.2-1-.5-1.4-1-.4-.4-.7-.9-.9-1.4-.2-.5-.3-1.1-.3-1.8 0-.6.1-1.2.3-1.8.2-.5.5-1 .9-1.4.4-.4.9-.7 1.4-1 .5-.2 1.1-.3 1.8-.3.6 0 1.2.1 1.8.3.5.2 1 .6 1.4 1 .4.4.7.9.9 1.4.2.5.3 1.1.3 1.8 0 .6-.1 1.2-.3 1.8-.2.5-.5 1-.9 1.4-.4.4-.9.7-1.4 1-.5.2-1.1.3-1.8.3zm0-1.2c.6 0 1.1-.1 1.6-.4.5-.3.8-.7 1.1-1.1.3-.5.4-1.1.4-1.7 0-.6-.1-1.2-.4-1.7-.3-.5-.7-.9-1.1-1.1-.5-.3-1-.4-1.6-.4-.6 0-1.1.1-1.6.4-.5.3-.8.7-1.1 1.1-.3.5-.4 1-.4 1.7 0 .6.1 1.2.4 1.7.3.5.7.9 1.1 1.1.5.3 1 .4 1.6.4zm9.9 1.2c-.6 0-1.2-.1-1.8-.3-.5-.2-1-.5-1.4-1-.4-.4-.7-.9-.9-1.4-.2-.5-.3-1.1-.3-1.8 0-.6.1-1.2.3-1.8.2-.5.5-1 .9-1.4.4-.4.9-.7 1.4-1 .5-.2 1.1-.3 1.8-.3.6 0 1.2.1 1.8.3.5.2 1 .6 1.4 1 .4.4.7.9.9 1.4.2.5.3 1.1.3 1.8 0 .6-.1 1.2-.3 1.8-.2.5-.5 1-.9 1.4-.4.4-.9.7-1.4 1-.6.2-1.2.3-1.8.3zm0-1.2c.6 0 1.1-.1 1.6-.4.5-.3.8-.7 1.1-1.1.3-.5.4-1.1.4-1.7 0-.6-.1-1.2-.4-1.7-.3-.5-.7-.9-1.1-1.1-.5-.3-1-.4-1.6-.4-.6 0-1.1.1-1.6.4-.5.3-.8.7-1.1 1.1-.3.5-.4 1-.4 1.7 0 .6.1 1.2.4 1.7.3.5.7.9 1.1 1.1.5.3 1 .4 1.6.4zm6 1.1v-8.6h2.8c.9 0 1.7.2 2.3.5.7.4 1.2.9 1.5 1.5.4.6.5 1.4.5 2.2 0 .8-.2 1.6-.5 2.2-.4.6-.9 1.2-1.5 1.5-.6.4-1.4.5-2.3.5h-2.8zm1.3-1.3h1.4c.6 0 1.2-.1 1.7-.4.5-.3.8-.6 1.1-1 .2-.5.4-1 .4-1.6 0-.6-.1-1.2-.4-1.6-.2-.5-.6-.8-1.1-1-.5-.3-1-.4-1.7-.4h-1.4v6z"></path><path class="st3" d="M96 137.1h105.6v38.4H96v-38.4z"></path><path class="st2" d="M130.8 153.9v-8.6h1.6l3.9 6.3h.1l-.1-1.7v-4.7h1.3v8.6h-1.4l-4.1-6.6h-.1l.1 1.7v5h-1.3zm8.7 0v-8.6h5.2v1.2h-3.9v6.1h3.9v1.2h-5.2zm.7-3.7V149h4.1v1.2h-4.1zm6.2 3.7v-8.6h5.2v1.2h-3.9v6.1h3.9v1.2h-5.2zm.7-3.7V149h4.1v1.2h-4.1zm6.1 3.7v-8.6h2.8c.9 0 1.7.2 2.3.5.7.4 1.2.9 1.5 1.5.4.6.5 1.4.5 2.2s-.2 1.6-.5 2.2c-.4.6-.9 1.2-1.5 1.5-.6.4-1.4.5-2.3.5h-2.8zm1.3-1.3h1.4c.6 0 1.2-.1 1.7-.4.5-.2.8-.6 1.1-1 .2-.5.4-1 .4-1.6 0-.6-.1-1.2-.4-1.6-.2-.5-.6-.8-1.1-1-.5-.2-1-.4-1.7-.4h-1.4v6zm9.9 1.4c-.5 0-.9-.1-1.3-.3-.4-.2-.8-.4-1.1-.8-.3-.4-.5-.8-.7-1.3l1.2-.5c.1.5.3.9.7 1.2.3.3.7.5 1.2.5.3 0 .5 0 .8-.1.2-.1.4-.2.6-.4s.2-.4.2-.7c0-.3-.1-.5-.2-.7-.1-.2-.3-.3-.6-.5s-.6-.3-1-.5l-.5-.2c-.2-.1-.5-.2-.7-.3-.2-.1-.5-.3-.7-.5-.2-.2-.4-.4-.5-.7-.1-.3-.2-.6-.2-.9 0-.4.1-.8.3-1.2.2-.4.5-.6.9-.8.4-.2.9-.3 1.4-.3.6 0 1 .1 1.4.3.4.2.7.4.9.7.2.3.4.5.4.8l-1.2.5c0-.2-.1-.3-.2-.5s-.3-.3-.5-.4c-.2-.1-.4-.2-.8-.2-.2 0-.5.1-.7.2-.2.1-.4.2-.5.4-.1.2-.2.3-.2.6s.1.6.4.8c.3.2.6.4 1.1.5l.6.2c.3.1.6.2.8.3.3.1.5.3.7.5.2.2.4.4.5.7.1.3.2.6.2 1s-.1.8-.3 1.2c-.2.3-.4.6-.7.8-.3.2-.6.3-.9.4s-.5.2-.8.2zM107 167.9v-8.6h1.3v8.6H107zm3.2 0v-8.6h1.8l2.5 6.5h.1l2.5-6.5h1.8v8.6h-1.3V163l.1-1.5h-.1l-2.5 6.4h-1l-2.5-6.4h-.1l.1 1.5v4.9h-1.4zm10.6 0v-8.6h3c.5 0 1 .1 1.4.3.4.2.8.5 1 .9.3.4.4.9.4 1.4 0 .5-.1 1-.4 1.4-.2.4-.6.7-1 .9-.4.2-.9.3-1.4.3h-2.2v-1.2h2.3c.3 0 .6-.1.8-.2.2-.1.4-.3.5-.5.1-.2.2-.4.2-.7 0-.2-.1-.4-.2-.7-.1-.2-.3-.4-.5-.5-.2-.1-.5-.2-.8-.2h-1.7v7.3h-1.4zm7.2 0v-8.6h3c.5 0 1 .1 1.4.3.4.2.7.5 1 .9.2.4.4.8.4 1.4 0 .3-.1.7-.2 1s-.3.6-.6.8c-.3.2-.6.4-1 .6-.4.1-.8.2-1.2.2h-2.1v-1.2h2.3c.3 0 .5-.1.7-.2.2-.1.4-.3.5-.5.1-.2.2-.5.2-.7 0-.2-.1-.5-.2-.7-.1-.2-.3-.4-.5-.5-.2-.1-.5-.2-.8-.2h-1.7v7.4H128zm2-4h1.5l2.7 3.9v.1h-1.5l-2.7-4zm9.3 4.1c-.6 0-1.2-.1-1.8-.3-.5-.2-1-.5-1.4-1-.4-.4-.7-.9-.9-1.4-.2-.5-.3-1.1-.3-1.8s.1-1.2.3-1.8c.2-.5.5-1 .9-1.4.4-.4.9-.7 1.4-1 .5-.2 1.1-.3 1.8-.3.6 0 1.2.1 1.8.3.5.2 1 .6 1.4 1 .4.4.7.9.9 1.4.2.5.3 1.1.3 1.8s-.1 1.2-.3 1.8c-.2.5-.5 1-.9 1.4-.4.4-.9.7-1.4 1-.6.2-1.2.3-1.8.3zm0-1.2c.6 0 1.1-.1 1.6-.4.5-.3.8-.7 1.1-1.1.3-.5.4-1.1.4-1.7 0-.6-.1-1.2-.4-1.7-.3-.5-.7-.9-1.1-1.1-.5-.3-1-.4-1.6-.4-.6 0-1.1.1-1.6.4-.5.3-.8.7-1.1 1.1-.3.5-.4 1-.4 1.7 0 .6.1 1.2.4 1.7.3.5.7.9 1.1 1.1.5.3 1 .4 1.6.4zm7.9 1.1-3-8.6h1.4l1.9 5.7.3 1h.1l.3-1 2-5.7h1.4l-3.1 8.6h-1.3zm5.6 0v-8.6h5.2v1.2h-3.9v6.1h3.9v1.2h-5.2zm.7-3.7V163h4.1v1.2h-4.1zm6.2 3.7v-8.6h1.8l2.5 6.5h.1l2.5-6.5h1.8v8.6H167V163l.1-1.5h-.1l-2.5 6.4h-1l-2.5-6.4h-.1l.1 1.5v4.9h-1.3zm10.6 0v-8.6h5.2v1.2h-3.9v6.1h3.9v1.2h-5.2zm.7-3.7V163h4.1v1.2H171zm6.1 3.7v-8.6h1.6l3.9 6.3h.1l-.1-1.7v-4.7h1.3v8.6h-1.4l-4.1-6.6h-.1l.1 1.7v5h-1.3zm10.5 0V160h1.3v7.9h-1.3zm-2.4-7.4v-1.2h6.1v1.2h-6.1z"></path><path class="st4" d="M200.6 137.1h96v38.4h-96v-38.4z"></path><path class="st2" d="M232.5 160.9v-8.6h3c.5 0 1 .1 1.4.3.4.2.8.5 1 .9.3.4.4.9.4 1.4 0 .5-.1 1-.4 1.4-.2.4-.6.7-1 .9-.4.2-.9.3-1.4.3h-2.2v-1.2h2.3c.3 0 .6-.1.8-.2.2-.1.4-.3.5-.5.1-.2.2-.4.2-.7 0-.2-.1-.4-.2-.7-.1-.2-.3-.4-.5-.5-.2-.1-.5-.2-.8-.2h-1.7v7.3h-1.4zm11 .1c-.6 0-1.2-.1-1.8-.3-.5-.2-1-.5-1.4-1-.4-.4-.7-.9-.9-1.4-.2-.5-.3-1.1-.3-1.8s.1-1.2.3-1.8c.2-.5.5-1 .9-1.4.4-.4.9-.7 1.4-1 .5-.2 1.1-.3 1.8-.3.6 0 1.2.1 1.8.3.5.2 1 .6 1.4 1 .4.4.7.9.9 1.4.2.5.3 1.1.3 1.8s-.1 1.2-.3 1.8c-.2.5-.5 1-.9 1.4-.4.4-.9.7-1.4 1-.5.2-1.1.3-1.8.3zm0-1.2c.6 0 1.1-.1 1.6-.4.5-.3.8-.7 1.1-1.1.3-.5.4-1.1.4-1.7 0-.6-.1-1.2-.4-1.7-.3-.5-.7-.9-1.1-1.1-.5-.3-1-.4-1.6-.4-.6 0-1.1.1-1.6.4-.5.3-.8.7-1.1 1.1-.3.5-.4 1-.4 1.7 0 .6.1 1.2.4 1.7.3.5.7.9 1.1 1.1.6.3 1.1.4 1.6.4zm9.9 1.2c-.6 0-1.2-.1-1.8-.3-.5-.2-1-.5-1.4-1-.4-.4-.7-.9-.9-1.4-.2-.5-.3-1.1-.3-1.8s.1-1.2.3-1.8c.2-.5.5-1 .9-1.4.4-.4.9-.7 1.4-1 .5-.2 1.1-.3 1.8-.3.6 0 1.2.1 1.8.3.5.2 1 .6 1.4 1 .4.4.7.9.9 1.4.2.5.3 1.1.3 1.8s-.1 1.2-.3 1.8c-.2.5-.5 1-.9 1.4-.4.4-.9.7-1.4 1-.6.2-1.1.3-1.8.3zm0-1.2c.6 0 1.1-.1 1.6-.4.5-.3.8-.7 1.1-1.1.3-.5.4-1.1.4-1.7 0-.6-.1-1.2-.4-1.7-.3-.5-.7-.9-1.1-1.1-.5-.3-1-.4-1.6-.4-.6 0-1.1.1-1.6.4-.5.3-.8.7-1.1 1.1-.3.5-.4 1-.4 1.7 0 .6.1 1.2.4 1.7.3.5.7.9 1.1 1.1.5.3 1 .4 1.6.4zm6 1.1v-8.6h3c.5 0 1 .1 1.4.3.4.2.7.5 1 .9.2.4.4.8.4 1.4 0 .3-.1.7-.2 1s-.3.6-.6.8c-.3.2-.6.4-1 .6-.4.1-.8.2-1.2.2h-2.1v-1.2h2.3c.3 0 .5-.1.7-.2.2-.1.4-.3.5-.5.1-.2.2-.5.2-.7 0-.2-.1-.5-.2-.7-.1-.2-.3-.4-.5-.5-.2-.1-.5-.2-.8-.2h-1.7v7.4h-1.2zm2-4h1.5l2.7 3.9v.1H264l-2.6-4zM178.1 219.9c-.5 0-1-.1-1.5-.3-.5-.2-1-.5-1.4-1-.4-.4-.7-1-.8-1.7l1.5-.6c.1.6.4 1 .8 1.4.4.4.9.5 1.4.5.6 0 1.1-.2 1.5-.6.4-.4.6-.9.6-1.5s-.2-1.1-.6-1.5c-.4-.4-.9-.6-1.5-.6-.4 0-.7.1-1 .2-.3.1-.5.4-.7.6l-1.7-.8.7-5.5h5.9v1.6h-4.5l-.4 2.9h.1c.2-.2.5-.3.8-.5.3-.1.7-.2 1.2-.2.6 0 1.2.2 1.7.5s1 .7 1.3 1.3c.3.5.5 1.2.5 1.9s-.2 1.3-.5 1.9c-.3.6-.8 1-1.3 1.3-.7.5-1.4.7-2.1.7zm9.9 0c-.7 0-1.3-.1-1.9-.4-.5-.3-1-.7-1.4-1.2-.4-.5-.7-1.1-.9-1.8-.2-.7-.3-1.4-.3-2.2 0-.8.1-1.6.3-2.2.2-.7.5-1.3.9-1.8s.9-.9 1.4-1.2c.6-.3 1.2-.5 1.9-.5s1.3.2 1.9.5c.6.3 1 .7 1.4 1.2.4.5.7 1.1.9 1.8.2.7.3 1.4.3 2.2 0 .8-.1 1.6-.3 2.2-.2.7-.5 1.3-.9 1.8s-.9.9-1.4 1.2c-.6.2-1.2.4-1.9.4zm.1-1.7c.6 0 1-.2 1.5-.5.4-.4.7-.9 1-1.5.2-.6.3-1.3.3-2.1s-.1-1.5-.3-2.1c-.2-.6-.5-1.1-1-1.5-.4-.4-.9-.5-1.5-.5s-1.1.2-1.5.5c-.4.4-.7.8-.9 1.5-.2.6-.3 1.3-.3 2.1s.1 1.5.3 2.1c.2.6.5 1.1.9 1.5.4.3.9.5 1.5.5zm10.5 1.7c-.7 0-1.3-.1-1.9-.4-.5-.3-1-.7-1.4-1.2-.4-.5-.7-1.1-.9-1.8-.2-.7-.3-1.4-.3-2.2 0-.8.1-1.6.3-2.2.2-.7.5-1.3.9-1.8s.9-.9 1.4-1.2c.6-.3 1.2-.5 1.9-.5s1.3.2 1.9.5c.6.3 1 .7 1.4 1.2.4.5.7 1.1.9 1.8.2.7.3 1.4.3 2.2 0 .8-.1 1.6-.3 2.2-.2.7-.5 1.3-.9 1.8s-.9.9-1.4 1.2c-.6.2-1.2.4-1.9.4zm0-1.7c.6 0 1-.2 1.5-.5.4-.4.7-.9 1-1.5.2-.6.3-1.3.3-2.1s-.1-1.5-.3-2.1c-.2-.6-.5-1.1-1-1.5-.4-.4-.9-.5-1.5-.5s-1.1.2-1.5.5c-.4.4-.7.8-.9 1.5-.2.6-.3 1.3-.3 2.1s.1 1.5.3 2.1c.2.6.5 1.1.9 1.5.4.3.9.5 1.5.5zm10 1.4v-8.2h1.6v1.1h.1c.2-.3.4-.5.6-.7.3-.2.6-.4.9-.5.3-.1.7-.2 1-.2.6 0 1.1.1 1.5.4.4.3.7.7.9 1.1.3-.4.6-.8 1.1-1.1.5-.3 1-.5 1.7-.5 1 0 1.7.3 2.1.9.5.6.7 1.4.7 2.3v5.2h-1.7v-4.9c0-.7-.1-1.1-.4-1.4-.3-.3-.7-.5-1.2-.5-.4 0-.7.1-1 .3-.3.2-.5.5-.7.9-.2.4-.2.8-.2 1.2v4.4h-1.7v-4.9c0-.7-.1-1.1-.4-1.4-.3-.3-.7-.5-1.2-.5-.4 0-.7.1-1 .3-.3.2-.5.5-.7.9-.2.4-.2.8-.2 1.2v4.4h-1.8zm17.2.3c-.6 0-1.2-.1-1.7-.3-.5-.2-.9-.5-1.2-.8-.3-.3-.5-.7-.7-1.1l1.5-.7c.2.4.5.8.8 1 .4.2.8.3 1.2.3.4 0 .8-.1 1.1-.2.3-.2.5-.4.5-.8 0-.2-.1-.4-.2-.6-.1-.1-.3-.3-.6-.4-.2-.1-.5-.2-.8-.2l-1-.2c-.4-.1-.8-.3-1.1-.5-.3-.2-.6-.5-.8-.8-.2-.3-.3-.7-.3-1.1 0-.5.1-.9.4-1.3.3-.4.7-.6 1.1-.8.5-.2 1-.3 1.6-.3.5 0 1 .1 1.4.2.4.1.8.3 1.1.6.3.3.6.6.8 1l-1.5.7c-.2-.4-.4-.6-.7-.8-.3-.1-.6-.2-1-.2s-.7.1-1 .2c-.3.2-.4.4-.4.6 0 .3.1.5.4.7.2.2.5.3.9.4l1.2.3c.8.2 1.4.5 1.8.9.4.4.6.9.6 1.5 0 .5-.2 1-.5 1.4-.3.4-.7.7-1.2.9-.6.2-1.1.4-1.7.4zM69 220v-1.6s.2-.1.4-.4c.2-.2.5-.5.8-.9l1.1-1.1 1-1c.3-.3.5-.6.7-.8.3-.3.5-.6.7-.8.2-.2.3-.5.4-.7.1-.2.1-.5.1-.8 0-.3-.1-.5-.2-.8-.1-.3-.3-.4-.6-.6-.3-.1-.6-.2-1-.2s-.7.1-1 .2c-.3.1-.5.3-.6.6-.1.2-.3.4-.3.7l-1.5-.6c.1-.3.2-.5.4-.8.2-.3.4-.5.7-.8.3-.3.6-.5 1-.6.4-.2.9-.3 1.4-.2.7 0 1.3.2 1.9.5.5.3.9.7 1.2 1.2.3.5.4 1 .4 1.6 0 .5-.1.9-.2 1.3-.2.4-.4.8-.7 1.2-.3.4-.5.7-.8 1l-.5.5c-.2.2-.4.5-.7.7l-.7.7-.6.6-.4.4h4.8v1.6H69zm13.2.2c-.7 0-1.3-.1-1.9-.4-.5-.3-1-.7-1.4-1.2-.4-.5-.7-1.1-.9-1.8-.2-.7-.3-1.4-.3-2.2 0-.8.1-1.6.3-2.2.2-.7.5-1.3.9-1.8s.9-.9 1.4-1.2c.6-.3 1.2-.5 1.9-.5s1.3.2 1.9.5c.6.3 1 .7 1.4 1.2.4.5.7 1.1.9 1.8.2.7.3 1.4.3 2.2 0 .8-.1 1.6-.3 2.2-.2.7-.5 1.3-.9 1.8s-.9.9-1.4 1.2c-.6.3-1.2.4-1.9.4zm0-1.6c.6 0 1-.2 1.5-.5.4-.4.7-.9 1-1.5.2-.6.3-1.3.3-2.1s-.1-1.5-.3-2.1c-.2-.6-.5-1.1-1-1.5-.4-.4-.9-.5-1.5-.5s-1.1.2-1.5.5c-.4.4-.7.8-.9 1.5-.2.6-.3 1.3-.3 2.1s.1 1.5.3 2.1c.2.6.5 1.1.9 1.5.4.3.9.5 1.5.5zm10.5 1.6c-.7 0-1.3-.1-1.9-.4-.5-.3-1-.7-1.4-1.2-.4-.5-.7-1.1-.9-1.8-.2-.7-.3-1.4-.3-2.2 0-.8.1-1.6.3-2.2.2-.7.5-1.3.9-1.8s.9-.9 1.4-1.2c.6-.3 1.2-.5 1.9-.5s1.3.2 1.9.5c.6.3 1 .7 1.4 1.2.4.5.7 1.1.9 1.8.2.7.3 1.4.3 2.2 0 .8-.1 1.6-.3 2.2-.2.7-.5 1.3-.9 1.8s-.9.9-1.4 1.2c-.6.3-1.2.4-1.9.4zm0-1.6c.6 0 1-.2 1.5-.5.4-.4.7-.9 1-1.5.2-.6.3-1.3.3-2.1s-.1-1.5-.3-2.1c-.2-.6-.5-1.1-1-1.5-.4-.4-.9-.5-1.5-.5s-1.1.2-1.5.5c-.4.4-.7.8-.9 1.5-.2.6-.3 1.3-.3 2.1s.1 1.5.3 2.1c.2.6.5 1.1.9 1.5.5.3 1 .5 1.5.5zm10 1.4v-8.2h1.6v1.1h.1c.2-.3.4-.5.6-.7.3-.2.6-.4.9-.5.3-.1.7-.2 1-.2.6 0 1.1.1 1.5.4.4.3.7.7.9 1.1.3-.4.6-.8 1.1-1.1.5-.3 1-.5 1.7-.5 1 0 1.7.3 2.1.9.5.6.7 1.4.7 2.3v5.2h-1.7v-4.9c0-.7-.1-1.1-.4-1.4-.3-.3-.7-.5-1.2-.5-.4 0-.7.1-1 .3-.3.2-.5.5-.7.9-.2.4-.2.8-.2 1.2v4.4H108v-4.9c0-.7-.1-1.1-.4-1.4-.3-.3-.7-.5-1.2-.5-.4 0-.7.1-1 .3-.3.2-.5.5-.7.9-.2.4-.2.8-.2 1.2v4.4h-1.8zm17.2.2c-.6 0-1.2-.1-1.7-.3-.5-.2-.9-.5-1.2-.8-.3-.3-.5-.7-.7-1.1l1.5-.7c.2.4.5.8.8 1 .4.2.8.3 1.2.3.4 0 .8-.1 1.1-.2.3-.2.5-.4.5-.8 0-.2-.1-.4-.2-.6-.1-.1-.3-.3-.6-.4-.2-.1-.5-.2-.8-.2l-1-.2c-.4-.1-.8-.3-1.1-.5-.3-.2-.6-.5-.8-.8-.2-.3-.3-.7-.3-1.1 0-.5.1-.9.4-1.3.3-.4.7-.6 1.1-.8.5-.2 1-.3 1.6-.3.5 0 1 .1 1.4.2.4.1.8.3 1.1.6.3.3.6.6.8 1l-1.5.7c-.2-.4-.4-.6-.7-.8-.3-.1-.6-.2-1-.2s-.7.1-1 .2c-.3.2-.4.4-.4.6 0 .3.1.5.4.7.2.2.5.3.9.4l1.2.3c.8.2 1.4.5 1.8.9.4.4.6.9.6 1.5 0 .5-.2 1-.5 1.4-.3.4-.7.7-1.2.9-.5.3-1.1.4-1.7.4zM42.4 96.3V82h1.7v14.3h-1.7zm4.6 0V86.1h1.6v1.5h.1c.3-.5.7-.9 1.3-1.3.6-.4 1.3-.5 2-.5 1.2 0 2.2.4 2.8 1.1.6.7 1 1.7 1 2.9v6.5h-1.7V90c0-1-.2-1.7-.7-2.1-.5-.4-1.1-.6-1.8-.6-.6 0-1.1.2-1.5.5-.4.3-.8.7-1 1.2-.2.5-.4 1-.4 1.6v5.7H47zm10-10.2h6v1.5h-6v-1.5zm1.8 7.5V83.3h1.7v10c0 .5.1.9.3 1.2s.6.4 1.1.4c.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.5-.6-.7-1.3-.7-2.2zm10.3 3c-1 0-1.9-.2-2.6-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.6-1.7-.6-2.8 0-1 .2-1.9.6-2.7s1-1.5 1.7-2 1.6-.8 2.6-.8 1.9.2 2.6.7c.7.4 1.3 1.1 1.7 1.8.4.8.6 1.7.6 2.7v.5H65V90h7c0-.3-.1-.6-.2-.9-.1-.3-.3-.6-.5-.9-.2-.3-.6-.5-.9-.7-.4-.2-.8-.3-1.4-.3-.7 0-1.2.2-1.7.5s-.8.8-1.1 1.4c-.3.6-.4 1.2-.4 2 0 .9.2 1.6.5 2.2.3.6.8 1 1.3 1.3.5.3 1.1.4 1.7.4.8 0 1.4-.2 1.8-.5.5-.4.9-.8 1.2-1.3l1.4.7c-.4.8-1 1.4-1.7 1.9-.9.6-1.8.8-2.9.8zm6.7-.3V86.1h1.6v1.6h.1c.1-.4.4-.7.7-1 .3-.3.7-.5 1.1-.7s.8-.2 1.2-.2h.7c.2 0 .3.1.5.2v1.8c-.2-.1-.5-.2-.7-.2-.2-.1-.5-.1-.7-.1-.5 0-1 .1-1.4.4-.4.3-.7.7-1 1.1-.2.5-.4 1-.4 1.5v5.7h-1.7zm10.4.3c-.8 0-1.4-.1-2-.4s-1-.7-1.3-1.2c-.3-.5-.5-1.1-.5-1.8 0-.8.2-1.4.6-1.9.4-.5.9-.9 1.5-1.2.7-.3 1.4-.4 2.2-.4.4 0 .9 0 1.2.1s.7.2 1 .3c.3.1.5.2.7.3v-.6c0-.8-.3-1.4-.8-1.8-.5-.5-1.2-.7-2-.7-.6 0-1.1.1-1.6.4-.5.2-.9.6-1.1 1l-1.3-1c.3-.4.6-.7 1-1 .4-.3.9-.5 1.4-.7.5-.2 1.1-.2 1.6-.2 1.4 0 2.5.4 3.2 1.1.8.7 1.2 1.7 1.2 3v6.5h-1.6v-1.5h-.1c-.2.3-.4.6-.7.8s-.7.5-1.1.7c-.5.2-1 .2-1.5.2zm.1-1.5c.6 0 1.1-.1 1.6-.4.5-.3.9-.7 1.2-1.2.3-.5.5-1 .5-1.6-.3-.2-.7-.4-1.2-.5s-1-.2-1.5-.2c-1 0-1.7.2-2.1.6-.4.4-.7.9-.7 1.5s.2 1 .6 1.4 1 .4 1.6.4zm11.8 1.5c-1 0-1.9-.2-2.7-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.7-1.7-.7-2.8 0-1 .2-2 .7-2.8.4-.8 1.1-1.5 1.8-1.9.8-.5 1.7-.7 2.7-.7 1.1 0 2.1.3 2.8.8.7.5 1.3 1.2 1.6 2l-1.5.6c-.2-.6-.6-1.1-1.1-1.4-.5-.3-1.1-.5-1.8-.5-.6 0-1.2.2-1.7.5s-.9.8-1.2 1.4c-.3.6-.5 1.3-.5 2 0 .8.2 1.4.5 2 .3.6.7 1 1.2 1.4.5.3 1.1.5 1.7.5.7 0 1.3-.2 1.9-.5s.9-.8 1.2-1.4l1.5.6c-.3.8-.9 1.5-1.6 2s-1.9.8-3 .8zm5.5-10.5h6v1.5h-6v-1.5zm1.7 7.5V83.3h1.7v10c0 .5.1.9.3 1.2s.6.4 1.1.4c.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8s-.7-1.3-.7-2.2zm6.5 2.7V86.1h1.7v10.2h-1.7zm.9-12c-.3 0-.6-.1-.9-.4s-.4-.5-.4-.9c0-.3.1-.6.4-.9.2-.2.5-.4.9-.4.3 0 .6.1.9.4.2.2.4.5.4.9 0 .3-.1.6-.4.9-.3.2-.6.4-.9.4zm8.1 12.3c-1 0-1.9-.2-2.7-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.7-1.7-.7-2.8 0-1 .2-1.9.7-2.8.4-.8 1.1-1.5 1.8-2 .8-.5 1.7-.7 2.7-.7 1 0 1.9.2 2.7.7.8.5 1.4 1.1 1.9 2s.7 1.7.7 2.7c0 1-.2 1.9-.7 2.8-.4.8-1.1 1.5-1.9 1.9-.8.6-1.7.8-2.7.8zm0-1.5c.6 0 1.2-.2 1.7-.5s1-.8 1.3-1.3c.3-.6.5-1.3.5-2.1s-.2-1.5-.5-2.1-.8-1-1.3-1.3c-.5-.3-1.1-.5-1.7-.5-.6 0-1.2.2-1.7.5s-1 .7-1.3 1.3-.5 1.3-.5 2.1.2 1.5.5 2.1c.3.6.8 1 1.3 1.3.5.4 1.1.5 1.7.5zm7 1.2V86.1h1.6v1.5h.1c.3-.5.7-.9 1.3-1.3.6-.4 1.3-.5 2-.5 1.2 0 2.2.4 2.8 1.1.6.7 1 1.7 1 2.9v6.5h-1.7V90c0-1-.2-1.7-.7-2.1-.5-.4-1.1-.6-1.8-.6-.6 0-1.1.2-1.5.5-.4.3-.8.7-1 1.2-.2.5-.4 1-.4 1.6v5.7h-1.7zM143 86.1h6v1.5h-6v-1.5zm1.7 7.5V83.3h1.7v10c0 .5.1.9.3 1.2s.6.4 1.1.4c.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.4-.6-.7-1.3-.7-2.2zm10.5 3c-1 0-1.9-.2-2.7-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.7-1.7-.7-2.8 0-1 .2-1.9.7-2.8.4-.8 1.1-1.5 1.8-2 .8-.5 1.7-.7 2.7-.7 1 0 1.9.2 2.7.7.8.5 1.4 1.1 1.9 2 .4.8.7 1.7.7 2.7 0 1-.2 1.9-.7 2.8-.4.8-1.1 1.5-1.9 1.9-.8.6-1.7.8-2.7.8zm0-1.5c.6 0 1.2-.2 1.7-.5s1-.8 1.3-1.3c.3-.6.5-1.3.5-2.1s-.2-1.5-.5-2.1c-.3-.6-.8-1-1.3-1.3-.5-.3-1.1-.5-1.7-.5-.6 0-1.2.2-1.7.5s-1 .7-1.3 1.3c-.3.6-.5 1.3-.5 2.1s.2 1.5.5 2.1c.3.6.8 1 1.3 1.3.5.4 1.1.5 1.7.5zm12.2 1.2V82h2.1l7.2 11.4h.1l-.1-2.8V82h1.7v14.3h-1.8l-7.5-11.9h-.1l.1 2.8v9.2h-1.7zm18.2.3c-1 0-1.9-.2-2.6-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.6-1.7-.6-2.8 0-1 .2-1.9.6-2.7.4-.8 1-1.5 1.7-2s1.6-.8 2.6-.8 1.9.2 2.6.7c.7.4 1.3 1.1 1.7 1.8.4.8.6 1.7.6 2.7v.5h-8.8V90h7c0-.3-.1-.6-.2-.9-.1-.3-.3-.6-.5-.9-.2-.3-.6-.5-.9-.7-.4-.2-.8-.3-1.4-.3-.7 0-1.2.2-1.7.5s-.8.8-1.1 1.4c-.3.6-.4 1.2-.4 2 0 .9.2 1.6.5 2.2.3.6.8 1 1.3 1.3.5.3 1.1.4 1.7.4.8 0 1.4-.2 1.8-.5.5-.4.9-.8 1.2-1.3l1.4.7c-.4.8-1 1.4-1.7 1.9-1 .6-1.9.8-3 .8zm5.5-.3 4.1-5.9h.2l2.9-4.3h2l-4 5.6h-.1l-3.1 4.6h-2zm.1-10.2h1.9l3.2 4.5h.1l4 5.7h-2l-3-4.5h-.1l-4.1-5.7zm9.9 0h6v1.5h-6v-1.5zm1.8 7.5V83.3h1.7v10c0 .5.1.9.3 1.2.2.3.6.4 1.1.4.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.4-.6-.7-1.3-.7-2.2zm11.2 2.7V82h4.8c.8 0 1.5.2 2.2.5.7.4 1.2.8 1.6 1.5.4.6.6 1.4.6 2.2 0 .8-.2 1.6-.6 2.2-.4.6-.9 1.1-1.6 1.5-.7.4-1.4.5-2.2.5H215v-1.6h4c.6 0 1-.1 1.4-.4.4-.3.7-.6.9-1 .2-.4.3-.8.3-1.2s-.1-.8-.3-1.2c-.2-.4-.5-.7-.9-1-.4-.3-.9-.4-1.4-.4h-3.2v12.7h-1.7zm14.1.3c-.8 0-1.4-.1-2-.4s-1-.7-1.3-1.2-.5-1.1-.5-1.8c0-.8.2-1.4.6-1.9s.9-.9 1.5-1.2c.7-.3 1.4-.4 2.2-.4.4 0 .9 0 1.2.1s.7.2 1 .3c.3.1.5.2.7.3v-.6c0-.8-.3-1.4-.8-1.8-.5-.5-1.2-.7-2-.7-.6 0-1.1.1-1.6.4-.5.2-.9.6-1.1 1l-1.3-1c.3-.4.6-.7 1-1 .4-.3.9-.5 1.4-.7s1.1-.2 1.6-.2c1.4 0 2.5.4 3.2 1.1.8.7 1.2 1.7 1.2 3v6.5h-1.6v-1.5h-.1c-.2.3-.4.6-.7.8s-.7.5-1.1.7c-.6.2-1 .2-1.5.2zm.1-1.5c.6 0 1.1-.1 1.6-.4.5-.3.9-.7 1.2-1.2.3-.5.5-1 .5-1.6-.3-.2-.7-.4-1.2-.5s-1-.2-1.5-.2c-1 0-1.7.2-2.1.6-.4.4-.7.9-.7 1.5s.2 1 .6 1.4 1 .4 1.6.4zm7.4 1.2V86.1h1.7v10.2h-1.7zm.8-12c-.3 0-.6-.1-.9-.4s-.4-.5-.4-.9c0-.3.1-.6.4-.9.2-.2.5-.4.9-.4.3 0 .6.1.9.4.2.2.4.5.4.9 0 .3-.1.6-.4.9-.2.2-.5.4-.9.4zm3.5 12V86.1h1.6v1.5h.1c.3-.5.7-.9 1.3-1.3.6-.4 1.3-.5 2-.5 1.2 0 2.2.4 2.8 1.1.6.7 1 1.7 1 2.9v6.5h-1.7V90c0-1-.2-1.7-.7-2.1-.5-.4-1.1-.6-1.8-.6-.6 0-1.1.2-1.5.5-.4.3-.8.7-1 1.2-.2.5-.4 1-.4 1.6v5.7H240zm10.1-10.2h6v1.5h-6v-1.5zm1.7 7.5V83.3h1.7v10c0 .5.1.9.3 1.2s.6.4 1.1.4c.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8s-.7-1.3-.7-2.2zM96 172.8c-2.4 0-4.3 1.9-4.3 4.3 0 2 1.4 3.7 3.3 4.2v20.1h2v-20.1c1.9-.5 3.3-2.1 3.3-4.2 0-2.3-1.9-4.3-4.3-4.3zM201.6 172.6c-2.4 0-4.3 1.9-4.3 4.3 0 2 1.4 3.7 3.3 4.2v19.8h2v-19.8c1.9-.5 3.3-2.1 3.3-4.2 0-2.4-1.9-4.3-4.3-4.3z"></path></svg>
  <svg title="A diagram of the INP thresholds. An INP at or below 200 milliseconds is considered good. Between 200 and 500 milliseconds suggests a page's responsiveness needs improvement. Anything over 500 milliseconds means that a page's responsiveness is poor." class="inp-desktop" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0" y="0" viewBox="0 0 658.4 113.6" style="enable-background:new 0 0 658.4 113.6" xml:space="preserve"><style>.st0{fill: #2979FF} v.st1{fill-rule: evenodd;clip-rule: evenodd;fill: #0CCE6B} .st2 {fill: #191919} .st3{fill-rule: evenodd;clip-rule: evenodd;fill: #FFA400} .st4{fill-rule: evenodd;clip-rule: evenodd;fill: #FF4E42} @media screen and (prefers-color-scheme: light){.st2{fill: #191919}} @media screen and (prefers-color-scheme: dark){.st2{fill: #fff}} [data-user-theme=dark] .st2{fill: #fff}</style><path class="st0" d="M30.2 68.7V0h13v68.7h-13zm28.7 0V0H74l27.7 46.1h.8l-.8-13.2V0h12.9v68.7H101L71.7 20.1h-.8l.8 13.2v35.4H58.9zm71.3 0V0h24.2c4.4 0 8.4.9 11.9 2.7 3.5 1.8 6.3 4.4 8.4 7.6 2.1 3.3 3.1 7 3.1 11.3 0 4.3-1 8.1-3.1 11.4-2.1 3.3-4.9 5.8-8.4 7.7-3.5 1.8-7.5 2.7-11.9 2.7h-17V31.2h17.4c2.2 0 4.1-.4 5.7-1.3 1.5-.9 2.7-2.1 3.5-3.5.8-1.4 1.2-3 1.2-4.7 0-1.7-.4-3.2-1.2-4.6-.8-1.4-1.9-2.6-3.5-3.5-1.5-.9-3.4-1.3-5.7-1.3h-11.6v56.5h-13z"></path><path class="st1" d="M303.2 14.9h115.2v43.2H303.2V14.9z"></path><path class="st2" d="M345.3 41.5c-.7 0-1.3-.1-1.9-.4-.6-.2-1.1-.6-1.6-1s-.8-1-1.1-1.6c-.3-.6-.4-1.3-.4-2s.1-1.4.4-2c.3-.6.6-1.1 1.1-1.6.5-.5 1-.8 1.6-1 .6-.2 1.2-.4 1.9-.4s1.4.1 2 .4c.6.2 1.1.6 1.6 1.1l-1 1c-.2-.2-.4-.4-.7-.6-.3-.2-.5-.3-.9-.4-.3-.1-.6-.1-1-.1-.5 0-.9.1-1.3.3-.4.2-.8.4-1.1.7-.3.3-.6.7-.8 1.1-.2.4-.3.9-.3 1.5s.1 1 .3 1.5c.2.4.5.8.8 1.1.3.3.7.6 1.1.7.4.2.9.2 1.3.2s.8-.1 1.2-.2c.4-.1.7-.3 1-.5.3-.2.5-.5.7-.8.2-.3.3-.7.3-1.1h-3.3v-1.3h4.6v.8c0 .7-.1 1.3-.4 1.9-.2.6-.6 1-1 1.5-.4.4-.9.7-1.5.9-.3.2-.9.3-1.6.3zm10.5 0c-.7 0-1.4-.1-2-.4-.6-.3-1.1-.6-1.6-1.1-.4-.5-.8-1-1-1.6-.2-.6-.4-1.2-.4-1.9s.1-1.3.4-1.9c.2-.6.6-1.1 1-1.6s1-.8 1.6-1.1c.6-.3 1.3-.4 2-.4s1.4.1 2 .4c.6.2 1.1.6 1.6 1.1.5.5.8 1 1 1.6.2.6.4 1.2.4 1.9s-.1 1.3-.4 1.9c-.2.6-.6 1.1-1 1.6s-1 .8-1.6 1.1-1.2.4-2 .4zm0-1.4c.6 0 1.2-.2 1.8-.5.5-.3.9-.7 1.2-1.3s.5-1.2.5-1.9-.2-1.3-.5-1.9-.7-1-1.2-1.3c-.5-.3-1.1-.5-1.8-.5-.6 0-1.2.2-1.8.5-.5.3-.9.7-1.2 1.3s-.5 1.2-.5 1.9.2 1.3.5 1.9.7 1 1.2 1.3c.6.4 1.2.5 1.8.5zm11 1.4c-.7 0-1.4-.1-2-.4-.6-.3-1.1-.6-1.6-1.1-.4-.5-.8-1-1-1.6-.2-.6-.4-1.2-.4-1.9s.1-1.3.4-1.9c.2-.6.6-1.1 1-1.6s1-.8 1.6-1.1c.6-.3 1.3-.4 2-.4s1.4.1 2 .4c.6.2 1.1.6 1.6 1.1.5.5.8 1 1 1.6.2.6.4 1.2.4 1.9s-.1 1.3-.4 1.9c-.2.6-.6 1.1-1 1.6s-1 .8-1.6 1.1-1.3.4-2 .4zm0-1.4c.6 0 1.2-.2 1.8-.5.5-.3.9-.7 1.2-1.3s.5-1.2.5-1.9-.2-1.3-.5-1.9-.7-1-1.2-1.3c-.5-.3-1.1-.5-1.8-.5-.6 0-1.2.2-1.8.5-.5.3-.9.7-1.2 1.3s-.5 1.2-.5 1.9.2 1.3.5 1.9.7 1 1.2 1.3c.6.4 1.2.5 1.8.5zm6.6 1.2v-9.5h3c1 0 1.9.2 2.6.6.7.4 1.3 1 1.7 1.7s.6 1.5.6 2.5c0 .9-.2 1.8-.6 2.5s-1 1.3-1.7 1.7c-.7.4-1.6.6-2.6.6h-3zm1.5-1.4h1.5c.7 0 1.3-.1 1.8-.4.5-.3.9-.7 1.2-1.2.3-.5.4-1.1.4-1.8s-.1-1.3-.4-1.8c-.3-.5-.7-.9-1.2-1.2-.5-.3-1.1-.4-1.8-.4h-1.5v6.8z"></path><path class="st3" d="M418.4 14.9h124.8v43.2H418.4V14.9z"></path><path class="st2" d="M460.8 33.3v-9.5h1.7l4.3 7h.1l-.1-1.8v-5.2h1.5v9.5h-1.5l-4.5-7.4h-.1l.1 1.8v5.5h-1.5zm9.7 0v-9.5h5.8v1.4H472V32h4.3v1.4h-5.8zm.7-4.1v-1.4h4.6v1.4h-4.6zm6.9 4.1v-9.5h5.8v1.4h-4.3V32h4.3v1.4h-5.8zm.8-4.1v-1.4h4.6v1.4h-4.6zm6.8 4.1v-9.5h3c1 0 1.9.2 2.6.6.7.4 1.3 1 1.7 1.7s.6 1.5.6 2.5c0 .9-.2 1.8-.6 2.5s-1 1.3-1.7 1.7c-.7.4-1.6.6-2.6.6h-3zm1.5-1.4h1.5c.7 0 1.3-.1 1.8-.4.5-.3.9-.7 1.2-1.2.3-.5.4-1.1.4-1.8s-.1-1.3-.4-1.8c-.3-.5-.7-.9-1.2-1.2-.5-.3-1.1-.4-1.8-.4h-1.5v6.8zm10.9 1.6c-.5 0-1-.1-1.5-.3-.5-.2-.9-.5-1.2-.9-.3-.4-.6-.9-.8-1.5l1.4-.6c.1.5.4.9.8 1.3.4.3.8.5 1.3.5.3 0 .6-.1.8-.2.3-.1.5-.3.6-.5.2-.2.2-.5.2-.8 0-.3-.1-.5-.2-.7-.1-.2-.3-.4-.6-.5-.3-.2-.7-.3-1.1-.5l-.6-.2c-.3-.1-.5-.2-.8-.4-.3-.1-.5-.3-.7-.5-.2-.2-.4-.5-.5-.7-.1-.3-.2-.6-.2-1 0-.5.1-.9.4-1.3.2-.4.6-.7 1-.9.4-.2 1-.4 1.6-.4.6 0 1.1.1 1.5.3.4.2.7.5 1 .8.2.3.4.6.5.9l-1.3.6c-.1-.2-.2-.4-.3-.5-.1-.2-.3-.3-.5-.4-.2-.1-.5-.2-.8-.2-.3 0-.5.1-.8.2-.2.1-.4.2-.6.4-.1.2-.2.4-.2.6 0 .3.1.6.4.8s.7.4 1.2.6l.6.2c.3.1.6.2.9.4.3.1.6.3.8.6.2.2.4.5.6.8.1.3.2.7.2 1.2s-.1.9-.3 1.3c-.2.4-.4.6-.8.9-.3.2-.7.4-1 .5-.3 0-.7.1-1 .1zM434.4 49.3v-9.5h1.5v9.5h-1.5zm3.6 0v-9.5h2l2.8 7.3h.1l2.8-7.3h2v9.5h-1.4v-5.4l.1-1.7h-.1l-2.8 7.1h-1.2l-2.8-7.1h-.1l.1 1.7v5.4H438zm11.7 0v-9.5h3.3c.6 0 1.1.1 1.6.4.5.2.9.6 1.1 1 .3.4.4.9.4 1.5s-.1 1.1-.4 1.5c-.3.4-.7.8-1.1 1-.5.2-1 .4-1.6.4h-2.5v-1.4h2.5c.4 0 .7-.1.9-.2.2-.1.4-.3.5-.6.1-.2.2-.5.2-.8 0-.3-.1-.5-.2-.7-.1-.2-.3-.4-.5-.6-.2-.2-.5-.2-.9-.2h-1.8v8.2h-1.5zm8 0v-9.5h3.3c.6 0 1.1.1 1.6.4.5.2.8.6 1.1 1s.4.9.4 1.5c0 .4-.1.8-.2 1.1s-.4.7-.7.9c-.3.3-.6.5-1 .6-.4.1-.9.2-1.4.2h-2.3v-1.3h2.5c.3 0 .6-.1.8-.2.2-.1.4-.3.6-.6.2-.2.2-.5.2-.8 0-.3-.1-.5-.2-.7-.1-.2-.3-.4-.5-.6-.2-.1-.5-.2-.9-.2h-1.9v8.2h-1.4zm2.2-4.4h1.7l3 4.3v.1h-1.7l-3-4.4zm10.3 4.6c-.7 0-1.4-.1-2-.4-.6-.3-1.1-.6-1.6-1.1-.4-.5-.8-1-1-1.6-.2-.6-.4-1.2-.4-1.9s.1-1.3.4-1.9c.2-.6.6-1.1 1-1.6s1-.8 1.6-1.1c.6-.3 1.3-.4 2-.4s1.4.1 2 .4c.6.2 1.1.6 1.6 1.1.5.5.8 1 1 1.6.2.6.4 1.2.4 1.9s-.1 1.3-.4 1.9c-.2.6-.6 1.1-1 1.6s-1 .8-1.6 1.1c-.6.3-1.2.4-2 .4zm0-1.4c.6 0 1.2-.2 1.8-.5.5-.3.9-.7 1.2-1.3.3-.5.5-1.2.5-1.9s-.2-1.3-.5-1.9c-.3-.5-.7-1-1.2-1.3-.5-.3-1.1-.5-1.8-.5s-1.2.2-1.8.5c-.5.3-.9.7-1.2 1.3-.3.5-.5 1.2-.5 1.9s.2 1.3.5 1.9c.3.5.7 1 1.2 1.3.6.4 1.2.5 1.8.5zm8.8 1.2-3.4-9.5h1.6l2.2 6.3.3 1.1h.1l.4-1.1 2.2-6.3h1.6l-3.5 9.5H479zm6.2 0v-9.5h5.8v1.4h-4.3V48h4.3v1.4h-5.8zm.8-4.1v-1.4h4.6v1.4H486zm6.8 4.1v-9.5h2l2.8 7.3h.1l2.8-7.3h2v9.5H501v-5.4l.1-1.7h-.1l-2.8 7.1H497l-2.8-7.1h-.1l.1 1.7v5.4h-1.4zm11.8 0v-9.5h5.8v1.4h-4.3V48h4.3v1.4h-5.8zm.8-4.1v-1.4h4.6v1.4h-4.6zm6.8 4.1v-9.5h1.7l4.3 7h.1l-.1-1.8v-5.2h1.5v9.5h-1.5l-4.5-7.4h-.1l.1 1.8v5.5h-1.5zm11.7 0v-8.8h1.5v8.8h-1.5zm-2.7-8.2v-1.4h6.8v1.4h-6.8z"></path><path class="st4" d="M543.2 14.9h115.2v43.2H543.2V14.9z"></path><path class="st2" d="M582.9 41.3v-9.5h3.3c.6 0 1.1.1 1.6.4.5.2.9.6 1.1 1 .3.4.4.9.4 1.5s-.1 1.1-.4 1.5c-.3.4-.7.8-1.1 1-.5.2-1 .4-1.6.4h-2.5v-1.4h2.5c.4 0 .7-.1.9-.2.2-.1.4-.3.5-.6.1-.2.2-.5.2-.8 0-.3-.1-.5-.2-.7-.1-.2-.3-.4-.5-.6-.2-.2-.5-.2-.9-.2h-1.8v8.2h-1.5zm12.3.2c-.7 0-1.4-.1-2-.4-.6-.3-1.1-.6-1.6-1.1-.4-.5-.8-1-1-1.6-.2-.6-.4-1.2-.4-1.9s.1-1.3.4-1.9c.2-.6.6-1.1 1-1.6s1-.8 1.6-1.1c.6-.3 1.3-.4 2-.4s1.4.1 2 .4c.6.2 1.1.6 1.6 1.1.5.5.8 1 1 1.6.2.6.4 1.2.4 1.9s-.1 1.3-.4 1.9c-.2.6-.6 1.1-1 1.6s-1 .8-1.6 1.1c-.7.3-1.3.4-2 .4zm0-1.4c.6 0 1.2-.2 1.8-.5.5-.3.9-.7 1.2-1.3.3-.5.5-1.2.5-1.9s-.2-1.3-.5-1.9c-.3-.5-.7-1-1.2-1.3-.5-.3-1.1-.5-1.8-.5-.6 0-1.2.2-1.8.5-.5.3-.9.7-1.2 1.3-.3.5-.5 1.2-.5 1.9s.2 1.3.5 1.9c.3.5.7 1 1.2 1.3.6.4 1.1.5 1.8.5zm10.9 1.4c-.7 0-1.4-.1-2-.4-.6-.3-1.1-.6-1.6-1.1-.4-.5-.8-1-1-1.6-.2-.6-.4-1.2-.4-1.9s.1-1.3.4-1.9c.2-.6.6-1.1 1-1.6s1-.8 1.6-1.1c.6-.3 1.3-.4 2-.4s1.4.1 2 .4c.6.2 1.1.6 1.6 1.1.5.5.8 1 1 1.6.2.6.4 1.2.4 1.9s-.1 1.3-.4 1.9c-.2.6-.6 1.1-1 1.6s-1 .8-1.6 1.1c-.6.3-1.3.4-2 .4zm0-1.4c.6 0 1.2-.2 1.8-.5.5-.3.9-.7 1.2-1.3.3-.5.5-1.2.5-1.9s-.2-1.3-.5-1.9c-.3-.5-.7-1-1.2-1.3-.5-.3-1.1-.5-1.8-.5s-1.2.2-1.8.5c-.5.3-.9.7-1.2 1.3-.3.5-.5 1.2-.5 1.9s.2 1.3.5 1.9c.3.5.7 1 1.2 1.3.6.4 1.2.5 1.8.5zm6.7 1.2v-9.5h3.3c.6 0 1.1.1 1.6.4.5.2.8.6 1.1 1s.4.9.4 1.5c0 .4-.1.8-.2 1.1s-.4.7-.7.9c-.3.3-.6.5-1 .6-.4.1-.9.2-1.4.2h-2.3v-1.3h2.5c.3 0 .6-.1.8-.2.2-.1.4-.3.6-.6.2-.2.2-.5.2-.8 0-.3-.1-.5-.2-.7-.1-.2-.3-.4-.5-.6-.2-.1-.5-.2-.9-.2h-1.9v8.2h-1.4zm2.2-4.4h1.7l3 4.3v.1H618l-3-4.4zM517.7 102.9c-.6 0-1.1-.1-1.7-.3-.6-.2-1-.6-1.5-1-.4-.5-.7-1.1-.9-1.8l1.7-.7c.2.6.4 1.1.8 1.5.4.4.9.6 1.6.6.7 0 1.2-.2 1.6-.6.4-.4.7-1 .7-1.6 0-.7-.2-1.2-.6-1.6-.4-.4-1-.7-1.6-.7-.4 0-.8.1-1.1.2-.3.2-.6.4-.8.7l-1.8-.8.7-6h6.4v1.7h-4.9l-.4 3.2h.1c.3-.2.6-.4.9-.5.4-.1.8-.2 1.3-.2.7 0 1.3.2 1.9.5.6.3 1 .8 1.4 1.4.4.6.5 1.3.5 2 0 .8-.2 1.5-.5 2.1-.4.6-.8 1.1-1.5 1.4-.7.3-1.5.5-2.3.5zm10.8 0c-.7 0-1.4-.2-2-.5-.6-.3-1.1-.8-1.5-1.3-.4-.6-.8-1.2-1-2-.2-.8-.3-1.6-.3-2.4 0-.9.1-1.7.3-2.5.2-.8.6-1.4 1-2 .4-.6.9-1 1.5-1.3.6-.3 1.3-.5 2-.5.8 0 1.4.2 2 .5.6.3 1.1.8 1.5 1.3.4.6.8 1.2 1 2 .2.8.3 1.6.3 2.5 0 .9-.1 1.7-.3 2.4-.2.8-.5 1.4-1 2-.4.6-.9 1-1.5 1.3-.6.3-1.2.5-2 .5zm0-1.8c.6 0 1.1-.2 1.6-.6.4-.4.8-.9 1-1.6.2-.7.4-1.4.4-2.2 0-.8-.1-1.6-.4-2.3-.2-.7-.6-1.2-1-1.6-.4-.4-1-.6-1.6-.6-.6 0-1.2.2-1.6.6-.4.4-.8.9-1 1.6-.2.7-.4 1.4-.4 2.3 0 .8.1 1.6.4 2.2.2.7.6 1.2 1 1.6.5.4 1 .6 1.6.6zm11.4 1.8c-.7 0-1.4-.2-2-.5-.6-.3-1.1-.8-1.5-1.3-.4-.6-.8-1.2-1-2-.2-.8-.3-1.6-.3-2.4 0-.9.1-1.7.3-2.5.2-.8.6-1.4 1-2 .4-.6.9-1 1.5-1.3.6-.3 1.3-.5 2-.5.8 0 1.4.2 2 .5.6.3 1.1.8 1.5 1.3.4.6.8 1.2 1 2 .2.8.3 1.6.3 2.5 0 .9-.1 1.7-.3 2.4-.2.8-.5 1.4-1 2-.4.6-.9 1-1.5 1.3-.5.3-1.2.5-2 .5zm.1-1.8c.6 0 1.1-.2 1.6-.6.4-.4.8-.9 1-1.6.2-.7.4-1.4.4-2.2 0-.8-.1-1.6-.4-2.3-.2-.7-.6-1.2-1-1.6-.4-.4-1-.6-1.6-.6-.6 0-1.2.2-1.6.6-.4.4-.8.9-1 1.6-.2.7-.4 1.4-.4 2.3 0 .8.1 1.6.4 2.2.2.7.6 1.2 1 1.6.4.4.9.6 1.6.6zm10.8 1.5v-8.8h1.8V95h.1c.2-.3.4-.5.7-.8s.6-.4.9-.5c.4-.1.7-.2 1.1-.2.7 0 1.2.2 1.7.5s.8.7 1 1.2c.3-.5.7-.8 1.2-1.2.5-.3 1.1-.5 1.8-.5 1 0 1.8.3 2.3 1 .5.6.8 1.5.8 2.5v5.7h-1.9v-5.4c0-.7-.2-1.2-.5-1.5-.3-.3-.7-.5-1.3-.5-.4 0-.8.1-1.1.4-.3.2-.6.6-.8 1s-.3.9-.3 1.3v4.7h-1.9v-5.4c0-.7-.2-1.2-.5-1.5-.3-.3-.8-.5-1.3-.5-.4 0-.8.1-1.1.4-.3.2-.6.6-.7 1s-.3.9-.3 1.3v4.7h-1.7zm18.6.3c-.7 0-1.3-.1-1.8-.3-.5-.2-.9-.5-1.3-.9-.3-.4-.6-.8-.7-1.2l1.7-.7c.2.5.5.8.9 1.1.4.2.8.4 1.3.4s.9-.1 1.2-.2c.3-.2.5-.4.5-.8 0-.2-.1-.5-.2-.6s-.4-.3-.6-.4l-.9-.3-1.1-.2c-.4-.1-.8-.3-1.2-.5-.4-.2-.7-.5-.9-.9-.2-.4-.3-.8-.3-1.2 0-.5.2-1 .5-1.4.3-.4.7-.7 1.2-.9.5-.2 1.1-.3 1.7-.3.6 0 1.1.1 1.5.2.5.1.9.3 1.2.6.3.3.6.6.8 1l-1.6.7c-.2-.4-.5-.7-.8-.8-.3-.2-.7-.2-1.1-.2-.4 0-.8.1-1.1.3-.3.2-.4.4-.4.7 0 .3.1.5.4.7.3.2.6.3 1 .4l1.3.3c.9.2 1.5.6 2 1 .4.4.7 1 .7 1.6 0 .6-.2 1.1-.5 1.5-.3.4-.8.7-1.3 1-.8.2-1.5.3-2.1.3zM389.2 102.6v-1.8l.4-.4.9-.9c.4-.4.7-.8 1.1-1.2l1.1-1.1.8-.8c.3-.3.6-.6.8-.9.2-.3.3-.5.4-.8.1-.2.1-.5.1-.8 0-.3-.1-.6-.2-.8-.1-.3-.4-.5-.7-.6-.3-.2-.6-.2-1.1-.2-.4 0-.7.1-1 .2-.3.2-.5.4-.7.6-.2.2-.3.5-.3.7l-1.7-.7c.1-.3.2-.6.4-.9.2-.3.4-.6.8-.9.3-.3.7-.5 1.1-.7.4-.2.9-.3 1.5-.3.8 0 1.4.2 2 .5.6.3 1 .7 1.3 1.2.3.5.5 1.1.5 1.7 0 .5-.1 1-.3 1.5-.2.5-.4.9-.7 1.3-.3.4-.6.7-.9 1-.2.1-.4.3-.6.6-.2.2-.5.5-.7.8l-.8.8-.7.7-.4.4h5.2v1.7h-7.6zm14.2.3c-.7 0-1.4-.2-2-.5-.6-.3-1.1-.8-1.5-1.3-.4-.6-.8-1.2-1-2-.2-.8-.3-1.6-.3-2.4 0-.9.1-1.7.3-2.5.2-.8.6-1.4 1-2 .4-.6.9-1 1.5-1.3.6-.3 1.3-.5 2-.5.8 0 1.4.2 2 .5.6.3 1.1.8 1.5 1.3.4.6.8 1.2 1 2 .2.8.3 1.6.3 2.5 0 .9-.1 1.7-.3 2.4-.2.8-.5 1.4-1 2-.4.6-.9 1-1.5 1.3-.5.3-1.2.5-2 .5zm0-1.8c.6 0 1.1-.2 1.6-.6.4-.4.8-.9 1-1.6.2-.7.4-1.4.4-2.2 0-.8-.1-1.6-.4-2.3-.2-.7-.6-1.2-1-1.6-.4-.4-1-.6-1.6-.6-.6 0-1.2.2-1.6.6-.4.4-.8.9-1 1.6-.2.7-.4 1.4-.4 2.3 0 .8.1 1.6.4 2.2.2.7.6 1.2 1 1.6.5.4 1 .6 1.6.6zm11.5 1.8c-.7 0-1.4-.2-2-.5-.6-.3-1.1-.8-1.5-1.3-.4-.6-.8-1.2-1-2-.2-.8-.3-1.6-.3-2.4 0-.9.1-1.7.3-2.5.2-.8.6-1.4 1-2 .4-.6.9-1 1.5-1.3.6-.3 1.3-.5 2-.5.8 0 1.4.2 2 .5.6.3 1.1.8 1.5 1.3.4.6.8 1.2 1 2 .2.8.3 1.6.3 2.5 0 .9-.1 1.7-.3 2.4-.2.8-.5 1.4-1 2-.4.6-.9 1-1.5 1.3-.6.3-1.3.5-2 .5zm0-1.8c.6 0 1.1-.2 1.6-.6.4-.4.8-.9 1-1.6.2-.7.4-1.4.4-2.2 0-.8-.1-1.6-.4-2.3-.2-.7-.6-1.2-1-1.6-.4-.4-1-.6-1.6-.6-.6 0-1.2.2-1.6.6-.4.4-.8.9-1 1.6-.2.7-.4 1.4-.4 2.3 0 .8.1 1.6.4 2.2.2.7.6 1.2 1 1.6.4.4.9.6 1.6.6zm10.8 1.5v-8.8h1.8V95h.1c.2-.3.4-.5.7-.8s.6-.4.9-.5c.4-.1.7-.2 1.1-.2.7 0 1.2.2 1.7.5s.8.7 1 1.2c.3-.5.7-.8 1.2-1.2.5-.3 1.1-.5 1.8-.5 1 0 1.8.3 2.3 1 .5.6.8 1.5.8 2.5v5.7h-1.9v-5.4c0-.7-.2-1.2-.5-1.5-.3-.3-.7-.5-1.3-.5-.4 0-.8.1-1.1.4-.3.2-.6.6-.8 1s-.3.9-.3 1.3v4.7h-1.9v-5.4c0-.7-.2-1.2-.5-1.5-.3-.3-.8-.5-1.3-.5-.4 0-.8.1-1.1.4-.3.2-.6.6-.7 1s-.3.9-.3 1.3v4.7h-1.7zm18.6.3c-.7 0-1.3-.1-1.8-.3-.5-.2-.9-.5-1.3-.9-.3-.4-.6-.8-.7-1.2l1.7-.7c.2.5.5.8.9 1.1.4.2.8.4 1.3.4s.9-.1 1.2-.2c.3-.2.5-.4.5-.8 0-.2-.1-.5-.2-.6-.2-.2-.4-.3-.6-.4l-.9-.3-1.1-.2c-.4-.1-.8-.3-1.2-.5-.4-.2-.7-.5-.9-.9-.2-.4-.3-.8-.3-1.2 0-.5.2-1 .5-1.4.3-.4.7-.7 1.2-.9.5-.2 1.1-.3 1.7-.3.6 0 1.1.1 1.5.2.5.1.9.3 1.2.6.3.3.6.6.8 1l-1.6.7c-.2-.4-.5-.7-.8-.8-.3-.2-.7-.2-1.1-.2-.4 0-.8.1-1.1.3-.3.2-.4.4-.4.7 0 .3.1.5.4.7.3.2.6.3 1 .4l1.3.3c.9.2 1.5.6 2 1 .4.4.7 1 .7 1.6 0 .6-.2 1.1-.5 1.5-.3.4-.8.7-1.3 1-.8.2-1.4.3-2.1.3zM0 113.3V99h1.7v14.3H0zm4.6 0v-10.2h1.6v1.5h.1c.3-.5.7-.9 1.3-1.3.6-.4 1.3-.5 2-.5 1.2 0 2.2.4 2.8 1.1.6.7 1 1.7 1 2.9v6.5h-1.7V107c0-1-.2-1.7-.7-2.1-.5-.4-1.1-.6-1.8-.6-.6 0-1.1.2-1.5.5-.4.3-.8.7-1 1.2-.2.5-.4 1-.4 1.6v5.7H4.6zm10-10.2h6v1.5h-6v-1.5zm1.8 7.5v-10.4h1.7v10c0 .5.1.9.3 1.2.2.3.6.4 1.1.4.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.5-.5-.7-1.2-.7-2.1zm10.3 3c-1 0-1.9-.2-2.6-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.6-1.7-.6-2.8 0-1 .2-1.9.6-2.7.4-.8 1-1.5 1.7-2s1.6-.8 2.6-.8 1.9.2 2.6.7c.7.4 1.3 1.1 1.7 1.8.4.8.6 1.7.6 2.7v.5h-8.8V107h7c0-.3-.1-.6-.2-.9-.1-.3-.3-.6-.5-.9-.2-.3-.6-.5-.9-.7-.4-.2-.8-.3-1.4-.3-.7 0-1.2.2-1.7.5s-.8.8-1.1 1.4c-.3.6-.4 1.2-.4 2 0 .9.2 1.6.5 2.2.3.6.8 1 1.3 1.3.5.3 1.1.4 1.7.4.8 0 1.4-.2 1.8-.5.5-.4.9-.8 1.2-1.3l1.4.7c-.4.8-1 1.4-1.7 1.9-1 .5-1.9.8-3 .8zm6.7-.3v-10.2H35v1.6h.1c.1-.4.4-.7.7-1 .3-.3.7-.5 1.1-.7.4-.2.8-.2 1.2-.2h.7c.2 0 .3.1.5.2v1.8c-.2-.1-.5-.2-.7-.2-.2-.1-.5-.1-.7-.1-.5 0-1 .1-1.4.4-.4.3-.7.7-1 1.1-.2.5-.4 1-.4 1.5v5.7h-1.7zm10.4.3c-.8 0-1.4-.1-2-.4-.6-.3-1-.7-1.3-1.2-.3-.5-.5-1.1-.5-1.8 0-.8.2-1.4.6-1.9.4-.5.9-.9 1.5-1.2.7-.3 1.4-.4 2.2-.4.4 0 .9 0 1.2.1.4.1.7.2 1 .3.3.1.5.2.7.3v-.6c0-.8-.3-1.4-.8-1.8-.5-.5-1.2-.7-2-.7-.6 0-1.1.1-1.6.4-.5.2-.9.6-1.1 1l-1.3-1c.3-.4.6-.7 1-1 .4-.3.9-.5 1.4-.7.5-.2 1.1-.2 1.6-.2 1.4 0 2.5.4 3.2 1.1.8.7 1.2 1.7 1.2 3v6.5h-1.6v-1.5h-.1c-.2.3-.4.6-.7.8-.3.3-.7.5-1.1.7-.5.1-1 .2-1.5.2zm.1-1.5c.6 0 1.1-.1 1.6-.4.5-.3.9-.7 1.2-1.2.3-.5.5-1 .5-1.6-.3-.2-.7-.4-1.2-.5-.5-.1-1-.2-1.5-.2-1 0-1.7.2-2.1.6-.4.4-.7.9-.7 1.5s.2 1 .6 1.4c.4.2 1 .4 1.6.4zm11.7 1.5c-1 0-1.9-.2-2.7-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.7-1.7-.7-2.8 0-1 .2-2 .7-2.8.4-.8 1.1-1.5 1.8-1.9.8-.5 1.7-.7 2.7-.7 1.1 0 2.1.3 2.8.8.7.5 1.3 1.2 1.6 2l-1.5.6c-.2-.6-.6-1.1-1.1-1.4-.5-.3-1.1-.5-1.8-.5-.6 0-1.2.2-1.7.5s-.9.8-1.2 1.4c-.3.6-.5 1.3-.5 2 0 .8.2 1.4.5 2 .3.6.7 1 1.2 1.4.5.3 1.1.5 1.7.5.7 0 1.3-.2 1.9-.5.5-.3.9-.8 1.2-1.4l1.5.6c-.3.8-.9 1.5-1.6 2-.9.5-1.8.8-3 .8zm5.5-10.5h6v1.5h-6v-1.5zm1.8 7.5v-10.4h1.7v10c0 .5.1.9.3 1.2.2.3.6.4 1.1.4.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.4-.5-.7-1.2-.7-2.1zm6.5 2.7v-10.2h1.7v10.2h-1.7zm.9-12.1c-.3 0-.6-.1-.9-.4-.2-.2-.4-.5-.4-.9 0-.3.1-.6.4-.9.2-.2.5-.4.9-.4.3 0 .6.1.9.4.2.2.4.5.4.9 0 .3-.1.6-.4.9-.3.3-.6.4-.9.4zm8.1 12.4c-1 0-1.9-.2-2.7-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.7-1.7-.7-2.8 0-1 .2-1.9.7-2.8.4-.8 1.1-1.5 1.8-2 .8-.5 1.7-.7 2.7-.7 1 0 1.9.2 2.7.7.8.5 1.4 1.1 1.9 2 .4.8.7 1.7.7 2.7 0 1-.2 1.9-.7 2.8-.4.8-1.1 1.5-1.9 1.9-.8.5-1.7.8-2.7.8zm0-1.6c.6 0 1.2-.2 1.7-.5s1-.8 1.3-1.3c.3-.6.5-1.3.5-2.1s-.2-1.5-.5-2.1c-.3-.6-.8-1-1.3-1.3-.5-.3-1.1-.5-1.7-.5-.6 0-1.2.2-1.7.5s-1 .7-1.3 1.3c-.3.6-.5 1.3-.5 2.1s.2 1.5.5 2.1c.3.6.8 1 1.3 1.3.5.4 1.1.5 1.7.5zm7 1.3v-10.2H87v1.5h.1c.3-.5.7-.9 1.3-1.3.6-.4 1.3-.5 2-.5 1.2 0 2.2.4 2.8 1.1.6.7 1 1.7 1 2.9v6.5h-1.7V107c0-1-.2-1.7-.7-2.1-.5-.4-1.1-.6-1.8-.6-.6 0-1.1.2-1.5.5-.4.3-.8.7-1 1.2-.2.5-.4 1-.4 1.6v5.7h-1.7zm15.1-10.2h6v1.5h-6v-1.5zm1.8 7.5v-10.4h1.7v10c0 .5.1.9.3 1.2.2.3.6.4 1.1.4.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.4-.5-.7-1.2-.7-2.1zm10.5 3c-1 0-1.9-.2-2.7-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.7-1.7-.7-2.8 0-1 .2-1.9.7-2.8.4-.8 1.1-1.5 1.8-2 .8-.5 1.7-.7 2.7-.7 1 0 1.9.2 2.7.7.8.5 1.4 1.1 1.9 2 .4.8.7 1.7.7 2.7 0 1-.2 1.9-.7 2.8-.4.8-1.1 1.5-1.9 1.9-.8.5-1.7.8-2.7.8zm0-1.6c.6 0 1.2-.2 1.7-.5s1-.8 1.3-1.3c.3-.6.5-1.3.5-2.1s-.2-1.5-.5-2.1c-.3-.6-.8-1-1.3-1.3-.5-.3-1.1-.5-1.7-.5-.6 0-1.2.2-1.7.5s-1 .7-1.3 1.3c-.3.6-.5 1.3-.5 2.1s.2 1.5.5 2.1c.3.6.8 1 1.3 1.3.5.4 1.1.5 1.7.5zm12.2 1.3V99h2.1l7.2 11.4h.1l-.1-2.8V99h1.7v14.3h-1.8l-7.5-11.9h-.1l.1 2.8v9.2H125zm18.2.3c-1 0-1.9-.2-2.6-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.6-1.7-.6-2.8 0-1 .2-1.9.6-2.7.4-.8 1-1.5 1.7-2s1.6-.8 2.6-.8 1.9.2 2.6.7c.7.4 1.3 1.1 1.7 1.8.4.8.6 1.7.6 2.7v.5h-8.8V107h7c0-.3-.1-.6-.2-.9-.1-.3-.3-.6-.5-.9-.2-.3-.6-.5-.9-.7-.4-.2-.8-.3-1.4-.3-.7 0-1.2.2-1.7.5s-.8.8-1.1 1.4c-.3.6-.4 1.2-.4 2 0 .9.2 1.6.5 2.2.3.6.8 1 1.3 1.3.5.3 1.1.4 1.7.4.8 0 1.4-.2 1.8-.5.5-.4.9-.8 1.2-1.3l1.4.7c-.4.8-1 1.4-1.7 1.9-1 .5-1.9.8-3 .8zm5.5-.3 4.1-5.9h.2l2.9-4.3h2l-4 5.6h-.1l-3.1 4.6h-2zm.1-10.2h1.9l3.2 4.5h.1l4 5.7h-2l-3-4.5h-.1l-4.1-5.7zm9.9 0h6v1.5h-6v-1.5zm1.8 7.5v-10.4h1.7v10c0 .5.1.9.3 1.2.2.3.6.4 1.1.4.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.4-.5-.7-1.2-.7-2.1zm11.2 2.7V99h4.8c.8 0 1.5.2 2.2.5.7.4 1.2.8 1.6 1.5.4.6.6 1.4.6 2.2 0 .8-.2 1.6-.6 2.2-.4.6-.9 1.1-1.6 1.5-.7.4-1.4.5-2.2.5h-3.9v-1.6h4c.6 0 1-.1 1.4-.4.4-.3.7-.6.9-1 .2-.4.3-.8.3-1.2 0-.4-.1-.8-.3-1.2-.2-.4-.5-.7-.9-1-.4-.3-.9-.4-1.4-.4h-3.2v12.7h-1.7zm14 .3c-.8 0-1.4-.1-2-.4-.6-.3-1-.7-1.3-1.2-.3-.5-.5-1.1-.5-1.8 0-.8.2-1.4.6-1.9.4-.5.9-.9 1.5-1.2.7-.3 1.4-.4 2.2-.4.4 0 .9 0 1.2.1.4.1.7.2 1 .3.3.1.5.2.7.3v-.6c0-.8-.3-1.4-.8-1.8-.5-.5-1.2-.7-2-.7-.6 0-1.1.1-1.6.4-.5.2-.9.6-1.1 1l-1.3-1c.3-.4.6-.7 1-1 .4-.3.9-.5 1.4-.7.5-.2 1.1-.2 1.6-.2 1.4 0 2.5.4 3.2 1.1.8.7 1.2 1.7 1.2 3v6.5h-1.6v-1.5h-.1c-.2.3-.4.6-.7.8-.3.3-.7.5-1.1.7-.5.1-.9.2-1.5.2zm.2-1.5c.6 0 1.1-.1 1.6-.4.5-.3.9-.7 1.2-1.2.3-.5.5-1 .5-1.6-.3-.2-.7-.4-1.2-.5-.5-.1-1-.2-1.5-.2-1 0-1.7.2-2.1.6-.4.4-.7.9-.7 1.5s.2 1 .6 1.4c.4.2 1 .4 1.6.4zm7.4 1.2v-10.2h1.7v10.2h-1.7zm.8-12.1c-.3 0-.6-.1-.9-.4-.2-.2-.4-.5-.4-.9 0-.3.1-.6.4-.9.2-.2.5-.4.9-.4.3 0 .6.1.9.4.2.2.4.5.4.9 0 .3-.1.6-.4.9-.3.3-.5.4-.9.4zm3.5 12.1v-10.2h1.6v1.5h.1c.3-.5.7-.9 1.3-1.3.6-.4 1.3-.5 2-.5 1.2 0 2.2.4 2.8 1.1.6.7 1 1.7 1 2.9v6.5h-1.7V107c0-1-.2-1.7-.7-2.1-.5-.4-1.1-.6-1.8-.6-.6 0-1.1.2-1.5.5-.4.3-.8.7-1 1.2-.2.5-.4 1-.4 1.6v5.7h-1.7zm10-10.2h6v1.5h-6v-1.5zm1.8 7.5v-10.4h1.7v10c0 .5.1.9.3 1.2.2.3.6.4 1.1.4.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.4-.5-.7-1.2-.7-2.1zM418.1 55.2c-1.8 0-3.3 1.5-3.3 3.3 0 1.5 1 2.7 2.3 3.1V83h2V61.6c1.3-.4 2.3-1.7 2.3-3.1 0-1.8-1.5-3.3-3.3-3.3zM546.5 58.6c0-1.8-1.5-3.3-3.3-3.3s-3.3 1.5-3.3 3.3c0 1.5 1 2.7 2.3 3.1v21.2h2V61.7c1.3-.4 2.3-1.6 2.3-3.1z"></path></svg>
  <figcaption>
    Graphic showing the thresholds for good and poor INP.
  </figcaption>
</figure>
<p>Don't wait for INP to become a Core Web Vital in 2024 to start improving it. Your website may very well be in the <a href="https://httparchive.org/reports/chrome-ux-report#cruxFastFid" rel="noopener">93%</a> of sites that have good FID performance on mobile devices; however, you might be surprised to learn that only <a href="https://httparchive.org/reports/chrome-ux-report#cruxFastInp" rel="noopener">65%</a> of sites have good INP on mobile devices. INP paints a much more accurate picture of responsiveness, so these numbers help us to more clearly see the room for improvement ahead of us.</p>
<p>To find out whether your site has INP issues, how to address them, and all things INP, the best place to start is the <a href="https://web.dev/optimize-inp/">INP optimization guide</a>. Whether you're learning about responsiveness for the first time or you're a performance expert, we've added a lot of new guidance to make it as easy as possible for everyone to learn how to measure and optimize INP.</p>
<p>INP might take some time to learn, and that's just fine. To help you focus on the optimizations with the biggest ROI, earlier this year we published <a href="https://web.dev/top-cwv-2023/">a blog post</a> to distill our guidance down to the most effective recommendations to improve Core Web Vitals. Specifically, we wrote about three must-know techniques that apply equally to optimizing FID and INP: avoid or break up long tasks, avoid unnecessary JavaScript, and avoid large rendering updates. You can learn more about these and many other INP optimization techniques in <a href="https://web.dev/optimize-inp/">our documentation</a>.</p>
<h2 id="the-road-ahead">The road ahead <a class="headline-link" href="https://web.dev/inp-cwv/#the-road-ahead">#</a></h2>
<p>A new bar for responsiveness has been set, and we're excited to see the community rise to the challenge for a better user experience. The early <a href="https://groups.google.com/g/web-vitals-feedback" rel="noopener">feedback</a> and <a href="https://web.dev/tags/case-study/">case studies</a> have been promising, but we know that for many, it may be a long and unfamiliar road ahead. We strive to make that journey as easy as possible with improved <a href="https://github.com/w3c/longtasks/blob/main/loaf-explainer.md" rel="noopener">diagnostics</a>, <a href="https://web.dev/vitals-tools/">tools</a>, and <a href="https://web.dev/optimize-inp/">documentation</a> to help developers along the way.</p>
<p>Stay tuned for updates on INP's exact graduation date in March 2024. And even though the metric is not experimental anymore, we're always open to feedback at <a href="mailto:web-vitals-feedback@googlegroups.com" rel="noopener">web-vitals-feedback@googlegroups.com</a> to help us improve INP and the Web Vitals program as a whole.</p>
<p><em>Hero image from <a href="https://unsplash.com/" rel="noopener">Unsplash</a>, by <a href="https://unsplash.com/@agebarros" rel="noopener">Agê Barros</a>.</em></p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[经济时报寻求修复INP]]></title>
            <link>https://web.dev/economic-times-inp/</link>
            <guid>https://web.dev/economic-times-inp/</guid>
            <content:encoded><![CDATA[<div>
    <h1>GPT总结</h1>
    <summary>本文介绍了Interaction to Next Paint (INP)作为衡量网站对用户输入响应的指标。INP越低，页面对用户交互的响应能力越好。文章提到了改善INP的困难性，以及通过优化Total Blocking Time (TBT)来改善INP的方法。作者通过减少主线程工作、减少脚本评估时间和减少DOM大小等措施成功降低了TBT和INP。最终，这些优化措施带来了反弹率的降低和页面浏览量的增加。作者总结了INP对网站性能和业务结果的积极影响，并计划将优化努力扩展到网站的其他领域。</summary>
    <div>
    <div>OriginTitle: Economic Times quest for fixing INP</div>

    </div></div><p><a href="https://web.dev/inp/">与下一个油漆的相互作用 (INP)</a>是评估网站对用户输入的响应能力的指标。 良好的响应能力意味着页面可以快速响应用户交互。 页面的 INP 越低，它对用户交互的响应能力就越好。</p>
<style>
   .inp-移动{ 
     显示方式：内嵌； 
   } 

   .inp-桌面 { 
     显示：无； 
   } 

   @media 屏幕和（最小宽度：640px）{ 
     .inp-移动{ 
       显示：无； 
     } 

     .inp-桌面 { 
       显示方式：内嵌； 
     } 
   } 
</style>
<figure>
  <svg title="A diagram of the INP thresholds. An INP at or below 200 milliseconds is considered good. Between 200 and 500 milliseconds suggests a page's responsiveness needs improvement. Anything over 500 milliseconds means that a page's responsiveness is poor." class="inp-mobile" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0" y="0" viewBox="0 0 296.6 220.2" style="enable-background:new 0 0 296.6 220.2" xml:space="preserve"><style>.st0{fill:#2979FF} .st1{fill-rule:evenodd;clip-rule:evenodd;fill:#0CCE6B} .st2{fill:#191919} .st3{fill-rule:evenodd;clip-rule:evenodd ;fill:#FFA400} .st4{fill-rule:evenodd;clip-rule:evenodd;fill:#FF4E42} @media screen 和 (prefers-color-scheme: light){.st2{fill:#191919}} [ data-user-theme=light] .st2 {fill:#191919} @media screen 和 (prefers-color-scheme: dark){.st2{fill:#fff}} [data-user-theme=dark] .st2 {填充：#fff}</style><path class="st0" d="M83.3 63V0h11.9v63H83.3zm26.3 0V0h13.8l25.3 42.2h.7l-.7-12.1V0h11.8v63H148l-26.8-44.6h-.7l.7 12.1V63h-11.6zm65.4 0V0h22.2c4.1 0 7.7.8 10.9 2.5s5.8 4 7.7 7 2.9 6.4 2.9 10.4c0 3.9-1 7.4-2.9 10.4s-4.5 5.4-7.7 7c-3.2 1.7-6.9 2.5-10.9 2.5h-15.6V28.6h15.9c2.1 0 3.8-.4 5.2-1.2s2.5-1.9 3.2-3.2c.7-1.3 1.1-2.8 1.1-4.3s-.4-2.9-1.1-4.2c-.7-1.3-1.8-2.3-3.2-3.2s-3.1-1.2-5.2-1.2h-10.7V63H175z"></path><path class="st1" d="M0 137.1h96v38.4H0v-38.4z"></path><path class="st2" d="M34 161c-.6 0-1.2-.1-1.8-.3-.5-.2-1-.5-1.4-.9-.4-.4-.7-.9-1-1.4-.2-.6-.3-1.1-.3-1.8 0-.6.1-1.2.3-1.8.2-.6.6-1 1-1.4.4-.4.9-.7 1.4-.9.5-.2 1.1-.3 1.8-.3s1.3.1 1.8.3c.6.2 1 .6 1.4 1l-.9.9c-.2-.2-.4-.4-.6-.5-.2-.1-.5-.3-.8-.3-.3-.1-.6-.1-.9-.1-.4 0-.8.1-1.2.2-.4.1-.7.4-1 .6-.3.3-.5.6-.7 1-.2.4-.2.8-.2 1.3s.1.9.2 1.3c.2.4.4.7.7 1 .3.3.6.5 1 .7.4.1.8.2 1.2.2.4 0 .8-.1 1.1-.2.3-.1.6-.3.9-.5.3-.2.5-.5.6-.8.2-.3.3-.6.3-1H34v-1.2h4.2v.7c0 .6-.1 1.2-.3 1.7-.2.5-.5.9-.9 1.3s-.8.6-1.3.8c-.5.3-1.1.4-1.7.4zm9.5 0c-.6 0-1.2-.1-1.8-.3-.5-.2-1-.5-1.4-1-.4-.4-.7-.9-.9-1.4-.2-.5-.3-1.1-.3-1.8 0-.6.1-1.2.3-1.8.2-.5.5-1 .9-1.4.4-.4.9-.7 1.4-1 .5-.2 1.1-.3 1.8-.3.6 0 1.2.1 1.8.3.5.2 1 .6 1.4 1 .4.4.7.9.9 1.4.2.5.3 1.1.3 1.8 0 .6-.1 1.2-.3 1.8-.2.5-.5 1-.9 1.4-.4.4-.9.7-1.4 1-.5.2-1.1.3-1.8.3zm0-1.2c.6 0 1.1-.1 1.6-.4.5-.3.8-.7 1.1-1.1.3-.5.4-1.1.4-1.7 0-.6-.1-1.2-.4-1.7-.3-.5-.7-.9-1.1-1.1-.5-.3-1-.4-1.6-.4-.6 0-1.1.1-1.6.4-.5.3-.8.7-1.1 1.1-.3.5-.4 1-.4 1.7 0 .6.1 1.2.4 1.7.3.5.7.9 1.1 1.1.5.3 1 .4 1.6.4zm9.9 1.2c-.6 0-1.2-.1-1.8-.3-.5-.2-1-.5-1.4-1-.4-.4-.7-.9-.9-1.4-.2-.5-.3-1.1-.3-1.8 0-.6.1-1.2.3-1.8.2-.5.5-1 .9-1.4.4-.4.9-.7 1.4-1 .5-.2 1.1-.3 1.8-.3.6 0 1.2.1 1.8.3.5.2 1 .6 1.4 1 .4.4.7.9.9 1.4.2.5.3 1.1.3 1.8 0 .6-.1 1.2-.3 1.8-.2.5-.5 1-.9 1.4-.4.4-.9.7-1.4 1-.6.2-1.2.3-1.8.3zm0-1.2c.6 0 1.1-.1 1.6-.4.5-.3.8-.7 1.1-1.1.3-.5.4-1.1.4-1.7 0-.6-.1-1.2-.4-1.7-.3-.5-.7-.9-1.1-1.1-.5-.3-1-.4-1.6-.4-.6 0-1.1.1-1.6.4-.5.3-.8.7-1.1 1.1-.3.5-.4 1-.4 1.7 0 .6.1 1.2.4 1.7.3.5.7.9 1.1 1.1.5.3 1 .4 1.6.4zm6 1.1v-8.6h2.8c.9 0 1.7.2 2.3.5.7.4 1.2.9 1.5 1.5.4.6.5 1.4.5 2.2 0 .8-.2 1.6-.5 2.2-.4.6-.9 1.2-1.5 1.5-.6.4-1.4.5-2.3.5h-2.8zm1.3-1.3h1.4c.6 0 1.2-.1 1.7-.4.5-.3.8-.6 1.1-1 .2-.5.4-1 .4-1.6 0-.6-.1-1.2-.4-1.6-.2-.5-.6-.8-1.1-1-.5-.3-1-.4-1.7-.4h-1.4v6z"></path><path class="st3" d="M96 137.1h105.6v38.4H96v-38.4z"></path><path class="st2" d="M130.8 153.9v-8.6h1.6l3.9 6.3h.1l-.1-1.7v-4.7h1.3v8.6h-1.4l-4.1-6.6h-.1l.1 1.7v5h-1.3zm8.7 0v-8.6h5.2v1.2h-3.9v6.1h3.9v1.2h-5.2zm.7-3.7V149h4.1v1.2h-4.1zm6.2 3.7v-8.6h5.2v1.2h-3.9v6.1h3.9v1.2h-5.2zm.7-3.7V149h4.1v1.2h-4.1zm6.1 3.7v-8.6h2.8c.9 0 1.7.2 2.3.5.7.4 1.2.9 1.5 1.5.4.6.5 1.4.5 2.2s-.2 1.6-.5 2.2c-.4.6-.9 1.2-1.5 1.5-.6.4-1.4.5-2.3.5h-2.8zm1.3-1.3h1.4c.6 0 1.2-.1 1.7-.4.5-.2.8-.6 1.1-1 .2-.5.4-1 .4-1.6 0-.6-.1-1.2-.4-1.6-.2-.5-.6-.8-1.1-1-.5-.2-1-.4-1.7-.4h-1.4v6zm9.9 1.4c-.5 0-.9-.1-1.3-.3-.4-.2-.8-.4-1.1-.8-.3-.4-.5-.8-.7-1.3l1.2-.5c.1.5.3.9.7 1.2.3.3.7.5 1.2.5.3 0 .5 0 .8-.1.2-.1.4-.2.6-.4s.2-.4.2-.7c0-.3-.1-.5-.2-.7-.1-.2-.3-.3-.6-.5s-.6-.3-1-.5l-.5-.2c-.2-.1-.5-.2-.7-.3-.2-.1-.5-.3-.7-.5-.2-.2-.4-.4-.5-.7-.1-.3-.2-.6-.2-.9 0-.4.1-.8.3-1.2.2-.4.5-.6.9-.8.4-.2.9-.3 1.4-.3.6 0 1 .1 1.4.3.4.2.7.4.9.7.2.3.4.5.4.8l-1.2.5c0-.2-.1-.3-.2-.5s-.3-.3-.5-.4c-.2-.1-.4-.2-.8-.2-.2 0-.5.1-.7.2-.2.1-.4.2-.5.4-.1.2-.2.3-.2.6s.1.6.4.8c.3.2.6.4 1.1.5l.6.2c.3.1.6.2.8.3.3.1.5.3.7.5.2.2.4.4.5.7.1.3.2.6.2 1s-.1.8-.3 1.2c-.2.3-.4.6-.7.8-.3.2-.6.3-.9.4s-.5.2-.8.2zM107 167.9v-8.6h1.3v8.6H107zm3.2 0v-8.6h1.8l2.5 6.5h.1l2.5-6.5h1.8v8.6h-1.3V163l.1-1.5h-.1l-2.5 6.4h-1l-2.5-6.4h-.1l.1 1.5v4.9h-1.4zm10.6 0v-8.6h3c.5 0 1 .1 1.4.3.4.2.8.5 1 .9.3.4.4.9.4 1.4 0 .5-.1 1-.4 1.4-.2.4-.6.7-1 .9-.4.2-.9.3-1.4.3h-2.2v-1.2h2.3c.3 0 .6-.1.8-.2.2-.1.4-.3.5-.5.1-.2.2-.4.2-.7 0-.2-.1-.4-.2-.7-.1-.2-.3-.4-.5-.5-.2-.1-.5-.2-.8-.2h-1.7v7.3h-1.4zm7.2 0v-8.6h3c.5 0 1 .1 1.4.3.4.2.7.5 1 .9.2.4.4.8.4 1.4 0 .3-.1.7-.2 1s-.3.6-.6.8c-.3.2-.6.4-1 .6-.4.1-.8.2-1.2.2h-2.1v-1.2h2.3c.3 0 .5-.1.7-.2.2-.1.4-.3.5-.5.1-.2.2-.5.2-.7 0-.2-.1-.5-.2-.7-.1-.2-.3-.4-.5-.5-.2-.1-.5-.2-.8-.2h-1.7v7.4H128zm2-4h1.5l2.7 3.9v.1h-1.5l-2.7-4zm9.3 4.1c-.6 0-1.2-.1-1.8-.3-.5-.2-1-.5-1.4-1-.4-.4-.7-.9-.9-1.4-.2-.5-.3-1.1-.3-1.8s.1-1.2.3-1.8c.2-.5.5-1 .9-1.4.4-.4.9-.7 1.4-1 .5-.2 1.1-.3 1.8-.3.6 0 1.2.1 1.8.3.5.2 1 .6 1.4 1 .4.4.7.9.9 1.4.2.5.3 1.1.3 1.8s-.1 1.2-.3 1.8c-.2.5-.5 1-.9 1.4-.4.4-.9.7-1.4 1-.6.2-1.2.3-1.8.3zm0-1.2c.6 0 1.1-.1 1.6-.4.5-.3.8-.7 1.1-1.1.3-.5.4-1.1.4-1.7 0-.6-.1-1.2-.4-1.7-.3-.5-.7-.9-1.1-1.1-.5-.3-1-.4-1.6-.4-.6 0-1.1.1-1.6.4-.5.3-.8.7-1.1 1.1-.3.5-.4 1-.4 1.7 0 .6.1 1.2.4 1.7.3.5.7.9 1.1 1.1.5.3 1 .4 1.6.4zm7.9 1.1-3-8.6h1.4l1.9 5.7.3 1h.1l.3-1 2-5.7h1.4l-3.1 8.6h-1.3zm5.6 0v-8.6h5.2v1.2h-3.9v6.1h3.9v1.2h-5.2zm.7-3.7V163h4.1v1.2h-4.1zm6.2 3.7v-8.6h1.8l2.5 6.5h.1l2.5-6.5h1.8v8.6H167V163l.1-1.5h-.1l-2.5 6.4h-1l-2.5-6.4h-.1l.1 1.5v4.9h-1.3zm10.6 0v-8.6h5.2v1.2h-3.9v6.1h3.9v1.2h-5.2zm.7-3.7V163h4.1v1.2H171zm6.1 3.7v-8.6h1.6l3.9 6.3h.1l-.1-1.7v-4.7h1.3v8.6h-1.4l-4.1-6.6h-.1l.1 1.7v5h-1.3zm10.5 0V160h1.3v7.9h-1.3zm-2.4-7.4v-1.2h6.1v1.2h-6.1z"></path><path class="st4" d="M200.6 137.1h96v38.4h-96v-38.4z"></path><path class="st2" d="M232.5 160.9v-8.6h3c.5 0 1 .1 1.4.3.4.2.8.5 1 .9.3.4.4.9.4 1.4 0 .5-.1 1-.4 1.4-.2.4-.6.7-1 .9-.4.2-.9.3-1.4.3h-2.2v-1.2h2.3c.3 0 .6-.1.8-.2.2-.1.4-.3.5-.5.1-.2.2-.4.2-.7 0-.2-.1-.4-.2-.7-.1-.2-.3-.4-.5-.5-.2-.1-.5-.2-.8-.2h-1.7v7.3h-1.4zm11 .1c-.6 0-1.2-.1-1.8-.3-.5-.2-1-.5-1.4-1-.4-.4-.7-.9-.9-1.4-.2-.5-.3-1.1-.3-1.8s.1-1.2.3-1.8c.2-.5.5-1 .9-1.4.4-.4.9-.7 1.4-1 .5-.2 1.1-.3 1.8-.3.6 0 1.2.1 1.8.3.5.2 1 .6 1.4 1 .4.4.7.9.9 1.4.2.5.3 1.1.3 1.8s-.1 1.2-.3 1.8c-.2.5-.5 1-.9 1.4-.4.4-.9.7-1.4 1-.5.2-1.1.3-1.8.3zm0-1.2c.6 0 1.1-.1 1.6-.4.5-.3.8-.7 1.1-1.1.3-.5.4-1.1.4-1.7 0-.6-.1-1.2-.4-1.7-.3-.5-.7-.9-1.1-1.1-.5-.3-1-.4-1.6-.4-.6 0-1.1.1-1.6.4-.5.3-.8.7-1.1 1.1-.3.5-.4 1-.4 1.7 0 .6.1 1.2.4 1.7.3.5.7.9 1.1 1.1.6.3 1.1.4 1.6.4zm9.9 1.2c-.6 0-1.2-.1-1.8-.3-.5-.2-1-.5-1.4-1-.4-.4-.7-.9-.9-1.4-.2-.5-.3-1.1-.3-1.8s.1-1.2.3-1.8c.2-.5.5-1 .9-1.4.4-.4.9-.7 1.4-1 .5-.2 1.1-.3 1.8-.3.6 0 1.2.1 1.8.3.5.2 1 .6 1.4 1 .4.4.7.9.9 1.4.2.5.3 1.1.3 1.8s-.1 1.2-.3 1.8c-.2.5-.5 1-.9 1.4-.4.4-.9.7-1.4 1-.6.2-1.1.3-1.8.3zm0-1.2c.6 0 1.1-.1 1.6-.4.5-.3.8-.7 1.1-1.1.3-.5.4-1.1.4-1.7 0-.6-.1-1.2-.4-1.7-.3-.5-.7-.9-1.1-1.1-.5-.3-1-.4-1.6-.4-.6 0-1.1.1-1.6.4-.5.3-.8.7-1.1 1.1-.3.5-.4 1-.4 1.7 0 .6.1 1.2.4 1.7.3.5.7.9 1.1 1.1.5.3 1 .4 1.6.4zm6 1.1v-8.6h3c.5 0 1 .1 1.4.3.4.2.7.5 1 .9.2.4.4.8.4 1.4 0 .3-.1.7-.2 1s-.3.6-.6.8c-.3.2-.6.4-1 .6-.4.1-.8.2-1.2.2h-2.1v-1.2h2.3c.3 0 .5-.1.7-.2.2-.1.4-.3.5-.5.1-.2.2-.5.2-.7 0-.2-.1-.5-.2-.7-.1-.2-.3-.4-.5-.5-.2-.1-.5-.2-.8-.2h-1.7v7.4h-1.2zm2-4h1.5l2.7 3.9v.1H264l-2.6-4zM178.1 219.9c-.5 0-1-.1-1.5-.3-.5-.2-1-.5-1.4-1-.4-.4-.7-1-.8-1.7l1.5-.6c.1.6.4 1 .8 1.4.4.4.9.5 1.4.5.6 0 1.1-.2 1.5-.6.4-.4.6-.9.6-1.5s-.2-1.1-.6-1.5c-.4-.4-.9-.6-1.5-.6-.4 0-.7.1-1 .2-.3.1-.5.4-.7.6l-1.7-.8.7-5.5h5.9v1.6h-4.5l-.4 2.9h.1c.2-.2.5-.3.8-.5.3-.1.7-.2 1.2-.2.6 0 1.2.2 1.7.5s1 .7 1.3 1.3c.3.5.5 1.2.5 1.9s-.2 1.3-.5 1.9c-.3.6-.8 1-1.3 1.3-.7.5-1.4.7-2.1.7zm9.9 0c-.7 0-1.3-.1-1.9-.4-.5-.3-1-.7-1.4-1.2-.4-.5-.7-1.1-.9-1.8-.2-.7-.3-1.4-.3-2.2 0-.8.1-1.6.3-2.2.2-.7.5-1.3.9-1.8s.9-.9 1.4-1.2c.6-.3 1.2-.5 1.9-.5s1.3.2 1.9.5c.6.3 1 .7 1.4 1.2.4.5.7 1.1.9 1.8.2.7.3 1.4.3 2.2 0 .8-.1 1.6-.3 2.2-.2.7-.5 1.3-.9 1.8s-.9.9-1.4 1.2c-.6.2-1.2.4-1.9.4zm.1-1.7c.6 0 1-.2 1.5-.5.4-.4.7-.9 1-1.5.2-.6.3-1.3.3-2.1s-.1-1.5-.3-2.1c-.2-.6-.5-1.1-1-1.5-.4-.4-.9-.5-1.5-.5s-1.1.2-1.5.5c-.4.4-.7.8-.9 1.5-.2.6-.3 1.3-.3 2.1s.1 1.5.3 2.1c.2.6.5 1.1.9 1.5.4.3.9.5 1.5.5zm10.5 1.7c-.7 0-1.3-.1-1.9-.4-.5-.3-1-.7-1.4-1.2-.4-.5-.7-1.1-.9-1.8-.2-.7-.3-1.4-.3-2.2 0-.8.1-1.6.3-2.2.2-.7.5-1.3.9-1.8s.9-.9 1.4-1.2c.6-.3 1.2-.5 1.9-.5s1.3.2 1.9.5c.6.3 1 .7 1.4 1.2.4.5.7 1.1.9 1.8.2.7.3 1.4.3 2.2 0 .8-.1 1.6-.3 2.2-.2.7-.5 1.3-.9 1.8s-.9.9-1.4 1.2c-.6.2-1.2.4-1.9.4zm0-1.7c.6 0 1-.2 1.5-.5.4-.4.7-.9 1-1.5.2-.6.3-1.3.3-2.1s-.1-1.5-.3-2.1c-.2-.6-.5-1.1-1-1.5-.4-.4-.9-.5-1.5-.5s-1.1.2-1.5.5c-.4.4-.7.8-.9 1.5-.2.6-.3 1.3-.3 2.1s.1 1.5.3 2.1c.2.6.5 1.1.9 1.5.4.3.9.5 1.5.5zm10 1.4v-8.2h1.6v1.1h.1c.2-.3.4-.5.6-.7.3-.2.6-.4.9-.5.3-.1.7-.2 1-.2.6 0 1.1.1 1.5.4.4.3.7.7.9 1.1.3-.4.6-.8 1.1-1.1.5-.3 1-.5 1.7-.5 1 0 1.7.3 2.1.9.5.6.7 1.4.7 2.3v5.2h-1.7v-4.9c0-.7-.1-1.1-.4-1.4-.3-.3-.7-.5-1.2-.5-.4 0-.7.1-1 .3-.3.2-.5.5-.7.9-.2.4-.2.8-.2 1.2v4.4h-1.7v-4.9c0-.7-.1-1.1-.4-1.4-.3-.3-.7-.5-1.2-.5-.4 0-.7.1-1 .3-.3.2-.5.5-.7.9-.2.4-.2.8-.2 1.2v4.4h-1.8zm17.2.3c-.6 0-1.2-.1-1.7-.3-.5-.2-.9-.5-1.2-.8-.3-.3-.5-.7-.7-1.1l1.5-.7c.2.4.5.8.8 1 .4.2.8.3 1.2.3.4 0 .8-.1 1.1-.2.3-.2.5-.4.5-.8 0-.2-.1-.4-.2-.6-.1-.1-.3-.3-.6-.4-.2-.1-.5-.2-.8-.2l-1-.2c-.4-.1-.8-.3-1.1-.5-.3-.2-.6-.5-.8-.8-.2-.3-.3-.7-.3-1.1 0-.5.1-.9.4-1.3.3-.4.7-.6 1.1-.8.5-.2 1-.3 1.6-.3.5 0 1 .1 1.4.2.4.1.8.3 1.1.6.3.3.6.6.8 1l-1.5.7c-.2-.4-.4-.6-.7-.8-.3-.1-.6-.2-1-.2s-.7.1-1 .2c-.3.2-.4.4-.4.6 0 .3.1.5.4.7.2.2.5.3.9.4l1.2.3c.8.2 1.4.5 1.8.9.4.4.6.9.6 1.5 0 .5-.2 1-.5 1.4-.3.4-.7.7-1.2.9-.6.2-1.1.4-1.7.4zM69 220v-1.6s.2-.1.4-.4c.2-.2.5-.5.8-.9l1.1-1.1 1-1c.3-.3.5-.6.7-.8.3-.3.5-.6.7-.8.2-.2.3-.5.4-.7.1-.2.1-.5.1-.8 0-.3-.1-.5-.2-.8-.1-.3-.3-.4-.6-.6-.3-.1-.6-.2-1-.2s-.7.1-1 .2c-.3.1-.5.3-.6.6-.1.2-.3.4-.3.7l-1.5-.6c.1-.3.2-.5.4-.8.2-.3.4-.5.7-.8.3-.3.6-.5 1-.6.4-.2.9-.3 1.4-.2.7 0 1.3.2 1.9.5.5.3.9.7 1.2 1.2.3.5.4 1 .4 1.6 0 .5-.1.9-.2 1.3-.2.4-.4.8-.7 1.2-.3.4-.5.7-.8 1l-.5.5c-.2.2-.4.5-.7.7l-.7.7-.6.6-.4.4h4.8v1.6H69zm13.2.2c-.7 0-1.3-.1-1.9-.4-.5-.3-1-.7-1.4-1.2-.4-.5-.7-1.1-.9-1.8-.2-.7-.3-1.4-.3-2.2 0-.8.1-1.6.3-2.2.2-.7.5-1.3.9-1.8s.9-.9 1.4-1.2c.6-.3 1.2-.5 1.9-.5s1.3.2 1.9.5c.6.3 1 .7 1.4 1.2.4.5.7 1.1.9 1.8.2.7.3 1.4.3 2.2 0 .8-.1 1.6-.3 2.2-.2.7-.5 1.3-.9 1.8s-.9.9-1.4 1.2c-.6.3-1.2.4-1.9.4zm0-1.6c.6 0 1-.2 1.5-.5.4-.4.7-.9 1-1.5.2-.6.3-1.3.3-2.1s-.1-1.5-.3-2.1c-.2-.6-.5-1.1-1-1.5-.4-.4-.9-.5-1.5-.5s-1.1.2-1.5.5c-.4.4-.7.8-.9 1.5-.2.6-.3 1.3-.3 2.1s.1 1.5.3 2.1c.2.6.5 1.1.9 1.5.4.3.9.5 1.5.5zm10.5 1.6c-.7 0-1.3-.1-1.9-.4-.5-.3-1-.7-1.4-1.2-.4-.5-.7-1.1-.9-1.8-.2-.7-.3-1.4-.3-2.2 0-.8.1-1.6.3-2.2.2-.7.5-1.3.9-1.8s.9-.9 1.4-1.2c.6-.3 1.2-.5 1.9-.5s1.3.2 1.9.5c.6.3 1 .7 1.4 1.2.4.5.7 1.1.9 1.8.2.7.3 1.4.3 2.2 0 .8-.1 1.6-.3 2.2-.2.7-.5 1.3-.9 1.8s-.9.9-1.4 1.2c-.6.3-1.2.4-1.9.4zm0-1.6c.6 0 1-.2 1.5-.5.4-.4.7-.9 1-1.5.2-.6.3-1.3.3-2.1s-.1-1.5-.3-2.1c-.2-.6-.5-1.1-1-1.5-.4-.4-.9-.5-1.5-.5s-1.1.2-1.5.5c-.4.4-.7.8-.9 1.5-.2.6-.3 1.3-.3 2.1s.1 1.5.3 2.1c.2.6.5 1.1.9 1.5.5.3 1 .5 1.5.5zm10 1.4v-8.2h1.6v1.1h.1c.2-.3.4-.5.6-.7.3-.2.6-.4.9-.5.3-.1.7-.2 1-.2.6 0 1.1.1 1.5.4.4.3.7.7.9 1.1.3-.4.6-.8 1.1-1.1.5-.3 1-.5 1.7-.5 1 0 1.7.3 2.1.9.5.6.7 1.4.7 2.3v5.2h-1.7v-4.9c0-.7-.1-1.1-.4-1.4-.3-.3-.7-.5-1.2-.5-.4 0-.7.1-1 .3-.3.2-.5.5-.7.9-.2.4-.2.8-.2 1.2v4.4H108v-4.9c0-.7-.1-1.1-.4-1.4-.3-.3-.7-.5-1.2-.5-.4 0-.7.1-1 .3-.3.2-.5.5-.7.9-.2.4-.2.8-.2 1.2v4.4h-1.8zm17.2.2c-.6 0-1.2-.1-1.7-.3-.5-.2-.9-.5-1.2-.8-.3-.3-.5-.7-.7-1.1l1.5-.7c.2.4.5.8.8 1 .4.2.8.3 1.2.3.4 0 .8-.1 1.1-.2.3-.2.5-.4.5-.8 0-.2-.1-.4-.2-.6-.1-.1-.3-.3-.6-.4-.2-.1-.5-.2-.8-.2l-1-.2c-.4-.1-.8-.3-1.1-.5-.3-.2-.6-.5-.8-.8-.2-.3-.3-.7-.3-1.1 0-.5.1-.9.4-1.3.3-.4.7-.6 1.1-.8.5-.2 1-.3 1.6-.3.5 0 1 .1 1.4.2.4.1.8.3 1.1.6.3.3.6.6.8 1l-1.5.7c-.2-.4-.4-.6-.7-.8-.3-.1-.6-.2-1-.2s-.7.1-1 .2c-.3.2-.4.4-.4.6 0 .3.1.5.4.7.2.2.5.3.9.4l1.2.3c.8.2 1.4.5 1.8.9.4.4.6.9.6 1.5 0 .5-.2 1-.5 1.4-.3.4-.7.7-1.2.9-.5.3-1.1.4-1.7.4zM42.4 96.3V82h1.7v14.3h-1.7zm4.6 0V86.1h1.6v1.5h.1c.3-.5.7-.9 1.3-1.3.6-.4 1.3-.5 2-.5 1.2 0 2.2.4 2.8 1.1.6.7 1 1.7 1 2.9v6.5h-1.7V90c0-1-.2-1.7-.7-2.1-.5-.4-1.1-.6-1.8-.6-.6 0-1.1.2-1.5.5-.4.3-.8.7-1 1.2-.2.5-.4 1-.4 1.6v5.7H47zm10-10.2h6v1.5h-6v-1.5zm1.8 7.5V83.3h1.7v10c0 .5.1.9.3 1.2s.6.4 1.1.4c.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.5-.6-.7-1.3-.7-2.2zm10.3 3c-1 0-1.9-.2-2.6-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.6-1.7-.6-2.8 0-1 .2-1.9.6-2.7s1-1.5 1.7-2 1.6-.8 2.6-.8 1.9.2 2.6.7c.7.4 1.3 1.1 1.7 1.8.4.8.6 1.7.6 2.7v.5H65V90h7c0-.3-.1-.6-.2-.9-.1-.3-.3-.6-.5-.9-.2-.3-.6-.5-.9-.7-.4-.2-.8-.3-1.4-.3-.7 0-1.2.2-1.7.5s-.8.8-1.1 1.4c-.3.6-.4 1.2-.4 2 0 .9.2 1.6.5 2.2.3.6.8 1 1.3 1.3.5.3 1.1.4 1.7.4.8 0 1.4-.2 1.8-.5.5-.4.9-.8 1.2-1.3l1.4.7c-.4.8-1 1.4-1.7 1.9-.9.6-1.8.8-2.9.8zm6.7-.3V86.1h1.6v1.6h.1c.1-.4.4-.7.7-1 .3-.3.7-.5 1.1-.7s.8-.2 1.2-.2h.7c.2 0 .3.1.5.2v1.8c-.2-.1-.5-.2-.7-.2-.2-.1-.5-.1-.7-.1-.5 0-1 .1-1.4.4-.4.3-.7.7-1 1.1-.2.5-.4 1-.4 1.5v5.7h-1.7zm10.4.3c-.8 0-1.4-.1-2-.4s-1-.7-1.3-1.2c-.3-.5-.5-1.1-.5-1.8 0-.8.2-1.4.6-1.9.4-.5.9-.9 1.5-1.2.7-.3 1.4-.4 2.2-.4.4 0 .9 0 1.2.1s.7.2 1 .3c.3.1.5.2.7.3v-.6c0-.8-.3-1.4-.8-1.8-.5-.5-1.2-.7-2-.7-.6 0-1.1.1-1.6.4-.5.2-.9.6-1.1 1l-1.3-1c.3-.4.6-.7 1-1 .4-.3.9-.5 1.4-.7.5-.2 1.1-.2 1.6-.2 1.4 0 2.5.4 3.2 1.1.8.7 1.2 1.7 1.2 3v6.5h-1.6v-1.5h-.1c-.2.3-.4.6-.7.8s-.7.5-1.1.7c-.5.2-1 .2-1.5.2zm.1-1.5c.6 0 1.1-.1 1.6-.4.5-.3.9-.7 1.2-1.2.3-.5.5-1 .5-1.6-.3-.2-.7-.4-1.2-.5s-1-.2-1.5-.2c-1 0-1.7.2-2.1.6-.4.4-.7.9-.7 1.5s.2 1 .6 1.4 1 .4 1.6.4zm11.8 1.5c-1 0-1.9-.2-2.7-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.7-1.7-.7-2.8 0-1 .2-2 .7-2.8.4-.8 1.1-1.5 1.8-1.9.8-.5 1.7-.7 2.7-.7 1.1 0 2.1.3 2.8.8.7.5 1.3 1.2 1.6 2l-1.5.6c-.2-.6-.6-1.1-1.1-1.4-.5-.3-1.1-.5-1.8-.5-.6 0-1.2.2-1.7.5s-.9.8-1.2 1.4c-.3.6-.5 1.3-.5 2 0 .8.2 1.4.5 2 .3.6.7 1 1.2 1.4.5.3 1.1.5 1.7.5.7 0 1.3-.2 1.9-.5s.9-.8 1.2-1.4l1.5.6c-.3.8-.9 1.5-1.6 2s-1.9.8-3 .8zm5.5-10.5h6v1.5h-6v-1.5zm1.7 7.5V83.3h1.7v10c0 .5.1.9.3 1.2s.6.4 1.1.4c.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8s-.7-1.3-.7-2.2zm6.5 2.7V86.1h1.7v10.2h-1.7zm.9-12c-.3 0-.6-.1-.9-.4s-.4-.5-.4-.9c0-.3.1-.6.4-.9.2-.2.5-.4.9-.4.3 0 .6.1.9.4.2.2.4.5.4.9 0 .3-.1.6-.4.9-.3.2-.6.4-.9.4zm8.1 12.3c-1 0-1.9-.2-2.7-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.7-1.7-.7-2.8 0-1 .2-1.9.7-2.8.4-.8 1.1-1.5 1.8-2 .8-.5 1.7-.7 2.7-.7 1 0 1.9.2 2.7.7.8.5 1.4 1.1 1.9 2s.7 1.7.7 2.7c0 1-.2 1.9-.7 2.8-.4.8-1.1 1.5-1.9 1.9-.8.6-1.7.8-2.7.8zm0-1.5c.6 0 1.2-.2 1.7-.5s1-.8 1.3-1.3c.3-.6.5-1.3.5-2.1s-.2-1.5-.5-2.1-.8-1-1.3-1.3c-.5-.3-1.1-.5-1.7-.5-.6 0-1.2.2-1.7.5s-1 .7-1.3 1.3-.5 1.3-.5 2.1.2 1.5.5 2.1c.3.6.8 1 1.3 1.3.5.4 1.1.5 1.7.5zm7 1.2V86.1h1.6v1.5h.1c.3-.5.7-.9 1.3-1.3.6-.4 1.3-.5 2-.5 1.2 0 2.2.4 2.8 1.1.6.7 1 1.7 1 2.9v6.5h-1.7V90c0-1-.2-1.7-.7-2.1-.5-.4-1.1-.6-1.8-.6-.6 0-1.1.2-1.5.5-.4.3-.8.7-1 1.2-.2.5-.4 1-.4 1.6v5.7h-1.7zM143 86.1h6v1.5h-6v-1.5zm1.7 7.5V83.3h1.7v10c0 .5.1.9.3 1.2s.6.4 1.1.4c.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.4-.6-.7-1.3-.7-2.2zm10.5 3c-1 0-1.9-.2-2.7-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.7-1.7-.7-2.8 0-1 .2-1.9.7-2.8.4-.8 1.1-1.5 1.8-2 .8-.5 1.7-.7 2.7-.7 1 0 1.9.2 2.7.7.8.5 1.4 1.1 1.9 2 .4.8.7 1.7.7 2.7 0 1-.2 1.9-.7 2.8-.4.8-1.1 1.5-1.9 1.9-.8.6-1.7.8-2.7.8zm0-1.5c.6 0 1.2-.2 1.7-.5s1-.8 1.3-1.3c.3-.6.5-1.3.5-2.1s-.2-1.5-.5-2.1c-.3-.6-.8-1-1.3-1.3-.5-.3-1.1-.5-1.7-.5-.6 0-1.2.2-1.7.5s-1 .7-1.3 1.3c-.3.6-.5 1.3-.5 2.1s.2 1.5.5 2.1c.3.6.8 1 1.3 1.3.5.4 1.1.5 1.7.5zm12.2 1.2V82h2.1l7.2 11.4h.1l-.1-2.8V82h1.7v14.3h-1.8l-7.5-11.9h-.1l.1 2.8v9.2h-1.7zm18.2.3c-1 0-1.9-.2-2.6-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.6-1.7-.6-2.8 0-1 .2-1.9.6-2.7.4-.8 1-1.5 1.7-2s1.6-.8 2.6-.8 1.9.2 2.6.7c.7.4 1.3 1.1 1.7 1.8.4.8.6 1.7.6 2.7v.5h-8.8V90h7c0-.3-.1-.6-.2-.9-.1-.3-.3-.6-.5-.9-.2-.3-.6-.5-.9-.7-.4-.2-.8-.3-1.4-.3-.7 0-1.2.2-1.7.5s-.8.8-1.1 1.4c-.3.6-.4 1.2-.4 2 0 .9.2 1.6.5 2.2.3.6.8 1 1.3 1.3.5.3 1.1.4 1.7.4.8 0 1.4-.2 1.8-.5.5-.4.9-.8 1.2-1.3l1.4.7c-.4.8-1 1.4-1.7 1.9-1 .6-1.9.8-3 .8zm5.5-.3 4.1-5.9h.2l2.9-4.3h2l-4 5.6h-.1l-3.1 4.6h-2zm.1-10.2h1.9l3.2 4.5h.1l4 5.7h-2l-3-4.5h-.1l-4.1-5.7zm9.9 0h6v1.5h-6v-1.5zm1.8 7.5V83.3h1.7v10c0 .5.1.9.3 1.2.2.3.6.4 1.1.4.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.4-.6-.7-1.3-.7-2.2zm11.2 2.7V82h4.8c.8 0 1.5.2 2.2.5.7.4 1.2.8 1.6 1.5.4.6.6 1.4.6 2.2 0 .8-.2 1.6-.6 2.2-.4.6-.9 1.1-1.6 1.5-.7.4-1.4.5-2.2.5H215v-1.6h4c.6 0 1-.1 1.4-.4.4-.3.7-.6.9-1 .2-.4.3-.8.3-1.2s-.1-.8-.3-1.2c-.2-.4-.5-.7-.9-1-.4-.3-.9-.4-1.4-.4h-3.2v12.7h-1.7zm14.1.3c-.8 0-1.4-.1-2-.4s-1-.7-1.3-1.2-.5-1.1-.5-1.8c0-.8.2-1.4.6-1.9s.9-.9 1.5-1.2c.7-.3 1.4-.4 2.2-.4.4 0 .9 0 1.2.1s.7.2 1 .3c.3.1.5.2.7.3v-.6c0-.8-.3-1.4-.8-1.8-.5-.5-1.2-.7-2-.7-.6 0-1.1.1-1.6.4-.5.2-.9.6-1.1 1l-1.3-1c.3-.4.6-.7 1-1 .4-.3.9-.5 1.4-.7s1.1-.2 1.6-.2c1.4 0 2.5.4 3.2 1.1.8.7 1.2 1.7 1.2 3v6.5h-1.6v-1.5h-.1c-.2.3-.4.6-.7.8s-.7.5-1.1.7c-.6.2-1 .2-1.5.2zm.1-1.5c.6 0 1.1-.1 1.6-.4.5-.3.9-.7 1.2-1.2.3-.5.5-1 .5-1.6-.3-.2-.7-.4-1.2-.5s-1-.2-1.5-.2c-1 0-1.7.2-2.1.6-.4.4-.7.9-.7 1.5s.2 1 .6 1.4 1 .4 1.6.4zm7.4 1.2V86.1h1.7v10.2h-1.7zm.8-12c-.3 0-.6-.1-.9-.4s-.4-.5-.4-.9c0-.3.1-.6.4-.9.2-.2.5-.4.9-.4.3 0 .6.1.9.4.2.2.4.5.4.9 0 .3-.1.6-.4.9-.2.2-.5.4-.9.4zm3.5 12V86.1h1.6v1.5h.1c.3-.5.7-.9 1.3-1.3.6-.4 1.3-.5 2-.5 1.2 0 2.2.4 2.8 1.1.6.7 1 1.7 1 2.9v6.5h-1.7V90c0-1-.2-1.7-.7-2.1-.5-.4-1.1-.6-1.8-.6-.6 0-1.1.2-1.5.5-.4.3-.8.7-1 1.2-.2.5-.4 1-.4 1.6v5.7H240zm10.1-10.2h6v1.5h-6v-1.5zm1.7 7.5V83.3h1.7v10c0 .5.1.9.3 1.2s.6.4 1.1.4c.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8s-.7-1.3-.7-2.2zM96 172.8c-2.4 0-4.3 1.9-4.3 4.3 0 2 1.4 3.7 3.3 4.2v20.1h2v-20.1c1.9-.5 3.3-2.1 3.3-4.2 0-2.3-1.9-4.3-4.3-4.3zM201.6 172.6c-2.4 0-4.3 1.9-4.3 4.3 0 2 1.4 3.7 3.3 4.2v19.8h2v-19.8c1.9-.5 3.3-2.1 3.3-4.2 0-2.4-1.9-4.3-4.3-4.3z"></path></svg>
  <svg title="A diagram of the INP thresholds. An INP at or below 200 milliseconds is considered good. Between 200 and 500 milliseconds suggests a page's responsiveness needs improvement. Anything over 500 milliseconds means that a page's responsiveness is poor." class="inp-desktop" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0" y="0" viewBox="0 0 658.4 113.6" style="enable-background:new 0 0 658.4 113.6" xml:space="preserve"><style>.st0{填充：#2979FF} v.st1{填充规则：evenodd；剪辑规则：evenodd；填充：#0CCE6B} .st2 {填充：#191919} .st3{填充规则：evenodd；剪辑规则： Evenodd;fill: #FFA400} .st4{fill-rule:evenodd;clip-rule:evenodd;fill:#FF4E42} @media screen 和 (prefers-color-scheme: light){.st2{fill: #191919}} @media screen and (prefers-color-scheme: dark){.st2{fill: #fff}} [data-user-theme=dark] .st2{fill: #fff}</style><path class="st0" d="M30.2 68.7V0h13v68.7h-13zm28.7 0V0H74l27.7 46.1h.8l-.8-13.2V0h12.9v68.7H101L71.7 20.1h-.8l.8 13.2v35.4H58.9zm71.3 0V0h24.2c4.4 0 8.4.9 11.9 2.7 3.5 1.8 6.3 4.4 8.4 7.6 2.1 3.3 3.1 7 3.1 11.3 0 4.3-1 8.1-3.1 11.4-2.1 3.3-4.9 5.8-8.4 7.7-3.5 1.8-7.5 2.7-11.9 2.7h-17V31.2h17.4c2.2 0 4.1-.4 5.7-1.3 1.5-.9 2.7-2.1 3.5-3.5.8-1.4 1.2-3 1.2-4.7 0-1.7-.4-3.2-1.2-4.6-.8-1.4-1.9-2.6-3.5-3.5-1.5-.9-3.4-1.3-5.7-1.3h-11.6v56.5h-13z"></path><path class="st1" d="M303.2 14.9h115.2v43.2H303.2V14.9z"></path><path class="st2" d="M345.3 41.5c-.7 0-1.3-.1-1.9-.4-.6-.2-1.1-.6-1.6-1s-.8-1-1.1-1.6c-.3-.6-.4-1.3-.4-2s.1-1.4.4-2c.3-.6.6-1.1 1.1-1.6.5-.5 1-.8 1.6-1 .6-.2 1.2-.4 1.9-.4s1.4.1 2 .4c.6.2 1.1.6 1.6 1.1l-1 1c-.2-.2-.4-.4-.7-.6-.3-.2-.5-.3-.9-.4-.3-.1-.6-.1-1-.1-.5 0-.9.1-1.3.3-.4.2-.8.4-1.1.7-.3.3-.6.7-.8 1.1-.2.4-.3.9-.3 1.5s.1 1 .3 1.5c.2.4.5.8.8 1.1.3.3.7.6 1.1.7.4.2.9.2 1.3.2s.8-.1 1.2-.2c.4-.1.7-.3 1-.5.3-.2.5-.5.7-.8.2-.3.3-.7.3-1.1h-3.3v-1.3h4.6v.8c0 .7-.1 1.3-.4 1.9-.2.6-.6 1-1 1.5-.4.4-.9.7-1.5.9-.3.2-.9.3-1.6.3zm10.5 0c-.7 0-1.4-.1-2-.4-.6-.3-1.1-.6-1.6-1.1-.4-.5-.8-1-1-1.6-.2-.6-.4-1.2-.4-1.9s.1-1.3.4-1.9c.2-.6.6-1.1 1-1.6s1-.8 1.6-1.1c.6-.3 1.3-.4 2-.4s1.4.1 2 .4c.6.2 1.1.6 1.6 1.1.5.5.8 1 1 1.6.2.6.4 1.2.4 1.9s-.1 1.3-.4 1.9c-.2.6-.6 1.1-1 1.6s-1 .8-1.6 1.1-1.2.4-2 .4zm0-1.4c.6 0 1.2-.2 1.8-.5.5-.3.9-.7 1.2-1.3s.5-1.2.5-1.9-.2-1.3-.5-1.9-.7-1-1.2-1.3c-.5-.3-1.1-.5-1.8-.5-.6 0-1.2.2-1.8.5-.5.3-.9.7-1.2 1.3s-.5 1.2-.5 1.9.2 1.3.5 1.9.7 1 1.2 1.3c.6.4 1.2.5 1.8.5zm11 1.4c-.7 0-1.4-.1-2-.4-.6-.3-1.1-.6-1.6-1.1-.4-.5-.8-1-1-1.6-.2-.6-.4-1.2-.4-1.9s.1-1.3.4-1.9c.2-.6.6-1.1 1-1.6s1-.8 1.6-1.1c.6-.3 1.3-.4 2-.4s1.4.1 2 .4c.6.2 1.1.6 1.6 1.1.5.5.8 1 1 1.6.2.6.4 1.2.4 1.9s-.1 1.3-.4 1.9c-.2.6-.6 1.1-1 1.6s-1 .8-1.6 1.1-1.3.4-2 .4zm0-1.4c.6 0 1.2-.2 1.8-.5.5-.3.9-.7 1.2-1.3s.5-1.2.5-1.9-.2-1.3-.5-1.9-.7-1-1.2-1.3c-.5-.3-1.1-.5-1.8-.5-.6 0-1.2.2-1.8.5-.5.3-.9.7-1.2 1.3s-.5 1.2-.5 1.9.2 1.3.5 1.9.7 1 1.2 1.3c.6.4 1.2.5 1.8.5zm6.6 1.2v-9.5h3c1 0 1.9.2 2.6.6.7.4 1.3 1 1.7 1.7s.6 1.5.6 2.5c0 .9-.2 1.8-.6 2.5s-1 1.3-1.7 1.7c-.7.4-1.6.6-2.6.6h-3zm1.5-1.4h1.5c.7 0 1.3-.1 1.8-.4.5-.3.9-.7 1.2-1.2.3-.5.4-1.1.4-1.8s-.1-1.3-.4-1.8c-.3-.5-.7-.9-1.2-1.2-.5-.3-1.1-.4-1.8-.4h-1.5v6.8z"></path><path class="st3" d="M418.4 14.9h124.8v43.2H418.4V14.9z"></path><path class="st2" d="M460.8 33.3v-9.5h1.7l4.3 7h.1l-.1-1.8v-5.2h1.5v9.5h-1.5l-4.5-7.4h-.1l.1 1.8v5.5h-1.5zm9.7 0v-9.5h5.8v1.4H472V32h4.3v1.4h-5.8zm.7-4.1v-1.4h4.6v1.4h-4.6zm6.9 4.1v-9.5h5.8v1.4h-4.3V32h4.3v1.4h-5.8zm.8-4.1v-1.4h4.6v1.4h-4.6zm6.8 4.1v-9.5h3c1 0 1.9.2 2.6.6.7.4 1.3 1 1.7 1.7s.6 1.5.6 2.5c0 .9-.2 1.8-.6 2.5s-1 1.3-1.7 1.7c-.7.4-1.6.6-2.6.6h-3zm1.5-1.4h1.5c.7 0 1.3-.1 1.8-.4.5-.3.9-.7 1.2-1.2.3-.5.4-1.1.4-1.8s-.1-1.3-.4-1.8c-.3-.5-.7-.9-1.2-1.2-.5-.3-1.1-.4-1.8-.4h-1.5v6.8zm10.9 1.6c-.5 0-1-.1-1.5-.3-.5-.2-.9-.5-1.2-.9-.3-.4-.6-.9-.8-1.5l1.4-.6c.1.5.4.9.8 1.3.4.3.8.5 1.3.5.3 0 .6-.1.8-.2.3-.1.5-.3.6-.5.2-.2.2-.5.2-.8 0-.3-.1-.5-.2-.7-.1-.2-.3-.4-.6-.5-.3-.2-.7-.3-1.1-.5l-.6-.2c-.3-.1-.5-.2-.8-.4-.3-.1-.5-.3-.7-.5-.2-.2-.4-.5-.5-.7-.1-.3-.2-.6-.2-1 0-.5.1-.9.4-1.3.2-.4.6-.7 1-.9.4-.2 1-.4 1.6-.4.6 0 1.1.1 1.5.3.4.2.7.5 1 .8.2.3.4.6.5.9l-1.3.6c-.1-.2-.2-.4-.3-.5-.1-.2-.3-.3-.5-.4-.2-.1-.5-.2-.8-.2-.3 0-.5.1-.8.2-.2.1-.4.2-.6.4-.1.2-.2.4-.2.6 0 .3.1.6.4.8s.7.4 1.2.6l.6.2c.3.1.6.2.9.4.3.1.6.3.8.6.2.2.4.5.6.8.1.3.2.7.2 1.2s-.1.9-.3 1.3c-.2.4-.4.6-.8.9-.3.2-.7.4-1 .5-.3 0-.7.1-1 .1zM434.4 49.3v-9.5h1.5v9.5h-1.5zm3.6 0v-9.5h2l2.8 7.3h.1l2.8-7.3h2v9.5h-1.4v-5.4l.1-1.7h-.1l-2.8 7.1h-1.2l-2.8-7.1h-.1l.1 1.7v5.4H438zm11.7 0v-9.5h3.3c.6 0 1.1.1 1.6.4.5.2.9.6 1.1 1 .3.4.4.9.4 1.5s-.1 1.1-.4 1.5c-.3.4-.7.8-1.1 1-.5.2-1 .4-1.6.4h-2.5v-1.4h2.5c.4 0 .7-.1.9-.2.2-.1.4-.3.5-.6.1-.2.2-.5.2-.8 0-.3-.1-.5-.2-.7-.1-.2-.3-.4-.5-.6-.2-.2-.5-.2-.9-.2h-1.8v8.2h-1.5zm8 0v-9.5h3.3c.6 0 1.1.1 1.6.4.5.2.8.6 1.1 1s.4.9.4 1.5c0 .4-.1.8-.2 1.1s-.4.7-.7.9c-.3.3-.6.5-1 .6-.4.1-.9.2-1.4.2h-2.3v-1.3h2.5c.3 0 .6-.1.8-.2.2-.1.4-.3.6-.6.2-.2.2-.5.2-.8 0-.3-.1-.5-.2-.7-.1-.2-.3-.4-.5-.6-.2-.1-.5-.2-.9-.2h-1.9v8.2h-1.4zm2.2-4.4h1.7l3 4.3v.1h-1.7l-3-4.4zm10.3 4.6c-.7 0-1.4-.1-2-.4-.6-.3-1.1-.6-1.6-1.1-.4-.5-.8-1-1-1.6-.2-.6-.4-1.2-.4-1.9s.1-1.3.4-1.9c.2-.6.6-1.1 1-1.6s1-.8 1.6-1.1c.6-.3 1.3-.4 2-.4s1.4.1 2 .4c.6.2 1.1.6 1.6 1.1.5.5.8 1 1 1.6.2.6.4 1.2.4 1.9s-.1 1.3-.4 1.9c-.2.6-.6 1.1-1 1.6s-1 .8-1.6 1.1c-.6.3-1.2.4-2 .4zm0-1.4c.6 0 1.2-.2 1.8-.5.5-.3.9-.7 1.2-1.3.3-.5.5-1.2.5-1.9s-.2-1.3-.5-1.9c-.3-.5-.7-1-1.2-1.3-.5-.3-1.1-.5-1.8-.5s-1.2.2-1.8.5c-.5.3-.9.7-1.2 1.3-.3.5-.5 1.2-.5 1.9s.2 1.3.5 1.9c.3.5.7 1 1.2 1.3.6.4 1.2.5 1.8.5zm8.8 1.2-3.4-9.5h1.6l2.2 6.3.3 1.1h.1l.4-1.1 2.2-6.3h1.6l-3.5 9.5H479zm6.2 0v-9.5h5.8v1.4h-4.3V48h4.3v1.4h-5.8zm.8-4.1v-1.4h4.6v1.4H486zm6.8 4.1v-9.5h2l2.8 7.3h.1l2.8-7.3h2v9.5H501v-5.4l.1-1.7h-.1l-2.8 7.1H497l-2.8-7.1h-.1l.1 1.7v5.4h-1.4zm11.8 0v-9.5h5.8v1.4h-4.3V48h4.3v1.4h-5.8zm.8-4.1v-1.4h4.6v1.4h-4.6zm6.8 4.1v-9.5h1.7l4.3 7h.1l-.1-1.8v-5.2h1.5v9.5h-1.5l-4.5-7.4h-.1l.1 1.8v5.5h-1.5zm11.7 0v-8.8h1.5v8.8h-1.5zm-2.7-8.2v-1.4h6.8v1.4h-6.8z"></path><path class="st4" d="M543.2 14.9h115.2v43.2H543.2V14.9z"></path><path class="st2" d="M582.9 41.3v-9.5h3.3c.6 0 1.1.1 1.6.4.5.2.9.6 1.1 1 .3.4.4.9.4 1.5s-.1 1.1-.4 1.5c-.3.4-.7.8-1.1 1-.5.2-1 .4-1.6.4h-2.5v-1.4h2.5c.4 0 .7-.1.9-.2.2-.1.4-.3.5-.6.1-.2.2-.5.2-.8 0-.3-.1-.5-.2-.7-.1-.2-.3-.4-.5-.6-.2-.2-.5-.2-.9-.2h-1.8v8.2h-1.5zm12.3.2c-.7 0-1.4-.1-2-.4-.6-.3-1.1-.6-1.6-1.1-.4-.5-.8-1-1-1.6-.2-.6-.4-1.2-.4-1.9s.1-1.3.4-1.9c.2-.6.6-1.1 1-1.6s1-.8 1.6-1.1c.6-.3 1.3-.4 2-.4s1.4.1 2 .4c.6.2 1.1.6 1.6 1.1.5.5.8 1 1 1.6.2.6.4 1.2.4 1.9s-.1 1.3-.4 1.9c-.2.6-.6 1.1-1 1.6s-1 .8-1.6 1.1c-.7.3-1.3.4-2 .4zm0-1.4c.6 0 1.2-.2 1.8-.5.5-.3.9-.7 1.2-1.3.3-.5.5-1.2.5-1.9s-.2-1.3-.5-1.9c-.3-.5-.7-1-1.2-1.3-.5-.3-1.1-.5-1.8-.5-.6 0-1.2.2-1.8.5-.5.3-.9.7-1.2 1.3-.3.5-.5 1.2-.5 1.9s.2 1.3.5 1.9c.3.5.7 1 1.2 1.3.6.4 1.1.5 1.8.5zm10.9 1.4c-.7 0-1.4-.1-2-.4-.6-.3-1.1-.6-1.6-1.1-.4-.5-.8-1-1-1.6-.2-.6-.4-1.2-.4-1.9s.1-1.3.4-1.9c.2-.6.6-1.1 1-1.6s1-.8 1.6-1.1c.6-.3 1.3-.4 2-.4s1.4.1 2 .4c.6.2 1.1.6 1.6 1.1.5.5.8 1 1 1.6.2.6.4 1.2.4 1.9s-.1 1.3-.4 1.9c-.2.6-.6 1.1-1 1.6s-1 .8-1.6 1.1c-.6.3-1.3.4-2 .4zm0-1.4c.6 0 1.2-.2 1.8-.5.5-.3.9-.7 1.2-1.3.3-.5.5-1.2.5-1.9s-.2-1.3-.5-1.9c-.3-.5-.7-1-1.2-1.3-.5-.3-1.1-.5-1.8-.5s-1.2.2-1.8.5c-.5.3-.9.7-1.2 1.3-.3.5-.5 1.2-.5 1.9s.2 1.3.5 1.9c.3.5.7 1 1.2 1.3.6.4 1.2.5 1.8.5zm6.7 1.2v-9.5h3.3c.6 0 1.1.1 1.6.4.5.2.8.6 1.1 1s.4.9.4 1.5c0 .4-.1.8-.2 1.1s-.4.7-.7.9c-.3.3-.6.5-1 .6-.4.1-.9.2-1.4.2h-2.3v-1.3h2.5c.3 0 .6-.1.8-.2.2-.1.4-.3.6-.6.2-.2.2-.5.2-.8 0-.3-.1-.5-.2-.7-.1-.2-.3-.4-.5-.6-.2-.1-.5-.2-.9-.2h-1.9v8.2h-1.4zm2.2-4.4h1.7l3 4.3v.1H618l-3-4.4zM517.7 102.9c-.6 0-1.1-.1-1.7-.3-.6-.2-1-.6-1.5-1-.4-.5-.7-1.1-.9-1.8l1.7-.7c.2.6.4 1.1.8 1.5.4.4.9.6 1.6.6.7 0 1.2-.2 1.6-.6.4-.4.7-1 .7-1.6 0-.7-.2-1.2-.6-1.6-.4-.4-1-.7-1.6-.7-.4 0-.8.1-1.1.2-.3.2-.6.4-.8.7l-1.8-.8.7-6h6.4v1.7h-4.9l-.4 3.2h.1c.3-.2.6-.4.9-.5.4-.1.8-.2 1.3-.2.7 0 1.3.2 1.9.5.6.3 1 .8 1.4 1.4.4.6.5 1.3.5 2 0 .8-.2 1.5-.5 2.1-.4.6-.8 1.1-1.5 1.4-.7.3-1.5.5-2.3.5zm10.8 0c-.7 0-1.4-.2-2-.5-.6-.3-1.1-.8-1.5-1.3-.4-.6-.8-1.2-1-2-.2-.8-.3-1.6-.3-2.4 0-.9.1-1.7.3-2.5.2-.8.6-1.4 1-2 .4-.6.9-1 1.5-1.3.6-.3 1.3-.5 2-.5.8 0 1.4.2 2 .5.6.3 1.1.8 1.5 1.3.4.6.8 1.2 1 2 .2.8.3 1.6.3 2.5 0 .9-.1 1.7-.3 2.4-.2.8-.5 1.4-1 2-.4.6-.9 1-1.5 1.3-.6.3-1.2.5-2 .5zm0-1.8c.6 0 1.1-.2 1.6-.6.4-.4.8-.9 1-1.6.2-.7.4-1.4.4-2.2 0-.8-.1-1.6-.4-2.3-.2-.7-.6-1.2-1-1.6-.4-.4-1-.6-1.6-.6-.6 0-1.2.2-1.6.6-.4.4-.8.9-1 1.6-.2.7-.4 1.4-.4 2.3 0 .8.1 1.6.4 2.2.2.7.6 1.2 1 1.6.5.4 1 .6 1.6.6zm11.4 1.8c-.7 0-1.4-.2-2-.5-.6-.3-1.1-.8-1.5-1.3-.4-.6-.8-1.2-1-2-.2-.8-.3-1.6-.3-2.4 0-.9.1-1.7.3-2.5.2-.8.6-1.4 1-2 .4-.6.9-1 1.5-1.3.6-.3 1.3-.5 2-.5.8 0 1.4.2 2 .5.6.3 1.1.8 1.5 1.3.4.6.8 1.2 1 2 .2.8.3 1.6.3 2.5 0 .9-.1 1.7-.3 2.4-.2.8-.5 1.4-1 2-.4.6-.9 1-1.5 1.3-.5.3-1.2.5-2 .5zm.1-1.8c.6 0 1.1-.2 1.6-.6.4-.4.8-.9 1-1.6.2-.7.4-1.4.4-2.2 0-.8-.1-1.6-.4-2.3-.2-.7-.6-1.2-1-1.6-.4-.4-1-.6-1.6-.6-.6 0-1.2.2-1.6.6-.4.4-.8.9-1 1.6-.2.7-.4 1.4-.4 2.3 0 .8.1 1.6.4 2.2.2.7.6 1.2 1 1.6.4.4.9.6 1.6.6zm10.8 1.5v-8.8h1.8V95h.1c.2-.3.4-.5.7-.8s.6-.4.9-.5c.4-.1.7-.2 1.1-.2.7 0 1.2.2 1.7.5s.8.7 1 1.2c.3-.5.7-.8 1.2-1.2.5-.3 1.1-.5 1.8-.5 1 0 1.8.3 2.3 1 .5.6.8 1.5.8 2.5v5.7h-1.9v-5.4c0-.7-.2-1.2-.5-1.5-.3-.3-.7-.5-1.3-.5-.4 0-.8.1-1.1.4-.3.2-.6.6-.8 1s-.3.9-.3 1.3v4.7h-1.9v-5.4c0-.7-.2-1.2-.5-1.5-.3-.3-.8-.5-1.3-.5-.4 0-.8.1-1.1.4-.3.2-.6.6-.7 1s-.3.9-.3 1.3v4.7h-1.7zm18.6.3c-.7 0-1.3-.1-1.8-.3-.5-.2-.9-.5-1.3-.9-.3-.4-.6-.8-.7-1.2l1.7-.7c.2.5.5.8.9 1.1.4.2.8.4 1.3.4s.9-.1 1.2-.2c.3-.2.5-.4.5-.8 0-.2-.1-.5-.2-.6s-.4-.3-.6-.4l-.9-.3-1.1-.2c-.4-.1-.8-.3-1.2-.5-.4-.2-.7-.5-.9-.9-.2-.4-.3-.8-.3-1.2 0-.5.2-1 .5-1.4.3-.4.7-.7 1.2-.9.5-.2 1.1-.3 1.7-.3.6 0 1.1.1 1.5.2.5.1.9.3 1.2.6.3.3.6.6.8 1l-1.6.7c-.2-.4-.5-.7-.8-.8-.3-.2-.7-.2-1.1-.2-.4 0-.8.1-1.1.3-.3.2-.4.4-.4.7 0 .3.1.5.4.7.3.2.6.3 1 .4l1.3.3c.9.2 1.5.6 2 1 .4.4.7 1 .7 1.6 0 .6-.2 1.1-.5 1.5-.3.4-.8.7-1.3 1-.8.2-1.5.3-2.1.3zM389.2 102.6v-1.8l.4-.4.9-.9c.4-.4.7-.8 1.1-1.2l1.1-1.1.8-.8c.3-.3.6-.6.8-.9.2-.3.3-.5.4-.8.1-.2.1-.5.1-.8 0-.3-.1-.6-.2-.8-.1-.3-.4-.5-.7-.6-.3-.2-.6-.2-1.1-.2-.4 0-.7.1-1 .2-.3.2-.5.4-.7.6-.2.2-.3.5-.3.7l-1.7-.7c.1-.3.2-.6.4-.9.2-.3.4-.6.8-.9.3-.3.7-.5 1.1-.7.4-.2.9-.3 1.5-.3.8 0 1.4.2 2 .5.6.3 1 .7 1.3 1.2.3.5.5 1.1.5 1.7 0 .5-.1 1-.3 1.5-.2.5-.4.9-.7 1.3-.3.4-.6.7-.9 1-.2.1-.4.3-.6.6-.2.2-.5.5-.7.8l-.8.8-.7.7-.4.4h5.2v1.7h-7.6zm14.2.3c-.7 0-1.4-.2-2-.5-.6-.3-1.1-.8-1.5-1.3-.4-.6-.8-1.2-1-2-.2-.8-.3-1.6-.3-2.4 0-.9.1-1.7.3-2.5.2-.8.6-1.4 1-2 .4-.6.9-1 1.5-1.3.6-.3 1.3-.5 2-.5.8 0 1.4.2 2 .5.6.3 1.1.8 1.5 1.3.4.6.8 1.2 1 2 .2.8.3 1.6.3 2.5 0 .9-.1 1.7-.3 2.4-.2.8-.5 1.4-1 2-.4.6-.9 1-1.5 1.3-.5.3-1.2.5-2 .5zm0-1.8c.6 0 1.1-.2 1.6-.6.4-.4.8-.9 1-1.6.2-.7.4-1.4.4-2.2 0-.8-.1-1.6-.4-2.3-.2-.7-.6-1.2-1-1.6-.4-.4-1-.6-1.6-.6-.6 0-1.2.2-1.6.6-.4.4-.8.9-1 1.6-.2.7-.4 1.4-.4 2.3 0 .8.1 1.6.4 2.2.2.7.6 1.2 1 1.6.5.4 1 .6 1.6.6zm11.5 1.8c-.7 0-1.4-.2-2-.5-.6-.3-1.1-.8-1.5-1.3-.4-.6-.8-1.2-1-2-.2-.8-.3-1.6-.3-2.4 0-.9.1-1.7.3-2.5.2-.8.6-1.4 1-2 .4-.6.9-1 1.5-1.3.6-.3 1.3-.5 2-.5.8 0 1.4.2 2 .5.6.3 1.1.8 1.5 1.3.4.6.8 1.2 1 2 .2.8.3 1.6.3 2.5 0 .9-.1 1.7-.3 2.4-.2.8-.5 1.4-1 2-.4.6-.9 1-1.5 1.3-.6.3-1.3.5-2 .5zm0-1.8c.6 0 1.1-.2 1.6-.6.4-.4.8-.9 1-1.6.2-.7.4-1.4.4-2.2 0-.8-.1-1.6-.4-2.3-.2-.7-.6-1.2-1-1.6-.4-.4-1-.6-1.6-.6-.6 0-1.2.2-1.6.6-.4.4-.8.9-1 1.6-.2.7-.4 1.4-.4 2.3 0 .8.1 1.6.4 2.2.2.7.6 1.2 1 1.6.4.4.9.6 1.6.6zm10.8 1.5v-8.8h1.8V95h.1c.2-.3.4-.5.7-.8s.6-.4.9-.5c.4-.1.7-.2 1.1-.2.7 0 1.2.2 1.7.5s.8.7 1 1.2c.3-.5.7-.8 1.2-1.2.5-.3 1.1-.5 1.8-.5 1 0 1.8.3 2.3 1 .5.6.8 1.5.8 2.5v5.7h-1.9v-5.4c0-.7-.2-1.2-.5-1.5-.3-.3-.7-.5-1.3-.5-.4 0-.8.1-1.1.4-.3.2-.6.6-.8 1s-.3.9-.3 1.3v4.7h-1.9v-5.4c0-.7-.2-1.2-.5-1.5-.3-.3-.8-.5-1.3-.5-.4 0-.8.1-1.1.4-.3.2-.6.6-.7 1s-.3.9-.3 1.3v4.7h-1.7zm18.6.3c-.7 0-1.3-.1-1.8-.3-.5-.2-.9-.5-1.3-.9-.3-.4-.6-.8-.7-1.2l1.7-.7c.2.5.5.8.9 1.1.4.2.8.4 1.3.4s.9-.1 1.2-.2c.3-.2.5-.4.5-.8 0-.2-.1-.5-.2-.6-.2-.2-.4-.3-.6-.4l-.9-.3-1.1-.2c-.4-.1-.8-.3-1.2-.5-.4-.2-.7-.5-.9-.9-.2-.4-.3-.8-.3-1.2 0-.5.2-1 .5-1.4.3-.4.7-.7 1.2-.9.5-.2 1.1-.3 1.7-.3.6 0 1.1.1 1.5.2.5.1.9.3 1.2.6.3.3.6.6.8 1l-1.6.7c-.2-.4-.5-.7-.8-.8-.3-.2-.7-.2-1.1-.2-.4 0-.8.1-1.1.3-.3.2-.4.4-.4.7 0 .3.1.5.4.7.3.2.6.3 1 .4l1.3.3c.9.2 1.5.6 2 1 .4.4.7 1 .7 1.6 0 .6-.2 1.1-.5 1.5-.3.4-.8.7-1.3 1-.8.2-1.4.3-2.1.3zM0 113.3V99h1.7v14.3H0zm4.6 0v-10.2h1.6v1.5h.1c.3-.5.7-.9 1.3-1.3.6-.4 1.3-.5 2-.5 1.2 0 2.2.4 2.8 1.1.6.7 1 1.7 1 2.9v6.5h-1.7V107c0-1-.2-1.7-.7-2.1-.5-.4-1.1-.6-1.8-.6-.6 0-1.1.2-1.5.5-.4.3-.8.7-1 1.2-.2.5-.4 1-.4 1.6v5.7H4.6zm10-10.2h6v1.5h-6v-1.5zm1.8 7.5v-10.4h1.7v10c0 .5.1.9.3 1.2.2.3.6.4 1.1.4.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.5-.5-.7-1.2-.7-2.1zm10.3 3c-1 0-1.9-.2-2.6-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.6-1.7-.6-2.8 0-1 .2-1.9.6-2.7.4-.8 1-1.5 1.7-2s1.6-.8 2.6-.8 1.9.2 2.6.7c.7.4 1.3 1.1 1.7 1.8.4.8.6 1.7.6 2.7v.5h-8.8V107h7c0-.3-.1-.6-.2-.9-.1-.3-.3-.6-.5-.9-.2-.3-.6-.5-.9-.7-.4-.2-.8-.3-1.4-.3-.7 0-1.2.2-1.7.5s-.8.8-1.1 1.4c-.3.6-.4 1.2-.4 2 0 .9.2 1.6.5 2.2.3.6.8 1 1.3 1.3.5.3 1.1.4 1.7.4.8 0 1.4-.2 1.8-.5.5-.4.9-.8 1.2-1.3l1.4.7c-.4.8-1 1.4-1.7 1.9-1 .5-1.9.8-3 .8zm6.7-.3v-10.2H35v1.6h.1c.1-.4.4-.7.7-1 .3-.3.7-.5 1.1-.7.4-.2.8-.2 1.2-.2h.7c.2 0 .3.1.5.2v1.8c-.2-.1-.5-.2-.7-.2-.2-.1-.5-.1-.7-.1-.5 0-1 .1-1.4.4-.4.3-.7.7-1 1.1-.2.5-.4 1-.4 1.5v5.7h-1.7zm10.4.3c-.8 0-1.4-.1-2-.4-.6-.3-1-.7-1.3-1.2-.3-.5-.5-1.1-.5-1.8 0-.8.2-1.4.6-1.9.4-.5.9-.9 1.5-1.2.7-.3 1.4-.4 2.2-.4.4 0 .9 0 1.2.1.4.1.7.2 1 .3.3.1.5.2.7.3v-.6c0-.8-.3-1.4-.8-1.8-.5-.5-1.2-.7-2-.7-.6 0-1.1.1-1.6.4-.5.2-.9.6-1.1 1l-1.3-1c.3-.4.6-.7 1-1 .4-.3.9-.5 1.4-.7.5-.2 1.1-.2 1.6-.2 1.4 0 2.5.4 3.2 1.1.8.7 1.2 1.7 1.2 3v6.5h-1.6v-1.5h-.1c-.2.3-.4.6-.7.8-.3.3-.7.5-1.1.7-.5.1-1 .2-1.5.2zm.1-1.5c.6 0 1.1-.1 1.6-.4.5-.3.9-.7 1.2-1.2.3-.5.5-1 .5-1.6-.3-.2-.7-.4-1.2-.5-.5-.1-1-.2-1.5-.2-1 0-1.7.2-2.1.6-.4.4-.7.9-.7 1.5s.2 1 .6 1.4c.4.2 1 .4 1.6.4zm11.7 1.5c-1 0-1.9-.2-2.7-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.7-1.7-.7-2.8 0-1 .2-2 .7-2.8.4-.8 1.1-1.5 1.8-1.9.8-.5 1.7-.7 2.7-.7 1.1 0 2.1.3 2.8.8.7.5 1.3 1.2 1.6 2l-1.5.6c-.2-.6-.6-1.1-1.1-1.4-.5-.3-1.1-.5-1.8-.5-.6 0-1.2.2-1.7.5s-.9.8-1.2 1.4c-.3.6-.5 1.3-.5 2 0 .8.2 1.4.5 2 .3.6.7 1 1.2 1.4.5.3 1.1.5 1.7.5.7 0 1.3-.2 1.9-.5.5-.3.9-.8 1.2-1.4l1.5.6c-.3.8-.9 1.5-1.6 2-.9.5-1.8.8-3 .8zm5.5-10.5h6v1.5h-6v-1.5zm1.8 7.5v-10.4h1.7v10c0 .5.1.9.3 1.2.2.3.6.4 1.1.4.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.4-.5-.7-1.2-.7-2.1zm6.5 2.7v-10.2h1.7v10.2h-1.7zm.9-12.1c-.3 0-.6-.1-.9-.4-.2-.2-.4-.5-.4-.9 0-.3.1-.6.4-.9.2-.2.5-.4.9-.4.3 0 .6.1.9.4.2.2.4.5.4.9 0 .3-.1.6-.4.9-.3.3-.6.4-.9.4zm8.1 12.4c-1 0-1.9-.2-2.7-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.7-1.7-.7-2.8 0-1 .2-1.9.7-2.8.4-.8 1.1-1.5 1.8-2 .8-.5 1.7-.7 2.7-.7 1 0 1.9.2 2.7.7.8.5 1.4 1.1 1.9 2 .4.8.7 1.7.7 2.7 0 1-.2 1.9-.7 2.8-.4.8-1.1 1.5-1.9 1.9-.8.5-1.7.8-2.7.8zm0-1.6c.6 0 1.2-.2 1.7-.5s1-.8 1.3-1.3c.3-.6.5-1.3.5-2.1s-.2-1.5-.5-2.1c-.3-.6-.8-1-1.3-1.3-.5-.3-1.1-.5-1.7-.5-.6 0-1.2.2-1.7.5s-1 .7-1.3 1.3c-.3.6-.5 1.3-.5 2.1s.2 1.5.5 2.1c.3.6.8 1 1.3 1.3.5.4 1.1.5 1.7.5zm7 1.3v-10.2H87v1.5h.1c.3-.5.7-.9 1.3-1.3.6-.4 1.3-.5 2-.5 1.2 0 2.2.4 2.8 1.1.6.7 1 1.7 1 2.9v6.5h-1.7V107c0-1-.2-1.7-.7-2.1-.5-.4-1.1-.6-1.8-.6-.6 0-1.1.2-1.5.5-.4.3-.8.7-1 1.2-.2.5-.4 1-.4 1.6v5.7h-1.7zm15.1-10.2h6v1.5h-6v-1.5zm1.8 7.5v-10.4h1.7v10c0 .5.1.9.3 1.2.2.3.6.4 1.1.4.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.4-.5-.7-1.2-.7-2.1zm10.5 3c-1 0-1.9-.2-2.7-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.7-1.7-.7-2.8 0-1 .2-1.9.7-2.8.4-.8 1.1-1.5 1.8-2 .8-.5 1.7-.7 2.7-.7 1 0 1.9.2 2.7.7.8.5 1.4 1.1 1.9 2 .4.8.7 1.7.7 2.7 0 1-.2 1.9-.7 2.8-.4.8-1.1 1.5-1.9 1.9-.8.5-1.7.8-2.7.8zm0-1.6c.6 0 1.2-.2 1.7-.5s1-.8 1.3-1.3c.3-.6.5-1.3.5-2.1s-.2-1.5-.5-2.1c-.3-.6-.8-1-1.3-1.3-.5-.3-1.1-.5-1.7-.5-.6 0-1.2.2-1.7.5s-1 .7-1.3 1.3c-.3.6-.5 1.3-.5 2.1s.2 1.5.5 2.1c.3.6.8 1 1.3 1.3.5.4 1.1.5 1.7.5zm12.2 1.3V99h2.1l7.2 11.4h.1l-.1-2.8V99h1.7v14.3h-1.8l-7.5-11.9h-.1l.1 2.8v9.2H125zm18.2.3c-1 0-1.9-.2-2.6-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.6-1.7-.6-2.8 0-1 .2-1.9.6-2.7.4-.8 1-1.5 1.7-2s1.6-.8 2.6-.8 1.9.2 2.6.7c.7.4 1.3 1.1 1.7 1.8.4.8.6 1.7.6 2.7v.5h-8.8V107h7c0-.3-.1-.6-.2-.9-.1-.3-.3-.6-.5-.9-.2-.3-.6-.5-.9-.7-.4-.2-.8-.3-1.4-.3-.7 0-1.2.2-1.7.5s-.8.8-1.1 1.4c-.3.6-.4 1.2-.4 2 0 .9.2 1.6.5 2.2.3.6.8 1 1.3 1.3.5.3 1.1.4 1.7.4.8 0 1.4-.2 1.8-.5.5-.4.9-.8 1.2-1.3l1.4.7c-.4.8-1 1.4-1.7 1.9-1 .5-1.9.8-3 .8zm5.5-.3 4.1-5.9h.2l2.9-4.3h2l-4 5.6h-.1l-3.1 4.6h-2zm.1-10.2h1.9l3.2 4.5h.1l4 5.7h-2l-3-4.5h-.1l-4.1-5.7zm9.9 0h6v1.5h-6v-1.5zm1.8 7.5v-10.4h1.7v10c0 .5.1.9.3 1.2.2.3.6.4 1.1.4.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.4-.5-.7-1.2-.7-2.1zm11.2 2.7V99h4.8c.8 0 1.5.2 2.2.5.7.4 1.2.8 1.6 1.5.4.6.6 1.4.6 2.2 0 .8-.2 1.6-.6 2.2-.4.6-.9 1.1-1.6 1.5-.7.4-1.4.5-2.2.5h-3.9v-1.6h4c.6 0 1-.1 1.4-.4.4-.3.7-.6.9-1 .2-.4.3-.8.3-1.2 0-.4-.1-.8-.3-1.2-.2-.4-.5-.7-.9-1-.4-.3-.9-.4-1.4-.4h-3.2v12.7h-1.7zm14 .3c-.8 0-1.4-.1-2-.4-.6-.3-1-.7-1.3-1.2-.3-.5-.5-1.1-.5-1.8 0-.8.2-1.4.6-1.9.4-.5.9-.9 1.5-1.2.7-.3 1.4-.4 2.2-.4.4 0 .9 0 1.2.1.4.1.7.2 1 .3.3.1.5.2.7.3v-.6c0-.8-.3-1.4-.8-1.8-.5-.5-1.2-.7-2-.7-.6 0-1.1.1-1.6.4-.5.2-.9.6-1.1 1l-1.3-1c.3-.4.6-.7 1-1 .4-.3.9-.5 1.4-.7.5-.2 1.1-.2 1.6-.2 1.4 0 2.5.4 3.2 1.1.8.7 1.2 1.7 1.2 3v6.5h-1.6v-1.5h-.1c-.2.3-.4.6-.7.8-.3.3-.7.5-1.1.7-.5.1-.9.2-1.5.2zm.2-1.5c.6 0 1.1-.1 1.6-.4.5-.3.9-.7 1.2-1.2.3-.5.5-1 .5-1.6-.3-.2-.7-.4-1.2-.5-.5-.1-1-.2-1.5-.2-1 0-1.7.2-2.1.6-.4.4-.7.9-.7 1.5s.2 1 .6 1.4c.4.2 1 .4 1.6.4zm7.4 1.2v-10.2h1.7v10.2h-1.7zm.8-12.1c-.3 0-.6-.1-.9-.4-.2-.2-.4-.5-.4-.9 0-.3.1-.6.4-.9.2-.2.5-.4.9-.4.3 0 .6.1.9.4.2.2.4.5.4.9 0 .3-.1.6-.4.9-.3.3-.5.4-.9.4zm3.5 12.1v-10.2h1.6v1.5h.1c.3-.5.7-.9 1.3-1.3.6-.4 1.3-.5 2-.5 1.2 0 2.2.4 2.8 1.1.6.7 1 1.7 1 2.9v6.5h-1.7V107c0-1-.2-1.7-.7-2.1-.5-.4-1.1-.6-1.8-.6-.6 0-1.1.2-1.5.5-.4.3-.8.7-1 1.2-.2.5-.4 1-.4 1.6v5.7h-1.7zm10-10.2h6v1.5h-6v-1.5zm1.8 7.5v-10.4h1.7v10c0 .5.1.9.3 1.2.2.3.6.4 1.1.4.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.4-.5-.7-1.2-.7-2.1zM418.1 55.2c-1.8 0-3.3 1.5-3.3 3.3 0 1.5 1 2.7 2.3 3.1V83h2V61.6c1.3-.4 2.3-1.7 2.3-3.1 0-1.8-1.5-3.3-3.3-3.3zM546.5 58.6c0-1.8-1.5-3.3-3.3-3.3s-3.3 1.5-3.3 3.3c0 1.5 1 2.7 2.3 3.1v21.2h2V61.7c1.3-.4 2.3-1.6 2.3-3.1z"></path></svg>
</figure>
<h2 id="the-fuzzy-beginning">模糊的开始<a class="headline-link" href="https://web.dev/economic-times-inp/#the-fuzzy-beginning">#</a></h2>
<p>当 Google 最初将 INP 作为一种实验性指标引入，并有可能演变成核心网络生命指标之一时，《经济时报》团队接受了挑战，在其升级为指标之前对其进行了修复，因为提供世界一流的用户体验对于 Google 来说至关重要。我们的核心商业价值观。</p>
<p>INP 是迄今为止最难解决的指标之一。 一开始，人们并不清楚如何有效地测量 INP。 让事情变得更加困难的是缺乏社区支持——包括大多数真实用户监控（RUM）提供商尚不支持它。 然而，我们有 Google RUM 工具，例如<a href="https://developer.chrome.com/docs/crux/about/" rel="noopener">Chrome 用户体验报告 (CrUX)</a>， 这<a href="https://github.com/GoogleChrome/web-vitals" rel="noopener"><code>网络生命周期</code>JavaScript 库</a>以及其他人的支持，这让我们在评估未来道路时了解了自己的立场。 当我们开始时，我们的 INP 在原始级别接近 1,000 毫秒。</p>
<p>修复 INP 时出现的一件事<a href="https://web.dev/find-slow-interactions-in-the-field/">场</a>目标实验室指标之一可能是<a href="https://web.dev/tbt/">总阻塞时间 (TBT)</a>。 TBT 已经得到了社区的充分记录和支持。 尽管已经达到了 Core Web Vitals 的阈值，但我们在 TBT 方面的表现并不好，因为我们开始时已经超过了 3 秒。</p>
<h2 id="what-is-tbt,-and-what-steps-did-we-take-to-improve-it">什么是 TBT？我们采取了哪些措施来改进它？<a class="headline-link" href="https://web.dev/economic-times-inp/#what-is-tbt,-and-what-steps-did-we-take-to-improve-it">#</a></h2>
<p>TBT 是一种实验室指标，用于衡量网页加载期间网页对用户输入的响应能力。 任何执行时间超过 50 毫秒的任务都被视为长任务，​​超过 50 毫秒阈值之后的时间称为“长任务”。<strong>阻塞时间</strong>。</p>
<p>TBT 是通过计算页面加载期间所有长任务的阻塞时间之和来计算的。 例如，如果加载时有两个长任务，则阻塞时间确定如下：</p>
<ul>
<li>任务 A 需要 80 毫秒（比 50 毫秒多了 30 毫秒）。</li>
<li>任务 B 需要 100 毫秒（比 50 毫秒多了 50 毫秒）。</li>
</ul>
<p>该页面的 TBT 将为：80 毫秒 (30 + 50)。 TBT越低越好，TBT也<a href="https://almanac.httparchive.org/en/2022/performance#inp-and-tbt" rel="noopener">与 INP 密切相关</a>。</p>
<p>以下是我们的 TBT 在采取措施改进之前和之后的快速实验室比较：</p>
<figure>
  <img alt="A composite image of long tasks during startup as shown in the performance panel of Chrome DevTools, and a report of page metrics. The main thread is blocked during page load for 3,260 milliseconds." decoding="async" height="502" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
     优化TBT之前启动期间的主线程。 TBT 为 3,260 毫秒。 
  </figcaption>
</figure>
<figure>
  <img alt="A composite image of long tasks during startup as shown in the performance panel of Chrome DevTools, and a report of page metrics. The main thread is blocked during page load for 120 milliseconds." decoding="async" height="701" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
     优化TBT后启动时的主线程。 TBT 为 120 毫秒。 
  </figcaption>
</figure>
<h3 id="minimize-main-thread-work">最小化主线程工作<a class="headline-link" href="https://web.dev/economic-times-inp/#minimize-main-thread-work">#</a></h3>
<p>浏览器的主线程处理从解析 HTML、构建 DOM、解析 CSS 和应用样式以及评估和执行 JavaScript 的所有事务。 主线程还处理用户交互，即单击、敲击和按键。 如果主线程被其他工作占用，它可能无法有效地响应用户输入，并可能导致卡顿的用户体验。</p>
<p>这对我们来说是最困难的任务，因为我们有自己的算法来检测用户身份，以便根据订阅状态和第三方脚本来投放广告，以进行 A/B 测试、分析等。</p>
<p>我们首先采取了一些小步骤，例如取消加载不太重要的业务资产的优先级。 其次，我们使用了<a href="https://developer.mozilla.org/docs/Web/API/Window/requestIdleCallback" rel="noopener"><code>请求空闲回调</code></a>适用于非关键工作，这有助于减少 TBT。</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">如果</span> <span class="token punctuation">（</span><span class="token string">'请求空闲回调'</span> <span class="token keyword">在</span>窗户<span class="token punctuation">）</span> <span class="token punctuation">{</span><br>  <span class="token keyword">这</span><span class="token punctuation">。</span>请求空闲回调Id<span class="token operator">=</span> <span class="token function">请求空闲回调</span><span class="token punctuation">（</span><span class="token function">获取市场数据</span><span class="token punctuation">。</span><span class="token function">绑定</span><span class="token punctuation">（</span><span class="token keyword">这</span><span class="token punctuation">）</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">暂停</span><span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">}</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span> <span class="token keyword">别的</span> <span class="token punctuation">{</span><br>  <span class="token function">获取市场数据</span><span class="token punctuation">（</span><span class="token punctuation">）</span><span class="token punctuation">;</span> <span class="token comment">// 不支持 requestIdleCallback 时的回退</span><br><span class="token punctuation">}</span></code></pre>
</div><p>使用时建议指定超时时间<code>请求空闲回调</code>，因为它确保如果给定的时间已过并且回调尚未被调用，则它会在超时后立即执行回调。</p>
<h3 id="minimize-script-evaluation-time">最小化脚本评估时间<a class="headline-link" href="https://web.dev/economic-times-inp/#minimize-script-evaluation-time">#</a></h3>
<p>我们还使用延迟加载第三方库<a href="https://loadable-components.com/" rel="noopener">可加载组件</a>。 我们还通过使用以下内容对页面进行分析来删除未使用的 JavaScript 和 CSS<a href="https://developer.chrome.com/docs/devtools/coverage/" rel="noopener">覆盖工具</a>在 Chrome 开发者工具中。 它帮助我们确定了哪些领域<a href="https://webpack.js.org/guides/tree-shaking/" rel="noopener">摇树</a>需要在页面加载期间传送更少的代码，从而减少应用程序的初始包大小。</p>
<figure>
  <img alt="A screenshot of the coverage tool in Chrome DevTools. Here, the tool displays unused portions of JavaScript and CSS files during page load." decoding="async" height="100" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&amp;w=1600 1600w" width="800">
</figure>
<h3 id="reduce-dom-size">减小 DOM 大小<a class="headline-link" href="https://web.dev/economic-times-inp/#reduce-dom-size">#</a></h3>
<p>根据 Lighthouse 的说法，较大的 DOM 大小会增加内存使用量，导致时间更长<a href="https://web.dev/economic-times-inp/reduce-the-scope-and-complexity-of-style-calculations/">样式重新计算</a>，并产生昂贵的<a href="https://developers.google.com/speed/docs/insights/browser-reflow" rel="noopener">布局回流</a>。</p>
<figure>
  <img alt="A screenshot of the DOM size audit in Lighthouse. The number of DOM elements reported is 2,706 elements." decoding="async" height="86" loading="lazy" sizes="(min-width: 712px) 712px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&amp;w=1424 1424w" width="712">
</figure>
<p>我们通过两种方式减少 DOM 节点的数量：</p>
<ul>
<li>首先，我们根据用户的请求（点击）呈现菜单项。 它将 DOM 大小减少了大约 1,200 个节点。</li>
<li>其次，我们延迟加载不太重要的小部件。</li>
</ul>
<p>由于所有这些努力，我们显着减少了 TBT，我们的 INP 也相应减少了近 50%：</p>
<figure>
  <img alt="A screenshot of the INP audit in CrUX. The INP for the page is 539 milliseconds, which exceeds the 'poor' threshold." decoding="async" height="216" loading="lazy" sizes="(min-width: 574px) 574px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&amp;w=1148 1148w" width="574">
</figure>
<p>此时，我们几乎没有办法进一步减少 TBT（以及代理 INP），但我们知道我们还有很大的改进空间。 这时我们决定将定制的 UI 样板升级到最新版本的 React<a href="https://nextjs.org/" rel="noopener">Next.js</a>更好地利用<a href="https://react.dev/reference/react" rel="noopener">钩子</a>以避免不必要的组件重新渲染。</p>
<p>由于与网站其他部分相比更新更频繁且流量相对较少，我们开始迁移我们的网站<a href="https://economictimes.indiatimes.com/topic/home" rel="noopener">主题页</a>到 Next.js。 我们还用过<a href="https://partytown.builder.io/" rel="noopener">派对城</a>用于将额外繁重的主线程工作卸载给网络工作者，以及诸如<code>请求空闲回调</code>用于推迟非关键任务。</p>
<h2 id="how-has-improving-inp-helped-the-economic-times">改进 INP 对《经济时报》有何帮助？<a class="headline-link" href="https://web.dev/economic-times-inp/#how-has-improving-inp-helped-the-economic-times">#</a></h2>
<h3 id="current-tbt-and-inp-on-origin">当前的 TBT 和 INP 原产地<a class="headline-link" href="https://web.dev/economic-times-inp/#current-tbt-and-inp-on-origin">#</a></h3>
<p>在发布这篇文章时，我们的起源的 TBT 为 120 毫秒，低于我们开始优化工作时的 3,260 毫秒。 同样，经过优化后，我们原点的 INP 从 1,000 多毫秒下降到了 257 毫秒。</p>
<figure>
  <img alt="A screenshot of the INP audit in CrUX. The INP for the page is 257 milliseconds, which is within the 'needs improvement' thresholds." decoding="async" height="218" loading="lazy" sizes="(min-width: 582px) 582px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&amp;w=1164 1164w" width="582">
</figure>
<h3 id="inp-crux-trend">INP CrUX 趋势<a class="headline-link" href="https://web.dev/economic-times-inp/#inp-crux-trend">#</a></h3>
<p>主题页面上收到的流量占总流量的比例要小得多。 因此，它是一个理想的实验场所。 CrUX 的结果以及业务成果非常令人鼓舞，并促使我们将努力扩展到整个网站，以获得更多收益。</p>
<figure>
  <img alt="A screenshot of INP distributions as visualized in CrUX over a period of four months, starting in July 2022 and ending in October 2022. Values within the 'poor' and 'needs improvement' thresholds declined somewhat, while the values within the 'good' threshold increased." decoding="async" height="190" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&amp;w=1600 1600w" width="800">
</figure>
<h3 id="akamai-mpulse-tbt-analysis">Akamai mPulse TBT 分析<a class="headline-link" href="https://web.dev/economic-times-inp/#akamai-mpulse-tbt-analysis">#</a></h3>
<p>我们用<a href="https://www.akamai.com/products/mpulse-real-user-monitoring" rel="noopener">Akamai mPulse</a>作为我们的 RUM 解决方案，可在现场测量 TBT。 我们观察到 TBT 持续下降，这清楚地反映了我们减少 INP 努力的结果。 从下面的屏幕截图中可以看出，TBT 值最终从现场的大约 5 秒下降到大约 200 毫秒。</p>
<figure>
  <img alt="A screenshot of a chart in Akamai mPulse, showing a decline in TBT over the course of roughly a month." decoding="async" height="118" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&amp;w=1600 1600w" width="800">
</figure>
<h2 id="business-outcome">业务成果<a class="headline-link" href="https://web.dev/economic-times-inp/#business-outcome">#</a></h2>
<p>总体而言，我们努力将 TBT 降低了 30 倍，再加上迁移到 Next.js，帮助我们将 INP 降低了近 4 倍，最终实现了<strong>跳出率降低 50%，综合浏览量提高 43%</strong>在主题页面上。</p>
<figure>
  <img alt="A screenshot of Google Analytics comparing pageviews versus bounce rate. Because of the optimizations made to INP on The Economic Times website, a 50% decrease in bounce rate and a 43% increase in pageviews was realized." decoding="async" height="288" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&amp;w=1600 1600w" width="800">
</figure>
<h2 id="conclusion">结论<a class="headline-link" href="https://web.dev/economic-times-inp/#conclusion">#</a></h2>
<p>总而言之，INP 广泛帮助确定了《经济时报》网站部分内容的运行时性能问题。 事实证明，它是对业务成果产生积极影响的最有效指标之一。 由于我们在这一努力中观察到了非常令人鼓舞的数字，我们有动力将优化工作扩展到网站的其他领域，并获得额外的好处。</p>
<hr><p><a href="https://web.dev/inp/">Interaction to Next Paint (INP)</a> is a metric that assesses a website's responsiveness to user input. Good responsiveness means that a page is quick to respond to user interactions. The lower a page's INP is, the better it is able to respond to user interactions.</p>
<style>
  .inp-mobile {
    display: inline;
  }

  .inp-desktop {
    display: none;
  }

  @media screen and (min-width: 640px) {
    .inp-mobile {
      display: none;
    }

    .inp-desktop {
      display: inline;
    }
  }
</style>
<figure>
  <svg title="A diagram of the INP thresholds. An INP at or below 200 milliseconds is considered good. Between 200 and 500 milliseconds suggests a page's responsiveness needs improvement. Anything over 500 milliseconds means that a page's responsiveness is poor." class="inp-mobile" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0" y="0" viewBox="0 0 296.6 220.2" style="enable-background:new 0 0 296.6 220.2" xml:space="preserve"><style>.st0{fill:#2979FF} .st1{fill-rule:evenodd;clip-rule:evenodd;fill:#0CCE6B} .st2{fill:#191919} .st3{fill-rule:evenodd;clip-rule:evenodd;fill:#FFA400} .st4{fill-rule:evenodd;clip-rule:evenodd;fill:#FF4E42} @media screen and (prefers-color-scheme: light){.st2{fill:#191919}} [data-user-theme=light] .st2 {fill:#191919} @media screen and (prefers-color-scheme: dark){.st2{fill:#fff}} [data-user-theme=dark] .st2{fill:#fff}</style><path class="st0" d="M83.3 63V0h11.9v63H83.3zm26.3 0V0h13.8l25.3 42.2h.7l-.7-12.1V0h11.8v63H148l-26.8-44.6h-.7l.7 12.1V63h-11.6zm65.4 0V0h22.2c4.1 0 7.7.8 10.9 2.5s5.8 4 7.7 7 2.9 6.4 2.9 10.4c0 3.9-1 7.4-2.9 10.4s-4.5 5.4-7.7 7c-3.2 1.7-6.9 2.5-10.9 2.5h-15.6V28.6h15.9c2.1 0 3.8-.4 5.2-1.2s2.5-1.9 3.2-3.2c.7-1.3 1.1-2.8 1.1-4.3s-.4-2.9-1.1-4.2c-.7-1.3-1.8-2.3-3.2-3.2s-3.1-1.2-5.2-1.2h-10.7V63H175z"></path><path class="st1" d="M0 137.1h96v38.4H0v-38.4z"></path><path class="st2" d="M34 161c-.6 0-1.2-.1-1.8-.3-.5-.2-1-.5-1.4-.9-.4-.4-.7-.9-1-1.4-.2-.6-.3-1.1-.3-1.8 0-.6.1-1.2.3-1.8.2-.6.6-1 1-1.4.4-.4.9-.7 1.4-.9.5-.2 1.1-.3 1.8-.3s1.3.1 1.8.3c.6.2 1 .6 1.4 1l-.9.9c-.2-.2-.4-.4-.6-.5-.2-.1-.5-.3-.8-.3-.3-.1-.6-.1-.9-.1-.4 0-.8.1-1.2.2-.4.1-.7.4-1 .6-.3.3-.5.6-.7 1-.2.4-.2.8-.2 1.3s.1.9.2 1.3c.2.4.4.7.7 1 .3.3.6.5 1 .7.4.1.8.2 1.2.2.4 0 .8-.1 1.1-.2.3-.1.6-.3.9-.5.3-.2.5-.5.6-.8.2-.3.3-.6.3-1H34v-1.2h4.2v.7c0 .6-.1 1.2-.3 1.7-.2.5-.5.9-.9 1.3s-.8.6-1.3.8c-.5.3-1.1.4-1.7.4zm9.5 0c-.6 0-1.2-.1-1.8-.3-.5-.2-1-.5-1.4-1-.4-.4-.7-.9-.9-1.4-.2-.5-.3-1.1-.3-1.8 0-.6.1-1.2.3-1.8.2-.5.5-1 .9-1.4.4-.4.9-.7 1.4-1 .5-.2 1.1-.3 1.8-.3.6 0 1.2.1 1.8.3.5.2 1 .6 1.4 1 .4.4.7.9.9 1.4.2.5.3 1.1.3 1.8 0 .6-.1 1.2-.3 1.8-.2.5-.5 1-.9 1.4-.4.4-.9.7-1.4 1-.5.2-1.1.3-1.8.3zm0-1.2c.6 0 1.1-.1 1.6-.4.5-.3.8-.7 1.1-1.1.3-.5.4-1.1.4-1.7 0-.6-.1-1.2-.4-1.7-.3-.5-.7-.9-1.1-1.1-.5-.3-1-.4-1.6-.4-.6 0-1.1.1-1.6.4-.5.3-.8.7-1.1 1.1-.3.5-.4 1-.4 1.7 0 .6.1 1.2.4 1.7.3.5.7.9 1.1 1.1.5.3 1 .4 1.6.4zm9.9 1.2c-.6 0-1.2-.1-1.8-.3-.5-.2-1-.5-1.4-1-.4-.4-.7-.9-.9-1.4-.2-.5-.3-1.1-.3-1.8 0-.6.1-1.2.3-1.8.2-.5.5-1 .9-1.4.4-.4.9-.7 1.4-1 .5-.2 1.1-.3 1.8-.3.6 0 1.2.1 1.8.3.5.2 1 .6 1.4 1 .4.4.7.9.9 1.4.2.5.3 1.1.3 1.8 0 .6-.1 1.2-.3 1.8-.2.5-.5 1-.9 1.4-.4.4-.9.7-1.4 1-.6.2-1.2.3-1.8.3zm0-1.2c.6 0 1.1-.1 1.6-.4.5-.3.8-.7 1.1-1.1.3-.5.4-1.1.4-1.7 0-.6-.1-1.2-.4-1.7-.3-.5-.7-.9-1.1-1.1-.5-.3-1-.4-1.6-.4-.6 0-1.1.1-1.6.4-.5.3-.8.7-1.1 1.1-.3.5-.4 1-.4 1.7 0 .6.1 1.2.4 1.7.3.5.7.9 1.1 1.1.5.3 1 .4 1.6.4zm6 1.1v-8.6h2.8c.9 0 1.7.2 2.3.5.7.4 1.2.9 1.5 1.5.4.6.5 1.4.5 2.2 0 .8-.2 1.6-.5 2.2-.4.6-.9 1.2-1.5 1.5-.6.4-1.4.5-2.3.5h-2.8zm1.3-1.3h1.4c.6 0 1.2-.1 1.7-.4.5-.3.8-.6 1.1-1 .2-.5.4-1 .4-1.6 0-.6-.1-1.2-.4-1.6-.2-.5-.6-.8-1.1-1-.5-.3-1-.4-1.7-.4h-1.4v6z"></path><path class="st3" d="M96 137.1h105.6v38.4H96v-38.4z"></path><path class="st2" d="M130.8 153.9v-8.6h1.6l3.9 6.3h.1l-.1-1.7v-4.7h1.3v8.6h-1.4l-4.1-6.6h-.1l.1 1.7v5h-1.3zm8.7 0v-8.6h5.2v1.2h-3.9v6.1h3.9v1.2h-5.2zm.7-3.7V149h4.1v1.2h-4.1zm6.2 3.7v-8.6h5.2v1.2h-3.9v6.1h3.9v1.2h-5.2zm.7-3.7V149h4.1v1.2h-4.1zm6.1 3.7v-8.6h2.8c.9 0 1.7.2 2.3.5.7.4 1.2.9 1.5 1.5.4.6.5 1.4.5 2.2s-.2 1.6-.5 2.2c-.4.6-.9 1.2-1.5 1.5-.6.4-1.4.5-2.3.5h-2.8zm1.3-1.3h1.4c.6 0 1.2-.1 1.7-.4.5-.2.8-.6 1.1-1 .2-.5.4-1 .4-1.6 0-.6-.1-1.2-.4-1.6-.2-.5-.6-.8-1.1-1-.5-.2-1-.4-1.7-.4h-1.4v6zm9.9 1.4c-.5 0-.9-.1-1.3-.3-.4-.2-.8-.4-1.1-.8-.3-.4-.5-.8-.7-1.3l1.2-.5c.1.5.3.9.7 1.2.3.3.7.5 1.2.5.3 0 .5 0 .8-.1.2-.1.4-.2.6-.4s.2-.4.2-.7c0-.3-.1-.5-.2-.7-.1-.2-.3-.3-.6-.5s-.6-.3-1-.5l-.5-.2c-.2-.1-.5-.2-.7-.3-.2-.1-.5-.3-.7-.5-.2-.2-.4-.4-.5-.7-.1-.3-.2-.6-.2-.9 0-.4.1-.8.3-1.2.2-.4.5-.6.9-.8.4-.2.9-.3 1.4-.3.6 0 1 .1 1.4.3.4.2.7.4.9.7.2.3.4.5.4.8l-1.2.5c0-.2-.1-.3-.2-.5s-.3-.3-.5-.4c-.2-.1-.4-.2-.8-.2-.2 0-.5.1-.7.2-.2.1-.4.2-.5.4-.1.2-.2.3-.2.6s.1.6.4.8c.3.2.6.4 1.1.5l.6.2c.3.1.6.2.8.3.3.1.5.3.7.5.2.2.4.4.5.7.1.3.2.6.2 1s-.1.8-.3 1.2c-.2.3-.4.6-.7.8-.3.2-.6.3-.9.4s-.5.2-.8.2zM107 167.9v-8.6h1.3v8.6H107zm3.2 0v-8.6h1.8l2.5 6.5h.1l2.5-6.5h1.8v8.6h-1.3V163l.1-1.5h-.1l-2.5 6.4h-1l-2.5-6.4h-.1l.1 1.5v4.9h-1.4zm10.6 0v-8.6h3c.5 0 1 .1 1.4.3.4.2.8.5 1 .9.3.4.4.9.4 1.4 0 .5-.1 1-.4 1.4-.2.4-.6.7-1 .9-.4.2-.9.3-1.4.3h-2.2v-1.2h2.3c.3 0 .6-.1.8-.2.2-.1.4-.3.5-.5.1-.2.2-.4.2-.7 0-.2-.1-.4-.2-.7-.1-.2-.3-.4-.5-.5-.2-.1-.5-.2-.8-.2h-1.7v7.3h-1.4zm7.2 0v-8.6h3c.5 0 1 .1 1.4.3.4.2.7.5 1 .9.2.4.4.8.4 1.4 0 .3-.1.7-.2 1s-.3.6-.6.8c-.3.2-.6.4-1 .6-.4.1-.8.2-1.2.2h-2.1v-1.2h2.3c.3 0 .5-.1.7-.2.2-.1.4-.3.5-.5.1-.2.2-.5.2-.7 0-.2-.1-.5-.2-.7-.1-.2-.3-.4-.5-.5-.2-.1-.5-.2-.8-.2h-1.7v7.4H128zm2-4h1.5l2.7 3.9v.1h-1.5l-2.7-4zm9.3 4.1c-.6 0-1.2-.1-1.8-.3-.5-.2-1-.5-1.4-1-.4-.4-.7-.9-.9-1.4-.2-.5-.3-1.1-.3-1.8s.1-1.2.3-1.8c.2-.5.5-1 .9-1.4.4-.4.9-.7 1.4-1 .5-.2 1.1-.3 1.8-.3.6 0 1.2.1 1.8.3.5.2 1 .6 1.4 1 .4.4.7.9.9 1.4.2.5.3 1.1.3 1.8s-.1 1.2-.3 1.8c-.2.5-.5 1-.9 1.4-.4.4-.9.7-1.4 1-.6.2-1.2.3-1.8.3zm0-1.2c.6 0 1.1-.1 1.6-.4.5-.3.8-.7 1.1-1.1.3-.5.4-1.1.4-1.7 0-.6-.1-1.2-.4-1.7-.3-.5-.7-.9-1.1-1.1-.5-.3-1-.4-1.6-.4-.6 0-1.1.1-1.6.4-.5.3-.8.7-1.1 1.1-.3.5-.4 1-.4 1.7 0 .6.1 1.2.4 1.7.3.5.7.9 1.1 1.1.5.3 1 .4 1.6.4zm7.9 1.1-3-8.6h1.4l1.9 5.7.3 1h.1l.3-1 2-5.7h1.4l-3.1 8.6h-1.3zm5.6 0v-8.6h5.2v1.2h-3.9v6.1h3.9v1.2h-5.2zm.7-3.7V163h4.1v1.2h-4.1zm6.2 3.7v-8.6h1.8l2.5 6.5h.1l2.5-6.5h1.8v8.6H167V163l.1-1.5h-.1l-2.5 6.4h-1l-2.5-6.4h-.1l.1 1.5v4.9h-1.3zm10.6 0v-8.6h5.2v1.2h-3.9v6.1h3.9v1.2h-5.2zm.7-3.7V163h4.1v1.2H171zm6.1 3.7v-8.6h1.6l3.9 6.3h.1l-.1-1.7v-4.7h1.3v8.6h-1.4l-4.1-6.6h-.1l.1 1.7v5h-1.3zm10.5 0V160h1.3v7.9h-1.3zm-2.4-7.4v-1.2h6.1v1.2h-6.1z"></path><path class="st4" d="M200.6 137.1h96v38.4h-96v-38.4z"></path><path class="st2" d="M232.5 160.9v-8.6h3c.5 0 1 .1 1.4.3.4.2.8.5 1 .9.3.4.4.9.4 1.4 0 .5-.1 1-.4 1.4-.2.4-.6.7-1 .9-.4.2-.9.3-1.4.3h-2.2v-1.2h2.3c.3 0 .6-.1.8-.2.2-.1.4-.3.5-.5.1-.2.2-.4.2-.7 0-.2-.1-.4-.2-.7-.1-.2-.3-.4-.5-.5-.2-.1-.5-.2-.8-.2h-1.7v7.3h-1.4zm11 .1c-.6 0-1.2-.1-1.8-.3-.5-.2-1-.5-1.4-1-.4-.4-.7-.9-.9-1.4-.2-.5-.3-1.1-.3-1.8s.1-1.2.3-1.8c.2-.5.5-1 .9-1.4.4-.4.9-.7 1.4-1 .5-.2 1.1-.3 1.8-.3.6 0 1.2.1 1.8.3.5.2 1 .6 1.4 1 .4.4.7.9.9 1.4.2.5.3 1.1.3 1.8s-.1 1.2-.3 1.8c-.2.5-.5 1-.9 1.4-.4.4-.9.7-1.4 1-.5.2-1.1.3-1.8.3zm0-1.2c.6 0 1.1-.1 1.6-.4.5-.3.8-.7 1.1-1.1.3-.5.4-1.1.4-1.7 0-.6-.1-1.2-.4-1.7-.3-.5-.7-.9-1.1-1.1-.5-.3-1-.4-1.6-.4-.6 0-1.1.1-1.6.4-.5.3-.8.7-1.1 1.1-.3.5-.4 1-.4 1.7 0 .6.1 1.2.4 1.7.3.5.7.9 1.1 1.1.6.3 1.1.4 1.6.4zm9.9 1.2c-.6 0-1.2-.1-1.8-.3-.5-.2-1-.5-1.4-1-.4-.4-.7-.9-.9-1.4-.2-.5-.3-1.1-.3-1.8s.1-1.2.3-1.8c.2-.5.5-1 .9-1.4.4-.4.9-.7 1.4-1 .5-.2 1.1-.3 1.8-.3.6 0 1.2.1 1.8.3.5.2 1 .6 1.4 1 .4.4.7.9.9 1.4.2.5.3 1.1.3 1.8s-.1 1.2-.3 1.8c-.2.5-.5 1-.9 1.4-.4.4-.9.7-1.4 1-.6.2-1.1.3-1.8.3zm0-1.2c.6 0 1.1-.1 1.6-.4.5-.3.8-.7 1.1-1.1.3-.5.4-1.1.4-1.7 0-.6-.1-1.2-.4-1.7-.3-.5-.7-.9-1.1-1.1-.5-.3-1-.4-1.6-.4-.6 0-1.1.1-1.6.4-.5.3-.8.7-1.1 1.1-.3.5-.4 1-.4 1.7 0 .6.1 1.2.4 1.7.3.5.7.9 1.1 1.1.5.3 1 .4 1.6.4zm6 1.1v-8.6h3c.5 0 1 .1 1.4.3.4.2.7.5 1 .9.2.4.4.8.4 1.4 0 .3-.1.7-.2 1s-.3.6-.6.8c-.3.2-.6.4-1 .6-.4.1-.8.2-1.2.2h-2.1v-1.2h2.3c.3 0 .5-.1.7-.2.2-.1.4-.3.5-.5.1-.2.2-.5.2-.7 0-.2-.1-.5-.2-.7-.1-.2-.3-.4-.5-.5-.2-.1-.5-.2-.8-.2h-1.7v7.4h-1.2zm2-4h1.5l2.7 3.9v.1H264l-2.6-4zM178.1 219.9c-.5 0-1-.1-1.5-.3-.5-.2-1-.5-1.4-1-.4-.4-.7-1-.8-1.7l1.5-.6c.1.6.4 1 .8 1.4.4.4.9.5 1.4.5.6 0 1.1-.2 1.5-.6.4-.4.6-.9.6-1.5s-.2-1.1-.6-1.5c-.4-.4-.9-.6-1.5-.6-.4 0-.7.1-1 .2-.3.1-.5.4-.7.6l-1.7-.8.7-5.5h5.9v1.6h-4.5l-.4 2.9h.1c.2-.2.5-.3.8-.5.3-.1.7-.2 1.2-.2.6 0 1.2.2 1.7.5s1 .7 1.3 1.3c.3.5.5 1.2.5 1.9s-.2 1.3-.5 1.9c-.3.6-.8 1-1.3 1.3-.7.5-1.4.7-2.1.7zm9.9 0c-.7 0-1.3-.1-1.9-.4-.5-.3-1-.7-1.4-1.2-.4-.5-.7-1.1-.9-1.8-.2-.7-.3-1.4-.3-2.2 0-.8.1-1.6.3-2.2.2-.7.5-1.3.9-1.8s.9-.9 1.4-1.2c.6-.3 1.2-.5 1.9-.5s1.3.2 1.9.5c.6.3 1 .7 1.4 1.2.4.5.7 1.1.9 1.8.2.7.3 1.4.3 2.2 0 .8-.1 1.6-.3 2.2-.2.7-.5 1.3-.9 1.8s-.9.9-1.4 1.2c-.6.2-1.2.4-1.9.4zm.1-1.7c.6 0 1-.2 1.5-.5.4-.4.7-.9 1-1.5.2-.6.3-1.3.3-2.1s-.1-1.5-.3-2.1c-.2-.6-.5-1.1-1-1.5-.4-.4-.9-.5-1.5-.5s-1.1.2-1.5.5c-.4.4-.7.8-.9 1.5-.2.6-.3 1.3-.3 2.1s.1 1.5.3 2.1c.2.6.5 1.1.9 1.5.4.3.9.5 1.5.5zm10.5 1.7c-.7 0-1.3-.1-1.9-.4-.5-.3-1-.7-1.4-1.2-.4-.5-.7-1.1-.9-1.8-.2-.7-.3-1.4-.3-2.2 0-.8.1-1.6.3-2.2.2-.7.5-1.3.9-1.8s.9-.9 1.4-1.2c.6-.3 1.2-.5 1.9-.5s1.3.2 1.9.5c.6.3 1 .7 1.4 1.2.4.5.7 1.1.9 1.8.2.7.3 1.4.3 2.2 0 .8-.1 1.6-.3 2.2-.2.7-.5 1.3-.9 1.8s-.9.9-1.4 1.2c-.6.2-1.2.4-1.9.4zm0-1.7c.6 0 1-.2 1.5-.5.4-.4.7-.9 1-1.5.2-.6.3-1.3.3-2.1s-.1-1.5-.3-2.1c-.2-.6-.5-1.1-1-1.5-.4-.4-.9-.5-1.5-.5s-1.1.2-1.5.5c-.4.4-.7.8-.9 1.5-.2.6-.3 1.3-.3 2.1s.1 1.5.3 2.1c.2.6.5 1.1.9 1.5.4.3.9.5 1.5.5zm10 1.4v-8.2h1.6v1.1h.1c.2-.3.4-.5.6-.7.3-.2.6-.4.9-.5.3-.1.7-.2 1-.2.6 0 1.1.1 1.5.4.4.3.7.7.9 1.1.3-.4.6-.8 1.1-1.1.5-.3 1-.5 1.7-.5 1 0 1.7.3 2.1.9.5.6.7 1.4.7 2.3v5.2h-1.7v-4.9c0-.7-.1-1.1-.4-1.4-.3-.3-.7-.5-1.2-.5-.4 0-.7.1-1 .3-.3.2-.5.5-.7.9-.2.4-.2.8-.2 1.2v4.4h-1.7v-4.9c0-.7-.1-1.1-.4-1.4-.3-.3-.7-.5-1.2-.5-.4 0-.7.1-1 .3-.3.2-.5.5-.7.9-.2.4-.2.8-.2 1.2v4.4h-1.8zm17.2.3c-.6 0-1.2-.1-1.7-.3-.5-.2-.9-.5-1.2-.8-.3-.3-.5-.7-.7-1.1l1.5-.7c.2.4.5.8.8 1 .4.2.8.3 1.2.3.4 0 .8-.1 1.1-.2.3-.2.5-.4.5-.8 0-.2-.1-.4-.2-.6-.1-.1-.3-.3-.6-.4-.2-.1-.5-.2-.8-.2l-1-.2c-.4-.1-.8-.3-1.1-.5-.3-.2-.6-.5-.8-.8-.2-.3-.3-.7-.3-1.1 0-.5.1-.9.4-1.3.3-.4.7-.6 1.1-.8.5-.2 1-.3 1.6-.3.5 0 1 .1 1.4.2.4.1.8.3 1.1.6.3.3.6.6.8 1l-1.5.7c-.2-.4-.4-.6-.7-.8-.3-.1-.6-.2-1-.2s-.7.1-1 .2c-.3.2-.4.4-.4.6 0 .3.1.5.4.7.2.2.5.3.9.4l1.2.3c.8.2 1.4.5 1.8.9.4.4.6.9.6 1.5 0 .5-.2 1-.5 1.4-.3.4-.7.7-1.2.9-.6.2-1.1.4-1.7.4zM69 220v-1.6s.2-.1.4-.4c.2-.2.5-.5.8-.9l1.1-1.1 1-1c.3-.3.5-.6.7-.8.3-.3.5-.6.7-.8.2-.2.3-.5.4-.7.1-.2.1-.5.1-.8 0-.3-.1-.5-.2-.8-.1-.3-.3-.4-.6-.6-.3-.1-.6-.2-1-.2s-.7.1-1 .2c-.3.1-.5.3-.6.6-.1.2-.3.4-.3.7l-1.5-.6c.1-.3.2-.5.4-.8.2-.3.4-.5.7-.8.3-.3.6-.5 1-.6.4-.2.9-.3 1.4-.2.7 0 1.3.2 1.9.5.5.3.9.7 1.2 1.2.3.5.4 1 .4 1.6 0 .5-.1.9-.2 1.3-.2.4-.4.8-.7 1.2-.3.4-.5.7-.8 1l-.5.5c-.2.2-.4.5-.7.7l-.7.7-.6.6-.4.4h4.8v1.6H69zm13.2.2c-.7 0-1.3-.1-1.9-.4-.5-.3-1-.7-1.4-1.2-.4-.5-.7-1.1-.9-1.8-.2-.7-.3-1.4-.3-2.2 0-.8.1-1.6.3-2.2.2-.7.5-1.3.9-1.8s.9-.9 1.4-1.2c.6-.3 1.2-.5 1.9-.5s1.3.2 1.9.5c.6.3 1 .7 1.4 1.2.4.5.7 1.1.9 1.8.2.7.3 1.4.3 2.2 0 .8-.1 1.6-.3 2.2-.2.7-.5 1.3-.9 1.8s-.9.9-1.4 1.2c-.6.3-1.2.4-1.9.4zm0-1.6c.6 0 1-.2 1.5-.5.4-.4.7-.9 1-1.5.2-.6.3-1.3.3-2.1s-.1-1.5-.3-2.1c-.2-.6-.5-1.1-1-1.5-.4-.4-.9-.5-1.5-.5s-1.1.2-1.5.5c-.4.4-.7.8-.9 1.5-.2.6-.3 1.3-.3 2.1s.1 1.5.3 2.1c.2.6.5 1.1.9 1.5.4.3.9.5 1.5.5zm10.5 1.6c-.7 0-1.3-.1-1.9-.4-.5-.3-1-.7-1.4-1.2-.4-.5-.7-1.1-.9-1.8-.2-.7-.3-1.4-.3-2.2 0-.8.1-1.6.3-2.2.2-.7.5-1.3.9-1.8s.9-.9 1.4-1.2c.6-.3 1.2-.5 1.9-.5s1.3.2 1.9.5c.6.3 1 .7 1.4 1.2.4.5.7 1.1.9 1.8.2.7.3 1.4.3 2.2 0 .8-.1 1.6-.3 2.2-.2.7-.5 1.3-.9 1.8s-.9.9-1.4 1.2c-.6.3-1.2.4-1.9.4zm0-1.6c.6 0 1-.2 1.5-.5.4-.4.7-.9 1-1.5.2-.6.3-1.3.3-2.1s-.1-1.5-.3-2.1c-.2-.6-.5-1.1-1-1.5-.4-.4-.9-.5-1.5-.5s-1.1.2-1.5.5c-.4.4-.7.8-.9 1.5-.2.6-.3 1.3-.3 2.1s.1 1.5.3 2.1c.2.6.5 1.1.9 1.5.5.3 1 .5 1.5.5zm10 1.4v-8.2h1.6v1.1h.1c.2-.3.4-.5.6-.7.3-.2.6-.4.9-.5.3-.1.7-.2 1-.2.6 0 1.1.1 1.5.4.4.3.7.7.9 1.1.3-.4.6-.8 1.1-1.1.5-.3 1-.5 1.7-.5 1 0 1.7.3 2.1.9.5.6.7 1.4.7 2.3v5.2h-1.7v-4.9c0-.7-.1-1.1-.4-1.4-.3-.3-.7-.5-1.2-.5-.4 0-.7.1-1 .3-.3.2-.5.5-.7.9-.2.4-.2.8-.2 1.2v4.4H108v-4.9c0-.7-.1-1.1-.4-1.4-.3-.3-.7-.5-1.2-.5-.4 0-.7.1-1 .3-.3.2-.5.5-.7.9-.2.4-.2.8-.2 1.2v4.4h-1.8zm17.2.2c-.6 0-1.2-.1-1.7-.3-.5-.2-.9-.5-1.2-.8-.3-.3-.5-.7-.7-1.1l1.5-.7c.2.4.5.8.8 1 .4.2.8.3 1.2.3.4 0 .8-.1 1.1-.2.3-.2.5-.4.5-.8 0-.2-.1-.4-.2-.6-.1-.1-.3-.3-.6-.4-.2-.1-.5-.2-.8-.2l-1-.2c-.4-.1-.8-.3-1.1-.5-.3-.2-.6-.5-.8-.8-.2-.3-.3-.7-.3-1.1 0-.5.1-.9.4-1.3.3-.4.7-.6 1.1-.8.5-.2 1-.3 1.6-.3.5 0 1 .1 1.4.2.4.1.8.3 1.1.6.3.3.6.6.8 1l-1.5.7c-.2-.4-.4-.6-.7-.8-.3-.1-.6-.2-1-.2s-.7.1-1 .2c-.3.2-.4.4-.4.6 0 .3.1.5.4.7.2.2.5.3.9.4l1.2.3c.8.2 1.4.5 1.8.9.4.4.6.9.6 1.5 0 .5-.2 1-.5 1.4-.3.4-.7.7-1.2.9-.5.3-1.1.4-1.7.4zM42.4 96.3V82h1.7v14.3h-1.7zm4.6 0V86.1h1.6v1.5h.1c.3-.5.7-.9 1.3-1.3.6-.4 1.3-.5 2-.5 1.2 0 2.2.4 2.8 1.1.6.7 1 1.7 1 2.9v6.5h-1.7V90c0-1-.2-1.7-.7-2.1-.5-.4-1.1-.6-1.8-.6-.6 0-1.1.2-1.5.5-.4.3-.8.7-1 1.2-.2.5-.4 1-.4 1.6v5.7H47zm10-10.2h6v1.5h-6v-1.5zm1.8 7.5V83.3h1.7v10c0 .5.1.9.3 1.2s.6.4 1.1.4c.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.5-.6-.7-1.3-.7-2.2zm10.3 3c-1 0-1.9-.2-2.6-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.6-1.7-.6-2.8 0-1 .2-1.9.6-2.7s1-1.5 1.7-2 1.6-.8 2.6-.8 1.9.2 2.6.7c.7.4 1.3 1.1 1.7 1.8.4.8.6 1.7.6 2.7v.5H65V90h7c0-.3-.1-.6-.2-.9-.1-.3-.3-.6-.5-.9-.2-.3-.6-.5-.9-.7-.4-.2-.8-.3-1.4-.3-.7 0-1.2.2-1.7.5s-.8.8-1.1 1.4c-.3.6-.4 1.2-.4 2 0 .9.2 1.6.5 2.2.3.6.8 1 1.3 1.3.5.3 1.1.4 1.7.4.8 0 1.4-.2 1.8-.5.5-.4.9-.8 1.2-1.3l1.4.7c-.4.8-1 1.4-1.7 1.9-.9.6-1.8.8-2.9.8zm6.7-.3V86.1h1.6v1.6h.1c.1-.4.4-.7.7-1 .3-.3.7-.5 1.1-.7s.8-.2 1.2-.2h.7c.2 0 .3.1.5.2v1.8c-.2-.1-.5-.2-.7-.2-.2-.1-.5-.1-.7-.1-.5 0-1 .1-1.4.4-.4.3-.7.7-1 1.1-.2.5-.4 1-.4 1.5v5.7h-1.7zm10.4.3c-.8 0-1.4-.1-2-.4s-1-.7-1.3-1.2c-.3-.5-.5-1.1-.5-1.8 0-.8.2-1.4.6-1.9.4-.5.9-.9 1.5-1.2.7-.3 1.4-.4 2.2-.4.4 0 .9 0 1.2.1s.7.2 1 .3c.3.1.5.2.7.3v-.6c0-.8-.3-1.4-.8-1.8-.5-.5-1.2-.7-2-.7-.6 0-1.1.1-1.6.4-.5.2-.9.6-1.1 1l-1.3-1c.3-.4.6-.7 1-1 .4-.3.9-.5 1.4-.7.5-.2 1.1-.2 1.6-.2 1.4 0 2.5.4 3.2 1.1.8.7 1.2 1.7 1.2 3v6.5h-1.6v-1.5h-.1c-.2.3-.4.6-.7.8s-.7.5-1.1.7c-.5.2-1 .2-1.5.2zm.1-1.5c.6 0 1.1-.1 1.6-.4.5-.3.9-.7 1.2-1.2.3-.5.5-1 .5-1.6-.3-.2-.7-.4-1.2-.5s-1-.2-1.5-.2c-1 0-1.7.2-2.1.6-.4.4-.7.9-.7 1.5s.2 1 .6 1.4 1 .4 1.6.4zm11.8 1.5c-1 0-1.9-.2-2.7-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.7-1.7-.7-2.8 0-1 .2-2 .7-2.8.4-.8 1.1-1.5 1.8-1.9.8-.5 1.7-.7 2.7-.7 1.1 0 2.1.3 2.8.8.7.5 1.3 1.2 1.6 2l-1.5.6c-.2-.6-.6-1.1-1.1-1.4-.5-.3-1.1-.5-1.8-.5-.6 0-1.2.2-1.7.5s-.9.8-1.2 1.4c-.3.6-.5 1.3-.5 2 0 .8.2 1.4.5 2 .3.6.7 1 1.2 1.4.5.3 1.1.5 1.7.5.7 0 1.3-.2 1.9-.5s.9-.8 1.2-1.4l1.5.6c-.3.8-.9 1.5-1.6 2s-1.9.8-3 .8zm5.5-10.5h6v1.5h-6v-1.5zm1.7 7.5V83.3h1.7v10c0 .5.1.9.3 1.2s.6.4 1.1.4c.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8s-.7-1.3-.7-2.2zm6.5 2.7V86.1h1.7v10.2h-1.7zm.9-12c-.3 0-.6-.1-.9-.4s-.4-.5-.4-.9c0-.3.1-.6.4-.9.2-.2.5-.4.9-.4.3 0 .6.1.9.4.2.2.4.5.4.9 0 .3-.1.6-.4.9-.3.2-.6.4-.9.4zm8.1 12.3c-1 0-1.9-.2-2.7-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.7-1.7-.7-2.8 0-1 .2-1.9.7-2.8.4-.8 1.1-1.5 1.8-2 .8-.5 1.7-.7 2.7-.7 1 0 1.9.2 2.7.7.8.5 1.4 1.1 1.9 2s.7 1.7.7 2.7c0 1-.2 1.9-.7 2.8-.4.8-1.1 1.5-1.9 1.9-.8.6-1.7.8-2.7.8zm0-1.5c.6 0 1.2-.2 1.7-.5s1-.8 1.3-1.3c.3-.6.5-1.3.5-2.1s-.2-1.5-.5-2.1-.8-1-1.3-1.3c-.5-.3-1.1-.5-1.7-.5-.6 0-1.2.2-1.7.5s-1 .7-1.3 1.3-.5 1.3-.5 2.1.2 1.5.5 2.1c.3.6.8 1 1.3 1.3.5.4 1.1.5 1.7.5zm7 1.2V86.1h1.6v1.5h.1c.3-.5.7-.9 1.3-1.3.6-.4 1.3-.5 2-.5 1.2 0 2.2.4 2.8 1.1.6.7 1 1.7 1 2.9v6.5h-1.7V90c0-1-.2-1.7-.7-2.1-.5-.4-1.1-.6-1.8-.6-.6 0-1.1.2-1.5.5-.4.3-.8.7-1 1.2-.2.5-.4 1-.4 1.6v5.7h-1.7zM143 86.1h6v1.5h-6v-1.5zm1.7 7.5V83.3h1.7v10c0 .5.1.9.3 1.2s.6.4 1.1.4c.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.4-.6-.7-1.3-.7-2.2zm10.5 3c-1 0-1.9-.2-2.7-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.7-1.7-.7-2.8 0-1 .2-1.9.7-2.8.4-.8 1.1-1.5 1.8-2 .8-.5 1.7-.7 2.7-.7 1 0 1.9.2 2.7.7.8.5 1.4 1.1 1.9 2 .4.8.7 1.7.7 2.7 0 1-.2 1.9-.7 2.8-.4.8-1.1 1.5-1.9 1.9-.8.6-1.7.8-2.7.8zm0-1.5c.6 0 1.2-.2 1.7-.5s1-.8 1.3-1.3c.3-.6.5-1.3.5-2.1s-.2-1.5-.5-2.1c-.3-.6-.8-1-1.3-1.3-.5-.3-1.1-.5-1.7-.5-.6 0-1.2.2-1.7.5s-1 .7-1.3 1.3c-.3.6-.5 1.3-.5 2.1s.2 1.5.5 2.1c.3.6.8 1 1.3 1.3.5.4 1.1.5 1.7.5zm12.2 1.2V82h2.1l7.2 11.4h.1l-.1-2.8V82h1.7v14.3h-1.8l-7.5-11.9h-.1l.1 2.8v9.2h-1.7zm18.2.3c-1 0-1.9-.2-2.6-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.6-1.7-.6-2.8 0-1 .2-1.9.6-2.7.4-.8 1-1.5 1.7-2s1.6-.8 2.6-.8 1.9.2 2.6.7c.7.4 1.3 1.1 1.7 1.8.4.8.6 1.7.6 2.7v.5h-8.8V90h7c0-.3-.1-.6-.2-.9-.1-.3-.3-.6-.5-.9-.2-.3-.6-.5-.9-.7-.4-.2-.8-.3-1.4-.3-.7 0-1.2.2-1.7.5s-.8.8-1.1 1.4c-.3.6-.4 1.2-.4 2 0 .9.2 1.6.5 2.2.3.6.8 1 1.3 1.3.5.3 1.1.4 1.7.4.8 0 1.4-.2 1.8-.5.5-.4.9-.8 1.2-1.3l1.4.7c-.4.8-1 1.4-1.7 1.9-1 .6-1.9.8-3 .8zm5.5-.3 4.1-5.9h.2l2.9-4.3h2l-4 5.6h-.1l-3.1 4.6h-2zm.1-10.2h1.9l3.2 4.5h.1l4 5.7h-2l-3-4.5h-.1l-4.1-5.7zm9.9 0h6v1.5h-6v-1.5zm1.8 7.5V83.3h1.7v10c0 .5.1.9.3 1.2.2.3.6.4 1.1.4.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.4-.6-.7-1.3-.7-2.2zm11.2 2.7V82h4.8c.8 0 1.5.2 2.2.5.7.4 1.2.8 1.6 1.5.4.6.6 1.4.6 2.2 0 .8-.2 1.6-.6 2.2-.4.6-.9 1.1-1.6 1.5-.7.4-1.4.5-2.2.5H215v-1.6h4c.6 0 1-.1 1.4-.4.4-.3.7-.6.9-1 .2-.4.3-.8.3-1.2s-.1-.8-.3-1.2c-.2-.4-.5-.7-.9-1-.4-.3-.9-.4-1.4-.4h-3.2v12.7h-1.7zm14.1.3c-.8 0-1.4-.1-2-.4s-1-.7-1.3-1.2-.5-1.1-.5-1.8c0-.8.2-1.4.6-1.9s.9-.9 1.5-1.2c.7-.3 1.4-.4 2.2-.4.4 0 .9 0 1.2.1s.7.2 1 .3c.3.1.5.2.7.3v-.6c0-.8-.3-1.4-.8-1.8-.5-.5-1.2-.7-2-.7-.6 0-1.1.1-1.6.4-.5.2-.9.6-1.1 1l-1.3-1c.3-.4.6-.7 1-1 .4-.3.9-.5 1.4-.7s1.1-.2 1.6-.2c1.4 0 2.5.4 3.2 1.1.8.7 1.2 1.7 1.2 3v6.5h-1.6v-1.5h-.1c-.2.3-.4.6-.7.8s-.7.5-1.1.7c-.6.2-1 .2-1.5.2zm.1-1.5c.6 0 1.1-.1 1.6-.4.5-.3.9-.7 1.2-1.2.3-.5.5-1 .5-1.6-.3-.2-.7-.4-1.2-.5s-1-.2-1.5-.2c-1 0-1.7.2-2.1.6-.4.4-.7.9-.7 1.5s.2 1 .6 1.4 1 .4 1.6.4zm7.4 1.2V86.1h1.7v10.2h-1.7zm.8-12c-.3 0-.6-.1-.9-.4s-.4-.5-.4-.9c0-.3.1-.6.4-.9.2-.2.5-.4.9-.4.3 0 .6.1.9.4.2.2.4.5.4.9 0 .3-.1.6-.4.9-.2.2-.5.4-.9.4zm3.5 12V86.1h1.6v1.5h.1c.3-.5.7-.9 1.3-1.3.6-.4 1.3-.5 2-.5 1.2 0 2.2.4 2.8 1.1.6.7 1 1.7 1 2.9v6.5h-1.7V90c0-1-.2-1.7-.7-2.1-.5-.4-1.1-.6-1.8-.6-.6 0-1.1.2-1.5.5-.4.3-.8.7-1 1.2-.2.5-.4 1-.4 1.6v5.7H240zm10.1-10.2h6v1.5h-6v-1.5zm1.7 7.5V83.3h1.7v10c0 .5.1.9.3 1.2s.6.4 1.1.4c.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8s-.7-1.3-.7-2.2zM96 172.8c-2.4 0-4.3 1.9-4.3 4.3 0 2 1.4 3.7 3.3 4.2v20.1h2v-20.1c1.9-.5 3.3-2.1 3.3-4.2 0-2.3-1.9-4.3-4.3-4.3zM201.6 172.6c-2.4 0-4.3 1.9-4.3 4.3 0 2 1.4 3.7 3.3 4.2v19.8h2v-19.8c1.9-.5 3.3-2.1 3.3-4.2 0-2.4-1.9-4.3-4.3-4.3z"></path></svg>
  <svg title="A diagram of the INP thresholds. An INP at or below 200 milliseconds is considered good. Between 200 and 500 milliseconds suggests a page's responsiveness needs improvement. Anything over 500 milliseconds means that a page's responsiveness is poor." class="inp-desktop" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0" y="0" viewBox="0 0 658.4 113.6" style="enable-background:new 0 0 658.4 113.6" xml:space="preserve"><style>.st0{fill: #2979FF} v.st1{fill-rule: evenodd;clip-rule: evenodd;fill: #0CCE6B} .st2 {fill: #191919} .st3{fill-rule: evenodd;clip-rule: evenodd;fill: #FFA400} .st4{fill-rule: evenodd;clip-rule: evenodd;fill: #FF4E42} @media screen and (prefers-color-scheme: light){.st2{fill: #191919}} @media screen and (prefers-color-scheme: dark){.st2{fill: #fff}} [data-user-theme=dark] .st2{fill: #fff}</style><path class="st0" d="M30.2 68.7V0h13v68.7h-13zm28.7 0V0H74l27.7 46.1h.8l-.8-13.2V0h12.9v68.7H101L71.7 20.1h-.8l.8 13.2v35.4H58.9zm71.3 0V0h24.2c4.4 0 8.4.9 11.9 2.7 3.5 1.8 6.3 4.4 8.4 7.6 2.1 3.3 3.1 7 3.1 11.3 0 4.3-1 8.1-3.1 11.4-2.1 3.3-4.9 5.8-8.4 7.7-3.5 1.8-7.5 2.7-11.9 2.7h-17V31.2h17.4c2.2 0 4.1-.4 5.7-1.3 1.5-.9 2.7-2.1 3.5-3.5.8-1.4 1.2-3 1.2-4.7 0-1.7-.4-3.2-1.2-4.6-.8-1.4-1.9-2.6-3.5-3.5-1.5-.9-3.4-1.3-5.7-1.3h-11.6v56.5h-13z"></path><path class="st1" d="M303.2 14.9h115.2v43.2H303.2V14.9z"></path><path class="st2" d="M345.3 41.5c-.7 0-1.3-.1-1.9-.4-.6-.2-1.1-.6-1.6-1s-.8-1-1.1-1.6c-.3-.6-.4-1.3-.4-2s.1-1.4.4-2c.3-.6.6-1.1 1.1-1.6.5-.5 1-.8 1.6-1 .6-.2 1.2-.4 1.9-.4s1.4.1 2 .4c.6.2 1.1.6 1.6 1.1l-1 1c-.2-.2-.4-.4-.7-.6-.3-.2-.5-.3-.9-.4-.3-.1-.6-.1-1-.1-.5 0-.9.1-1.3.3-.4.2-.8.4-1.1.7-.3.3-.6.7-.8 1.1-.2.4-.3.9-.3 1.5s.1 1 .3 1.5c.2.4.5.8.8 1.1.3.3.7.6 1.1.7.4.2.9.2 1.3.2s.8-.1 1.2-.2c.4-.1.7-.3 1-.5.3-.2.5-.5.7-.8.2-.3.3-.7.3-1.1h-3.3v-1.3h4.6v.8c0 .7-.1 1.3-.4 1.9-.2.6-.6 1-1 1.5-.4.4-.9.7-1.5.9-.3.2-.9.3-1.6.3zm10.5 0c-.7 0-1.4-.1-2-.4-.6-.3-1.1-.6-1.6-1.1-.4-.5-.8-1-1-1.6-.2-.6-.4-1.2-.4-1.9s.1-1.3.4-1.9c.2-.6.6-1.1 1-1.6s1-.8 1.6-1.1c.6-.3 1.3-.4 2-.4s1.4.1 2 .4c.6.2 1.1.6 1.6 1.1.5.5.8 1 1 1.6.2.6.4 1.2.4 1.9s-.1 1.3-.4 1.9c-.2.6-.6 1.1-1 1.6s-1 .8-1.6 1.1-1.2.4-2 .4zm0-1.4c.6 0 1.2-.2 1.8-.5.5-.3.9-.7 1.2-1.3s.5-1.2.5-1.9-.2-1.3-.5-1.9-.7-1-1.2-1.3c-.5-.3-1.1-.5-1.8-.5-.6 0-1.2.2-1.8.5-.5.3-.9.7-1.2 1.3s-.5 1.2-.5 1.9.2 1.3.5 1.9.7 1 1.2 1.3c.6.4 1.2.5 1.8.5zm11 1.4c-.7 0-1.4-.1-2-.4-.6-.3-1.1-.6-1.6-1.1-.4-.5-.8-1-1-1.6-.2-.6-.4-1.2-.4-1.9s.1-1.3.4-1.9c.2-.6.6-1.1 1-1.6s1-.8 1.6-1.1c.6-.3 1.3-.4 2-.4s1.4.1 2 .4c.6.2 1.1.6 1.6 1.1.5.5.8 1 1 1.6.2.6.4 1.2.4 1.9s-.1 1.3-.4 1.9c-.2.6-.6 1.1-1 1.6s-1 .8-1.6 1.1-1.3.4-2 .4zm0-1.4c.6 0 1.2-.2 1.8-.5.5-.3.9-.7 1.2-1.3s.5-1.2.5-1.9-.2-1.3-.5-1.9-.7-1-1.2-1.3c-.5-.3-1.1-.5-1.8-.5-.6 0-1.2.2-1.8.5-.5.3-.9.7-1.2 1.3s-.5 1.2-.5 1.9.2 1.3.5 1.9.7 1 1.2 1.3c.6.4 1.2.5 1.8.5zm6.6 1.2v-9.5h3c1 0 1.9.2 2.6.6.7.4 1.3 1 1.7 1.7s.6 1.5.6 2.5c0 .9-.2 1.8-.6 2.5s-1 1.3-1.7 1.7c-.7.4-1.6.6-2.6.6h-3zm1.5-1.4h1.5c.7 0 1.3-.1 1.8-.4.5-.3.9-.7 1.2-1.2.3-.5.4-1.1.4-1.8s-.1-1.3-.4-1.8c-.3-.5-.7-.9-1.2-1.2-.5-.3-1.1-.4-1.8-.4h-1.5v6.8z"></path><path class="st3" d="M418.4 14.9h124.8v43.2H418.4V14.9z"></path><path class="st2" d="M460.8 33.3v-9.5h1.7l4.3 7h.1l-.1-1.8v-5.2h1.5v9.5h-1.5l-4.5-7.4h-.1l.1 1.8v5.5h-1.5zm9.7 0v-9.5h5.8v1.4H472V32h4.3v1.4h-5.8zm.7-4.1v-1.4h4.6v1.4h-4.6zm6.9 4.1v-9.5h5.8v1.4h-4.3V32h4.3v1.4h-5.8zm.8-4.1v-1.4h4.6v1.4h-4.6zm6.8 4.1v-9.5h3c1 0 1.9.2 2.6.6.7.4 1.3 1 1.7 1.7s.6 1.5.6 2.5c0 .9-.2 1.8-.6 2.5s-1 1.3-1.7 1.7c-.7.4-1.6.6-2.6.6h-3zm1.5-1.4h1.5c.7 0 1.3-.1 1.8-.4.5-.3.9-.7 1.2-1.2.3-.5.4-1.1.4-1.8s-.1-1.3-.4-1.8c-.3-.5-.7-.9-1.2-1.2-.5-.3-1.1-.4-1.8-.4h-1.5v6.8zm10.9 1.6c-.5 0-1-.1-1.5-.3-.5-.2-.9-.5-1.2-.9-.3-.4-.6-.9-.8-1.5l1.4-.6c.1.5.4.9.8 1.3.4.3.8.5 1.3.5.3 0 .6-.1.8-.2.3-.1.5-.3.6-.5.2-.2.2-.5.2-.8 0-.3-.1-.5-.2-.7-.1-.2-.3-.4-.6-.5-.3-.2-.7-.3-1.1-.5l-.6-.2c-.3-.1-.5-.2-.8-.4-.3-.1-.5-.3-.7-.5-.2-.2-.4-.5-.5-.7-.1-.3-.2-.6-.2-1 0-.5.1-.9.4-1.3.2-.4.6-.7 1-.9.4-.2 1-.4 1.6-.4.6 0 1.1.1 1.5.3.4.2.7.5 1 .8.2.3.4.6.5.9l-1.3.6c-.1-.2-.2-.4-.3-.5-.1-.2-.3-.3-.5-.4-.2-.1-.5-.2-.8-.2-.3 0-.5.1-.8.2-.2.1-.4.2-.6.4-.1.2-.2.4-.2.6 0 .3.1.6.4.8s.7.4 1.2.6l.6.2c.3.1.6.2.9.4.3.1.6.3.8.6.2.2.4.5.6.8.1.3.2.7.2 1.2s-.1.9-.3 1.3c-.2.4-.4.6-.8.9-.3.2-.7.4-1 .5-.3 0-.7.1-1 .1zM434.4 49.3v-9.5h1.5v9.5h-1.5zm3.6 0v-9.5h2l2.8 7.3h.1l2.8-7.3h2v9.5h-1.4v-5.4l.1-1.7h-.1l-2.8 7.1h-1.2l-2.8-7.1h-.1l.1 1.7v5.4H438zm11.7 0v-9.5h3.3c.6 0 1.1.1 1.6.4.5.2.9.6 1.1 1 .3.4.4.9.4 1.5s-.1 1.1-.4 1.5c-.3.4-.7.8-1.1 1-.5.2-1 .4-1.6.4h-2.5v-1.4h2.5c.4 0 .7-.1.9-.2.2-.1.4-.3.5-.6.1-.2.2-.5.2-.8 0-.3-.1-.5-.2-.7-.1-.2-.3-.4-.5-.6-.2-.2-.5-.2-.9-.2h-1.8v8.2h-1.5zm8 0v-9.5h3.3c.6 0 1.1.1 1.6.4.5.2.8.6 1.1 1s.4.9.4 1.5c0 .4-.1.8-.2 1.1s-.4.7-.7.9c-.3.3-.6.5-1 .6-.4.1-.9.2-1.4.2h-2.3v-1.3h2.5c.3 0 .6-.1.8-.2.2-.1.4-.3.6-.6.2-.2.2-.5.2-.8 0-.3-.1-.5-.2-.7-.1-.2-.3-.4-.5-.6-.2-.1-.5-.2-.9-.2h-1.9v8.2h-1.4zm2.2-4.4h1.7l3 4.3v.1h-1.7l-3-4.4zm10.3 4.6c-.7 0-1.4-.1-2-.4-.6-.3-1.1-.6-1.6-1.1-.4-.5-.8-1-1-1.6-.2-.6-.4-1.2-.4-1.9s.1-1.3.4-1.9c.2-.6.6-1.1 1-1.6s1-.8 1.6-1.1c.6-.3 1.3-.4 2-.4s1.4.1 2 .4c.6.2 1.1.6 1.6 1.1.5.5.8 1 1 1.6.2.6.4 1.2.4 1.9s-.1 1.3-.4 1.9c-.2.6-.6 1.1-1 1.6s-1 .8-1.6 1.1c-.6.3-1.2.4-2 .4zm0-1.4c.6 0 1.2-.2 1.8-.5.5-.3.9-.7 1.2-1.3.3-.5.5-1.2.5-1.9s-.2-1.3-.5-1.9c-.3-.5-.7-1-1.2-1.3-.5-.3-1.1-.5-1.8-.5s-1.2.2-1.8.5c-.5.3-.9.7-1.2 1.3-.3.5-.5 1.2-.5 1.9s.2 1.3.5 1.9c.3.5.7 1 1.2 1.3.6.4 1.2.5 1.8.5zm8.8 1.2-3.4-9.5h1.6l2.2 6.3.3 1.1h.1l.4-1.1 2.2-6.3h1.6l-3.5 9.5H479zm6.2 0v-9.5h5.8v1.4h-4.3V48h4.3v1.4h-5.8zm.8-4.1v-1.4h4.6v1.4H486zm6.8 4.1v-9.5h2l2.8 7.3h.1l2.8-7.3h2v9.5H501v-5.4l.1-1.7h-.1l-2.8 7.1H497l-2.8-7.1h-.1l.1 1.7v5.4h-1.4zm11.8 0v-9.5h5.8v1.4h-4.3V48h4.3v1.4h-5.8zm.8-4.1v-1.4h4.6v1.4h-4.6zm6.8 4.1v-9.5h1.7l4.3 7h.1l-.1-1.8v-5.2h1.5v9.5h-1.5l-4.5-7.4h-.1l.1 1.8v5.5h-1.5zm11.7 0v-8.8h1.5v8.8h-1.5zm-2.7-8.2v-1.4h6.8v1.4h-6.8z"></path><path class="st4" d="M543.2 14.9h115.2v43.2H543.2V14.9z"></path><path class="st2" d="M582.9 41.3v-9.5h3.3c.6 0 1.1.1 1.6.4.5.2.9.6 1.1 1 .3.4.4.9.4 1.5s-.1 1.1-.4 1.5c-.3.4-.7.8-1.1 1-.5.2-1 .4-1.6.4h-2.5v-1.4h2.5c.4 0 .7-.1.9-.2.2-.1.4-.3.5-.6.1-.2.2-.5.2-.8 0-.3-.1-.5-.2-.7-.1-.2-.3-.4-.5-.6-.2-.2-.5-.2-.9-.2h-1.8v8.2h-1.5zm12.3.2c-.7 0-1.4-.1-2-.4-.6-.3-1.1-.6-1.6-1.1-.4-.5-.8-1-1-1.6-.2-.6-.4-1.2-.4-1.9s.1-1.3.4-1.9c.2-.6.6-1.1 1-1.6s1-.8 1.6-1.1c.6-.3 1.3-.4 2-.4s1.4.1 2 .4c.6.2 1.1.6 1.6 1.1.5.5.8 1 1 1.6.2.6.4 1.2.4 1.9s-.1 1.3-.4 1.9c-.2.6-.6 1.1-1 1.6s-1 .8-1.6 1.1c-.7.3-1.3.4-2 .4zm0-1.4c.6 0 1.2-.2 1.8-.5.5-.3.9-.7 1.2-1.3.3-.5.5-1.2.5-1.9s-.2-1.3-.5-1.9c-.3-.5-.7-1-1.2-1.3-.5-.3-1.1-.5-1.8-.5-.6 0-1.2.2-1.8.5-.5.3-.9.7-1.2 1.3-.3.5-.5 1.2-.5 1.9s.2 1.3.5 1.9c.3.5.7 1 1.2 1.3.6.4 1.1.5 1.8.5zm10.9 1.4c-.7 0-1.4-.1-2-.4-.6-.3-1.1-.6-1.6-1.1-.4-.5-.8-1-1-1.6-.2-.6-.4-1.2-.4-1.9s.1-1.3.4-1.9c.2-.6.6-1.1 1-1.6s1-.8 1.6-1.1c.6-.3 1.3-.4 2-.4s1.4.1 2 .4c.6.2 1.1.6 1.6 1.1.5.5.8 1 1 1.6.2.6.4 1.2.4 1.9s-.1 1.3-.4 1.9c-.2.6-.6 1.1-1 1.6s-1 .8-1.6 1.1c-.6.3-1.3.4-2 .4zm0-1.4c.6 0 1.2-.2 1.8-.5.5-.3.9-.7 1.2-1.3.3-.5.5-1.2.5-1.9s-.2-1.3-.5-1.9c-.3-.5-.7-1-1.2-1.3-.5-.3-1.1-.5-1.8-.5s-1.2.2-1.8.5c-.5.3-.9.7-1.2 1.3-.3.5-.5 1.2-.5 1.9s.2 1.3.5 1.9c.3.5.7 1 1.2 1.3.6.4 1.2.5 1.8.5zm6.7 1.2v-9.5h3.3c.6 0 1.1.1 1.6.4.5.2.8.6 1.1 1s.4.9.4 1.5c0 .4-.1.8-.2 1.1s-.4.7-.7.9c-.3.3-.6.5-1 .6-.4.1-.9.2-1.4.2h-2.3v-1.3h2.5c.3 0 .6-.1.8-.2.2-.1.4-.3.6-.6.2-.2.2-.5.2-.8 0-.3-.1-.5-.2-.7-.1-.2-.3-.4-.5-.6-.2-.1-.5-.2-.9-.2h-1.9v8.2h-1.4zm2.2-4.4h1.7l3 4.3v.1H618l-3-4.4zM517.7 102.9c-.6 0-1.1-.1-1.7-.3-.6-.2-1-.6-1.5-1-.4-.5-.7-1.1-.9-1.8l1.7-.7c.2.6.4 1.1.8 1.5.4.4.9.6 1.6.6.7 0 1.2-.2 1.6-.6.4-.4.7-1 .7-1.6 0-.7-.2-1.2-.6-1.6-.4-.4-1-.7-1.6-.7-.4 0-.8.1-1.1.2-.3.2-.6.4-.8.7l-1.8-.8.7-6h6.4v1.7h-4.9l-.4 3.2h.1c.3-.2.6-.4.9-.5.4-.1.8-.2 1.3-.2.7 0 1.3.2 1.9.5.6.3 1 .8 1.4 1.4.4.6.5 1.3.5 2 0 .8-.2 1.5-.5 2.1-.4.6-.8 1.1-1.5 1.4-.7.3-1.5.5-2.3.5zm10.8 0c-.7 0-1.4-.2-2-.5-.6-.3-1.1-.8-1.5-1.3-.4-.6-.8-1.2-1-2-.2-.8-.3-1.6-.3-2.4 0-.9.1-1.7.3-2.5.2-.8.6-1.4 1-2 .4-.6.9-1 1.5-1.3.6-.3 1.3-.5 2-.5.8 0 1.4.2 2 .5.6.3 1.1.8 1.5 1.3.4.6.8 1.2 1 2 .2.8.3 1.6.3 2.5 0 .9-.1 1.7-.3 2.4-.2.8-.5 1.4-1 2-.4.6-.9 1-1.5 1.3-.6.3-1.2.5-2 .5zm0-1.8c.6 0 1.1-.2 1.6-.6.4-.4.8-.9 1-1.6.2-.7.4-1.4.4-2.2 0-.8-.1-1.6-.4-2.3-.2-.7-.6-1.2-1-1.6-.4-.4-1-.6-1.6-.6-.6 0-1.2.2-1.6.6-.4.4-.8.9-1 1.6-.2.7-.4 1.4-.4 2.3 0 .8.1 1.6.4 2.2.2.7.6 1.2 1 1.6.5.4 1 .6 1.6.6zm11.4 1.8c-.7 0-1.4-.2-2-.5-.6-.3-1.1-.8-1.5-1.3-.4-.6-.8-1.2-1-2-.2-.8-.3-1.6-.3-2.4 0-.9.1-1.7.3-2.5.2-.8.6-1.4 1-2 .4-.6.9-1 1.5-1.3.6-.3 1.3-.5 2-.5.8 0 1.4.2 2 .5.6.3 1.1.8 1.5 1.3.4.6.8 1.2 1 2 .2.8.3 1.6.3 2.5 0 .9-.1 1.7-.3 2.4-.2.8-.5 1.4-1 2-.4.6-.9 1-1.5 1.3-.5.3-1.2.5-2 .5zm.1-1.8c.6 0 1.1-.2 1.6-.6.4-.4.8-.9 1-1.6.2-.7.4-1.4.4-2.2 0-.8-.1-1.6-.4-2.3-.2-.7-.6-1.2-1-1.6-.4-.4-1-.6-1.6-.6-.6 0-1.2.2-1.6.6-.4.4-.8.9-1 1.6-.2.7-.4 1.4-.4 2.3 0 .8.1 1.6.4 2.2.2.7.6 1.2 1 1.6.4.4.9.6 1.6.6zm10.8 1.5v-8.8h1.8V95h.1c.2-.3.4-.5.7-.8s.6-.4.9-.5c.4-.1.7-.2 1.1-.2.7 0 1.2.2 1.7.5s.8.7 1 1.2c.3-.5.7-.8 1.2-1.2.5-.3 1.1-.5 1.8-.5 1 0 1.8.3 2.3 1 .5.6.8 1.5.8 2.5v5.7h-1.9v-5.4c0-.7-.2-1.2-.5-1.5-.3-.3-.7-.5-1.3-.5-.4 0-.8.1-1.1.4-.3.2-.6.6-.8 1s-.3.9-.3 1.3v4.7h-1.9v-5.4c0-.7-.2-1.2-.5-1.5-.3-.3-.8-.5-1.3-.5-.4 0-.8.1-1.1.4-.3.2-.6.6-.7 1s-.3.9-.3 1.3v4.7h-1.7zm18.6.3c-.7 0-1.3-.1-1.8-.3-.5-.2-.9-.5-1.3-.9-.3-.4-.6-.8-.7-1.2l1.7-.7c.2.5.5.8.9 1.1.4.2.8.4 1.3.4s.9-.1 1.2-.2c.3-.2.5-.4.5-.8 0-.2-.1-.5-.2-.6s-.4-.3-.6-.4l-.9-.3-1.1-.2c-.4-.1-.8-.3-1.2-.5-.4-.2-.7-.5-.9-.9-.2-.4-.3-.8-.3-1.2 0-.5.2-1 .5-1.4.3-.4.7-.7 1.2-.9.5-.2 1.1-.3 1.7-.3.6 0 1.1.1 1.5.2.5.1.9.3 1.2.6.3.3.6.6.8 1l-1.6.7c-.2-.4-.5-.7-.8-.8-.3-.2-.7-.2-1.1-.2-.4 0-.8.1-1.1.3-.3.2-.4.4-.4.7 0 .3.1.5.4.7.3.2.6.3 1 .4l1.3.3c.9.2 1.5.6 2 1 .4.4.7 1 .7 1.6 0 .6-.2 1.1-.5 1.5-.3.4-.8.7-1.3 1-.8.2-1.5.3-2.1.3zM389.2 102.6v-1.8l.4-.4.9-.9c.4-.4.7-.8 1.1-1.2l1.1-1.1.8-.8c.3-.3.6-.6.8-.9.2-.3.3-.5.4-.8.1-.2.1-.5.1-.8 0-.3-.1-.6-.2-.8-.1-.3-.4-.5-.7-.6-.3-.2-.6-.2-1.1-.2-.4 0-.7.1-1 .2-.3.2-.5.4-.7.6-.2.2-.3.5-.3.7l-1.7-.7c.1-.3.2-.6.4-.9.2-.3.4-.6.8-.9.3-.3.7-.5 1.1-.7.4-.2.9-.3 1.5-.3.8 0 1.4.2 2 .5.6.3 1 .7 1.3 1.2.3.5.5 1.1.5 1.7 0 .5-.1 1-.3 1.5-.2.5-.4.9-.7 1.3-.3.4-.6.7-.9 1-.2.1-.4.3-.6.6-.2.2-.5.5-.7.8l-.8.8-.7.7-.4.4h5.2v1.7h-7.6zm14.2.3c-.7 0-1.4-.2-2-.5-.6-.3-1.1-.8-1.5-1.3-.4-.6-.8-1.2-1-2-.2-.8-.3-1.6-.3-2.4 0-.9.1-1.7.3-2.5.2-.8.6-1.4 1-2 .4-.6.9-1 1.5-1.3.6-.3 1.3-.5 2-.5.8 0 1.4.2 2 .5.6.3 1.1.8 1.5 1.3.4.6.8 1.2 1 2 .2.8.3 1.6.3 2.5 0 .9-.1 1.7-.3 2.4-.2.8-.5 1.4-1 2-.4.6-.9 1-1.5 1.3-.5.3-1.2.5-2 .5zm0-1.8c.6 0 1.1-.2 1.6-.6.4-.4.8-.9 1-1.6.2-.7.4-1.4.4-2.2 0-.8-.1-1.6-.4-2.3-.2-.7-.6-1.2-1-1.6-.4-.4-1-.6-1.6-.6-.6 0-1.2.2-1.6.6-.4.4-.8.9-1 1.6-.2.7-.4 1.4-.4 2.3 0 .8.1 1.6.4 2.2.2.7.6 1.2 1 1.6.5.4 1 .6 1.6.6zm11.5 1.8c-.7 0-1.4-.2-2-.5-.6-.3-1.1-.8-1.5-1.3-.4-.6-.8-1.2-1-2-.2-.8-.3-1.6-.3-2.4 0-.9.1-1.7.3-2.5.2-.8.6-1.4 1-2 .4-.6.9-1 1.5-1.3.6-.3 1.3-.5 2-.5.8 0 1.4.2 2 .5.6.3 1.1.8 1.5 1.3.4.6.8 1.2 1 2 .2.8.3 1.6.3 2.5 0 .9-.1 1.7-.3 2.4-.2.8-.5 1.4-1 2-.4.6-.9 1-1.5 1.3-.6.3-1.3.5-2 .5zm0-1.8c.6 0 1.1-.2 1.6-.6.4-.4.8-.9 1-1.6.2-.7.4-1.4.4-2.2 0-.8-.1-1.6-.4-2.3-.2-.7-.6-1.2-1-1.6-.4-.4-1-.6-1.6-.6-.6 0-1.2.2-1.6.6-.4.4-.8.9-1 1.6-.2.7-.4 1.4-.4 2.3 0 .8.1 1.6.4 2.2.2.7.6 1.2 1 1.6.4.4.9.6 1.6.6zm10.8 1.5v-8.8h1.8V95h.1c.2-.3.4-.5.7-.8s.6-.4.9-.5c.4-.1.7-.2 1.1-.2.7 0 1.2.2 1.7.5s.8.7 1 1.2c.3-.5.7-.8 1.2-1.2.5-.3 1.1-.5 1.8-.5 1 0 1.8.3 2.3 1 .5.6.8 1.5.8 2.5v5.7h-1.9v-5.4c0-.7-.2-1.2-.5-1.5-.3-.3-.7-.5-1.3-.5-.4 0-.8.1-1.1.4-.3.2-.6.6-.8 1s-.3.9-.3 1.3v4.7h-1.9v-5.4c0-.7-.2-1.2-.5-1.5-.3-.3-.8-.5-1.3-.5-.4 0-.8.1-1.1.4-.3.2-.6.6-.7 1s-.3.9-.3 1.3v4.7h-1.7zm18.6.3c-.7 0-1.3-.1-1.8-.3-.5-.2-.9-.5-1.3-.9-.3-.4-.6-.8-.7-1.2l1.7-.7c.2.5.5.8.9 1.1.4.2.8.4 1.3.4s.9-.1 1.2-.2c.3-.2.5-.4.5-.8 0-.2-.1-.5-.2-.6-.2-.2-.4-.3-.6-.4l-.9-.3-1.1-.2c-.4-.1-.8-.3-1.2-.5-.4-.2-.7-.5-.9-.9-.2-.4-.3-.8-.3-1.2 0-.5.2-1 .5-1.4.3-.4.7-.7 1.2-.9.5-.2 1.1-.3 1.7-.3.6 0 1.1.1 1.5.2.5.1.9.3 1.2.6.3.3.6.6.8 1l-1.6.7c-.2-.4-.5-.7-.8-.8-.3-.2-.7-.2-1.1-.2-.4 0-.8.1-1.1.3-.3.2-.4.4-.4.7 0 .3.1.5.4.7.3.2.6.3 1 .4l1.3.3c.9.2 1.5.6 2 1 .4.4.7 1 .7 1.6 0 .6-.2 1.1-.5 1.5-.3.4-.8.7-1.3 1-.8.2-1.4.3-2.1.3zM0 113.3V99h1.7v14.3H0zm4.6 0v-10.2h1.6v1.5h.1c.3-.5.7-.9 1.3-1.3.6-.4 1.3-.5 2-.5 1.2 0 2.2.4 2.8 1.1.6.7 1 1.7 1 2.9v6.5h-1.7V107c0-1-.2-1.7-.7-2.1-.5-.4-1.1-.6-1.8-.6-.6 0-1.1.2-1.5.5-.4.3-.8.7-1 1.2-.2.5-.4 1-.4 1.6v5.7H4.6zm10-10.2h6v1.5h-6v-1.5zm1.8 7.5v-10.4h1.7v10c0 .5.1.9.3 1.2.2.3.6.4 1.1.4.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.5-.5-.7-1.2-.7-2.1zm10.3 3c-1 0-1.9-.2-2.6-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.6-1.7-.6-2.8 0-1 .2-1.9.6-2.7.4-.8 1-1.5 1.7-2s1.6-.8 2.6-.8 1.9.2 2.6.7c.7.4 1.3 1.1 1.7 1.8.4.8.6 1.7.6 2.7v.5h-8.8V107h7c0-.3-.1-.6-.2-.9-.1-.3-.3-.6-.5-.9-.2-.3-.6-.5-.9-.7-.4-.2-.8-.3-1.4-.3-.7 0-1.2.2-1.7.5s-.8.8-1.1 1.4c-.3.6-.4 1.2-.4 2 0 .9.2 1.6.5 2.2.3.6.8 1 1.3 1.3.5.3 1.1.4 1.7.4.8 0 1.4-.2 1.8-.5.5-.4.9-.8 1.2-1.3l1.4.7c-.4.8-1 1.4-1.7 1.9-1 .5-1.9.8-3 .8zm6.7-.3v-10.2H35v1.6h.1c.1-.4.4-.7.7-1 .3-.3.7-.5 1.1-.7.4-.2.8-.2 1.2-.2h.7c.2 0 .3.1.5.2v1.8c-.2-.1-.5-.2-.7-.2-.2-.1-.5-.1-.7-.1-.5 0-1 .1-1.4.4-.4.3-.7.7-1 1.1-.2.5-.4 1-.4 1.5v5.7h-1.7zm10.4.3c-.8 0-1.4-.1-2-.4-.6-.3-1-.7-1.3-1.2-.3-.5-.5-1.1-.5-1.8 0-.8.2-1.4.6-1.9.4-.5.9-.9 1.5-1.2.7-.3 1.4-.4 2.2-.4.4 0 .9 0 1.2.1.4.1.7.2 1 .3.3.1.5.2.7.3v-.6c0-.8-.3-1.4-.8-1.8-.5-.5-1.2-.7-2-.7-.6 0-1.1.1-1.6.4-.5.2-.9.6-1.1 1l-1.3-1c.3-.4.6-.7 1-1 .4-.3.9-.5 1.4-.7.5-.2 1.1-.2 1.6-.2 1.4 0 2.5.4 3.2 1.1.8.7 1.2 1.7 1.2 3v6.5h-1.6v-1.5h-.1c-.2.3-.4.6-.7.8-.3.3-.7.5-1.1.7-.5.1-1 .2-1.5.2zm.1-1.5c.6 0 1.1-.1 1.6-.4.5-.3.9-.7 1.2-1.2.3-.5.5-1 .5-1.6-.3-.2-.7-.4-1.2-.5-.5-.1-1-.2-1.5-.2-1 0-1.7.2-2.1.6-.4.4-.7.9-.7 1.5s.2 1 .6 1.4c.4.2 1 .4 1.6.4zm11.7 1.5c-1 0-1.9-.2-2.7-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.7-1.7-.7-2.8 0-1 .2-2 .7-2.8.4-.8 1.1-1.5 1.8-1.9.8-.5 1.7-.7 2.7-.7 1.1 0 2.1.3 2.8.8.7.5 1.3 1.2 1.6 2l-1.5.6c-.2-.6-.6-1.1-1.1-1.4-.5-.3-1.1-.5-1.8-.5-.6 0-1.2.2-1.7.5s-.9.8-1.2 1.4c-.3.6-.5 1.3-.5 2 0 .8.2 1.4.5 2 .3.6.7 1 1.2 1.4.5.3 1.1.5 1.7.5.7 0 1.3-.2 1.9-.5.5-.3.9-.8 1.2-1.4l1.5.6c-.3.8-.9 1.5-1.6 2-.9.5-1.8.8-3 .8zm5.5-10.5h6v1.5h-6v-1.5zm1.8 7.5v-10.4h1.7v10c0 .5.1.9.3 1.2.2.3.6.4 1.1.4.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.4-.5-.7-1.2-.7-2.1zm6.5 2.7v-10.2h1.7v10.2h-1.7zm.9-12.1c-.3 0-.6-.1-.9-.4-.2-.2-.4-.5-.4-.9 0-.3.1-.6.4-.9.2-.2.5-.4.9-.4.3 0 .6.1.9.4.2.2.4.5.4.9 0 .3-.1.6-.4.9-.3.3-.6.4-.9.4zm8.1 12.4c-1 0-1.9-.2-2.7-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.7-1.7-.7-2.8 0-1 .2-1.9.7-2.8.4-.8 1.1-1.5 1.8-2 .8-.5 1.7-.7 2.7-.7 1 0 1.9.2 2.7.7.8.5 1.4 1.1 1.9 2 .4.8.7 1.7.7 2.7 0 1-.2 1.9-.7 2.8-.4.8-1.1 1.5-1.9 1.9-.8.5-1.7.8-2.7.8zm0-1.6c.6 0 1.2-.2 1.7-.5s1-.8 1.3-1.3c.3-.6.5-1.3.5-2.1s-.2-1.5-.5-2.1c-.3-.6-.8-1-1.3-1.3-.5-.3-1.1-.5-1.7-.5-.6 0-1.2.2-1.7.5s-1 .7-1.3 1.3c-.3.6-.5 1.3-.5 2.1s.2 1.5.5 2.1c.3.6.8 1 1.3 1.3.5.4 1.1.5 1.7.5zm7 1.3v-10.2H87v1.5h.1c.3-.5.7-.9 1.3-1.3.6-.4 1.3-.5 2-.5 1.2 0 2.2.4 2.8 1.1.6.7 1 1.7 1 2.9v6.5h-1.7V107c0-1-.2-1.7-.7-2.1-.5-.4-1.1-.6-1.8-.6-.6 0-1.1.2-1.5.5-.4.3-.8.7-1 1.2-.2.5-.4 1-.4 1.6v5.7h-1.7zm15.1-10.2h6v1.5h-6v-1.5zm1.8 7.5v-10.4h1.7v10c0 .5.1.9.3 1.2.2.3.6.4 1.1.4.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.4-.5-.7-1.2-.7-2.1zm10.5 3c-1 0-1.9-.2-2.7-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.7-1.7-.7-2.8 0-1 .2-1.9.7-2.8.4-.8 1.1-1.5 1.8-2 .8-.5 1.7-.7 2.7-.7 1 0 1.9.2 2.7.7.8.5 1.4 1.1 1.9 2 .4.8.7 1.7.7 2.7 0 1-.2 1.9-.7 2.8-.4.8-1.1 1.5-1.9 1.9-.8.5-1.7.8-2.7.8zm0-1.6c.6 0 1.2-.2 1.7-.5s1-.8 1.3-1.3c.3-.6.5-1.3.5-2.1s-.2-1.5-.5-2.1c-.3-.6-.8-1-1.3-1.3-.5-.3-1.1-.5-1.7-.5-.6 0-1.2.2-1.7.5s-1 .7-1.3 1.3c-.3.6-.5 1.3-.5 2.1s.2 1.5.5 2.1c.3.6.8 1 1.3 1.3.5.4 1.1.5 1.7.5zm12.2 1.3V99h2.1l7.2 11.4h.1l-.1-2.8V99h1.7v14.3h-1.8l-7.5-11.9h-.1l.1 2.8v9.2H125zm18.2.3c-1 0-1.9-.2-2.6-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.6-1.7-.6-2.8 0-1 .2-1.9.6-2.7.4-.8 1-1.5 1.7-2s1.6-.8 2.6-.8 1.9.2 2.6.7c.7.4 1.3 1.1 1.7 1.8.4.8.6 1.7.6 2.7v.5h-8.8V107h7c0-.3-.1-.6-.2-.9-.1-.3-.3-.6-.5-.9-.2-.3-.6-.5-.9-.7-.4-.2-.8-.3-1.4-.3-.7 0-1.2.2-1.7.5s-.8.8-1.1 1.4c-.3.6-.4 1.2-.4 2 0 .9.2 1.6.5 2.2.3.6.8 1 1.3 1.3.5.3 1.1.4 1.7.4.8 0 1.4-.2 1.8-.5.5-.4.9-.8 1.2-1.3l1.4.7c-.4.8-1 1.4-1.7 1.9-1 .5-1.9.8-3 .8zm5.5-.3 4.1-5.9h.2l2.9-4.3h2l-4 5.6h-.1l-3.1 4.6h-2zm.1-10.2h1.9l3.2 4.5h.1l4 5.7h-2l-3-4.5h-.1l-4.1-5.7zm9.9 0h6v1.5h-6v-1.5zm1.8 7.5v-10.4h1.7v10c0 .5.1.9.3 1.2.2.3.6.4 1.1.4.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.4-.5-.7-1.2-.7-2.1zm11.2 2.7V99h4.8c.8 0 1.5.2 2.2.5.7.4 1.2.8 1.6 1.5.4.6.6 1.4.6 2.2 0 .8-.2 1.6-.6 2.2-.4.6-.9 1.1-1.6 1.5-.7.4-1.4.5-2.2.5h-3.9v-1.6h4c.6 0 1-.1 1.4-.4.4-.3.7-.6.9-1 .2-.4.3-.8.3-1.2 0-.4-.1-.8-.3-1.2-.2-.4-.5-.7-.9-1-.4-.3-.9-.4-1.4-.4h-3.2v12.7h-1.7zm14 .3c-.8 0-1.4-.1-2-.4-.6-.3-1-.7-1.3-1.2-.3-.5-.5-1.1-.5-1.8 0-.8.2-1.4.6-1.9.4-.5.9-.9 1.5-1.2.7-.3 1.4-.4 2.2-.4.4 0 .9 0 1.2.1.4.1.7.2 1 .3.3.1.5.2.7.3v-.6c0-.8-.3-1.4-.8-1.8-.5-.5-1.2-.7-2-.7-.6 0-1.1.1-1.6.4-.5.2-.9.6-1.1 1l-1.3-1c.3-.4.6-.7 1-1 .4-.3.9-.5 1.4-.7.5-.2 1.1-.2 1.6-.2 1.4 0 2.5.4 3.2 1.1.8.7 1.2 1.7 1.2 3v6.5h-1.6v-1.5h-.1c-.2.3-.4.6-.7.8-.3.3-.7.5-1.1.7-.5.1-.9.2-1.5.2zm.2-1.5c.6 0 1.1-.1 1.6-.4.5-.3.9-.7 1.2-1.2.3-.5.5-1 .5-1.6-.3-.2-.7-.4-1.2-.5-.5-.1-1-.2-1.5-.2-1 0-1.7.2-2.1.6-.4.4-.7.9-.7 1.5s.2 1 .6 1.4c.4.2 1 .4 1.6.4zm7.4 1.2v-10.2h1.7v10.2h-1.7zm.8-12.1c-.3 0-.6-.1-.9-.4-.2-.2-.4-.5-.4-.9 0-.3.1-.6.4-.9.2-.2.5-.4.9-.4.3 0 .6.1.9.4.2.2.4.5.4.9 0 .3-.1.6-.4.9-.3.3-.5.4-.9.4zm3.5 12.1v-10.2h1.6v1.5h.1c.3-.5.7-.9 1.3-1.3.6-.4 1.3-.5 2-.5 1.2 0 2.2.4 2.8 1.1.6.7 1 1.7 1 2.9v6.5h-1.7V107c0-1-.2-1.7-.7-2.1-.5-.4-1.1-.6-1.8-.6-.6 0-1.1.2-1.5.5-.4.3-.8.7-1 1.2-.2.5-.4 1-.4 1.6v5.7h-1.7zm10-10.2h6v1.5h-6v-1.5zm1.8 7.5v-10.4h1.7v10c0 .5.1.9.3 1.2.2.3.6.4 1.1.4.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.4-.5-.7-1.2-.7-2.1zM418.1 55.2c-1.8 0-3.3 1.5-3.3 3.3 0 1.5 1 2.7 2.3 3.1V83h2V61.6c1.3-.4 2.3-1.7 2.3-3.1 0-1.8-1.5-3.3-3.3-3.3zM546.5 58.6c0-1.8-1.5-3.3-3.3-3.3s-3.3 1.5-3.3 3.3c0 1.5 1 2.7 2.3 3.1v21.2h2V61.7c1.3-.4 2.3-1.6 2.3-3.1z"></path></svg>
</figure>
<h2 id="the-fuzzy-beginning">The fuzzy beginning <a class="headline-link" href="https://web.dev/economic-times-inp/#the-fuzzy-beginning">#</a></h2>
<p>When Google initially introduced INP as an experimental metric with the potential to evolve into one of the Core Web Vitals metrics, the Economic Times team took up the challenge to fix it before it graduates into one, since providing a world class user experience is crucial to our core business values.</p>
<p>INP has been one of the most difficult metrics to solve thus far. In the beginning, it was unclear on how to measure INP effectively. What made it more difficult was the lack of community support—including most Real User Monitoring (RUM) providers not supporting it yet. However, we had Google RUM tools like <a href="https://developer.chrome.com/docs/crux/about/" rel="noopener">Chrome User Experience Report (CrUX)</a>, the <a href="https://github.com/GoogleChrome/web-vitals" rel="noopener"><code>web-vitals</code> JavaScript library</a>, and others supporting it, which gave us a sense of where we stood while we were evaluating the path ahead. Our INP was close to 1,000 milliseconds at the origin level when we started.</p>
<p>One thing that emerged while fixing INP in <a href="https://web.dev/find-slow-interactions-in-the-field/">the field</a> was that one of the lab metrics to target could be <a href="https://web.dev/tbt/">Total Blocking Time (TBT)</a>. TBT was already well documented and supported by the community. Despite already meeting the thresholds for Core Web Vitals, however, we weren't doing as well on the TBT front, as it was over 3 seconds when we began.</p>
<h2 id="what-is-tbt,-and-what-steps-did-we-take-to-improve-it">What is TBT, and what steps did we take to improve it? <a class="headline-link" href="https://web.dev/economic-times-inp/#what-is-tbt,-and-what-steps-did-we-take-to-improve-it">#</a></h2>
<p>TBT is a lab metric that measures the responsiveness of a web page to user input during page load. Any task that takes more than 50 milliseconds to execute is considered a long task, and the time after the 50 millisecond threshold is known as the <strong>blocking time</strong>.</p>
<p>TBT is calculated by taking the sum of the blocking time of all long tasks during page load. For example, if there are two long tasks during load, the blocking time is determined as follows:</p>
<ul>
<li>Task A takes 80 milliseconds (30 milliseconds more than 50 milliseconds).</li>
<li>Task B takes 100 milliseconds (50 milliseconds more than 50 milliseconds).</li>
</ul>
<p>The page's TBT will be: 80 milliseconds (30 + 50). The lower the TBT, the better, and TBT also <a href="https://almanac.httparchive.org/en/2022/performance#inp-and-tbt" rel="noopener">correlates well with INP</a>.</p>
<p>Here’s a quick lab comparison of our TBT before and after taking steps to improve it:</p>
<figure>
  <img alt="A composite image of long tasks during startup as shown in the performance panel of Chrome DevTools, and a report of page metrics. The main thread is blocked during page load for 3,260 milliseconds." decoding="async" height="502" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
    The main thread during startup before optimizing TBT. The TBT is 3,260 milliseconds.
  </figcaption>
</figure>
<figure>
  <img alt="A composite image of long tasks during startup as shown in the performance panel of Chrome DevTools, and a report of page metrics. The main thread is blocked during page load for 120 milliseconds." decoding="async" height="701" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
    The main thread during startup after optimizing TBT. The TBT is 120 milliseconds.
  </figcaption>
</figure>
<h3 id="minimize-main-thread-work">Minimize main thread work <a class="headline-link" href="https://web.dev/economic-times-inp/#minimize-main-thread-work">#</a></h3>
<p>The browser’s main thread handles everything from parsing HTML, building the DOM, to parsing CSS and applying styles, as well as evaluating and executing JavaScript. The main thread also handles user interactions—that is, click, tap, and keypresses. If the main thread is occupied with doing other work, it may not respond to user inputs efficiently, and may lead to a janky user experience.</p>
<p>This was the most difficult task for us, since we have our own algorithms to detect user identity for serving ads based on subscription status and third party scripts for A/B testing, analytics, and more.</p>
<p>We took small steps at first, such as de-prioritizing loading of less critical business assets. Second, we used <a href="https://developer.mozilla.org/docs/Web/API/Window/requestIdleCallback" rel="noopener"><code>requestIdleCallback</code></a> for non-critical work, which can help to reduce TBT.</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'requestIdleCallback'</span> <span class="token keyword">in</span> window<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">this</span><span class="token punctuation">.</span>requestIdleCallbackId <span class="token operator">=</span> <span class="token function">requestIdleCallback</span><span class="token punctuation">(</span><span class="token function">fetchMarketsData</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">timeout</span><span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>  <span class="token function">fetchMarketsData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Fallback in case requestIdleCallback is not supported</span><br><span class="token punctuation">}</span></code></pre>
</div><p>Specifying a timeout is recommended when using <code>requestIdleCallback</code>, since it makes sure that if the given time is elapsed and the callback is not already been called, it executes the callback immediately after the timeout.</p>
<h3 id="minimize-script-evaluation-time">Minimize script evaluation time <a class="headline-link" href="https://web.dev/economic-times-inp/#minimize-script-evaluation-time">#</a></h3>
<p>We also lazy loaded third party libraries using <a href="https://loadable-components.com/" rel="noopener">Loadable components</a>. We also removed unused JavaScript and CSS by profiling the page with the <a href="https://developer.chrome.com/docs/devtools/coverage/" rel="noopener">coverage tool</a> in Chrome DevTools. It helped us to identify areas where <a href="https://webpack.js.org/guides/tree-shaking/" rel="noopener">tree shaking</a> was needed to ship less code during page load, and therefore reduce the initial bundle size of the application.</p>
<figure>
  <img alt="A screenshot of the coverage tool in Chrome DevTools. Here, the tool displays unused portions of JavaScript and CSS files during page load." decoding="async" height="100" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&amp;w=1600 1600w" width="800">
</figure>
<h3 id="reduce-dom-size">Reduce DOM size <a class="headline-link" href="https://web.dev/economic-times-inp/#reduce-dom-size">#</a></h3>
<p>Per Lighthouse, large DOM sizes increase memory usage, causes longer <a href="https://web.dev/economic-times-inp/reduce-the-scope-and-complexity-of-style-calculations/">style recalculations</a>, and produces costly <a href="https://developers.google.com/speed/docs/insights/browser-reflow" rel="noopener">layout reflows</a>.</p>
<figure>
  <img alt="A screenshot of the DOM size audit in Lighthouse. The number of DOM elements reported is 2,706 elements." decoding="async" height="86" loading="lazy" sizes="(min-width: 712px) 712px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&amp;w=1424 1424w" width="712">
</figure>
<p>We reduced the number of DOM nodes in two ways:</p>
<ul>
<li>First, we rendered our menu items at the user’s request (on click). It decreased the DOM size by around 1,200 nodes.</li>
<li>Second, we lazy loaded less important widgets.</li>
</ul>
<p>Because of all these efforts, we reduced TBT significantly, and our INP was reduced accordingly by almost 50%:</p>
<figure>
  <img alt="A screenshot of the INP audit in CrUX. The INP for the page is 539 milliseconds, which exceeds the 'poor' threshold." decoding="async" height="216" loading="lazy" sizes="(min-width: 574px) 574px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&amp;w=1148 1148w" width="574">
</figure>
<p>At this point, we nearly ran out of easy wins to further reduce TBT (and INP by proxy), but we knew we had a lot of room for improvement. This is when we decided to upgrade our custom-built UI boilerplate to the latest version of React along with <a href="https://nextjs.org/" rel="noopener">Next.js</a> to make better use of <a href="https://react.dev/reference/react" rel="noopener">hooks</a> to avoid unnecessary re-rendering of components.</p>
<p>Due to more frequent updates and comparatively lesser traffic as compared to the other portions of the website, we began to migrate our <a href="https://economictimes.indiatimes.com/topic/home" rel="noopener">topic pages</a> to Next.js. We also used <a href="https://partytown.builder.io/" rel="noopener">PartyTown</a> for offloading additional heavy main thread work to web workers, along with techniques like <code>requestIdleCallBack</code> for deferring non-critical tasks.</p>
<h2 id="how-has-improving-inp-helped-the-economic-times">How has improving INP helped The Economic Times? <a class="headline-link" href="https://web.dev/economic-times-inp/#how-has-improving-inp-helped-the-economic-times">#</a></h2>
<h3 id="current-tbt-and-inp-on-origin">Current TBT and INP on origin <a class="headline-link" href="https://web.dev/economic-times-inp/#current-tbt-and-inp-on-origin">#</a></h3>
<p>At the time of publishing this post, the TBT for our origin was 120 milliseconds, down from 3,260 milliseconds when we began our optimization efforts. Similarly, the INP for our origin was 257 milliseconds after our optimization efforts, down from over 1,000 milliseconds.</p>
<figure>
  <img alt="A screenshot of the INP audit in CrUX. The INP for the page is 257 milliseconds, which is within the 'needs improvement' thresholds." decoding="async" height="218" loading="lazy" sizes="(min-width: 582px) 582px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&amp;w=1164 1164w" width="582">
</figure>
<h3 id="inp-crux-trend">INP CrUX trend <a class="headline-link" href="https://web.dev/economic-times-inp/#inp-crux-trend">#</a></h3>
<p>The traffic received on topic pages represents a significantly smaller portion of overall traffic. Hence, it was an ideal place for experimentation. The CrUX results along with the business outcomes were very encouraging, and led us to expand our efforts across the entire website to reap further benefits.</p>
<figure>
  <img alt="A screenshot of INP distributions as visualized in CrUX over a period of four months, starting in July 2022 and ending in October 2022. Values within the 'poor' and 'needs improvement' thresholds declined somewhat, while the values within the 'good' threshold increased." decoding="async" height="190" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&amp;w=1600 1600w" width="800">
</figure>
<h3 id="akamai-mpulse-tbt-analysis">Akamai mPulse TBT Analysis <a class="headline-link" href="https://web.dev/economic-times-inp/#akamai-mpulse-tbt-analysis">#</a></h3>
<p>We use <a href="https://www.akamai.com/products/mpulse-real-user-monitoring" rel="noopener">Akamai mPulse</a> as our RUM solution, which measures TBT in the field. We observed a consistent decrease in TBT, clearly mapping to the outcomes of our efforts to reduce INP. As can be seen in the screenshot below, TBT values eventually dropped from approximately 5 seconds in to around 200 milliseconds in the field.</p>
<figure>
  <img alt="A screenshot of a chart in Akamai mPulse, showing a decline in TBT over the course of roughly a month." decoding="async" height="118" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&amp;w=1600 1600w" width="800">
</figure>
<h2 id="business-outcome">Business outcome <a class="headline-link" href="https://web.dev/economic-times-inp/#business-outcome">#</a></h2>
<p>Overall, our efforts to bring down TBT by 30 times, along with migrating to Next.js helped us reduce INP nearly by 4 times, which eventually led to a <strong>50% decrease in bounce rate and 43% uplift in pageviews</strong> on topic pages.</p>
<figure>
  <img alt="A screenshot of Google Analytics comparing pageviews versus bounce rate. Because of the optimizations made to INP on The Economic Times website, a 50% decrease in bounce rate and a 43% increase in pageviews was realized." decoding="async" height="288" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&amp;w=1600 1600w" width="800">
</figure>
<h2 id="conclusion">Conclusion <a class="headline-link" href="https://web.dev/economic-times-inp/#conclusion">#</a></h2>
<p>To summarize, INP extensively helped to determine runtime performance issues on parts of the Economic Times website. It has proven to be one of the most effective metrics to positively impact business outcomes. Due to the very encouraging numbers we've observed as the result of this effort, we are motivated to scale our optimization efforts to other areas of our website and reap additional benefits.</p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[您现在可以使用的基线功能]]></title>
            <link>https://web.dev/baseline-features/</link>
            <guid>https://web.dev/baseline-features/</guid>
            <content:encoded><![CDATA[<div>
    <h1>GPT总结</h1>
    <summary>这篇文章介绍了一些最新的Web平台功能，这些功能已经在主要的浏览器引擎中得到支持。其中包括新的HTML元素<dialog>用于创建对话框，CSS变换属性的细化控制，新的视口单位用于移动端设计，JavaScript中的深拷贝操作，可见焦点的伪类选择器以及流API中的TransformStream接口。文章还提到了Chrome团队与其他浏览器引擎和Web社区的合作，以提供更多的清晰度和支持。同时，文章还提到了WebDX社区组织的工作，以帮助开发者更好地了解和使用这些功能。</dialog></summary>
    <div>
    <div>OriginTitle: Baseline features you can use today</div>

    </div></div><div class="youtube">  <lite-youtube videoid="x9rh0Du4Czg">  </lite-youtube></div>
<p>网络始终在发展，浏览器也在不断更新，为开发人员提供了在平台上进行创新的新工具。 以前需要帮助程序库的东西成为网络平台的一部分，并在所有浏览器上受支持，同时还提供了更短或更简单的设计元素编码方法。</p>
<p>虽然这种不断的演变和适应是有帮助的，但它也可能带来混乱。 浏览所有这些更新可能很困难。 作为开发人员，我们有这样的问题：“什么时候所有浏览器引擎都支持这个新功能？” “我什么时候可以真正开始在我的生产代码中使用这些功能？” “我们应该支持旧版浏览器多久？”</p>
<p>真正的答案是“这取决于”。 需要什么和可用什么实际上取决于您的用户群、技术堆栈、团队结构和支持的设备。 但是，我们都同意的一件事是，当前的网络格局可能使做出这些决定变得困难。</p>
<p>Chrome 团队正在与其他浏览器引擎和网络社区合作，以提高清晰度。 这包括我们在以下项目上的工作<a href="https://wpt.fyi/interop-2023" rel="noopener">互操作 2023</a>这有助于提高一组关键功能的互操作性。 但过去几年推出的功能又如何呢？ 我们两年前学到的实验性功能是否可以使用？</p>
<p>在这篇文章中，我想重点介绍过去两个主要版本的所有主要浏览器引擎现在都可以使用的一些功能。 这是我们认为大多数开发人员会觉得某个功能可以安全使用的分界点，也是我们称之为基线的功能集。 更多内容请查看公告<a href="https://web.dev/baseline">此处的基线</a>。</p>
<h2 id="the-dialog-element">对话框元素<a class="headline-link" href="https://web.dev/baseline-features/#the-dialog-element">#</a></h2>
<p>这<code></code>element 是一个新的 HTML 元素，用于创建对话框提示，例如弹出窗口和模式。</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">浏览器支持</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 37，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      37
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">火狐98，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      98
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">边缘 79，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      79
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 15.4，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      15.4
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/HTML/Element/dialog#browser_compatibility" target="_blank">来源</a>
</div>
<p>要使用它，请定义模态元素，然后通过调用打开对话框<code>显示模态()</code>对话框元素上的方法。</p>
<div><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&amp;lt;</span>对话</span> <span class="token attr-name">ID</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">”</span>d<span class="token punctuation">”</span></span><span class="token punctuation">&amp;gt;</span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&amp;lt;</span>形式</span> <span class="token attr-name">方法</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">”</span>对话<span class="token punctuation">”</span></span><span class="token punctuation">&amp;gt;</span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&amp;lt;</span>p</span><span class="token punctuation">&amp;gt;</span></span>大家好，我是对话者。<span class="token tag"><span class="token tag"><span class="token punctuation"></span>p</span><span class="token punctuation">&amp;gt;</span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&amp;lt;</span>按钮</span><span class="token punctuation">&amp;gt;</span></span>好的<span class="token tag"><span class="token tag"><span class="token punctuation"></span>按钮</span><span class="token punctuation">&amp;gt;</span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation"></span>形式</span><span class="token punctuation">&amp;gt;</span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation"></span>对话</span><span class="token punctuation">&amp;gt;</span></span><br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&amp;lt;</span>按钮</span> <span class="token special-attr"><span class="token attr-name">单击时</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">”</span><span class="token value javascript language-javascript">d<span class="token punctuation">。</span><span class="token function">显示模态</span><span class="token punctuation">（</span><span class="token punctuation">）</span></span><span class="token punctuation">”</span></span></span><span class="token punctuation">&amp;gt;</span></span><br>打开对话框<br><span class="token tag"><span class="token tag"><span class="token punctuation"></span>按钮</span><span class="token punctuation">&amp;gt;</span></span></code></pre>
</div><p>作为原生 HTML 元素，内置了焦点管理、选项卡跟踪和保持堆叠上下文等功能。有关更多信息，请阅读<a href="https://web.dev/building-a-dialog-component/">构建对话框组件</a>。</p>
<h2 id="individual-css-transform-properties">单独的 CSS 转换属性<a class="headline-link" href="https://web.dev/baseline-features/#individual-css-transform-properties">#</a></h2>
<p>使用 CSS 变换是向网站添加运动的一种高效方法。<br>
您可能熟悉在一行中编写具有三个属性的 CSS 转换。<br>
 通过单独的变换属性，您现在可以单独指定变换属性。 当您编写复杂的关键帧动画时，这会派上用场。</p>
<div><pre class="language-css"><code class="language-css"><span class="token selector">。目标</span> <span class="token punctuation">{</span><br>  <span class="token property">翻译</span><span class="token punctuation">:</span>50% 0<span class="token punctuation">;</span><br>  <span class="token property">旋转</span><span class="token punctuation">:</span>30度<span class="token punctuation">;</span><br>  <span class="token property">规模</span><span class="token punctuation">:</span>1.2<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</div><div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">浏览器支持</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 104，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      104
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">火狐 72，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      72
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">边缘 104，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      104
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 14.1，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      14.1
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/CSS/scale#browser_compatibility" target="_blank">来源</a>
</div>
<p>有关此更改的深入说明，请阅读<a href="https://web.dev/css-individual-transform-properties/">通过单独的变换属性对 CSS 变换进行更细粒度的控制</a>。</p>
<h2 id="new-viewport-units">新视口单位<a class="headline-link" href="https://web.dev/baseline-features/#new-viewport-units">#</a></h2>
<p>在移动设备上，视口大小受动态工具栏是否存在的影响。<br>
有时您会看到 URL 栏和导航工具栏，但有时这些工具栏会完全缩回。<br>
根据工具栏是否可见，视口的实际大小会有所不同。<br>
新的视口单位如<code>SVH</code>和<code>左室厚度</code>在为移动设备进行设计时，让 Web 开发人员能够更好地控制。 您可以在文章中了解更多信息<a href="https://web.dev/viewport-units/">大、小和动态视口单元</a>。</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">浏览器支持</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 108，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      108
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">火狐 101，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      101
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">边缘 108，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      108
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 15.4，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      15.4
    </span>
    </li>
  </ul>
</div>
<h2 id="deep-copy-in-javascript">JavaScript 中的深拷贝<a class="headline-link" href="https://web.dev/baseline-features/#deep-copy-in-javascript">#</a></h2>
<p>过去，要创建不引用原始对象的对象的深层副本，一种流行的技巧是<code>JSON.stringify</code>结合<code>JSON解析</code>。 这是一种非常常见的黑客行为，以至于 V8（Chrome 的 JavaScript 引擎）积极改进了这一技巧的性能。 但是，你不再需要这个技巧了<code>结构化克隆</code>。</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">常量</span>原来的<span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">ID</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">支柱</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">姓名</span><span class="token operator">:</span> <span class="token string">“汤姆”</span><span class="token punctuation">}</span><span class="token punctuation">}</span><br><br><span class="token comment">/* 老黑客 */</span> <br><span class="token keyword">常量</span>深复制<span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">。</span><span class="token function">解析</span><span class="token punctuation">（</span><span class="token constant">JSON</span><span class="token punctuation">。</span><span class="token function">字符串化</span><span class="token punctuation">（</span>原来的<span class="token punctuation">）</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br><br><span class="token comment">/* 新方法 */</span><br><span class="token keyword">常量</span>深复制<span class="token operator">=</span> <span class="token function">结构化克隆</span><span class="token punctuation">（</span>原来的<span class="token punctuation">）</span><span class="token punctuation">;</span></code></pre>
</div><div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">浏览器支持</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 98，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      98
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">火狐94，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      94
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">边缘 98，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      98
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 15.4，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      15.4
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/API/structuredClone#browser_compatibility" target="_blank">来源</a>
</div>
<p>请参阅<a href="https://web.dev/structured-clone/">使用 StructuredClone 在 JavaScript 中进行深度复制</a>更多细节。</p>
<h2 id="the-focus-visible-pseudo-class">这<code>:焦点-可见</code>伪类<a class="headline-link" href="https://web.dev/baseline-features/#the-focus-visible-pseudo-class">#</a></h2>
<p>作为网络开发人员，我们都熟悉当您使用键盘导航页面或单击输入元素时出现的“焦点环”。 这是可访问性的必要功能，但有时它会妨碍不同用户的视觉设计。 这<code>:焦点-可见</code>CSS 伪类检查浏览器是否认为焦点应该可见。 您现在可以仅在焦点可见时指定样式。</p>
<div><pre class="language-css"><code class="language-css"><span class="token comment">/* 使用 Tab 键聚焦 */</span><br><span class="token selector">:焦点-可见</span> <span class="token punctuation">{</span><br>    <span class="token property">大纲</span><span class="token punctuation">:</span>5px 纯粉色<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">/* 鼠标点击 */</span><br><span class="token selector">:焦点:不(:焦点可见)</span> <span class="token punctuation">{</span><br>    <span class="token property">大纲</span><span class="token punctuation">:</span>没有任何<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</div><div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">浏览器支持</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 86，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      86
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">火狐 85，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      85
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">边缘 86，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      86
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 15.4，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      15.4
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/CSS/:focus-visible#browser_compatibility" target="_blank">来源</a>
</div>
<p>查看<a href="https://web.dev/learn/css/focus/">关于学习 CSS 的焦点部分</a>了解更多信息。</p>
<h2 id="the-transformstream-interface">转换流接口<a class="headline-link" href="https://web.dev/baseline-features/#the-transformstream-interface">#</a></h2>
<p>Streams API 的 TransformStream 接口使得通过管道将流相互连接成为可能。</p>
<p>例如，您可以从一个位置流式传输数据，然后在数据传递时将数据流压缩到另一个位置。 文章<a href="https://developer.chrome.com/articles/fetch-streaming-requests/" rel="noopener">使用 fetch API 传输请求</a>引导您完成此示例用例。</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">浏览器支持</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 67，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      67
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">火狐 102，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      102
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">边缘 79，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      79
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 14.1，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      14.1
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/API/TransformStream#browser_compatibility" target="_blank">来源</a>
</div>
<h2 id="wrap-up">包起来<a class="headline-link" href="https://web.dev/baseline-features/#wrap-up">#</a></h2>
<p>最近，还有更多功能在 Web 平台上变得可互操作且稳定使用。 展望未来，我们将与<a href="https://www.w3.org/community/webdx/" rel="noopener">WebDX 社区组</a>使这些基线功能集更加清晰。 请查看<a href="https://web.dev/baseline/">web.dev/基线</a>以获得持续的详细信息。</p>
<p>如果您想了解最新动态，我们的团队正在发布文章<a href="https://web.dev/tags/newly-interoperable/">当某个功能变得可互操作时</a>，并发布<a href="https://web.dev/tags/new-to-the-web/">每月更新网络平台上的动态</a>从实验性功能到新的可互操作性。</p>
<p>我们总是很好奇我们所做的事情是否对您有帮助，或者您是否需要不同类型的支持，因此请通过以下方式与我们联系：<a href="https://www.w3.org/community/webdx/" rel="noopener">WebDX 社区组</a>。</p>
<hr><div class="youtube">  <lite-youtube videoid="x9rh0Du4Czg">  </lite-youtube></div>
<p>The web is always evolving and browsers update constantly to give developers new tools to innovate on the platform. Things that previously required helper libraries become part of the web platform and supported on all browsers, along with shorter or easier ways to code design elements.</p>
<p>While this constant evolution and adaptation is helpful, it can also bring confusion. It can be difficult to navigate all these updates. As developers, we have questions like, "When will all browser engines support this new feature?" "When can I actually start using those features in my production code?" "For how long should we support older browsers?"</p>
<p>The true answer is "it depends". What is needed and what is usable really depends on your user base, tech stack, your team structure, and supported devices. But, one thing we all agree, is that the current landscape of the web can make it difficult to make those decisions.</p>
<p>The Chrome team is collaborating with other browser engines and the web community to bring more clarity. This includes our work on projects like <a href="https://wpt.fyi/interop-2023" rel="noopener">Interop 2023</a> which helps to improve interoperability of a set of key features. But what about features landed in the past few years? Are experimental features we learned about two years ago ready to use?</p>
<p>In this post, I want to highlight some features that are now available to all major browser engines for the past two major versions. This is the cut-off point where we feel that the majority of developers will feel a feature is safe to use, and is the feature set we're calling Baseline. For more, please see the announcement <a href="https://web.dev/baseline">of Baseline here</a>.</p>
<h2 id="the-dialog-element">The dialog element <a class="headline-link" href="https://web.dev/baseline-features/#the-dialog-element">#</a></h2>
<p>The <code>&lt;dialog&gt;</code> element is a new HTML element to create dialog prompts such as popups and modals.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 37, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      37
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 98, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      98
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 79, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      79
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 15.4, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      15.4
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/HTML/Element/dialog#browser_compatibility" target="_blank">Source</a>
</div>
<p>To use it, define the modal element, then open the dialog by calling the <code>showModal()</code> method on the dialog element.</p>
<div><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dialog</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>d<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dialog<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Hi, I'm a dialog.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>ok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dialog</span><span class="token punctuation">&gt;</span></span><br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript">d<span class="token punctuation">.</span><span class="token function">showModal</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span><br>  Open Dialog<br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span></code></pre>
</div><p>As a native HTML element, features like focus management, tab tracking, and keeping the stacking context are built in.  For more, read <a href="https://web.dev/building-a-dialog-component/">Building a dialog component</a>.</p>
<h2 id="individual-css-transform-properties">Individual CSS transform properties <a class="headline-link" href="https://web.dev/baseline-features/#individual-css-transform-properties">#</a></h2>
<p>Using CSS transforms is a performant way to add a movement to your site.<br>
You might be familiar with writing CSS transforms with three properties in one line.<br>
With individual transform properties you can now specify transform properties individually. This comes in handy when you are writing complex keyframe animations.</p>
<div><pre class="language-css"><code class="language-css"><span class="token selector">.target</span> <span class="token punctuation">{</span><br>  <span class="token property">translate</span><span class="token punctuation">:</span> 50% 0<span class="token punctuation">;</span><br>  <span class="token property">rotate</span><span class="token punctuation">:</span> 30deg<span class="token punctuation">;</span><br>  <span class="token property">scale</span><span class="token punctuation">:</span> 1.2<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</div><div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 104, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      104
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 72, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      72
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 104, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      104
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 14.1, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      14.1
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/CSS/scale#browser_compatibility" target="_blank">Source</a>
</div>
<p>For an in-depth explanation of this change, read <a href="https://web.dev/css-individual-transform-properties/">Finer grained control over CSS transforms with individual transform properties</a>.</p>
<h2 id="new-viewport-units">New viewport units <a class="headline-link" href="https://web.dev/baseline-features/#new-viewport-units">#</a></h2>
<p>On mobile, viewport size is influenced by the presence or absence of dynamic toolbars.<br>
Sometimes you have a URL bar and navigation toolbar visible, but sometimes those toolbars are completely retracted.<br>
The actual size of viewport will be different depending on whether the toolbars are visible or not.<br>
New viewport units like <code>svh</code> and <code>lvh</code> give web developers finer control when designing for the mobile. You can learn more in the article <a href="https://web.dev/viewport-units/">The large, small, and dynamic viewport units</a>.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 108, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      108
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 101, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      101
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 108, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      108
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 15.4, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      15.4
    </span>
    </li>
  </ul>
</div>
<h2 id="deep-copy-in-javascript">Deep copy in JavaScript <a class="headline-link" href="https://web.dev/baseline-features/#deep-copy-in-javascript">#</a></h2>
<p>In the past, to create a deep copy of an object with no reference to the original object, a popular hack was <code>JSON.stringify</code> combined with <code>JSON.parse</code>. This was such a common hack that V8 (Chrome's javascript engine) aggressively improved the performance of this trick. But, you don't need this hack anymore with <code>structuredClone</code>.</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> original <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">prop</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"Tom"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><br><br><span class="token comment">/* Old hack */</span> <br><span class="token keyword">const</span> deepCopy <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>original<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">/* New way */</span><br><span class="token keyword">const</span> deepCopy <span class="token operator">=</span> <span class="token function">structuredClone</span><span class="token punctuation">(</span>original<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div><div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 98, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      98
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 94, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      94
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 98, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      98
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 15.4, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      15.4
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/API/structuredClone#browser_compatibility" target="_blank">Source</a>
</div>
<p>Please refer to <a href="https://web.dev/structured-clone/">Deep-copying in JavaScript using structuredClone</a> for more details.</p>
<h2 id="the-focus-visible-pseudo-class">The <code>:focus-visible</code> pseudo-class <a class="headline-link" href="https://web.dev/baseline-features/#the-focus-visible-pseudo-class">#</a></h2>
<p>As web developers, we all are familiar with that "focus ring" that shows up when you are navigating a page with a keyboard or clicking on input elements. It is a necessary feature for accessibility but sometimes it gets in the way of the visual design for different users. The <code>:focus-visible</code> CSS pseudo-class checks if the browser believes that the focus should be visible.  You can now specify styles for only when focus should be visible.</p>
<div><pre class="language-css"><code class="language-css"><span class="token comment">/* focus with tab key */</span><br><span class="token selector">:focus-visible</span> <span class="token punctuation">{</span><br>    <span class="token property">outline</span><span class="token punctuation">:</span> 5px solid pink<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">/* mouse click */</span><br><span class="token selector">:focus:not(:focus-visible)</span> <span class="token punctuation">{</span><br>    <span class="token property">outline</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</div><div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 86, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      86
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 85, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      85
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 86, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      86
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 15.4, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      15.4
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/CSS/:focus-visible#browser_compatibility" target="_blank">Source</a>
</div>
<p>Check out the <a href="https://web.dev/learn/css/focus/">Focus section on Learn CSS</a> for more information.</p>
<h2 id="the-transformstream-interface">The TransformStream interface <a class="headline-link" href="https://web.dev/baseline-features/#the-transformstream-interface">#</a></h2>
<p>The TransformStream interface of the Streams API makes it possible to pipe streams into one another.</p>
<p>For example you can stream data from one place, then compress the data stream to another location as the data gets passed. The article <a href="https://developer.chrome.com/articles/fetch-streaming-requests/" rel="noopener">Streaming requests with the fetch API</a> walks you through this sample use case.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 67, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      67
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 102, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      102
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 79, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      79
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 14.1, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      14.1
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/API/TransformStream#browser_compatibility" target="_blank">Source</a>
</div>
<h2 id="wrap-up">Wrap up <a class="headline-link" href="https://web.dev/baseline-features/#wrap-up">#</a></h2>
<p>There are many more features that recently became interoperable and stable to use on the web platform. Going forward we will work with the <a href="https://www.w3.org/community/webdx/" rel="noopener">WebDX Community Group</a> to bring more clarity to these Baseline feature sets. Please check out <a href="https://web.dev/baseline/">web.dev/baseline</a> for ongoing details.</p>
<p>If you want to stay up-to-date, our team is publishing articles <a href="https://web.dev/tags/newly-interoperable/">when a feature becomes interoperable</a>, and publish <a href="https://web.dev/tags/new-to-the-web/">monthly updates on what's going on the web platform</a> from experimental features to newly interoperable.</p>
<p>We are always curious if what we are doing helps you, or if you need different kinds of support, so please reach out to us at <a href="https://www.w3.org/community/webdx/" rel="noopener">WebDX Community Group</a>.</p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[脚本评估和长任务]]></title>
            <link>https://web.dev/script-evaluation-and-long-tasks/</link>
            <guid>https://web.dev/script-evaluation-and-long-tasks/</guid>
            <content:encoded><![CDATA[<div>
    <h1>GPT总结</h1>
    <summary>这篇文章讨论了如何优化页面加载过程中的脚本评估，以提高交互到下一次绘制（INP）的性能。文章首先介绍了脚本评估的概念，以及它对页面加载过程中的用户交互的影响。然后，文章详细介绍了不同浏览器引擎在处理脚本评估任务时的行为差异，包括使用<script>元素加载脚本、使用type=module属性加载ES模块、使用动态import()加载脚本以及在Web Worker中加载脚本的情况。文章还提到了一些需要考虑的因素，如压缩效率、缓存失效和嵌套模块对加载性能的影响。最后，文章总结了一些优化脚本评估的方法，包括避免加载过大的脚本、使用动态import()减小初始包大小、使用modulepreload资源提示优化ES模块的加载等。通过这些优化措施，可以提高页面的启动性能，提升用户体验。</summary>
    <div>
    <div>OriginTitle: Script evaluation and long tasks</div>

    </script></summary></div><p>当谈到优化时<a href="https://web.dev/inp/">与下一个油漆的相互作用 (INP)</a>，您会遇到的大多数建议都是优化交互本身。 例如，在<a href="https://web.dev/optimize-long-tasks/">优化长任务指南</a>，诸如屈服之类的技术<code>设置超时时间</code>,<code>正在等待输入</code>，等等进行讨论。 这些技术是有益的，因为它们通过避免长时间任务为主线程提供了一些喘息空间，这可以为交互和其他活动提供更多机会更快地运行，而不是必须等待单个长时间任务。</p>
<p>但是，加载脚本本身带来的长任务又如何呢？ 这些任务可能会干扰用户交互并影响加载期间页面的 INP。 本指南将探讨浏览器如何处理由脚本评估启动的任务，并研究您可以采取哪些措施来分解脚本评估工作，以便您的主线程在页面加载时可以更好地响应用户输入。</p>
<h2 id="what-is-script-evaluation">什么是剧本评估？<a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#what-is-script-evaluation">#</a></h2>
<p>如果您分析过一个包含大量 JavaScript 的应用程序，您可能会看到很长的任务，其中罪魁祸首被标记为<strong>评估脚本</strong>。</p>
<figure>
  <img alt="Script evaluation work as visualized in the performance profiler of Chrome DevTools. The work causes a long task during startup, which blocks the main thread's ability to respond to user interactions." decoding="async" height="107" loading="lazy" sizes="(min-width: 697px) 697px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&amp;w=1394 1394w" width="697">
  <figcaption>
     脚本评估工作如 Chrome DevTools 中的性能分析器所示。 在这种情况下，该工作足以导致长时间任务，从而阻止主线程承担其他工作（包括驱动用户交互的任务）。 
  </figcaption>
</figure>
<p>脚本评估是在浏览器中执行 JavaScript 的必要部分，因为 JavaScript 是编译的<a href="https://en.wikipedia.org/wiki/Just-in-time_compilation" rel="noopener">执行前及时</a>。 当评估脚本时，首先会分析它是否有错误。 如果解析器没有发现错误，则脚本将被编译为<a href="https://en.wikipedia.org/wiki/Bytecode" rel="noopener">字节码</a>，然后可以继续执行。</p>
<p>尽管有必要，但脚本评估可能会出现问题，因为用户可能会在页面最初呈现后不久尝试与页面进行交互。 然而，仅仅因为一个页面有<em>呈现</em>并不意味着页面已经完成<em>加载中</em>。 由于页面正忙于评估脚本，因此加载期间发生的交互可能会延迟。 虽然不能保证此时可以发生所需的交互（因为负责交互的脚本可能尚未加载），但可能存在依赖于 JavaScript 的交互<em>是</em>准备好了，或者交互性根本不依赖于 JavaScript。</p>
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow">可以让您深入了解页面加载期间是否发生过多脚本评估的一项指标是<a href="https://web.dev/tbt/">总阻塞时间 (TBT)</a>，因为它是一个<a href="https://web.dev/user-centric-performance-metrics/#types-of-metrics">负载响应能力</a>公制。<a href="https://almanac.httparchive.org/en/2022/performance#inp-and-tbt">因为 TBT 与 INP 密切相关</a>，具有高 TBT 的页面是一个合理的指标，表明加载期间可能存在与脚本评估工作相关的高 INP 值。</div></aside>
<h2 id="the-relationship-between-scripts-and-the-tasks-that-evaluate-them">脚本和评估它们的任务之间的关系<a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#the-relationship-between-scripts-and-the-tasks-that-evaluate-them">#</a></h2>
<p>负责脚本评估的任务如何启动取决于您正在加载的脚本是否通过常规加载<code></code>元素，或者如果脚本是加载了<code>类型=模块</code>。 由于浏览器倾向于以不同的方式处理事物，因此主要浏览器引擎如何处理脚本评估将涉及它们之间的脚本评估行为的不同之处。</p>
<h3 id="loading-scripts-with-the-lessscriptgreater-element">使用以下命令加载脚本<code></code>元素<a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#loading-scripts-with-the-lessscriptgreater-element">#</a></h3>
<aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>重要的</strong></p><div class=" flow">本节介绍使用以下方法加载脚本<code></code>元素<em>没有</em>这<code>类型=模块</code>属性。</div></aside>
<p>分派评估脚本的任务数量通常与脚本的数量有直接关系<code></code>页面上的元素。 每个<code></code>element 启动一个任务来评估所请求的脚本，以便可以对其进行解析、编译和执行。<strong>基于 Chromium 的浏览器 Safari 就是这种情况<em>和</em>火狐。</strong></p>
<p>为什么这很重要？ 假设您正在使用捆绑程序来管理生产脚本，并且您已将其配置为将页面运行所需的所有内容捆绑到单个脚本中。 如果您的网站属于这种情况，您可以预期将调度一个任务来评估该脚本。 这是坏事吗？ 不一定——除非该脚本是<em>巨大的</em>。</p>
<p>您可以通过避免加载大块 JavaScript 来分解脚本评估工作，并使用额外的加载更多单独的、更小的脚本<code></code>元素。</p>
<aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>重要的</strong></p><div class=" flow">由于设备的功能各不相同，因此很难为单个脚本的大小定义一个设定的限制。 为了在压缩效率、下载时间和脚本评估时间之间取得良好的平衡，每个脚本的大小限制为 100 KB 是一个不错的目标。</div></aside>
<p>虽然您应该始终努力在页面加载期间加载尽可能少的 JavaScript，但拆分脚本可确保您拥有大量不会阻塞主线程的较小任务，而不是一个可能阻塞主线程的大型任务。根本没有线程——或者至少比你开始时要少。</p>
<figure>
  <img alt="Multiple tasks involving script evaluation as visualized in the performance profiler of Chrome DevTools. Because multiple smaller scripts are loaded instead of fewer larger scripts, tasks are less likely to become long tasks, allowing the main thread to respond to user input more quickly." decoding="async" height="174" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
    由于多个任务的结果，产生了多个任务来评估脚本<code></code>页面 HTML 中存在的元素。 这比向用户发送一个大型脚本包更好，因为后者更有可能阻塞主线程。 
  </figcaption>
</figure>
<p>您可以认为分解脚本评估任务有点类似于<a href="https://web.dev/optimize-long-tasks/#use-asyncawait-to-create-yield-points">在交互期间运行的事件回调期间产生</a>。 然而，通过脚本评估，让出机制将您加载的 JavaScript 分解为多个较小的脚本，而不是更可能阻塞主线程的少量较大脚本。</p>
<aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>重要的</strong></p><div class=" flow">目前，基于 Chromium 的浏览器将使用以下命令执行所有加载的脚本<code>推迟</code>与同一任务中的属性<a href="https://developer.mozilla.org/docs/Web/API/Window/DOMContentLoaded_event"><code>DOM内容已加载</code>事件</a>。 虽然这最大限度地减少了总体布局工作，但代价是较长任务的可能性增加，这可能会导致其他性能问题。 一个潜在的解决方案是<a href="https://github.com/whatwg/html/issues/6230">目前正在探索中</a>。 使用以下命令加载的脚本也会发生此行为<code>类型=模块</code>属性，因为默认情况下此类脚本会被延迟。</div></aside>
<h3 id="loading-scripts-with-the-lessscriptgreater-element-and-the-type=module-attribute">使用以下命令加载脚本<code></code>元素和<code>类型=模块</code>属性<a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#loading-scripts-with-the-lessscriptgreater-element-and-the-type=module-attribute">#</a></h3>
<aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>重要的</strong></p><div class=" flow">如果您没有捆绑 ES 模块并使用<code>类型=模块</code>属性，您实际上可能会减慢页面启动速度。 欲了解更多信息，请阅读<a href="https://web.dev/script-evaluation-and-long-tasks/#trade-offs-and-considerations">权衡和考虑因素部分</a>本指南稍后会介绍。</div></aside>
<p>现在可以使用以下命令在浏览器中本地加载 ES 模块<a href="https://web.dev/serve-modern-code-to-modern-browsers/#use-lessscript-type=modulegreater"><code>类型=模块</code>属性</a>于<code></code>元素。 这种脚本加载方法具有一些开发人员体验优势，例如不必转换代码以供生产使用，尤其是与<a href="https://developer.mozilla.org/docs/Web/HTML/Element/script/type/importmap" rel="noopener">导入地图</a>。 但是，以这种方式加载脚本会根据浏览器的不同安排不同的任务。</p>
<h4 id="chromium-based-browsers">基于 Chromium 的浏览器<a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#chromium-based-browsers">#</a></h4>
<p>在 Chrome 等浏览器（或其派生浏览器）中，使用以下命令加载 ES 模块<code>类型=模块</code>属性产生的任务类型与不使用时通常看到的任务类型不同<code>类型=模块</code>。 例如，每个模块脚本的任务将运行，涉及标记为的活动<strong>编译模块</strong>。</p>
<figure>
  <img alt="Module compilation work in multiple tasks as visualized in Chrome DevTools." decoding="async" height="140" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
     基于 Chromium 的浏览器中的模块加载行为。 每个模块脚本都会生成一个<strong>编译模块</strong>在评估之前调用编译其内容。
  </figcaption>
</figure>
<p>模块编译完成后，随后在其中运行的任何代码都将启动标记为的活动<strong>评估模块</strong>。</p>
<figure>
  <img alt="Just-in-time evaluation of a module as visualized in the performance panel of Chrome DevTools." decoding="async" height="184" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
    当模块中的代码运行时，该模块将被及时评估。
  </figcaption>
</figure>
<p>这里的效果（至少在 Chrome 和相关浏览器中）是使用 ES 模块时编译步骤被分解。 就管理长期任务而言，这是一个明显的胜利； 然而，由此产生的模块评估工作仍然意味着您要承担一些不可避免的成本。 虽然您应该努力提供尽可能少的 JavaScript，但使用 ES 模块（无论浏览器如何）都可以提供以下好处：</p>
<ul>
<li>所有模块代码自动运行在<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Strict_mode" rel="noopener">严格模式</a>，它允许 JavaScript 引擎进行潜在的优化，而这些优化在非严格上下文中是无法进行的。</li>
<li>使用加载的脚本<code>类型=模块</code>被当作<a href="https://developer.mozilla.org/docs/Web/HTML/Element/script#attr-defer" rel="noopener">推迟的</a>默认情况下。 可以使用<code>异步</code>加载的脚本上的属性<code>类型=模块</code>来改变这种行为。</li>
</ul>
<h4 id="safari-and-firefox">Safari 和火狐浏览器<a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#safari-and-firefox">#</a></h4>
<p>当在 Safari 和 Firefox 中加载模块时，每个模块都会在单独的任务中进行评估。 这意味着理论上您可以加载一个仅包含以下内容的顶级模块<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/import" rel="noopener">静止的<code>进口</code></a>对其他模块的语句，加载的每个模块都会产生单独的网络请求和任务来评估它。</p>
<h3 id="loading-scripts-with-dynamic-import">动态加载脚本<code>进口（）</code> <a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#loading-scripts-with-dynamic-import">#</a></h3>
<p><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Operators/import" rel="noopener">动态的<code>进口（）</code></a>是另一种加载脚本的方法。 与静态不同<code>进口</code>需要位于 ES 模块顶部的语句，动态的<code>进口（）</code>调用可以出现在脚本中的任何位置，以按需加载一段 JavaScript。 这种技术称为<a href="https://web.dev/reduce-javascript-payloads-with-code-splitting/">代码分割</a>。</p>
<p>动态的<code>进口（）</code>在提高INP方面有两个优点：</p>
<ol>
<li>推迟加载的模块通过减少当时加载的 JavaScript 量来减少启动期间的主线程争用。 这释放了主线程，因此它可以更好地响应用户交互。</li>
<li>动态时<code>进口（）</code>进行调用时，每次调用都会有效地将每个模块的编译和评估与其自己的任务分开。 当然，动态<code>进口（）</code>加载非常大的模块将启动相当大的脚本评估任务，并且如果交互与动态发生同时发生，则可能会干扰主线程响应用户输入的能力<code>进口（）</code>称呼。<strong>因此，加载尽可能少的 JavaScript 仍然非常重要。</strong></li>
</ol>
<p>动态的<code>进口（）</code>调用在所有主要浏览器引擎中的行为都类似：结果的脚本评估任务将与动态导入的模块数量相同。</p>
<h3 id="loading-scripts-in-a-web-worker">在网络工作者中加载脚本<a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#loading-scripts-in-a-web-worker">#</a></h3>
<p><a href="https://developer.mozilla.org/docs/Web/API/Web_Workers_API" rel="noopener">网络工作者</a>是一个特殊的 JavaScript 用例。 Web Worker 在主线程上注册，然后 Worker 中的代码在其自己的线程上运行。 从某种意义上说，这是非常有益的——虽然注册 Web Worker 的代码在主线程上运行，但 Web Worker 中的代码却不然。 这可以减少主线程拥塞，并有助于保持主线程对用户交互的响应更加灵敏。</p>
<p>除了减少主线程工作之外，Web Worker<em>他们自己</em>可以通过以下方式加载要在工作上下文中使用的外部脚本<a href="https://developer.mozilla.org/docs/Web/API/WorkerGlobalScope/importScripts" rel="noopener"><code>导入脚本</code></a>或静态<code>进口</code>支持的浏览器中的语句<a href="https://web.dev/module-workers/">模块工人</a>。 结果是，Web Worker 请求的任何脚本都会在主线程之外进行评估。</p>
<aside class="aside flow bg-state-good-bg color-state-good-text"><p class="cluster "><span class="aside__icon box-block "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24" fill="currentColor" role="img" aria-label="Check">   <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"></path> </svg></span><strong>客观的</strong></p><div class=" flow"> <strong>阅读以了解更多信息：</strong>&nbsp;<a href="https://web.dev/off-main-thread/">使用 Web Worker 在浏览器主线程之外运行 JavaScript</a>。</div></aside>
<h2 id="trade-offs-and-considerations">权衡和考虑因素<a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#trade-offs-and-considerations">#</a></h2>
<p>虽然将脚本分解为单独的较小文件有助于限制长时间任务，而不是加载更少、更大的文件，但在决定如何分解脚本时考虑一些事项很重要。</p>
<h3 id="compression-efficiency">压缩效率<a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#compression-efficiency">#</a></h3>
<p><a href="https://web.dev/reduce-network-payloads-using-text-compression/">压缩</a>是分解脚本时的一个因素。 当脚本较小时，压缩效率会有所降低。 较大的脚本将从压缩中受益更多。 虽然提高压缩效率有助于尽可能缩短脚本的加载时间，但确保将脚本分解为足够小的块以在启动期间促进更好的交互性是一种平衡行为。</p>
<p>捆绑器是管理网站所依赖的脚本输出大小的理想工具：</p>
<ul>
<li>就 webpack 而言，它<code>SplitChunks插件</code>插件可以提供帮助。 咨询<a href="https://webpack.js.org/plugins/split-chunks-plugin/" rel="noopener"><code>SplitChunks插件</code>文档</a>了解您可以设置以帮助管理资产大小的选项。</li>
<li>对于其他捆绑器，例如<a href="https://rollupjs.org/" rel="noopener">卷起</a>和<a href="https://esbuild.github.io/" rel="noopener">esbuild</a>，您可以使用动态管理脚本文件大小<code>进口（）</code>调用您的代码。 这些捆绑器以及 webpack 会自动将动态导入的资源分解到自己的文件中，从而避免较大的初始捆绑包大小。</li>
</ul>
<h3 id="cache-invalidation">缓存失效<a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#cache-invalidation">#</a></h3>
<p>缓存失效对于重复访问时页面加载的速度起着重要作用。 当您发布大型的整体脚本包时，您在浏览器缓存方面处于劣势。 这是因为当您更新第一方代码时（无论是通过更新软件包还是发布错误修复），整个捆绑包都会失效，必须重新下载。</p>
<p>通过分解脚本，您不仅可以将脚本评估工作分解为较小的任务，还可以增加回访者从浏览器缓存而不是网络中获取更多脚本的可能性。 这意味着整体页面加载速度更快。</p>
<aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>重要的</strong></p><div class=" flow">为了使缓存既高效又避免从缓存中提供过时的资源，请确保您的捆绑程序是<a href="https://bundlers.tooling.report/hashing/">生成文件名中带有哈希值的资源</a>。</div></aside>
<h3 id="nested-modules-and-loading-performance">嵌套模块和加载性能<a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#nested-modules-and-loading-performance">#</a></h3>
<p>如果您在生产中运输 ES 模块并使用<code>类型=模块</code>属性，您需要了解模块嵌套如何影响启动时间。 模块嵌套是指一个 ES 模块静态导入另一个 ES 模块，而另一个 ES 模块又静态导入另一个 ES 模块：</p>
<div><pre class="language-js"><code class="language-js"><span class="token comment">// a.js</span><br><span class="token keyword">进口</span> <span class="token punctuation">{</span>乙<span class="token punctuation">}</span> <span class="token keyword">从</span> <span class="token string">'./b.js'</span><span class="token punctuation">;</span><br><br><span class="token comment">// b.js</span><br><span class="token keyword">进口</span> <span class="token punctuation">{</span>C<span class="token punctuation">}</span> <span class="token keyword">从</span> <span class="token string">'./c.js'</span><span class="token punctuation">;</span></code></pre>
</div><p>如果您的 ES 模块没有捆绑在一起，则前面的代码会产生网络请求链：<code>a.js</code>是从一个请求<code></code>元素，另一个网络请求被调度<code>b.js</code>，然后涉及<em>其他</em>要求<code>c.js</code>。 避免这种情况的一种方法是使用捆绑器，但请确保将捆绑器配置为分解脚本以分散脚本评估工作。</p>
<p>如果您不想使用捆绑器，那么另一种绕过嵌套模块调用的方法是使用<a href="https://developer.chrome.com/blog/modulepreload/" rel="noopener"><code>模块预加载</code>资源提示</a>，这会提前预加载ES模块以避免网络请求链。 但请注意：此提示目前仅在基于 Chromium 的浏览器中受支持。</p>
<h2 id="conclusion">结论<a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#conclusion">#</a></h2>
<p>优化浏览器中脚本的评估无疑是一项棘手的任务。 该方法取决于您网站的要求和限制。 但是，通过拆分脚本，您可以将脚本评估工作分散到许多较小的任务上，从而使主线程能够更有效地处理用户交互，而不是阻塞主线程。</p>
<p>回顾一下，您可以执行以下一些操作来分解大型脚本评估任务：</p>
<ul>
<li>使用加载脚本时<code></code>元素没有<code>类型=模块</code>属性，避免加载非常大的脚本，因为这将启动阻塞主线程的资源密集型脚本评估任务。 将您的脚本分散到更多地方<code></code>分解这项工作的元素。</li>
<li>使用<code>类型=模块</code>在浏览器中本地加载 ES 模块的属性将启动各个任务以评估每个单独的模块脚本。</li>
<li>通过使用动态减少初始包的大小<code>进口（）</code>来电。 这也适用于捆绑器，因为捆绑器会将每个动态导入的模块视为“分割点”，从而为每个动态导入的模块生成单独的脚本。</li>
<li>请务必权衡压缩效率和缓存失效等权衡。 较大的脚本会压缩得更好，但更有可能在较少的任务中涉及更昂贵的脚本评估工作，并导致浏览器缓存失效，从而导致整体缓存效率较低。</li>
<li>如果原生使用 ES 模块而不捆绑，请使用<code>模块预加载</code>资源提示以优化启动期间它们的加载。</li>
<li>与往常一样，尽可能少地提供 JavaScript。</li>
</ul>
<p>这肯定是一种平衡行为，但通过动态分解脚本并减少初始有效负载<code>进口（）</code>，您可以在关键的启动期间获得更好的启动性能并更好地适应用户交互。 这应该可以帮助您在 INP 指标上获得更高的分数，从而提供更好的用户体验。</p>
<p><em>英雄形象来自<a href="https://unsplash.com/" rel="noopener">未飞溅</a>， 经过<a href="https://unsplash.com/@markusspiske" rel="noopener">马库斯·斯皮斯克</a>。</em></p>
<hr><p>When it comes to optimizing <a href="https://web.dev/inp/">Interaction to Next Paint (INP)</a>, most of the advice you'll encounter is to optimize interactions themselves. For example, in the <a href="https://web.dev/optimize-long-tasks/">optimize long tasks guide</a>, techniques such as yielding with <code>setTimeout</code>, <code>isInputPending</code>, and so forth are discussed. These techniques are beneficial, as they allow the main thread some breathing room by avoiding long tasks, which can allow more opportunities for interactions and other activity to run sooner, rather than if they had to wait for a single long task.</p>
<p>However, what about the long tasks that come from loading scripts themselves? These tasks can interfere with user interactions and affect a page's INP during load. This guide will explore how browsers handle tasks kicked off by script evaluation, and look into what you may be able to do to break up script evaluation work so that your main thread can be more responsive to user input while the page is loading.</p>
<h2 id="what-is-script-evaluation">What is script evaluation? <a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#what-is-script-evaluation">#</a></h2>
<p>If you've profiled an application that ships a lot of JavaScript, you may have seen long tasks where the culprit is labeled <strong>Evaluate Script</strong>.</p>
<figure>
  <img alt="Script evaluation work as visualized in the performance profiler of Chrome DevTools. The work causes a long task during startup, which blocks the main thread's ability to respond to user interactions." decoding="async" height="107" loading="lazy" sizes="(min-width: 697px) 697px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&amp;w=1394 1394w" width="697">
  <figcaption>
    Script evaluation work as shown in the performance profiler in Chrome DevTools. In this case, the work is enough to cause a long task that blocks the main thread from taking on other work—including tasks that drive user interactions.
  </figcaption>
</figure>
<p>Script evaluation is a necessary part of executing JavaScript in the browser, as JavaScript is compiled <a href="https://en.wikipedia.org/wiki/Just-in-time_compilation" rel="noopener">just-in-time before execution</a>. When a script is evaluated, it is first parsed for errors. If the parser doesn't find errors, the script is then compiled into <a href="https://en.wikipedia.org/wiki/Bytecode" rel="noopener">bytecode</a>, and then can continue onto execution.</p>
<p>Though necessary, script evaluation can be problematic, as users may try to interact with a page shortly after it initially renders. However, just because a page has <em>rendered</em> doesn't mean that the page has finished <em>loading</em>. Interactions that take place during load can be delayed because the page is busy evaluating scripts. While there's no guarantee that the desired interaction can take place at this point in time—as a script responsible for it may not have loaded yet—there could be interactions dependent on JavaScript that <em>are</em> ready, or the interactivity doesn't depend on JavaScript at all.</p>
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> One metric that might give you insight into whether you have excessive script evaluation occurring during page load is <a href="https://web.dev/tbt/">Total Blocking Time (TBT)</a>, as it is a <a href="https://web.dev/user-centric-performance-metrics/#types-of-metrics">load responsiveness</a> metric. <a href="https://almanac.httparchive.org/en/2022/performance#inp-and-tbt">Because TBT correlates well with INP</a>, a page with a high TBT is a reasonable indicator that there may be high INP values during load that may be tied to script evaluation work. </div></aside>
<h2 id="the-relationship-between-scripts-and-the-tasks-that-evaluate-them">The relationship between scripts and the tasks that evaluate them <a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#the-relationship-between-scripts-and-the-tasks-that-evaluate-them">#</a></h2>
<p>How tasks responsible for script evaluation are kicked off depends on whether the script you're loading is loaded via a regular <code>&lt;script&gt;</code> element, or if a script is a module loaded with the <code>type=module</code>. Since browsers have the tendency to handle things differently, how the major browser engines handle script evaluation will be touched upon where script evaluation behaviors across them vary.</p>
<h3 id="loading-scripts-with-the-lessscriptgreater-element">Loading scripts with the <code>&lt;script&gt;</code> element <a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#loading-scripts-with-the-lessscriptgreater-element">#</a></h3>
<aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>Important</strong></p><div class=" flow"> This section deals with loading scripts using the <code>&lt;script&gt;</code> element <em>without</em> the <code>type=module</code> attribute. </div></aside>
<p>The number of tasks dispatched to evaluate scripts generally has a direct relationship with the number of <code>&lt;script&gt;</code> elements on a page. Each <code>&lt;script&gt;</code> element kicks off a task to evaluate the requested script so it can be parsed, compiled, and executed. <strong>This is the case for Chromium-based browsers, Safari, <em>and</em> Firefox.</strong></p>
<p>Why does this matter? Let's say you're using a bundler to manage your production scripts, and you've configured it to bundle everything your page needs to run into a single script. If this is the case for your website, you can expect that there will be a single task dispatched to evaluate that script. Is this a bad thing? Not necessarily—unless that script is <em>huge</em>.</p>
<p>You can break up script evaluation work by avoiding loading large chunks of JavaScript, and load more individual, smaller scripts using additional <code>&lt;script&gt;</code> elements.</p>
<aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>Important</strong></p><div class=" flow"> As devices vary in their capability, it's very difficult to define a set limit for how large individual scripts should be. To achieve a decent balance between compression efficiency, download time, and script evaluation time, a limit of 100 kilobytes per individual script is a good target. </div></aside>
<p>While you should always strive to load as little JavaScript as possible during page load, splitting up your scripts ensures that, instead of one large task that may block the main thread, you have a greater number of smaller tasks that won't block the main thread at all—or at least less than what you started with.</p>
<figure>
  <img alt="Multiple tasks involving script evaluation as visualized in the performance profiler of Chrome DevTools. Because multiple smaller scripts are loaded instead of fewer larger scripts, tasks are less likely to become long tasks, allowing the main thread to respond to user input more quickly." decoding="async" height="174" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
    Multiple tasks spawned to evaluate scripts as a result of multiple <code>&lt;script&gt;</code> elements present in the page's HTML. This is preferable to sending one large script bundle to users, which is more likely to block the main thread.
  </figcaption>
</figure>
<p>You can think of breaking up tasks for script evaluation as being somewhat similar to <a href="https://web.dev/optimize-long-tasks/#use-asyncawait-to-create-yield-points">yielding during event callbacks that run during an interaction</a>. However, with script evaluation, the yielding mechanism breaks up the JavaScript you load into multiple smaller scripts, rather than a smaller number of larger scripts than are more likely to block the main thread.</p>
<aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>Important</strong></p><div class=" flow"> Currently, Chromium-based browsers will execute all loaded scripts with the <code>defer</code> attribute in the same task as the <a href="https://developer.mozilla.org/docs/Web/API/Window/DOMContentLoaded_event"><code>DOMContentLoaded</code> event</a>. While this minimizes overall layout work, the cost is the increased likelihood of a longer task, which may cause other performance problems. A potential solution is <a href="https://github.com/whatwg/html/issues/6230">currently being explored</a>. This behavior also takes place with scripts loaded using the <code>type=module</code> attribute, as such scripts are deferred by default. </div></aside>
<h3 id="loading-scripts-with-the-lessscriptgreater-element-and-the-type=module-attribute">Loading scripts with the <code>&lt;script&gt;</code> element and the <code>type=module</code> attribute <a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#loading-scripts-with-the-lessscriptgreater-element-and-the-type=module-attribute">#</a></h3>
<aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>Important</strong></p><div class=" flow"> If you're not bundling ES modules and loading them using the <code>type=module</code> attribute, you could actually end up slowing down page startup. For more information, read the <a href="https://web.dev/script-evaluation-and-long-tasks/#trade-offs-and-considerations">trade-offs and considerations section</a> later on in this guide. </div></aside>
<p>It's now possible to load ES modules natively in the browser with the <a href="https://web.dev/serve-modern-code-to-modern-browsers/#use-lessscript-type=modulegreater"><code>type=module</code> attribute</a> on the <code>&lt;script&gt;</code> element. This approach to script loading carries some developer experience benefits, such as not having to transform code for production use—especially when used in combination with <a href="https://developer.mozilla.org/docs/Web/HTML/Element/script/type/importmap" rel="noopener">import maps</a>. However, loading scripts in this way schedules tasks that differ from browser to browser.</p>
<h4 id="chromium-based-browsers">Chromium-based browsers <a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#chromium-based-browsers">#</a></h4>
<p>In browsers such as Chrome—or those derived from it—loading ES modules using the <code>type=module</code> attribute produces different sorts of tasks than you'd normally see when not using <code>type=module</code>. For example, a task for each module script will run that involves activity labeled as <strong>Compile module</strong>.</p>
<figure>
  <img alt="Module compilation work in multiple tasks as visualized in Chrome DevTools." decoding="async" height="140" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
    Module loading behavior in Chromium-based browsers. Each module script will spawn a <strong>Compile module</strong> call to compile their contents prior to evaluation.
  </figcaption>
</figure>
<p>Once the modules have compiled, any code that subsequently runs in them will kick off activity labeled as <strong>Evaluate module</strong>.</p>
<figure>
  <img alt="Just-in-time evaluation of a module as visualized in the performance panel of Chrome DevTools." decoding="async" height="184" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
    When code in a module runs, that module will be evaluated just-in-time.
  </figcaption>
</figure>
<p>The effect here—in Chrome and related browsers, at least—is that the compilation steps are broken up when using ES modules. This is a clear win in terms of managing long tasks; however, the resulting module evaluation work that results still means you're incurring some unavoidable cost. While you should strive to ship as little JavaScript as possible, using ES modules—regardless of the browser—provides the following benefits:</p>
<ul>
<li>All module code is automatically run in <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Strict_mode" rel="noopener">strict mode</a>, which allows potential optimizations by JavaScript engines that couldn't otherwise be made in a non-strict context.</li>
<li>Scripts loaded using <code>type=module</code> are treated as if they were <a href="https://developer.mozilla.org/docs/Web/HTML/Element/script#attr-defer" rel="noopener">deferred</a> by default. It's possible to use the <code>async</code> attribute on scripts loaded with <code>type=module</code> to change this behavior.</li>
</ul>
<h4 id="safari-and-firefox">Safari and Firefox <a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#safari-and-firefox">#</a></h4>
<p>When modules are loaded in Safari and Firefox, each of them is evaluated in a separate task. This means you could theoretically load a single top-level module consisting of only <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/import" rel="noopener">static <code>import</code></a> statements to other modules, and every module loaded will incur a separate network request and task to evaluate it.</p>
<h3 id="loading-scripts-with-dynamic-import">Loading scripts with dynamic <code>import()</code> <a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#loading-scripts-with-dynamic-import">#</a></h3>
<p><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Operators/import" rel="noopener">Dynamic <code>import()</code></a> is another method for loading scripts. Unlike static <code>import</code> statements that are required to be at the top of an ES module, a dynamic <code>import()</code> call can appear anywhere in a script to load a chunk of JavaScript on demand. This technique is called <a href="https://web.dev/reduce-javascript-payloads-with-code-splitting/">code splitting</a>.</p>
<p>Dynamic <code>import()</code> has two advantages when it comes to improving INP:</p>
<ol>
<li>Modules which are deferred to load later reduce main thread contention during startup by reducing the amount of JavaScript loaded at that time. This frees up the main thread so it can be more responsive to user interactions.</li>
<li>When dynamic <code>import()</code> calls are made, each call will effectively separate the compilation and evaluation of each module to its own task. Of course, a dynamic <code>import()</code> that loads a very large module will kick off a rather large script evaluation task, and that can interfere with the ability of the main thread to respond to user input if the interaction occurs at the same time as the dynamic <code>import()</code> call. <strong>Therefore, it's still very important that you load as little JavaScript as possible.</strong></li>
</ol>
<p>Dynamic <code>import()</code> calls behave similarly in all major browser engines: the script evaluation tasks that result will be the same as the amount of modules that are dynamically imported.</p>
<h3 id="loading-scripts-in-a-web-worker">Loading scripts in a web worker <a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#loading-scripts-in-a-web-worker">#</a></h3>
<p><a href="https://developer.mozilla.org/docs/Web/API/Web_Workers_API" rel="noopener">Web workers</a> are a special JavaScript use case. Web workers are registered on the main thread, and the code within the worker then runs on its own thread. This is hugely beneficial in the sense that—while the code that registers the web worker runs on the main thread—the code within the web worker doesn't. This reduces main thread congestion, and can help keep the main thread more responsive to user interactions.</p>
<p>In addition to reducing main thread work, web workers <em>themselves</em> can load external scripts to be used in the worker context, either through <a href="https://developer.mozilla.org/docs/Web/API/WorkerGlobalScope/importScripts" rel="noopener"><code>importScripts</code></a> or static <code>import</code> statements in browsers that support <a href="https://web.dev/module-workers/">module workers</a>. The result is that any script requested by a web worker is evaluated off the main thread.</p>
<aside class="aside flow bg-state-good-bg color-state-good-text"><p class="cluster "><span class="aside__icon box-block "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24" fill="currentColor" role="img" aria-label="Check">   <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"></path> </svg></span><strong>Objective</strong></p><div class=" flow"> <strong>Read to learn more:</strong>&nbsp;<a href="https://web.dev/off-main-thread/">Use web workers to run JavaScript off the browser's main thread</a>. </div></aside>
<h2 id="trade-offs-and-considerations">Trade-offs and considerations <a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#trade-offs-and-considerations">#</a></h2>
<p>While breaking up your scripts into separate, smaller files helps limit long tasks as opposed to loading fewer, much larger files, it's important to take some things into account when deciding how to break scripts up.</p>
<h3 id="compression-efficiency">Compression efficiency <a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#compression-efficiency">#</a></h3>
<p><a href="https://web.dev/reduce-network-payloads-using-text-compression/">Compression</a> is a factor when it comes to breaking up scripts. When scripts are smaller, compression becomes somewhat less efficient. Larger scripts will benefit much more from compression. While increasing compression efficiency helps to keep load times for scripts as low as possible, it's a bit of a balancing act to ensure that you're breaking up scripts into enough smaller chunks to facilitate better interactivity during startup.</p>
<p>Bundlers are ideal tools for managing the output size for the scripts your website depends on:</p>
<ul>
<li>Where webpack is concerned, its <code>SplitChunksPlugin</code> plugin can help. Consult the <a href="https://webpack.js.org/plugins/split-chunks-plugin/" rel="noopener"><code>SplitChunksPlugin</code> documentation</a> for options you can set to help manage asset sizes.</li>
<li>For other bundlers such as <a href="https://rollupjs.org/" rel="noopener">Rollup</a> and <a href="https://esbuild.github.io/" rel="noopener">esbuild</a>, you can manage script file sizes by using dynamic <code>import()</code> calls in your code. These bundlers—as well as webpack—will automatically break off the dynamically imported asset into its own file, thus avoiding larger initial bundle sizes.</li>
</ul>
<h3 id="cache-invalidation">Cache invalidation <a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#cache-invalidation">#</a></h3>
<p>Cache invalidation plays a big role in how fast a page loads on repeat visits. When you ship large, monolithic script bundles, you're at a disadvantage when it comes to browser caching. This is because when you update your first-party code—either through updating packages or shipping bug fixes—the entire bundle becomes invalidated and must be downloaded again.</p>
<p>By breaking up your scripts, you're not just breaking up script evaluation work across smaller tasks, you're also increasing the likelihood that return visitors will grab more scripts from the browser cache instead of from the network. This translates into an overall faster page load.</p>
<aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>Important</strong></p><div class=" flow"> In order for caching to be both efficient and to avoid stale resources from being served from the cache, be sure that your bundler is <a href="https://bundlers.tooling.report/hashing/">generating resources with a hash in the file name</a>. </div></aside>
<h3 id="nested-modules-and-loading-performance">Nested modules and loading performance <a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#nested-modules-and-loading-performance">#</a></h3>
<p>If you're shipping ES modules in production and loading them with the <code>type=module</code> attribute, you need to be aware of how module nesting can impact startup time. Module nesting refers to when an ES module statically imports another ES module that statically imports another ES module:</p>
<div><pre class="language-js"><code class="language-js"><span class="token comment">// a.js</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>b<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./b.js'</span><span class="token punctuation">;</span><br><br><span class="token comment">// b.js</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>c<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./c.js'</span><span class="token punctuation">;</span></code></pre>
</div><p>If your ES modules are not bundled together, the preceding code results in a network request chain: when <code>a.js</code> is requested from a <code>&lt;script&gt;</code> element, another network request is dispatched for <code>b.js</code>, which then involves <em>another</em> request for <code>c.js</code>. One way to avoid this is to use a bundler—but be sure you're configuring your bundler to break up scripts to spread out script evaluation work.</p>
<p>If you don't want to use a bundler, then another way to get around nested module calls is to use the <a href="https://developer.chrome.com/blog/modulepreload/" rel="noopener"><code>modulepreload</code> resource hint</a>, which will preload ES modules ahead of time to avoid network request chains. Beware, however: this hint is currently only supported in Chromium-based browsers.</p>
<h2 id="conclusion">Conclusion <a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#conclusion">#</a></h2>
<p>Optimizing evaluation of scripts in the browser is no doubt a tricky feat. The approach depends on your website's requirements and constraints. However, by splitting up scripts, you're spreading the work of script evaluation over numerous smaller tasks, and therefore giving the main thread the ability to handle user interactions more efficiently, rather than blocking the main thread.</p>
<p>To recap, here are some things you can to do to break up large script evaluation tasks:</p>
<ul>
<li>When loading scripts using the <code>&lt;script&gt;</code> element without the <code>type=module</code> attribute, avoid loading scripts that are very large, as these will kick off resource-intensive script evaluation tasks that block the main thread. Spread out your scripts over more <code>&lt;script&gt;</code> elements to break up this work.</li>
<li>Using the <code>type=module</code> attribute to load ES modules natively in the browser will kick off individual tasks for evaluation for each separate module script.</li>
<li>Reduce the size of your initial bundles by using dynamic <code>import()</code> calls. This also works in bundlers, as bundlers will treat each dynamically imported module as a "split point," resulting in a separate script being generated for each dynamically imported module.</li>
<li>Be sure to weigh trade-offs such as compression efficiency and cache invalidation. Larger scripts will compress better, but are more likely to involve more expensive script evaluation work in fewer tasks, and result in browser cache invalidation, leading to overall lower caching efficiency.</li>
<li>If using ES modules natively without bundling, use the <code>modulepreload</code> resource hint to optimize the loading of them during startup.</li>
<li>As always, ship as little JavaScript as possible.</li>
</ul>
<p>It's a balancing act for sure—but by breaking up scripts and reducing initial payloads via dynamic <code>import()</code>, you can achieve better startup performance and better accommodate user interactions during that crucial startup period. This should help you score better on the INP metric, thus delivering a better user experience.</p>
<p><em>Hero image from <a href="https://unsplash.com/" rel="noopener">Unsplash</a>, by <a href="https://unsplash.com/@markusspiske" rel="noopener">Markus Spiske</a>.</em></p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[优化输入延迟]]></title>
            <link>https://web.dev/optimize-input-delay/</link>
            <guid>https://web.dev/optimize-input-delay/</guid>
            <content:encoded><![CDATA[<div>
    <h1>GPT总结</h1>
    <summary>这篇文章介绍了网页上的交互是复杂的，涉及到浏览器中的各种活动。无论是通过触摸屏幕、点击鼠标还是按键，所有的交互都会在事件回调开始之前产生一定的输入延迟。输入延迟是指用户首次与页面交互（如点击、触摸或按键）到事件回调开始运行之间的时间段。文章提到，输入延迟的一部分是不可避免的，因为操作系统需要一定的时间将输入事件传递给浏览器。然而，页面上的其他操作也会导致输入延迟变得足够长，从而引发问题。为了尽量减少输入延迟，可以避免使用定时器函数（setTimeout和setInterval）和长时间任务，同时注意交互重叠的问题。通过减少输入延迟，可以提高网站的交互速度。</summary>
    <div>
    <div>OriginTitle: Optimize input delay</div>

    </div></div><p>网络上的交互非常复杂，浏览器中会发生各种活动来驱动交互。 不过，它们的共同点是，它们在事件回调开始运行之前会产生一些输入延迟。 在本指南中，您将了解什么是输入延迟，以及如何最大限度地减少输入延迟，以便网站的交互运行得更快。</p>
<h2 id="what-is-input-delay">什么是输入延迟？<a class="headline-link" href="https://web.dev/optimize-input-delay/#what-is-input-delay">#</a></h2>
<p><em>输入延迟</em>是从用户首次与页面交互（例如点击屏幕、单击鼠标或按键）开始到交互的事件回调开始运行的时间段。 每次交互都以一定程度的输入延迟开始。</p>
<figure>
  <img alt="A simplified visualization of input delay. At left, there is line art of a mouse cursor with a starburst behind it, signifying the start of an interaction. To the right is line art of a cogwheel, signifying when the event handlers for an interaction begin to run. The space in between is noted as the input delay with a curly brace." decoding="async" height="303" loading="lazy" sizes="(min-width: 736px) 736px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&amp;w=1472 1472w" width="736">
  <figcaption>
     输入延迟背后的机制。 当操作系统接收到输入时，必须在交互开始之前将其传递到浏览器。 这需要一定的时间，并且可以通过现有的主线程工作来增加。 
  </figcaption>
</figure>
<p>某些部分的输入延迟是不可避免的：操作系统总是需要一些时间来识别输入事件并将其传递给浏览器。 然而，这部分输入延迟通常甚至不明显，并且页面本身发生的其他事情可能会使输入延迟足够长而导致问题。</p>
<h2 id="how-to-think-about-input-delay">如何考虑输入延迟<a class="headline-link" href="https://web.dev/optimize-input-delay/#how-to-think-about-input-delay">#</a></h2>
<p>一般来说，您希望交互的每个部分都尽可能短，以便您的网站有最好的机会满足<a href="https://web.dev/inp/#what-is-a-good-inp-score">下次绘制交互 (INP) 指标的“良好”阈值</a>，无论用户的设备如何。 控制输入​​延迟只是满足该阈值的一部分。</p>
<p>您可能会想看看<a href="https://web.dev/fid/#what-is-a-good-fid-score">首次输入延迟 (FID) 阈值</a>确定输入延迟的容限，但 FID 的“良好”阈值是<strong>100 毫秒或更短</strong>。 如果您达到这个阈值，您将把 INP 预算的一半单独分配给输入延迟。 当您考虑到交互还需要时间来运行事件回调以及浏览器绘制下一帧时，这是不可取的。</p>
<p>为了满足 INP 的“良好”阈值，您需要尽可能缩短输入延迟，但您不应期望完全消除它，因为这是不可能的。 只要您在用户尝试与页面交互时避免过多的主线程工作，您的输入延迟就应该足够低以避免出现问题。</p>
<h2 id="how-to-minimize-input-delay">如何最小化输入延迟<a class="headline-link" href="https://web.dev/optimize-input-delay/#how-to-minimize-input-delay">#</a></h2>
<p>如前所述，一些输入延迟是不可避免的，但另一方面，一些输入延迟<em>是</em>可以避免的。 如果您遇到长时间输入延迟的问题，请考虑以下事项。</p>
<h3 id="avoid-recurring-timers-that-kick-off-excessive-main-thread-work">避免重复计时器启动过多的主线程工作<a class="headline-link" href="https://web.dev/optimize-input-delay/#avoid-recurring-timers-that-kick-off-excessive-main-thread-work">#</a></h3>
<p>JavaScript 中有两个常用的计时器函数会导致输入延迟：<a href="https://developer.mozilla.org/docs/Web/API/setTimeout" rel="noopener"><code>设置超时时间</code></a>和<a href="https://developer.mozilla.org/docs/Web/API/setInterval" rel="noopener"><code>设置时间间隔</code></a>。 两者的区别在于<code>设置超时时间</code>安排回调在指定时间后运行。<code>设置时间间隔</code>另一方面，安排回调来运行每个<em>n</em>永久毫秒，或者直到计时器停止<a href="https://developer.mozilla.org/docs/Web/API/clearInterval" rel="noopener"><code>清除间隔</code></a>。</p>
<p><code>设置超时时间</code>本身并没有问题——事实上，它可以在以下方面有所帮助：<a href="https://web.dev/optimize-input-delay/#avoid-long-tasks">避免长时间的任务</a>。 然而，这取决于<em>什么时候</em>发生超时，以及在超时回调运行时用户是否尝试与页面交互。</p>
<p>此外，<code>设置超时时间</code>可以循环或递归运行，它的作用更像<code>设置时间间隔</code>，但最好在上一次迭代完成之前不安排下一次迭代。 虽然这意味着循环每次都会屈服于主线​​程<code>设置超时时间</code>被调用时，您应该注意确保其回调不会最终执行过多的工作。</p>
<p><code>设置时间间隔</code>按时间间隔运行回调，因此更有可能妨碍交互。 这是因为——与单个实例不同<code>设置超时时间</code>调用，这是一个一次性回调<em>可能</em>妨碍用户交互——<code>设置时间间隔</code>的反复出现的性质使其更有可能<em>将要</em>妨碍交互，从而增加交互的输入延迟。</p>
<figure>
  <img alt="A screenshot of the performance profiler in Chrome DevTools demonstrating input delay. A task fired by a timer function occurs just before a user initiates a click interaction. However, the timer extends the input delay, causing the interaction's event callbacks to run later than they otherwise would." decoding="async" height="291" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
    先前注册的计时器<code>设置时间间隔</code>如 Chrome DevTools 的性能面板中所示，调用会导致输入延迟。 添加的输入延迟会导致交互的事件回调比原本可以运行的时间晚。 
  </figcaption>
</figure>
<p>如果计时器出现在第一方代码中，那么您可以控制它们。 评估一下你是否需要它们，或者尽力减少它们的工作量。 然而，第三方脚本中的计时器则是另一回事。 您通常无法控制第三方脚本的功能，并且修复第三方代码中的性能问题通常需要与利益相关者合作，以确定给定的第三方脚本是否必要，如果需要，请与相关人员建立联系。第三方脚本供应商以确定可以采取哪些措施来修复他们可能在您的网站上引起的性能问题。</p>
<h3 id="avoid-long-tasks">避免长时间的任务<a class="headline-link" href="https://web.dev/optimize-input-delay/#avoid-long-tasks">#</a></h3>
<p>减轻长输入延迟的一种方法是避免长任务。 当您有过多的主线程工作导致交互期间阻塞主线程时，这将在长任务有机会完成之前增加它们的输入延迟。</p>
<figure>
  <img alt="A visualization of how long tasks extend input delay. At top, an interaction occurs shortly after a single long task runs, causing significant input delay that causes event callbacks to run much later than they should. At bottom, an interaction occurs at roughly the same time, but the long task is broken up into several smaller ones by yielding, allowing the interaction's event callbacks to run much sooner." decoding="async" height="448" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
    可视化显示当任务太长且浏览器无法足够快地响应交互时，以及当较长的任务被分解为较小的任务时，交互会发生什么情况。
  </figcaption>
</figure>
<p>除了最大限度地减少您在任务中所做的工作量之外，您还应该<em>总是</em>努力在主线程上做尽可能少的工作 - 您可以通过以下方式提高对用户输入的响应能力<a href="https://web.dev/optimize-long-tasks/">分解长任务</a>。</p>
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow">让出并不是万无一失的，因为来自第三方 JavaScript 的任务在让出后仍然可以在第一方任务之间移动。 这仍然会导致未来交互的输入延迟，并且您需要注意可能按时间间隔运行的第三方任务，如上一节所述。 这是一个问题<a href="https://github.com/WICG/scheduling-apis/blob/main/explainers/yield-and-continuation.md">拟议的<code>调度程序.yield</code>应用程序编程接口</a>正在寻求解决。</div></aside>
<h3 id="be-mindful-of-interaction-overlap">注意交互重叠<a class="headline-link" href="https://web.dev/optimize-input-delay/#be-mindful-of-interaction-overlap">#</a></h3>
<p>优化 INP 的一个特别具有挑战性的部分可能是交互重叠。 交互重叠意味着在与一个元素交互后，您在初始交互有机会渲染下一帧之前与页面进行了另一次交互。</p>
<figure>
  <img alt="A depiction of when tasks can overlap to produce long input delays. In this depiction, a click interaction overlaps with a keydown interaction to increase the input delay for the keydown interaction." decoding="async" height="307" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
     Chrome 开发者工具中性能分析器中两个并发交互的可视化。 初始点击交互中的渲染工作会导致后续键盘交互的输入延迟。 
  </figcaption>
</figure>
<p>交互重叠的来源可能很简单，比如用户在短时间内进行多次交互。 当用户在表单字段中键入内容时，可能会发生这种情况，其中可能会在很短的时间内发生许多键盘交互。 如果关键事件的工作特别昂贵（例如在自动完成字段的常见情况下，向后端发出网络请求），您有以下几种选择：</p>
<ul>
<li>考虑<a href="https://web.dev/debounce-your-input-handlers/">去抖</a>输入以限制事件回调在给定时间段内执行的次数。</li>
<li>使用<a href="https://developer.mozilla.org/docs/Web/API/AbortController/abort" rel="noopener"><code>中止控制器</code></a>取消传出<code>拿来</code>请求，这样主线程就不会变得拥塞处理<code>拿来</code>回调。 注：一个<code>中止控制器</code>实例的<code>信号</code>属性也可用于<a href="https://developer.mozilla.org/docs/Web/API/AbortSignal/abort_event" rel="noopener">中止事件</a>。</li>
</ul>
<p>由于重叠交互而导致输入延迟增加的另一个原因可能是昂贵的动画。 特别是 JavaScript 中的动画可能会引发许多<a href="https://developer.mozilla.org/docs/Web/API/window/requestAnimationFrame" rel="noopener"><code>请求动画帧</code></a>调用，这可能会妨碍用户交互。 为了解决这个问题，请尽可能使用 CSS 动画，以避免对可能昂贵的动画帧进行排队，但如果这样做，请确保<a href="https://developer.chrome.com/en/docs/lighthouse/performance/non-composited-animations/" rel="noopener">避免非合成动画</a>这样动画主要在 GPU 和合成器线程上运行，而不是在主线程上运行。</p>
<h2 id="conclusion">结论<a class="headline-link" href="https://web.dev/optimize-input-delay/#conclusion">#</a></h2>
<p>虽然输入延迟可能并不代表交互运行所需的大部分时间，但重要的是要了解交互的每个部分都会占用一定的时间，您可以减少这些时间。 如果你是<a href="https://web.dev/diagnose-slow-interactions-in-the-lab/#how-to-identify-long-input-delays">观察长输入延迟</a>，那么你就有机会减少它。 避免重复的计时器回调、分解长任务以及了解潜在的交互重叠都可以帮助您减少输入延迟，从而为网站用户带来更快的交互性。</p>
<p><em>英雄形象来自<a href="https://unsplash.com/" rel="noopener">未飞溅</a>， 经过<a href="https://unsplash.com/@introspectivedsgn" rel="noopener">埃里克·麦克莱恩</a>。</em></p>
<hr><p>Interactions on the web are complicated things, with all sorts of activity occurring in the browser to drive them. What they all have in common, though, is that they incur some input delay before their event callbacks begin to run. In this guide, you'll learn what input delay is, and what you can do to minimize it so your website's interactions run faster.</p>
<h2 id="what-is-input-delay">What is input delay? <a class="headline-link" href="https://web.dev/optimize-input-delay/#what-is-input-delay">#</a></h2>
<p><em>Input delay</em> is the period of time beginning from when the user first interacts with a page—such as tapping on a screen, clicking with a mouse, or pressing a key—up to when the event callbacks for the interaction begin to run. Every interaction begins with some amount of input delay.</p>
<figure>
  <img alt="A simplified visualization of input delay. At left, there is line art of a mouse cursor with a starburst behind it, signifying the start of an interaction. To the right is line art of a cogwheel, signifying when the event handlers for an interaction begin to run. The space in between is noted as the input delay with a curly brace." decoding="async" height="303" loading="lazy" sizes="(min-width: 736px) 736px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&amp;w=1472 1472w" width="736">
  <figcaption>
    The mechanics behind input delay. When an input is received by the operating system, it must be passed to the browser before the interaction starts. This takes a certain amount of time, and can be increased by existing main thread work.
  </figcaption>
</figure>
<p>Some portion of the input delay is unavoidable: it always takes some amount of time for the operating system to recognize an input event and pass it to the browser. However, that portion of the input delay is often not even noticeable, and there are other things that happen on the page itself that can make input delays long enough to cause problems.</p>
<h2 id="how-to-think-about-input-delay">How to think about input delay <a class="headline-link" href="https://web.dev/optimize-input-delay/#how-to-think-about-input-delay">#</a></h2>
<p>Generally speaking, you want to keep every part of an interaction as short as possible so that your website has the best chance of meeting <a href="https://web.dev/inp/#what-is-a-good-inp-score">the Interaction to Next Paint (INP) metric's "good" threshold</a>, regardless of the user's device. Keeping input delay in check is just one part of meeting that threshold.</p>
<p>You might be tempted to look to <a href="https://web.dev/fid/#what-is-a-good-fid-score">the First Input Delay (FID) thresholds</a> to determine an allowance for input delays—but the "good" threshold for FID is <strong>100 milliseconds or less</strong>. If you go by this threshold, you'd be allotting half of your budget for INP to input delay alone. This is inadvisable when you consider that an interaction also requires time to run event callbacks and for the browser to paint the next frame.</p>
<p>To meet INP's "good" threshold, you'll want to aim for the shortest input delay possible, but you shouldn't expect to eliminate it entirely, as that is impossible. As long as you're avoiding excessive main thread work while users are attempting to interact with your page, your input delay should be low enough to avoid problems.</p>
<h2 id="how-to-minimize-input-delay">How to minimize input delay <a class="headline-link" href="https://web.dev/optimize-input-delay/#how-to-minimize-input-delay">#</a></h2>
<p>As said previously, some input delay is unavoidable, but on the other hand, some input delay <em>is</em> avoidable. Here are some things to consider if you're struggling with long input delays.</p>
<h3 id="avoid-recurring-timers-that-kick-off-excessive-main-thread-work">Avoid recurring timers that kick off excessive main thread work <a class="headline-link" href="https://web.dev/optimize-input-delay/#avoid-recurring-timers-that-kick-off-excessive-main-thread-work">#</a></h3>
<p>There are two commonly used timer functions in JavaScript that can contribute to input delay: <a href="https://developer.mozilla.org/docs/Web/API/setTimeout" rel="noopener"><code>setTimeout</code></a> and <a href="https://developer.mozilla.org/docs/Web/API/setInterval" rel="noopener"><code>setInterval</code></a>. The difference between the two is that <code>setTimeout</code> schedules a callback to run after a specified time. <code>setInterval</code>, on the other hand, schedules a callback to run every <em>n</em> milliseconds in perpetuity, or until the timer is stopped with <a href="https://developer.mozilla.org/docs/Web/API/clearInterval" rel="noopener"><code>clearInterval</code></a>.</p>
<p><code>setTimeout</code> is not problematic in itself—in fact, it can be helpful in <a href="https://web.dev/optimize-input-delay/#avoid-long-tasks">avoiding long tasks</a>. However, it depends on <em>when</em> the timeout occurs, and whether the user attempts to interact with the page when the timeout callback runs.</p>
<p>Additionally, <code>setTimeout</code> can be run in a loop or recursively, where it acts more like <code>setInterval</code>, though preferably not scheduling the next iteration until the previous one is completed. While this means the loop will yield to the main thread every time <code>setTimeout</code> is called, you should take care to ensure its callback doesn't end up doing excessive work.</p>
<p><code>setInterval</code> runs a callback on an interval, and is therefore much more likely to get in the way of interactions. This is because—unlike a single instance of a <code>setTimeout</code> call, which is a one-off callback that <em>may</em> get in the way of a user interaction—<code>setInterval</code>'s recurring nature makes it much more likely that it <em>will</em> get in the way of an interaction, thus increasing the interaction's input delay.</p>
<figure>
  <img alt="A screenshot of the performance profiler in Chrome DevTools demonstrating input delay. A task fired by a timer function occurs just before a user initiates a click interaction. However, the timer extends the input delay, causing the interaction's event callbacks to run later than they otherwise would." decoding="async" height="291" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
    A timer registered by a previous <code>setInterval</code> call contributing to input delay as depicted in the performance panel of Chrome DevTools. The added input delay causes the event callbacks for the interaction to run later than they otherwise could.
  </figcaption>
</figure>
<p>If timers are occurring in first-party code, then you have control over them. Evaluate whether you need them, or do your best to reduce the work in them as much as possible. However, timers in third-party scripts are a different story. You often don't have control over what a third-party script does, and fixing performance issues in third-party code often involves working with stakeholders to determine whether a given third-party script is necessary, and if so, establish contact with a third-party script vendor to determine what can done to fix performance issues they may cause on your website.</p>
<h3 id="avoid-long-tasks">Avoid long tasks <a class="headline-link" href="https://web.dev/optimize-input-delay/#avoid-long-tasks">#</a></h3>
<p>One way to mitigate long input delays is to avoid long tasks. When you have excessive main thread work that blocks the main thread during interactions, that will add to the input delay for them before the long tasks have had a chance to finish.</p>
<figure>
  <img alt="A visualization of how long tasks extend input delay. At top, an interaction occurs shortly after a single long task runs, causing significant input delay that causes event callbacks to run much later than they should. At bottom, an interaction occurs at roughly the same time, but the long task is broken up into several smaller ones by yielding, allowing the interaction's event callbacks to run much sooner." decoding="async" height="448" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
    A visualization of what happens to interactions when tasks are too long and the browser can't respond quickly enough to interactions, versus when longer tasks are broken up into smaller tasks.
  </figcaption>
</figure>
<p>Besides minimizing the amount of work you do in a task—and you should <em>always</em> strive to do as little work as possible on the main thread—you can improve responsiveness to user input by <a href="https://web.dev/optimize-long-tasks/">breaking up long tasks</a>.</p>
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> Yielding isn't foolproof, as tasks from third-party JavaScript can still make their way in between first-party tasks after yielding. This can still contribute to input delay for future interactions, and you'll need to be mindful of third-party tasks that may run on an interval, as described in the previous section. This is a problem that <a href="https://github.com/WICG/scheduling-apis/blob/main/explainers/yield-and-continuation.md">the proposed <code>scheduler.yield</code> API</a> is looking to solve. </div></aside>
<h3 id="be-mindful-of-interaction-overlap">Be mindful of interaction overlap <a class="headline-link" href="https://web.dev/optimize-input-delay/#be-mindful-of-interaction-overlap">#</a></h3>
<p>A particularly challenging part of optimizing INP can be if you have interactions that overlap. Interaction overlap means that after you've interacted with one element, you make another interaction with the page before the initial interaction has had a chance to render the next frame.</p>
<figure>
  <img alt="A depiction of when tasks can overlap to produce long input delays. In this depiction, a click interaction overlaps with a keydown interaction to increase the input delay for the keydown interaction." decoding="async" height="307" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
    A visualization of two concurrent interactions in the performance profiler in Chrome's DevTools. The rendering work in the initial click interaction causes an input delay for the subsequent keyboard interaction.
  </figcaption>
</figure>
<p>Sources of interaction overlap may be as simple as users making many interactions in a short period of time. This can occur when users type in form fields, where many keyboard interactions can occur in a very short period of time. If the work on a key event is especially expensive—such as in the common case of autocomplete fields where network requests are made to a back end—you have a couple of options:</p>
<ul>
<li>Consider <a href="https://web.dev/debounce-your-input-handlers/">debouncing</a> inputs to limit the amount of times an event callback executes in a given period of time.</li>
<li>Use <a href="https://developer.mozilla.org/docs/Web/API/AbortController/abort" rel="noopener"><code>AbortController</code></a> to cancel outgoing <code>fetch</code> requests so the main thread doesn't become congested handling <code>fetch</code> callbacks. Note: an <code>AbortController</code> instance's <code>signal</code> property can also be used to <a href="https://developer.mozilla.org/docs/Web/API/AbortSignal/abort_event" rel="noopener">abort events</a>.</li>
</ul>
<p>Another source of increased input delay due to overlapping interactions can be expensive animations. In particular, animations in JavaScript may fire many <a href="https://developer.mozilla.org/docs/Web/API/window/requestAnimationFrame" rel="noopener"><code>requestAnimationFrame</code></a> calls, which may get in the way of user interactions. To get around this, use CSS animations whenever possible to avoid queueing potentially expensive animation frames—but if you do this, make sure you <a href="https://developer.chrome.com/en/docs/lighthouse/performance/non-composited-animations/" rel="noopener">avoid non-composited animations</a> so that animations run mainly on the GPU and compositor threads, and not on the main thread.</p>
<h2 id="conclusion">Conclusion <a class="headline-link" href="https://web.dev/optimize-input-delay/#conclusion">#</a></h2>
<p>While input delays may not represent the majority of the time your interactions take to run, it's important to understand that every part of an interaction takes up an amount of time that you can reduce. If you're <a href="https://web.dev/diagnose-slow-interactions-in-the-lab/#how-to-identify-long-input-delays">observing long input delay</a>, then you have opportunities to reduce it. Avoiding recurring timer callbacks, breaking up long tasks, and being aware of potential interaction overlap can all help you to reduce input delay, leading to faster interactivity for your website's users.</p>
<p><em>Hero image from <a href="https://unsplash.com/" rel="noopener">Unsplash</a>, by <a href="https://unsplash.com/@introspectivedsgn" rel="noopener">Erik Mclean</a>.</em></p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[寻找现场缓慢的互动]]></title>
            <link>https://web.dev/find-slow-interactions-in-the-field/</link>
            <guid>https://web.dev/find-slow-interactions-in-the-field/</guid>
            <content:encoded><![CDATA[<div>
    <h1>GPT总结</h1>
    <summary>本文介绍了在了解网站用户体验时，现场数据是权威的数据来源。现场数据可以揭示实验室数据中无法发现的问题。收集Interaction to Next Paint (INP)的现场数据对于了解页面对真实用户的响应性至关重要，并且其中包含了改善用户体验的线索。

在收集INP数据时，需要收集以下内容以提供慢速交互的背景信息：

- INP值：这是需要收集的关键数据。这些值的分布将决定页面是否满足INP的阈值。
- 负责页面INP的元素选择器字符串：了解页面的INP是好的，但仅凭此还不够。如果不知道是哪个元素导致了INP，你将一无所知。通过记录元素选择器字符串，你将确切地知道哪些元素负责了交互。
- 交互发生时页面的加载状态：当页面正在加载时，可以合理地假设会有更多的主线程活动，这可能导致更高的交互延迟。在页面加载过程中，会进行HTML解析、样式表解析和JavaScript评估和执行。了解交互是在页面加载期间还是之后发生的，有助于确定是否需要优化以加快启动速度，以便交互在主线程上运行更快，或者交互本身是否很慢。
</summary>
    <div>
    <div>OriginTitle: Find slow interactions in the field</div>

    </div></div><p><a href="https://web.dev/lab-and-field-data-differences/#field-data">现场数据</a>是<em>这</em>关于实际用户如何体验您的网站的权威来源。 它梳理出您可能看不到的问题<a href="https://web.dev/lab-and-field-data-differences/#lab-data">实验室数据</a>独自的。 虽然可以在基于实验室的工具中模拟交互，但您无法以现场用户体验的方式重现实验室中的每一个交互。 收集现场数据<a href="https://web.dev/inp/">与下一个油漆的相互作用 (INP)</a>对于了解页面对真实用户的响应程度至关重要，它包含使他们的体验变得更好的线索。</p>
<h2 id="what-you-should-collect-in-the-field-and-why">您应该在现场收集什么以及为什么<a class="headline-link" href="https://web.dev/find-slow-interactions-in-the-field/#what-you-should-collect-in-the-field-and-why">#</a></h2>
<p>在现场收集 INP 数据时，您需要捕获以下信息以提供交互缓慢原因的背景信息：</p>
<ul>
<li><strong>INP 值。</strong>这是您需要收集的关键数据。 这些值的分布将决定页面是否满足<a href="https://web.dev/inp/#what-is-a-good-inp-score">INP阈值</a>。</li>
<li><strong>负责页面 INP 的元素选择器字符串。</strong>了解页面的 INP 固然很好，但仅了解它还不够。 如果不知道是什么元素造成了这种情况，您就会一无所知。 通过记录元素选择器字符串，您将确切地知道哪些元素负责交互。</li>
<li><strong>页面交互的加载状态，即页面的 INP。</strong>加载页面时，可以合理地假设发生更多主线程活动，这可能会导致更高的交互延迟。 在页面加载期间，会进行 HTML 解析、样式表解析以及 JavaScript 评估和执行。 了解交互是否在页面加载期间或之后发生可以帮助您确定是否需要优化以加快启动速度，以便交互在主线程上有更多空间来快速运行，或者负责页面 INP 的交互本身是否是不管怎样都很慢。</li>
<li><strong>互动的<code>开始时间</code>。</strong>记录交互的<a href="https://developer.mozilla.org/docs/Web/API/PerformanceEntry/startTime" rel="noopener"><code>开始时间</code></a>让您准确了解交互在性能时间线上发生的时间。</li>
<li><strong>事件类型。</strong>这<a href="https://developer.mozilla.org/docs/Web/API/Event/type" rel="noopener">事件类型</a>很高兴知道，因为它会告诉您交互是否是某个交互的结果<code>点击</code>,<code>按键</code>，或其他符合条件的事件类型。 用户交互可能包含多个回调，并且可以帮助您准确确定交互中哪个事件回调运行时间最长。</li>
</ul>
<p>虽然这一切看起来需要考虑很多，但您不必重新发明轮子才能实现这一目标。 值得庆幸的是，这些数据已在<a href="https://github.com/GoogleChrome/web-vitals" rel="noopener"><code>网络生命周期</code>JavaScript 库</a>，您将在下一节中学习如何收集它。</p>
<h2 id="measure-interactions-in-the-field-with-the-web-vitals-javascript-library">测量现场与<code>网络生命周期</code>JavaScript 库<a class="headline-link" href="https://web.dev/find-slow-interactions-in-the-field/#measure-interactions-in-the-field-with-the-web-vitals-javascript-library">#</a></h2>
<p>这<code>网络生命周期</code>JavaScript 库是查找现场缓慢交互的好方法，这在很大程度上要归功于它提供<a href="https://github.com/GoogleChrome/web-vitals#attribution-build" rel="noopener">归因</a>是什么导致了它们。 INP 可以在支持的浏览器中收集<a href="https://developer.mozilla.org/docs/Web/API/PerformanceEventTiming" rel="noopener">事件计时API</a>和它的<a href="https://developer.mozilla.org/docs/Web/API/PerformanceEventTiming/interactionId" rel="noopener"><code>交互ID</code>财产</a>。</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">浏览器支持</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 96，支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      96
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">火狐浏览器，不支持</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported">
<p></p></span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="edge">
<span class="visually-hidden">边缘 96，支持</span>
</span>
<span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
96
</span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="safari">
<span class="visually-hidden">Safari，不支持</span>
</span>
<span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported"><p></p>
<p></p></span>
</li><p></p>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/API/PerformanceEventTiming/interactionId#browser_compatibility" target="_blank">来源</a>
</div>
<p>用一个<a href="https://en.wikipedia.org/wiki/Real_user_monitoring" rel="noopener">真实用户监控 (RUM)</a>获得 INP 的提供商是最方便的，但并不总是一种选择。 例如，如果这是您的情况，您可以使用<code>网络生命周期</code>JavaScript 库用于收集 INP 数据并将其传输到 Google Analytics 以供以后评估：</p>
<div><pre class="language-js"><code class="language-js"><span class="token comment">// 确保从归因构建中导入：</span><br><span class="token keyword">进口</span> <span class="token punctuation">{</span>上INP<span class="token punctuation">}</span> <span class="token keyword">从</span> <span class="token string">'网络生命/归因'</span><span class="token punctuation">;</span><br><br><span class="token keyword">功能</span> <span class="token function">发送至Google Analytics</span> <span class="token punctuation">（</span><span class="token parameter"><span class="token punctuation">{</span>姓名<span class="token punctuation">,</span>价值<span class="token punctuation">,</span>ID<span class="token punctuation">,</span>归因<span class="token punctuation">}</span></span><span class="token punctuation">）</span> <span class="token punctuation">{</span><br>  <span class="token comment">// 解构归因对象：</span><br>  <span class="token keyword">常量</span> <span class="token punctuation">{</span>事件入口<span class="token punctuation">,</span>事件目标<span class="token punctuation">,</span>事件类型<span class="token punctuation">,</span>加载状态<span class="token punctuation">}</span> <span class="token operator">=</span>归因<span class="token punctuation">;</span><br><br>  <span class="token comment">// 从事件计时条目获取计时：</span><br>  <span class="token keyword">常量</span> <span class="token punctuation">{</span>开始时间<span class="token punctuation">,</span>处理开始<span class="token punctuation">,</span>处理结束<span class="token punctuation">,</span>期间<span class="token punctuation">,</span>交互ID<span class="token punctuation">}</span> <span class="token operator">=</span>事件入口<span class="token punctuation">;</span><br><br>  <span class="token keyword">常量</span>事件参数<span class="token operator">=</span> <span class="token punctuation">{</span><br>    <span class="token comment">// 页面的INP值：</span><br>    <span class="token literal-property property">度量输入值</span><span class="token operator">:</span>价值<span class="token punctuation">,</span><br>    <span class="token comment">// 页面会话的唯一ID，很有用</span><br>    <span class="token comment">// 用于在按 ID 分组时计算总数。</span><br>    <span class="token literal-property property">指标 ID</span><span class="token operator">:</span>ID<span class="token punctuation">,</span><br>    <span class="token comment">// 事件目标（指向的 CSS 选择器字符串</span><br>    <span class="token comment">// 到负责交互的元素）：</span><br>    <span class="token literal-property property">指标_inp_事件_目标</span><span class="token operator">:</span>事件目标<span class="token punctuation">,</span><br>    <span class="token comment">// 触发交互的事件类型：</span><br>    <span class="token literal-property property">metric_inp_event_type</span><span class="token operator">:</span>事件类型<span class="token punctuation">,</span><br>    <span class="token comment">// 交互时页面是否加载</span><br>    <span class="token comment">// 发生。 对于识别启动与启动很有用</span><br>    <span class="token comment">// 加载后交互：</span><br>    <span class="token literal-property property">metric_inp_load_state</span><span class="token operator">:</span>加载状态<span class="token punctuation">,</span><br>    <span class="token comment">// 页面加载后的时间（以毫秒为单位）</span><br>    <span class="token comment">// 交互发生了：</span><br>    <span class="token literal-property property">度量输入开始时间</span><span class="token operator">:</span>开始时间<span class="token punctuation">,</span><br>    <span class="token comment">// 处理事件回调时</span><br>    <span class="token comment">// 交互开始运行：</span><br>    <span class="token literal-property property">metric_inp_processing_start</span><span class="token operator">:</span>处理开始<span class="token punctuation">,</span><br>    <span class="token comment">// 处理事件回调时</span><br>    <span class="token comment">// 交互完成：</span><br>    <span class="token literal-property property">度量_inp_处理_结束</span><span class="token operator">:</span>处理结束<span class="token punctuation">,</span><br>    <span class="token comment">// 交互的总持续时间。 注：这个</span><br>    <span class="token comment">// 值四舍五入为 8 毫秒的粒度：</span><br>    <span class="token literal-property property">度量输入持续时间</span><span class="token operator">:</span>期间<span class="token punctuation">,</span><br>    <span class="token comment">// 分配给交互的交互 ID</span><br>    <span class="token comment">// 事件计时 API。 这在某些情况下可能有用</span><br>    <span class="token comment">// 您可能想要聚合相关事件的地方：</span><br>    <span class="token literal-property property">metric_inp_interaction_id</span><span class="token operator">:</span>交互ID<br>  <span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>  <span class="token comment">// 发送到谷歌分析</span><br>  <span class="token function">标签</span><span class="token punctuation">（</span><span class="token string">'事件'</span><span class="token punctuation">,</span>姓名<span class="token punctuation">,</span>事件参数<span class="token punctuation">）</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// 将报告函数传递给 web-vitals INP 报告者：</span><br><span class="token function">上INP</span><span class="token punctuation">（</span>发送至Google Analytics<span class="token punctuation">）</span><span class="token punctuation">;</span></code></pre>
</div><aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>重要的</strong></p><div class=" flow">就元素归因而言，并非所有交互都可以归因于特定元素。 这是由于底层的限制<a href="https://developer.mozilla.org/docs/Web/API/PerformanceEventTiming">事件计时API</a>，用于计算页面的 INP。 在此 API 中，<a href="https://developer.mozilla.org/docs/Web/API/Event/target">事件目标</a>如果负责交互的元素与 DOM 断开连接，或者该元素位于<a href="https://developer.mozilla.org/docs/Web/Web_Components/Using_shadow_DOM">影子 DOM</a>。</div></aside>
<p>如果您有 Google Analytics（分析）并在您的网站上运行上述代码，您不仅会获得页面 INP 的详细报告，还会获得有用的上下文信息，这些信息可以让您更好地了解从哪里开始优化缓慢的交互。</p>
<h3 id="monitor-full-session-duration,-not-just-up-to-onload">监控整个会话持续时间，而不仅仅是长达<code>负载</code> <a class="headline-link" href="https://web.dev/find-slow-interactions-in-the-field/#monitor-full-session-duration,-not-just-up-to-onload">#</a></h3>
<p>使用<code>网络生命周期</code>如前所述，JavaScript 库可能会导致多个分析事件被发送到 Google Analytics。 这很好，因为 ID<code>网络生命周期</code>当前页面的生成将保持不变，并且 Google Analytics 将允许您覆盖以前的数据。</p>
<p>但是，并非所有 RUM 提供商都以这种方式运行，因此如果您正在构建自己的 RUM 收集解决方案，则需要考虑到这一点。 如果您当前的分析提供商不允许覆盖现有记录，您需要记录所有<code>三角洲</code>值（即指标过去和当前状态之间的差异）并使用由指标提供的相同 ID 来传输它们<code>网络生命周期</code>图书馆; 然后您可以通过对 ID 进行分组来汇总这些更改。 欲了解更多信息，请参阅<code>网络生命周期</code>文档的<a href="https://github.com/GoogleChrome/web-vitals#report-only-the-delta-of-changes" rel="noopener">关于处理增量的部分</a>。</p>
<h2 id="get-field-data-quickly-with-crux">使用 CrUX 快速获取现场数据<a class="headline-link" href="https://web.dev/find-slow-interactions-in-the-field/#get-field-data-quickly-with-crux">#</a></h2>
<p>这<a href="https://developer.chrome.com/docs/crux/" rel="noopener">Chrome 用户体验报告 (CrUX)</a>是 Web Vitals 计划的官方数据集。 虽然来自 CrUX 的数据本身并不能为您提供解决特定 INP 问题所需的全部信息，但它确实可以让您首先知道自己是否遇到问题。 即使您已经通过 RUM 提供商收集现场数据，也请考虑将其与您网站的 CrUX 数据（如果可用）进行对比，因为有<a href="https://web.dev/crux-and-rum-differences/">他们使用的方法的差异</a>。</p>
<p>您可以使用以下方式评估您网站的 INP 并查看其 CrUX 数据<a href="https://pagespeed.web.dev/" rel="noopener">页面速度洞察 (PSI)</a>。 PageSpeed Insights 可以为 CrUX 数据集中包含的网站提供页面级字段数据。 要使用 PageSpeed Insights 审核 URL，请转至<a href="https://pagespeed.web.dev/" rel="noopener">https://pagespeed.web.dev/</a>，输入要测试的 URL，然后单击<strong>分析</strong>按钮。</p>
<aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>重要的</strong></p><div class=" flow">您输入的网址<a href="https://web.dev/find-slow-interactions-in-the-field/%E2%80%8B%E2%80%8Bhttps://developer.chrome.com/docs/crux/methodology/#eligibility">可能不符合 CrUX 资格</a>。 如果是这种情况，您需要收集自己的现场数据，这在上一节中进行了解释。 此外，如果 PageSpeed Insights 中的给定 URL 没有页面级数据，则提供的字段数据将在整个网站上聚合。</div></aside>
<p>评估开始后，CrUX 数据将立即作为 Lighthouse（a<a href="https://web.dev/lab-and-field-data-differences/#lab-data">实验室工具</a>）运行。</p>
<figure>
  <img alt="A screenshot of INP field data in a distribution. The distribution aligns with the INP thresholds, and in this example, the field INP value is 545 milliseconds, which lands in the poor range." decoding="async" height="161" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>PageSpeed Insights 中显示的 INP 体验分布。</figcaption>
</figure>
<p>当 Lighthouse 完成评估后，PSI 将使用 Lighthouse 审核来填充评估。</p>
<aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>重要的</strong></p><div class=" flow">由于 PageSpeed Insights 未编写脚本来与页面交互，因此不会进行与 INP 相关的审核。 然而，<a href="https://web.dev/tbt/">总阻塞时间 (TBT)</a>是<a href="https://almanac.httparchive.org/en/2022/performance#inp-and-tbt">与INP高度相关</a>。 因此，您可以按 TBT 过滤审核，以寻找机会减少测试期间页面阻塞主线程的时间。</div></aside>
<figure>
  <img alt="A screenshot of Lighthouse audits as seen in PageSpeed Insights. The audits are filtered by the TBT metric, showing tips for minimizing main thread work, avoiding an excessive DOM size, and avoiding long main thread tasks." decoding="async" height="346" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>总阻塞时间审核</figcaption>
</figure>
<h2 id="what-if-i-dont-have-field-data">如果我没有现场数据怎么办？<a class="headline-link" href="https://web.dev/find-slow-interactions-in-the-field/#what-if-i-dont-have-field-data">#</a></h2>
<p>您可能处于没有或什至无法收集现场数据的情况。 如果这描述了您的情况，那么您将完全依赖实验室工具来找到缓慢的交互。 有关实验室测试的更多信息，请阅读<a href="https://web.dev/diagnose-slow-interactions-in-the-lab/">如何在实验室中诊断导致 INP 不良的原因</a>。</p>
<h2 id="conclusion">结论<a class="headline-link" href="https://web.dev/find-slow-interactions-in-the-field/#conclusion">#</a></h2>
<p>当您需要了解哪些交互对于现场实际用户来说是有问题的时，现场数据是您可以利用的最佳信息来源。 通过利用 PageSpeed Insights 中提供的信息，或依靠现场数据收集工具，例如<code>网络生命周期</code>JavaScript 库（或您的 RUM 提供商），您可以更加确信哪些交互最有问题，然后继续进行<a href="https://web.dev/diagnose-slow-interactions-in-the-lab/">在实验室中重现有问题的相互作用</a>然后着手修复它们。</p>
<p><em>英雄形象来自<a href="https://unsplash.com/" rel="noopener">未飞溅</a>， 经过<a href="https://unsplash.com/@federicorespini" rel="noopener">费德里科·雷斯皮尼</a>。</em></p>
<hr><p><a href="https://web.dev/lab-and-field-data-differences/#field-data">Field data</a> is <em>the</em> authoritative source when it comes to how actual users are experiencing your website. It teases out issues you may not see in <a href="https://web.dev/lab-and-field-data-differences/#lab-data">lab data</a> alone. While interactions can be simulated in lab-based tools, you're not going to be able to reproduce every single interaction in the lab in the way that users in the field experience them. Gathering field data for <a href="https://web.dev/inp/">Interaction to Next Paint (INP)</a> is critical to understanding how responsive your page is to real users, and it contains the clues to make their experience even better.</p>
<h2 id="what-you-should-collect-in-the-field-and-why">What you should collect in the field and why <a class="headline-link" href="https://web.dev/find-slow-interactions-in-the-field/#what-you-should-collect-in-the-field-and-why">#</a></h2>
<p>When collecting INP data in the field, you'll want to capture the following to give context to why interactions were slow:</p>
<ul>
<li><strong>The INP value.</strong> This is the key piece of data you'll need to collect. The distribution of these values will determine whether the page meets <a href="https://web.dev/inp/#what-is-a-good-inp-score">the INP thresholds</a>.</li>
<li><strong>The element selector string responsible for the page's INP.</strong> Knowing a page's INP is good, but not good enough by itself. Without knowing what element was responsible for it, you'll be in the dark. By logging element selector strings, you’ll know exactly what elements are responsible for interactions.</li>
<li><strong>The loading state of the page for the interaction that is the page's INP.</strong> When a page is loading, it's reasonable to assume that there's more main thread activity occurring that could result in higher interaction latency. During page load, there's HTML parsing, stylesheet parsing, and JavaScript evaluation and execution going on. Knowing whether an interaction has taken place during page load or afterwards helps you to figure out if you need to optimize for faster startup so interactions have more room on the main thread to run quickly, or if the interaction responsible for the page's INP in itself is slow regardless.</li>
<li><strong>The interaction's <code>startTime</code>.</strong> Logging the interaction's <a href="https://developer.mozilla.org/docs/Web/API/PerformanceEntry/startTime" rel="noopener"><code>startTime</code></a> lets you know exactly when the interaction occurred on the performance timeline.</li>
<li><strong>The event type.</strong> The <a href="https://developer.mozilla.org/docs/Web/API/Event/type" rel="noopener">event type</a> is good to know, as it will tell you whether the interaction was the result of a <code>click</code>, <code>keypress</code>, or other eligible event type. A user interaction may contain multiple callbacks, and can help you to pinpoint exactly which event callback in the interaction took the longest to run.</li>
</ul>
<p>While this all seems like a lot to take into account, you don't have to reinvent the wheel to get there. Thankfully, this data is exposed in the <a href="https://github.com/GoogleChrome/web-vitals" rel="noopener"><code>web-vitals</code> JavaScript library</a>, and you'll learn how to gather it in the next section.</p>
<h2 id="measure-interactions-in-the-field-with-the-web-vitals-javascript-library">Measure interactions in the field with the <code>web-vitals</code> JavaScript library <a class="headline-link" href="https://web.dev/find-slow-interactions-in-the-field/#measure-interactions-in-the-field-with-the-web-vitals-javascript-library">#</a></h2>
<p>The <code>web-vitals</code> JavaScript library is a great way to find slow interactions in the field, thanks in large part to its ability to provide <a href="https://github.com/GoogleChrome/web-vitals#attribution-build" rel="noopener">attribution</a> for what's causing them. INP can be collected in browsers that support the <a href="https://developer.mozilla.org/docs/Web/API/PerformanceEventTiming" rel="noopener">Event Timing API</a> and its <a href="https://developer.mozilla.org/docs/Web/API/PerformanceEventTiming/interactionId" rel="noopener"><code>interactionId</code> property</a>.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 96, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      96
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox, Not supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported">
<p></p></span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="edge">
<span class="visually-hidden">Edge 96, Supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
96
</span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="safari">
<span class="visually-hidden">Safari, Not supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported"><p></p>
<p></p></span>
</li><p></p>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/API/PerformanceEventTiming/interactionId#browser_compatibility" target="_blank">Source</a>
</div>
<p>Using a <a href="https://en.wikipedia.org/wiki/Real_user_monitoring" rel="noopener">Real User Monitoring (RUM)</a> provider to get INP is most convenient, but not always an option. If that's your case, for example, you can use the <code>web-vitals</code> JavaScript library to collect and transmit INP data to Google Analytics for later evaluation:</p>
<div><pre class="language-js"><code class="language-js"><span class="token comment">// Be sure to import from the attribution build:</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>onINP<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'web-vitals/attribution'</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">sendToGoogleAnalytics</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>name<span class="token punctuation">,</span> value<span class="token punctuation">,</span> id<span class="token punctuation">,</span> attribution<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token comment">// Destructure the attribution object:</span><br>  <span class="token keyword">const</span> <span class="token punctuation">{</span>eventEntry<span class="token punctuation">,</span> eventTarget<span class="token punctuation">,</span> eventType<span class="token punctuation">,</span> loadState<span class="token punctuation">}</span> <span class="token operator">=</span> attribution<span class="token punctuation">;</span><br><br>  <span class="token comment">// Get timings from the event timing entry:</span><br>  <span class="token keyword">const</span> <span class="token punctuation">{</span>startTime<span class="token punctuation">,</span> processingStart<span class="token punctuation">,</span> processingEnd<span class="token punctuation">,</span> duration<span class="token punctuation">,</span> interactionId<span class="token punctuation">}</span> <span class="token operator">=</span> eventEntry<span class="token punctuation">;</span><br><br>  <span class="token keyword">const</span> eventParams <span class="token operator">=</span> <span class="token punctuation">{</span><br>    <span class="token comment">// The page's INP value:</span><br>    <span class="token literal-property property">metric_inp_value</span><span class="token operator">:</span> value<span class="token punctuation">,</span><br>    <span class="token comment">// A unique ID for the page session, which is useful</span><br>    <span class="token comment">// for computing totals when you group by the ID.</span><br>    <span class="token literal-property property">metric_id</span><span class="token operator">:</span> id<span class="token punctuation">,</span><br>    <span class="token comment">// The event target (a CSS selector string pointing</span><br>    <span class="token comment">// to the element responsible for the interaction):</span><br>    <span class="token literal-property property">metric_inp_event_target</span><span class="token operator">:</span> eventTarget<span class="token punctuation">,</span><br>    <span class="token comment">// The type of event that triggered the interaction:</span><br>    <span class="token literal-property property">metric_inp_event_type</span><span class="token operator">:</span> eventType<span class="token punctuation">,</span><br>    <span class="token comment">// Whether the page was loaded when the interaction</span><br>    <span class="token comment">// took place. Useful for identifying startup versus</span><br>    <span class="token comment">// post-load interactions:</span><br>    <span class="token literal-property property">metric_inp_load_state</span><span class="token operator">:</span> loadState<span class="token punctuation">,</span><br>    <span class="token comment">// The time (in milliseconds) after page load when</span><br>    <span class="token comment">// the interaction took place:</span><br>    <span class="token literal-property property">metric_inp_start_time</span><span class="token operator">:</span> startTime<span class="token punctuation">,</span><br>    <span class="token comment">// When processing of the event callbacks in the</span><br>    <span class="token comment">// interaction started to run:</span><br>    <span class="token literal-property property">metric_inp_processing_start</span><span class="token operator">:</span> processingStart<span class="token punctuation">,</span><br>    <span class="token comment">// When processing of the event callbacks in the</span><br>    <span class="token comment">// interaction finished:</span><br>    <span class="token literal-property property">metric_inp_processing_end</span><span class="token operator">:</span> processingEnd<span class="token punctuation">,</span><br>    <span class="token comment">// The total duration of the interaction. Note: this</span><br>    <span class="token comment">// value is rounded to 8 milliseconds of granularity:</span><br>    <span class="token literal-property property">metric_inp_duration</span><span class="token operator">:</span> duration<span class="token punctuation">,</span><br>    <span class="token comment">// The interaction ID assigned to the interaction by</span><br>    <span class="token comment">// the Event Timing API. This could be useful in cases</span><br>    <span class="token comment">// where you might want to aggregate related events:</span><br>    <span class="token literal-property property">metric_inp_interaction_id</span><span class="token operator">:</span> interactionId<br>  <span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>  <span class="token comment">// Send to Google Analytics</span><br>  <span class="token function">gtag</span><span class="token punctuation">(</span><span class="token string">'event'</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> eventParams<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// Pass the reporting function to the web-vitals INP reporter:</span><br><span class="token function">onINP</span><span class="token punctuation">(</span>sendToGoogleAnalytics<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div><aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>Important</strong></p><div class=" flow"> Where element attribution is concerned, not every interaction can be attributed to a specific element. This is due to a limitation of the underlying <a href="https://developer.mozilla.org/docs/Web/API/PerformanceEventTiming">Event Timing API</a>, which is used to calculate the page's INP. In this API, <a href="https://developer.mozilla.org/docs/Web/API/Event/target">the event target</a> may be absent if the element responsible for the interaction was disconnected from the DOM, or if the element was in the <a href="https://developer.mozilla.org/docs/Web/Web_Components/Using_shadow_DOM">shadow DOM</a>. </div></aside>
<p>If you have Google Analytics and run the preceding code on your website, you'll get a detailed reporting of not just the page's INP, but also useful contextual information that can give you a better sense of where to begin optimizing slow interactions.</p>
<h3 id="monitor-full-session-duration,-not-just-up-to-onload">Monitor full session duration, not just up to <code>onload</code> <a class="headline-link" href="https://web.dev/find-slow-interactions-in-the-field/#monitor-full-session-duration,-not-just-up-to-onload">#</a></h3>
<p>Using the <code>web-vitals</code> JavaScript library, as previously mentioned, may result in multiple analytics events being sent to Google Analytics. This is fine, as the ID <code>web-vitals</code> generates for the current page will stay the same, and Google Analytics will allow you to overwrite previous data.</p>
<p>However, not all RUM providers operate this way, so if you're building your own RUM collection solution, you'll need to take this into account. If your current analytics provider won't allow overwrites of existing records, you'll need to record all the <code>delta</code> values—that is, the difference between a metric's past and current states— for a metric and transmit them using the same ID provided by the <code>web-vitals</code> library;  then you can sum those changes by grouping on the ID. For more more information, consult the <code>web-vitals</code> documentation's <a href="https://github.com/GoogleChrome/web-vitals#report-only-the-delta-of-changes" rel="noopener">section on handling deltas</a>.</p>
<h2 id="get-field-data-quickly-with-crux">Get field data quickly with CrUX <a class="headline-link" href="https://web.dev/find-slow-interactions-in-the-field/#get-field-data-quickly-with-crux">#</a></h2>
<p>The <a href="https://developer.chrome.com/docs/crux/" rel="noopener">Chrome UX Report (CrUX)</a> is the official dataset of the Web Vitals program. While data from CrUX alone doesn't give you all the information you need to troubleshoot specific INP issues, it does let you know whether you have a problem in the first place. Even if you're already collecting field data through a RUM provider, consider contrasting it with CrUX data for your website (if available), as there are <a href="https://web.dev/crux-and-rum-differences/">differences in the methodologies they use</a>.</p>
<p>You can evaluate your website's INP and view its CrUX data using <a href="https://pagespeed.web.dev/" rel="noopener">PageSpeed Insights (PSI)</a>. PageSpeed Insights may provide page-level field data for websites that are included in the CrUX dataset. To audit a URL with PageSpeed Insights, go to <a href="https://pagespeed.web.dev/" rel="noopener">https://pagespeed.web.dev/</a>, enter a URL to test, and click the <strong>Analyze</strong> button.</p>
<aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>Important</strong></p><div class=" flow"> The URL you enter <a href="https://web.dev/find-slow-interactions-in-the-field/%E2%80%8B%E2%80%8Bhttps://developer.chrome.com/docs/crux/methodology/#eligibility">may not be eligible for CrUX</a>. If this is the case, you'll need to collect your own field data, which is explained in the previous section. Also, where page-level data is not available for the given URL in PageSpeed Insights, the provided field data will be aggregated over the entire website. </div></aside>
<p>Once the assessment begins, CrUX data will be available instantly as Lighthouse (a <a href="https://web.dev/lab-and-field-data-differences/#lab-data">lab tool</a>) runs.</p>
<figure>
  <img alt="A screenshot of INP field data in a distribution. The distribution aligns with the INP thresholds, and in this example, the field INP value is 545 milliseconds, which lands in the poor range." decoding="async" height="161" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>The distribution of INP experiences as seen in PageSpeed Insights.</figcaption>
</figure>
<p>When Lighthouse has finished running its assessment, PSI will populate the assessment with Lighthouse audits.</p>
<aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>Important</strong></p><div class=" flow"> Because PageSpeed Insights is not scripted to interact with the page, there will be no audits relevant to INP. However, <a href="https://web.dev/tbt/">Total Blocking Time (TBT)</a> is <a href="https://almanac.httparchive.org/en/2022/performance#inp-and-tbt">highly correlated with INP</a>. Therefore, you can filter audits by TBT to find opportunities to reduce the amount of time a page blocks the main thread during the test. </div></aside>
<figure>
  <img alt="A screenshot of Lighthouse audits as seen in PageSpeed Insights. The audits are filtered by the TBT metric, showing tips for minimizing main thread work, avoiding an excessive DOM size, and avoiding long main thread tasks." decoding="async" height="346" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>Audits for Total Blocking Time</figcaption>
</figure>
<h2 id="what-if-i-dont-have-field-data">What if I don't have field data? <a class="headline-link" href="https://web.dev/find-slow-interactions-in-the-field/#what-if-i-dont-have-field-data">#</a></h2>
<p>You might be in a situation where you don't have or can’t even collect field data. If this describes your situation, then you'll be entirely dependent on lab tools in order to find slow interactions. For more information on lab testing, read <a href="https://web.dev/diagnose-slow-interactions-in-the-lab/">How to diagnose what's causing poor INP in the lab</a>.</p>
<h2 id="conclusion">Conclusion <a class="headline-link" href="https://web.dev/find-slow-interactions-in-the-field/#conclusion">#</a></h2>
<p>Field data is the best source of information you can draw on when it comes to understanding which interactions are problematic for actual users in the field. By drawing on information available in PageSpeed Insights, or relying on field data collection tools such as the <code>web-vitals</code> JavaScript library (or your RUM provider), you can be more confident about which interactions are most problematic, and then move on to <a href="https://web.dev/diagnose-slow-interactions-in-the-lab/">reproducing problematic interactions in the lab</a> and then go about fixing them.</p>
<p><em>Hero image from <a href="https://unsplash.com/" rel="noopener">Unsplash</a>, by <a href="https://unsplash.com/@federicorespini" rel="noopener">Federico Respini</a>.</em></p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[DOM 大小对交互性的影响有多大，以及您可以采取哪些措施]]></title>
            <link>https://web.dev/dom-size-and-interactivity/</link>
            <guid>https://web.dev/dom-size-and-interactivity/</guid>
            <content:encoded><![CDATA[<div>
    <h1>GPT总结</h1>
    <summary>本文讨论了网页的DOM（文档对象模型）对页面性能的影响以及如何减小DOM的大小来提高页面响应速度。DOM表示网页的HTML结构，JavaScript和CSS可以通过DOM访问页面的结构和内容。然而，DOM的大小会影响浏览器快速高效地渲染页面的能力。DOM越大，页面的初始渲染和后续更新的成本就越高。特别是在具有非常大的DOM的页面中，修改或更新DOM的交互会触发昂贵的布局工作，从而影响页面快速响应的能力。当页面的DOM超过一定数量时，就会影响页面的交互到下一次绘制（INP）。为了使页面能够快速响应用户交互，重要的是确保DOM的大小尽可能小。

文章提到了如何测量DOM的大小。可以使用Lighthouse进行DOM大小的测量，也可以使用浏览器开发者工具中的JavaScript控制台来获取DOM元素的总数。文章还介绍了如何通过性能监视器工具实时查看DOM的大小。

文章提到了减小DOM大小的方法，包括减少DOM的深度和简化DOM结构。还提到了使用组件化框架时可以使用片段（fragments）来减少DOM深度。此外，文章还介绍了其他策略，如增量</summary>
    <div>
    <div>OriginTitle: How large DOM sizes affect interactivity, and what you can do about it</div>

    </div></div><p>没有办法解决这个问题：当您构建一个网页时，该页面将有一个<a href="https://developer.mozilla.org/docs/Web/API/Document_Object_Model" rel="noopener">文档对象模型 (DOM)</a>。 DOM 表示页面 HTML 的结构，并为 JavaScript 和 CSS 提供对页面结构和内容的访问。</p>
<p>然而问题是，<em>尺寸</em>DOM 的影响浏览器快速有效地呈现页面的能力。 一般来说，DOM 越大，最初渲染该页面以及稍后在页面生命周期中更新其渲染的成本就越高。</p>
<p>在具有非常大 DOM 的页面中，当修改或更新 DOM 的交互触发昂贵的布局工作，从而影响页面快速响应的能力时，这会成为问题。 昂贵的布局工作可能会影响页面的<a href="https://web.dev/inp/">与下一个油漆的相互作用 (INP)</a>; 如果您希望页面快速响应用户交互，请务必确保 DOM 大小仅根据需要而定。</p>
<h2 id="when-is-a-pages-dom-too-large">页面的 DOM 是什么时候<em>也</em>大的？<a class="headline-link" href="https://web.dev/dom-size-and-interactivity/#when-is-a-pages-dom-too-large">#</a></h2>
<aside class="aside flow color-secondary-box-text bg-secondary-box-bg"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" role="img" aria-label="Highlighter pen" xmlns="http://www.w3.org/2000/svg">   <path fill-rule="evenodd" clip-rule="evenodd" d="M10.22 9.49l-5.91 6c-.77.8-.7 2.05.08 2.85L.77 22h5.68l.74-.75c.78.81 1.95.86 2.73.05l5.96-6.05-5.66-5.76zm12.46-4l-2.82-2.87c-.78-.8-2.07-.84-2.84-.04l-5.75 5.85 5.66 5.75 5.69-5.78c.77-.81.83-2.11.06-2.91z"></path> </svg></span><strong>关键术语</strong></p><div class=" flow">了解 DOM 元素和 DOM 节点之间的区别非常重要。 一个DOM<em>元素</em>指的是一个特定的<a href="https://developer.mozilla.org/docs/Web/API/HTMLElement">HTML 元素</a>在 DOM 树中。 A<a href="https://developer.mozilla.org/docs/Web/API/Node">DOM<em>节点</em></a>与 DOM 元素术语具有重叠的含义，但其定义已扩展为包括注释、空格和文本。 虽然<a href="https://developer.chrome.com/en/docs/lighthouse/performance/dom-size/">Lighthouse DOM 大小审核</a>指的是 DOM 节点，本指南将尽可能通过节点来指代 DOM 元素。</div></aside>
<p><a href="https://developer.chrome.com/en/docs/lighthouse/performance/dom-size/#how-the-lighthouse-dom-size-audit-fails" rel="noopener">根据灯塔</a>，当页面的 DOM 大小超过 1,400 个节点时，页面的 DOM 大小就过大了。 当页面的 DOM 超过 800 个节点时，Lighthouse 将开始发出警告。 以以下 HTML 为例：</p>
<div><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&amp;lt;</span>乌尔</span><span class="token punctuation">&amp;gt;</span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&amp;lt;</span>李</span><span class="token punctuation">&amp;gt;</span></span>列出第一项。<span class="token tag"><span class="token tag"><span class="token punctuation"></span>李</span><span class="token punctuation">&amp;gt;</span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&amp;lt;</span>李</span><span class="token punctuation">&amp;gt;</span></span>列出第二项。<span class="token tag"><span class="token tag"><span class="token punctuation"></span>李</span><span class="token punctuation">&amp;gt;</span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&amp;lt;</span>李</span><span class="token punctuation">&amp;gt;</span></span>列出第三项。<span class="token tag"><span class="token tag"><span class="token punctuation"></span>李</span><span class="token punctuation">&amp;gt;</span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation"></span>乌尔</span><span class="token punctuation">&amp;gt;</span></span></code></pre>
</div><p>在上面的代码中，有四个 DOM 元素：<code></code>元素及其三个<code></code>子元素。 您的网页几乎肯定会拥有比这更多的节点，因此了解可以采取哪些措施来控制 DOM 大小非常重要，以及在页面 DOM 小到以下时优化渲染工作的其他策略有可能。</p>
<h2 id="how-do-large-doms-affect-page-performance">大 DOM 如何影响页面性能？<a class="headline-link" href="https://web.dev/dom-size-and-interactivity/#how-do-large-doms-affect-page-performance">#</a></h2>
<p>大型 DOM 通过以下几种方式影响页面性能：</p>
<ol>
<li>在页面的初始渲染期间。 当 CSS 应用于页面时，会出现类似于 DOM 的结构，称为<a href="https://web.dev/critical-rendering-path-constructing-the-object-model/#css-object-model-cssom">CSS 对象模型 (CSSOM)</a>被建造。 随着 CSS 选择器的特异性增加，CSSOM 变得更加复杂，并且需要更多时间来运行将网页绘制到屏幕上所需的布局、样式、合成和绘制工作。 这项添加的工作增加了页面加载期间早期发生的交互的交互延迟。</li>
<li>当交互修改 DOM 时，无论是通过元素插入或删除，还是通过修改 DOM 内容和样式，渲染更新所需的工作可能会导致非常昂贵的布局、样式、合成和绘制工作。 与页面初始渲染的情况一样，当 HTML 元素作为交互结果插入到 DOM 中时，CSS 选择器特异性的增加可能会增加渲染工作。</li>
<li>当 JavaScript 查询 DOM 时，对 DOM 元素的引用存储在内存中。 例如，如果您致电<a href="https://developer.mozilla.org/docs/Web/API/Document/querySelectorAll" rel="noopener"><code>文档.querySelectorAll</code></a>选择全部<code></code>如果结果返回大量 DOM 元素，则内存消耗可能会相当大。</li>
</ol>
<figure>
  <img alt="A screenshot of a long task caused by excessive rendering work in the performance panel of Chrome DevTools. The long task's call stack shows significant time spent recalculating page styles, as well as pre-paint." decoding="async" height="248" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
     Chrome DevTools 中的性能分析器中显示的一项长任务。 显示的长任务是通过 JavaScript 将 DOM 元素插入到大 DO​​M 中引起的。 
  </figcaption>
</figure>
<p>所有这些都会影响交互性，但上面列表中的第二项尤其重要。 如果交互导致 DOM 发生更改，则可能会启动大量工作，从而导致页面上的 INP 较差。</p>
<h2 id="how-do-i-measure-dom-size">如何测量 DOM 大小？<a class="headline-link" href="https://web.dev/dom-size-and-interactivity/#how-do-i-measure-dom-size">#</a></h2>
<p>您可以通过多种方式测量 DOM 大小。 第一种方法使用 Lighthouse。 当您运行审核时，当前页面 DOM 的统计信息将位于“诊断”标题下的“避免 DOM 大小过大”审核中。 在本节中，您可以看到 DOM 元素的总数、包含最多子元素的 DOM 元素以及最深的 DOM 元素。</p>
<p>一种更简单的方法涉及在任何主要浏览器的开发人员工具中使用 JavaScript 控制台。 要获取 DOM 中 HTML 元素的总数，可以在页面加载后在控制台中使用以下代码：</p>
<div><pre class="language-js"><code class="language-js">文档<span class="token punctuation">。</span><span class="token function">查询选择器全部</span><span class="token punctuation">（</span><span class="token string">'*'</span><span class="token punctuation">）</span><span class="token punctuation">。</span>长度<span class="token punctuation">;</span></code></pre>
</div><aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow">请注意，上面的代码片段仅包含 HTML 数量<em>元素</em>在 DOM 中。 它不包括所有<em>节点</em>在 DOM 中。</div></aside>
<p>如果你想实时查看 DOM 大小的更新，你也可以使用<a href="https://developer.chrome.com/blog/new-in-devtools-64/#perf-monitor" rel="noopener">性能监控工具</a>。 使用此工具，您可以将布局和样式操作（以及其他性能方面）与当前 DOM 大小关联起来。</p>
<figure>
  <img alt="A screenshot of the performance monitor in Chrome DevTools. At left, there are various aspects of page performance that can be continuously monitored during the life of the page. In the screenshot, the number of DOM nodes, layouts per second, and style recalculations per section are actively being monitored." decoding="async" height="273" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
     Chrome DevTools 中的性能监视器。 在此视图中，页面当前的 DOM 节点数以及每秒执行的布局操作和样式重新计算以图表形式显示。 
  </figcaption>
</figure>
<p>如果 DOM 的大小接近 Lighthouse DOM 大小的警告阈值，或者完全失败，下一步就是找出如何减小 DOM 的大小，以提高页面响应用户交互的能力，从而提高网站的 INP。</p>
<h2 id="how-can-i-measure-the-number-of-dom-elements-affected-by-an-interaction">如何测量受交互影响的 DOM 元素数量？<a class="headline-link" href="https://web.dev/dom-size-and-interactivity/#how-can-i-measure-the-number-of-dom-elements-affected-by-an-interaction">#</a></h2>
<p>如果您在实验室中分析缓慢的交互，并且怀疑可能与页面 DOM 的大小有关，则可以通过在分析器中选择标记为“重新计算样式”的任何活动来计算出有多少 DOM 元素受到影响。 ”并观察底部面板中的上下文数据。</p>
<figure>
  <img alt="A screenshot of selected style recalculation activity in the performance panel of Chrome DevTools. At top, the interactions track shows a click interaction, and the majority of the work is spent doing style recalculation and pre-paint work. At the bottom, a panel shows more detail for the selected activity, which reports that 2,547 DOM elements were affected." decoding="async" height="639" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
     观察 DOM 中受影响元素的数量作为样式重新计算工作的结果。 请注意，交互轨迹中交互的阴影部分表示交互持续时间超过 200 毫秒的部分，即<a href="https://web.dev/inp/#what-is-a-good-inp-score" rel="noopener">INP 指定的“良好”阈值</a>。
  </figcaption>
</figure>
<p>在上面的屏幕截图中，请观察作品的样式重新计算（选择时）显示受影响元素的数量。 虽然上面的屏幕截图显示了 DOM 大小对具有许多 DOM 元素的页面上的渲染工作的影响的极端情况，但此诊断信息在任何情况下都非常有用，可以确定 DOM 的大小是否是所需时间的限制因素为响应交互而绘制下一帧。</p>
<h2 id="how-can-i-reduce-dom-size">如何减小 DOM 大小？<a class="headline-link" href="https://web.dev/dom-size-and-interactivity/#how-can-i-reduce-dom-size">#</a></h2>
<p>除了审核网站的 HTML 中是否有不必要的标记之外，减少 DOM 大小的主要方法是减少 DOM 深度。 一个信号表明您的 DOM 可能不必要地深，如果您在<strong>元素</strong>浏览器开发者工具的选项卡：</p>
<div><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&amp;lt;</span>分区</span><span class="token punctuation">&amp;gt;</span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&amp;lt;</span>分区</span><span class="token punctuation">&amp;gt;</span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&amp;lt;</span>分区</span><span class="token punctuation">&amp;gt;</span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&amp;lt;</span>分区</span><span class="token punctuation">&amp;gt;</span></span><br>        <span class="token comment"></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation"></span>分区</span><span class="token punctuation">&amp;gt;</span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation"></span>分区</span><span class="token punctuation">&amp;gt;</span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation"></span>分区</span><span class="token punctuation">&amp;gt;</span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation"></span>分区</span><span class="token punctuation">&amp;gt;</span></span></code></pre>
</div><p>当您看到这样的模式时，您可能可以通过扁平化 DOM 结构来简化它们。 这样做将减少 DOM 元素的数量，并可能为您提供简化页面样式的机会。</p>
<p>DOM 深度也可能是您使用的框架的一个症状。 特别是基于组件的框架——例如那些依赖于<a href="https://reactjs.org/docs/introducing-jsx.html" rel="noopener">JSX</a>- 要求您将多个组件嵌套在父容器中。</p>
<p>然而，许多框架允许您通过使用所谓的片段来避免嵌套组件。 提供片段作为功能的基于组件的框架包括（但不限于）以下内容：</p>
<ul>
<li><a href="https://reactjs.org/docs/fragments.html" rel="noopener">反应</a></li>
<li><a href="https://preactjs.com/guide/v10/components/#fragments" rel="noopener">预反应</a></li>
<li><a href="https://v3-migration.vuejs.org/new/fragments.html" rel="noopener">维埃</a></li>
<li><a href="https://svelte.dev/tutorial/svelte-fragment" rel="noopener">斯韦尔特</a></li>
</ul>
<p>通过在您选择的框架中使用片段，您可以减少 DOM 深度。 如果您担心扁平化 DOM 结构对样式的影响，您可能会受益于使用更现代（更快）的布局模式，例如<a href="https://developer.mozilla.org/docs/Learn/CSS/CSS_layout/Flexbox" rel="noopener">弹性盒</a>或者<a href="https://developer.mozilla.org/docs/Web/CSS/CSS_Grid_Layout" rel="noopener">网格</a>。</p>
<h2 id="other-strategies-to-consider">其他需要考虑的策略<a class="headline-link" href="https://web.dev/dom-size-and-interactivity/#other-strategies-to-consider">#</a></h2>
<p>即使您煞费苦心地展平 DOM 树并删除不必要的 HTML 元素以保持 DOM 尽可能小，它仍然可能相当大，并且随着它响应用户交互而发生变化，从而启动大量渲染工作。 如果您发现自己处于这种情况，您可以考虑一些其他策略来限制渲染工作。</p>
<h3 id="consider-an-additive-approach">考虑添加方法<a class="headline-link" href="https://web.dev/dom-size-and-interactivity/#consider-an-additive-approach">#</a></h3>
<p>当页面首次呈现时，用户可能无法看到页面的大部分内容。 这可能是一个延迟加载 HTML 的机会，方法是在启动时忽略 DOM 的那些部分，但在用户与需要页面最初隐藏部分的页面部分交互时添加它们。</p>
<p>这种方法在初始加载期间甚至加载之后都很有用。 对于初始页面加载，您预先承担的渲染工作较少，这意味着您的初始 HTML 负载会更轻，并且渲染速度会更快。 这将为关键时期的交互提供更多运行机会，减少对主线程注意力的竞争。</p>
<p>如果页面的许多部分最初在加载时隐藏，它还可以加快触发重新渲染工作的其他交互。 然而，随着其他交互向 DOM 添加更多内容，渲染工作也会随着 DOM 在整个页面生命周期中的增长而增加。</p>
<p>随着时间的推移添加到 DOM 可能会很棘手，并且它有自己的权衡。 如果您选择此路线，则可能会发出网络请求来获取数据以填充您打算添加到页面中以响应用户交互的 HTML。 虽然正在进行的网络请求不计入 INP，但它可能会增加感知延迟。 如果可能，请显示正在获取数据的加载旋转器或其他指示器，以便用户了解正在发生的事情。</p>
<h3 id="limit-css-selector-complexity">限制 CSS 选择器的复杂性<a class="headline-link" href="https://web.dev/dom-size-and-interactivity/#limit-css-selector-complexity">#</a></h3>
<p>当浏览器解析 CSS 中的选择器时，它必须遍历 DOM 树以了解这些选择器如何以及是否应用于当前布局。 这些选择器越复杂，浏览器必须做的工作就越多，以便执行页面的初始渲染，以及在页面因交互而更改时增加的样式重新计算和布局工作。</p>
<aside class="aside flow bg-state-good-bg color-state-good-text"><p class="cluster "><span class="aside__icon box-block "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24" fill="currentColor" role="img" aria-label="Check">   <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"></path> </svg></span><strong>客观的</strong></p><div class=" flow"> <strong>阅读以了解更多信息：</strong>&nbsp;<a href="https://web.dev/reduce-the-scope-and-complexity-of-style-calculations/">减少样式计算的范围和复杂性</a>。</div></aside>
<h3 id="use-the-content-visibility-property">使用<code>内容可见性</code>财产<a class="headline-link" href="https://web.dev/dom-size-and-interactivity/#use-the-content-visibility-property">#</a></h3>
<p>CSS 提供了<code>内容可见性</code>属性，这是一种有效地延迟渲染离屏 DOM 元素的方法。 当元素接近视口时，它们会根据需要进行渲染。 的好处<code>内容可见性</code>不仅可以减少初始页面渲染上的大量渲染工作，而且当页面 DOM 由于用户交互而发生更改时，还可以跳过屏幕外元素的渲染工作。</p>
<aside class="aside flow bg-state-good-bg color-state-good-text"><p class="cluster "><span class="aside__icon box-block "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24" fill="currentColor" role="img" aria-label="Check">   <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"></path> </svg></span><strong>客观的</strong></p><div class=" flow"> <strong>阅读以了解更多信息：</strong>&nbsp;<a href="https://web.dev/content-visibility/"><code>内容可见性</code>：新的 CSS 属性可提高渲染性能</a>。</div></aside>
<h2 id="conclusion">结论<a class="headline-link" href="https://web.dev/dom-size-and-interactivity/#conclusion">#</a></h2>
<p>将 DOM 大小减少到严格必要的大小是优化网站 INP 的好方法。 通过这样做，您可以减少 DOM 更新时浏览器执行布局和渲染工作所需的时间。 即使您无法有意义地减小 DOM 大小，也可以使用一些技术将渲染工作隔离到 DOM 子树，例如 CSS 包含和<code>内容可见性</code>CSS 属性。</p>
<p>无论您如何做，创建一个最小化渲染工作的环境，以及减少页面响应交互所需的渲染工作量，结果将是您的网站在用户与用户交互时感觉响应更快。 这意味着您的网站的 INP 会降低，这意味着更好的用户体验。</p>
<p><em>英雄形象来自<a href="https://unsplash.com/" rel="noopener">未飞溅</a>， 经过<a href="https://unsplash.com/@_louisreed" rel="noopener">路易斯·里德</a>。</em></p>
<hr><p>There's no way around it: when you build a web page, that page is going to have a <a href="https://developer.mozilla.org/docs/Web/API/Document_Object_Model" rel="noopener">Document Object Model (DOM)</a>. The DOM represents the structure of your page's HTML, and gives JavaScript and CSS access to a page's structure and contents.</p>
<p>The problem, however, is that the <em>size</em> of the DOM affects a browser's ability to render a page quickly and efficiently. Generally speaking, the larger a DOM is, the more expensive it is to initially render that page and update its rendering later on in the page lifecycle.</p>
<p>This becomes problematic in pages with very large DOMs when interactions that modify or update the DOM trigger expensive layout work that affects the ability of the page to respond quickly. Expensive layout work can affect a page's <a href="https://web.dev/inp/">Interaction to Next Paint (INP)</a>; If you want a page to respond quickly to user interactions, it's important to ensure your DOM sizes are only as large as necessary.</p>
<h2 id="when-is-a-pages-dom-too-large">When is a page's DOM <em>too</em> large? <a class="headline-link" href="https://web.dev/dom-size-and-interactivity/#when-is-a-pages-dom-too-large">#</a></h2>
<aside class="aside flow color-secondary-box-text bg-secondary-box-bg"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" role="img" aria-label="Highlighter pen" xmlns="http://www.w3.org/2000/svg">   <path fill-rule="evenodd" clip-rule="evenodd" d="M10.22 9.49l-5.91 6c-.77.8-.7 2.05.08 2.85L.77 22h5.68l.74-.75c.78.81 1.95.86 2.73.05l5.96-6.05-5.66-5.76zm12.46-4l-2.82-2.87c-.78-.8-2.07-.84-2.84-.04l-5.75 5.85 5.66 5.75 5.69-5.78c.77-.81.83-2.11.06-2.91z"></path> </svg></span><strong>Key Term</strong></p><div class=" flow"> It's important to know the difference between DOM elements and DOM nodes. A DOM <em>element</em> refers to a specific <a href="https://developer.mozilla.org/docs/Web/API/HTMLElement">HTML element</a> in the DOM tree. A <a href="https://developer.mozilla.org/docs/Web/API/Node">DOM <em>node</em></a> has overlapping meaning with the DOM element term, but its definition is expanded to include comments, whitespace, and text. While the <a href="https://developer.chrome.com/en/docs/lighthouse/performance/dom-size/">Lighthouse DOM size audit</a> refers to DOM nodes, this guide will refer to DOM elements over nodes whenever possible. </div></aside>
<p><a href="https://developer.chrome.com/en/docs/lighthouse/performance/dom-size/#how-the-lighthouse-dom-size-audit-fails" rel="noopener">According to Lighthouse</a>, a page's DOM size is excessive when it exceeds 1,400 nodes. Lighthouse will begin to throw warnings when a page's DOM exceeds 800 nodes. Take the following HTML for example:</p>
<div><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>List item one.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>List item two.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>List item three.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span></code></pre>
</div><p>In the above code, there are four DOM elements: the <code>&lt;ul&gt;</code> element, and its three <code>&lt;li&gt;</code> child elements. Your web page will almost certainly have many more nodes than this, so it's important to understand what you can do to keep DOM sizes in check—as well as other strategies to optimize the rendering work once you've gotten a page's DOM as small as it can be.</p>
<h2 id="how-do-large-doms-affect-page-performance">How do large DOMs affect page performance? <a class="headline-link" href="https://web.dev/dom-size-and-interactivity/#how-do-large-doms-affect-page-performance">#</a></h2>
<p>Large DOMs affect page performance in a few ways:</p>
<ol>
<li>During the page's initial render. When CSS is applied to a page, a structure similar to the DOM known as the <a href="https://web.dev/critical-rendering-path-constructing-the-object-model/#css-object-model-cssom">CSS Object Model (CSSOM)</a> is created. As CSS selectors increase in specificity, the CSSOM becomes more complex, and more time is needed to run the necessary layout, styling, compositing, and paint work necessary to draw the web page to the screen. This added work increases interaction latency for interactions that occur early on during page load.</li>
<li>When interactions modify the DOM, either through element insertion or deletion, or by modifying DOM contents and styles, the work necessary to render that update can result in very costly layout, styling, compositing, and paint work. As is the case with the page's initial render, an increase in CSS selector specificity can add to rendering work when HTML elements are inserted into the DOM as the result of an interaction.</li>
<li>When JavaScript queries the DOM, references to DOM elements are stored in memory. For example, if you call <a href="https://developer.mozilla.org/docs/Web/API/Document/querySelectorAll" rel="noopener"><code>document.querySelectorAll</code></a> to select all <code>&lt;div&gt;</code> elements on a page, the memory cost could be considerable if the result returns a large number of DOM elements.</li>
</ol>
<figure>
  <img alt="A screenshot of a long task caused by excessive rendering work in the performance panel of Chrome DevTools. The long task's call stack shows significant time spent recalculating page styles, as well as pre-paint." decoding="async" height="248" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
    A long task as shown in the performance profiler in Chrome DevTools. The long task shown is caused by inserting DOM elements into a large DOM via JavaScript.
  </figcaption>
</figure>
<p>All of these can affect interactivity, but the second item in the list above is of particular importance. If an interaction results in a change to the DOM, it can kick off a lot of work that can contribute to a poor INP on a page.</p>
<h2 id="how-do-i-measure-dom-size">How do I measure DOM size? <a class="headline-link" href="https://web.dev/dom-size-and-interactivity/#how-do-i-measure-dom-size">#</a></h2>
<p>You can measure DOM size in a couple of ways. The first method uses Lighthouse. When you run an audit, statistics on the current page's DOM will be in the "Avoid an excessive DOM size" audit under the "Diagnostics" heading. In this section, you can see the total number of DOM elements, the DOM element containing the most child elements, as well as the deepest DOM element.</p>
<p>A simpler method involves using the JavaScript console in the developer tools in any major browser. To get the total number of HTML elements in the DOM, you can use the following code in the console after the page has loaded:</p>
<div><pre class="language-js"><code class="language-js">document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'*'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span></code></pre>
</div><aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> Note that the code snippet above only includes the number of HTML <em>elements</em> in the DOM. It doesn't include all the <em>nodes</em> in the DOM. </div></aside>
<p>If you want to see the DOM size update in realtime, you can also use the <a href="https://developer.chrome.com/blog/new-in-devtools-64/#perf-monitor" rel="noopener">performance monitor tool</a>. Using this tool, you can correlate layout and styling operations (and other performance aspects) along with the current DOM size.</p>
<figure>
  <img alt="A screenshot of the performance monitor in Chrome DevTools. At left, there are various aspects of page performance that can be continuously monitored during the life of the page. In the screenshot, the number of DOM nodes, layouts per second, and style recalculations per section are actively being monitored." decoding="async" height="273" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
    The performance monitor in Chrome DevTools. In this view, the page's current number of DOM nodes is charted along with layout operations and style recalculations performed per second.
  </figcaption>
</figure>
<p>If the DOM's size is approaching Lighthouse DOM size's warning threshold—or fails altogether—the next step is to figure out how to reduce the DOM's size to improve your page's ability to respond to user interactions so that your website's INP can improve.</p>
<h2 id="how-can-i-measure-the-number-of-dom-elements-affected-by-an-interaction">How can I measure the number of DOM elements affected by an interaction? <a class="headline-link" href="https://web.dev/dom-size-and-interactivity/#how-can-i-measure-the-number-of-dom-elements-affected-by-an-interaction">#</a></h2>
<p>If you're profiling a slow interaction in the lab that you suspect might have something to do with the size of the page's DOM, you can figure out how many DOM elements were affected by selecting any piece of activity in the profiler labeled "Recalculate Style" and observe the contextual data in the bottom panel.</p>
<figure>
  <img alt="A screenshot of selected style recalculation activity in the performance panel of Chrome DevTools. At top, the interactions track shows a click interaction, and the majority of the work is spent doing style recalculation and pre-paint work. At the bottom, a panel shows more detail for the selected activity, which reports that 2,547 DOM elements were affected." decoding="async" height="639" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
    Observing the number of affected elements in the DOM as the result of style recalculation work. Note that the shaded portion of the interaction in the interactions track represents the portion of the interaction duration that was over 200 milliseconds, which is <a href="https://web.dev/inp/#what-is-a-good-inp-score" rel="noopener">the designated "good" threshold for INP</a>.
  </figcaption>
</figure>
<p>In the above screenshot, observe that the style recalculation of the work—when selected—shows the number of affected elements. While the above screenshot shows an extreme case of the effect of DOM size on rendering work on a page with many DOM elements, this diagnostic info is useful in any case to determine if the size of the DOM is a limiting factor in how long it takes for the next frame to paint in response to an interaction.</p>
<h2 id="how-can-i-reduce-dom-size">How can I reduce DOM size? <a class="headline-link" href="https://web.dev/dom-size-and-interactivity/#how-can-i-reduce-dom-size">#</a></h2>
<p>Beyond auditing your website's HTML for unnecessary markup, the principal way to reduce DOM size is to reduce DOM depth. One signal that your DOM might be unnecessarily deep is if you're seeing markup that looks something like this in the <strong>Elements</strong> tab of your browser's developer tools:</p>
<div><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><br>        <span class="token comment">&lt;!-- Contents --&gt;</span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre>
</div><p>When you see patterns like this, you can probably simplify them by flattening your DOM structure. Doing so will reduce the number of DOM elements, and likely give you an opportunity to simplify page styles.</p>
<p>DOM depth may also be a symptom of the frameworks you use. In particular, component-based frameworks—such as those that rely on <a href="https://reactjs.org/docs/introducing-jsx.html" rel="noopener">JSX</a>—require you to nest multiple components in a parent container.</p>
<p>However, many frameworks allow you to avoid nesting components by using what are known as fragments. Component-based frameworks that offer fragments as a feature include (but are not limited to) the following:</p>
<ul>
<li><a href="https://reactjs.org/docs/fragments.html" rel="noopener">React</a></li>
<li><a href="https://preactjs.com/guide/v10/components/#fragments" rel="noopener">Preact</a></li>
<li><a href="https://v3-migration.vuejs.org/new/fragments.html" rel="noopener">Vue</a></li>
<li><a href="https://svelte.dev/tutorial/svelte-fragment" rel="noopener">Svelte</a></li>
</ul>
<p>By using fragments in your framework of choice, you can reduce DOM depth. If you're concerned about the impact flattening DOM structure has on styling, you might benefit from using more modern (and faster) layout modes such as <a href="https://developer.mozilla.org/docs/Learn/CSS/CSS_layout/Flexbox" rel="noopener">flexbox</a> or <a href="https://developer.mozilla.org/docs/Web/CSS/CSS_Grid_Layout" rel="noopener">grid</a>.</p>
<h2 id="other-strategies-to-consider">Other strategies to consider <a class="headline-link" href="https://web.dev/dom-size-and-interactivity/#other-strategies-to-consider">#</a></h2>
<p>Even if you take pains to flatten your DOM tree and remove unnecessary HTML elements to keep your DOM as small as possible, it can still be quite large and kick off a lot of rendering work as it changes in response to user interactions. If you find yourself in this position, there are some other strategies you can consider to limit rendering work.</p>
<h3 id="consider-an-additive-approach">Consider an additive approach <a class="headline-link" href="https://web.dev/dom-size-and-interactivity/#consider-an-additive-approach">#</a></h3>
<p>You might be in a position where large parts of your page aren't initially visible to the user when it first renders. This could be an opportunity to lazy load HTML by omitting those parts of the DOM on startup, but add them in when the user interacts with the parts of the page that require the initially hidden aspects of the page.</p>
<p>This approach is useful both during the initial load and perhaps even afterwards. For the initial page load, you're taking on less rendering work up front, meaning that your initial HTML payload will be lighter, and will render more quickly. This will give interactions during that crucial period more opportunities to run with less competition for the main thread's attention.</p>
<p>If you have many parts of the page that are initially hidden on load, it could also speed up other interactions that trigger re-rendering work. However, as other interactions add more to the DOM, rendering work will increase as the DOM grows throughout the page lifecycle.</p>
<p>Adding to the DOM over time can be tricky, and it has its own tradeoffs. If you're going this route, you're likely making network requests to get data to populate the HTML you intend to add to the page in response to a user interaction. While in-flight network requests are not counted towards INP, it can increase perceived latency. If possible, show a loading spinner or other indicator that data is being fetched so that users understand that something is happening.</p>
<h3 id="limit-css-selector-complexity">Limit CSS selector complexity <a class="headline-link" href="https://web.dev/dom-size-and-interactivity/#limit-css-selector-complexity">#</a></h3>
<p>When the browser parses selectors in your CSS, it has to traverse the DOM tree to understand how—and if—those selectors apply to the current layout. The more complex these selectors are, the more work the browser has to do in order to perform both the initial rendering of the page, as well as increased style recalculations and layout work if the page changes as the result of an interaction.</p>
<aside class="aside flow bg-state-good-bg color-state-good-text"><p class="cluster "><span class="aside__icon box-block "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24" fill="currentColor" role="img" aria-label="Check">   <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"></path> </svg></span><strong>Objective</strong></p><div class=" flow"> <strong>Read to learn more:</strong>&nbsp;<a href="https://web.dev/reduce-the-scope-and-complexity-of-style-calculations/">Reduce the scope and complexity of style calculations</a>. </div></aside>
<h3 id="use-the-content-visibility-property">Use the <code>content-visibility</code> property <a class="headline-link" href="https://web.dev/dom-size-and-interactivity/#use-the-content-visibility-property">#</a></h3>
<p>CSS offers the <code>content-visibility</code> property, which is effectively a way to lazily render off-screen DOM elements. As the elements approach the viewport, they're rendered on demand. The benefits of <code>content-visibility</code> don't just cut out a significant amount of rendering work on the initial page render, but also skip rendering work for offscreen elements when the page DOM is changed as the result of a user interaction.</p>
<aside class="aside flow bg-state-good-bg color-state-good-text"><p class="cluster "><span class="aside__icon box-block "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24" fill="currentColor" role="img" aria-label="Check">   <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"></path> </svg></span><strong>Objective</strong></p><div class=" flow"> <strong>Read to learn more:</strong>&nbsp;<a href="https://web.dev/content-visibility/"><code>content-visibility</code>: the new CSS property that boosts your rendering performance</a>. </div></aside>
<h2 id="conclusion">Conclusion <a class="headline-link" href="https://web.dev/dom-size-and-interactivity/#conclusion">#</a></h2>
<p>Reducing your DOM size to only what is strictly necessary is a good way to optimize your website's INP. By doing so, you can reduce the amount of time it takes for the browser to perform layout and rendering work when the DOM is updated. Even if you can't meaningfully reduce DOM size, there are some techniques you can use to isolate rendering work to a DOM subtree, such as CSS containment and the <code>content-visibility</code> CSS property.</p>
<p>However you go about it, creating an environment where rendering work is minimized—as well as reducing the amount of rendering work your page does in response to interactions—the result will be that your website will feel more responsive to users when they interact with them. That means you'll have a lower INP for your website, and that translates to a better user experience.</p>
<p><em>Hero image from <a href="https://unsplash.com/" rel="noopener">Unsplash</a>, by <a href="https://unsplash.com/@_louisreed" rel="noopener">Louis Reed</a>.</em></p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[诊断实验室中的缓慢交互]]></title>
            <link>https://web.dev/diagnose-slow-interactions-in-the-lab/</link>
            <guid>https://web.dev/diagnose-slow-interactions-in-the-lab/</guid>
            <content:encoded><![CDATA[<div>
    <h1>GPT总结</h1>
    <summary>本文介绍了优化交互到下一次绘制（Interaction to Next Paint，INP）的挑战性方面。优化INP的困难之一在于确定导致INP不佳的原因。可能的原因有很多：在主线程上安排了许多任务的第三方脚本、大型DOM大小、昂贵的事件回调等等。

要解决INP不佳的问题并不容易。首先，您必须知道哪些交互通常会导致页面的INP。如果您还不知道这一点，请先阅读《在现场找到慢交互》。一旦您获得了现场数据并知道要测试哪些交互，您可以使用实验室工具来找出为什么这些交互很慢。

如果您没有现场数据怎么办？

理想情况下，您会希望有现场数据，因为这样可以节省大量时间来确定哪些交互需要优化。但是，您可能处于没有现场数据的情况下。如果是这种情况，您仍然可以找到需要改进的交互，只是需要采取不同的方法。

总阻塞时间（Total Blocking Time，TBT）是一种评估页面加载期间响应性的指标。它与INP非常相关，并且可以让您了解在页面加载期间可能存在的慢交互。

您可以使用L</summary>
    <div>
    <div>OriginTitle: Diagnose slow interactions in the lab</div>

    </div></div><p>优化的一个具有挑战性的方面<a href="https://web.dev/inp/">与下一个油漆的相互作用 (INP)</a>正在找出导致 INP 不佳的原因。 有多种潜在原因：在主线程上安排许多任务的第三方脚本、大型任务<a href="https://developer.mozilla.org/docs/Web/API/Document_Object_Model" rel="noopener">DOM</a>大小、昂贵的事件回调等等。</p>
<p>寻找解决 INP 问题的方法可能很困难。 首先，您必须知道哪些交互往往会导致页面的 INP。 如果您还不知道，请先阅读<a href="https://web.dev/find-slow-interactions-in-the-field/">寻找现场缓慢的互动</a>。 一旦您掌握了现场数据并知道要测试哪些交互，您就可以在实验室工具中进行测试，以找出这些交互缓慢的原因。</p>
<h2 id="what-if-you-dont-have-field-data">如果没有现场数据怎么办？<a class="headline-link" href="https://web.dev/diagnose-slow-interactions-in-the-lab/#what-if-you-dont-have-field-data">#</a></h2>
<p>理想情况下，您需要现场数据，因为它可以为您节省大量时间来尝试找出需要优化的交互。 不过，您可能没有现场数据。 如果这就是您的情况，您仍然可以找到改进的交互方式：您只需采取不同的方法即可。</p>
<p><a href="https://web.dev/tbt/">总阻塞时间 (TBT)</a>是评估加载期间页面响应能力的指标。<a href="https://almanac.httparchive.org/en/2022/performance#inp-and-tbt" rel="noopener">与INP有很好的相关性</a>，并且可以让您了解在页面加载时是否可以分析交互。</p>
<p>您可以使用<a href="https://developer.chrome.com/docs/lighthouse/overview/" rel="noopener">灯塔</a>或者<a href="https://pagespeed.web.dev/" rel="noopener">PageSpeed 见解</a>衡量您网页的 TBT。 如果您的 TBT 很差或需要改进，则很有可能在页面加载期间存在交互速度缓慢的情况。</p>
<p>要在页面加载后查找缓慢的交互，您可能需要依赖其他类型的数据，例如网站分析中可能已有的常见用户流。 例如，如果您在电子商务网站上工作，常见的用户流程就是用户在将商品添加到在线购物车或进行在线结账时所采取的操作。</p>
<p>无论您是否拥有现场数据，下一步都涉及重现该交互，因为只有当您能够最终确定缓慢的交互时，您才能修复它。</p>
<h2 id="reproducing-slow-interactions-in-the-lab">再现实验室中的缓慢交互<a class="headline-link" href="https://web.dev/diagnose-slow-interactions-in-the-lab/#reproducing-slow-interactions-in-the-lab">#</a></h2>
<p>一旦确定了缓慢的交互，下一步就是在实验室中对其进行测试，看看它是否确实很慢。</p>
<h3 id="dont-reach-for-the-performance-profiler-right-away">不要立即使用性能分析器<a class="headline-link" href="https://web.dev/diagnose-slow-interactions-in-the-lab/#dont-reach-for-the-performance-profiler-right-away">#</a></h3>
<p>Chrome 性能分析器虽然非常宝贵，但在与页面交互时不提供实时视图。 首先以更快的方式测试交互延迟会更有效，因此您可以快速评估给定的交互是否确实缓慢，然后在需要更多信息时使用性能分析器。</p>
<h4 id="use-the-web-vitals-chrome-extension">使用 Web Vitals Chrome 扩展程序<a class="headline-link" href="https://web.dev/diagnose-slow-interactions-in-the-lab/#use-the-web-vitals-chrome-extension">#</a></h4>
<p>这<a href="https://chrome.google.com/webstore/detail/web-vitals/ahfhijdlegdabablpippeagghigmibma?hl=en" rel="noopener">Web Vitals Chrome 扩展程序</a>测试交互延迟所需的工作量最少。 安装后，如果您执行以下操作，扩展将在控制台中显示交互数据：</p>
<ol>
<li>在 Chrome 中，单击地址栏右侧的扩展程序图标。</li>
<li>在下拉菜单中找到 Web Vitals 扩展。</li>
<li>单击右侧的图标打开扩展程序的设置。</li>
<li>点击<strong>选项</strong>。</li>
<li>启用<strong>控制台日志记录</strong>出现的屏幕中的复选框，然后单击<strong>节省</strong>。</li>
</ol>
<p>完成此操作后，在 Chrome DevTools 中打开控制台，并开始在您的网站上测试所需的交互。 当您与页面交互时，您将收到有用的控制台日志，为您提供交互的详细诊断信息。</p>
<figure>
  <img alt="A screenshot of the console logging that the Web Vitals extension provides for interactions. The logging contains details such timings and other contextual information." decoding="async" height="264" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
     打开控制台日志记录时，来自 Web Vitals 扩展的控制台条目。 每个符合条件的交互都会将交互数据记录到控制台。 
  </figcaption>
</figure>
<h4 id="use-a-javascript-snippet">使用 JavaScript 片段<a class="headline-link" href="https://web.dev/diagnose-slow-interactions-in-the-lab/#use-a-javascript-snippet">#</a></h4>
<p>由于多种原因，使用 Web Vitals 扩展可能不是一个可行的选择。 在某些情况下，扩展程序可能会被阻止，并且它们也无法安装在移动设备上。 如果你想在物理 Android 设备上进行测试，后者是有问题的<a href="https://developer.chrome.com/docs/devtools/remote-debugging/" rel="noopener">远程调试</a>。</p>
<p>另一种方法是将一些 JavaScript 复制并粘贴到 Chrome DevTools 的控制台中。 以下代码为每次交互生成与 Web Vitals 扩展相同的控制台输出：</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">让</span>最坏的Inp<span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br><br><span class="token keyword">常量</span>观察者<span class="token operator">=</span> <span class="token keyword">新的</span> <span class="token class-name">绩效观察者</span><span class="token punctuation">（</span><span class="token punctuation">（</span><span class="token parameter">列表<span class="token punctuation">,</span>观测值<span class="token punctuation">,</span>选项</span><span class="token punctuation">）</span> <span class="token operator">=&amp;gt;</span> <span class="token punctuation">{</span><br>  <span class="token keyword">为了</span> <span class="token punctuation">（</span><span class="token keyword">让</span>入口<span class="token keyword">的</span>列表<span class="token punctuation">。</span><span class="token function">获取条目</span><span class="token punctuation">（</span><span class="token punctuation">）</span><span class="token punctuation">）</span> <span class="token punctuation">{</span><br>    <span class="token keyword">如果</span> <span class="token punctuation">（</span><span class="token operator">！</span>入口<span class="token punctuation">。</span>交互ID<span class="token punctuation">）</span> <span class="token keyword">继续</span><span class="token punctuation">;</span><br><br>入口<span class="token punctuation">。</span>渲染时间<span class="token operator">=</span>入口<span class="token punctuation">。</span>开始时间<span class="token operator">+</span>入口<span class="token punctuation">。</span>期间<span class="token punctuation">;</span><br>最坏的Inp<span class="token operator">=</span>数学<span class="token punctuation">。</span><span class="token function">最大限度</span><span class="token punctuation">（</span>入口<span class="token punctuation">。</span>期间<span class="token punctuation">,</span>最坏的Inp<span class="token punctuation">）</span><span class="token punctuation">;</span><br>      <br>安慰<span class="token punctuation">。</span><span class="token function">日志</span><span class="token punctuation">（</span><span class="token string">'[相互作用]'</span><span class="token punctuation">,</span>入口<span class="token punctuation">。</span>期间<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">类型：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>入口<span class="token punctuation">。</span>姓名<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">互动次数：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>表现<span class="token punctuation">。</span>互动次数<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, 最差Inp:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>最坏的Inp<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>入口<span class="token punctuation">,</span>选项<span class="token punctuation">）</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">）</span><span class="token punctuation">;</span><br><br>观察者<span class="token punctuation">。</span><span class="token function">观察</span><span class="token punctuation">（</span><span class="token punctuation">{</span><br>  <span class="token literal-property property">类型</span><span class="token operator">:</span> <span class="token string">'事件'</span><span class="token punctuation">,</span><br>  <span class="token literal-property property">持续时间阈值</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 按规格最少 16 个</span><br>  <span class="token literal-property property">缓冲的</span><span class="token operator">:</span> <span class="token boolean">真的</span><br><span class="token punctuation">}</span><span class="token punctuation">）</span><span class="token punctuation">;</span></code></pre>
</div><aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow">使用上述代码的更方便的方法是使用<a href="https://developer.chrome.com/docs/devtools/javascript/snippets/">Chrome DevTools 中的代码片段功能</a>。</div></aside>
<p>一旦确定交互确实很慢，您就可以分析交互以获得更详细的信息<em>为什么</em>这种互动很慢。</p>
<h4 id="what-if-you-cant-reproduce-a-slow-interaction">如果无法重现缓慢的交互怎么办？<a class="headline-link" href="https://web.dev/diagnose-slow-interactions-in-the-lab/#what-if-you-cant-reproduce-a-slow-interaction">#</a></h4>
<p>如果您设法在现场数据中找到一些表明特定交互速度较慢的内容，但无法在实验室中重现它，该怎么办？</p>
<p>首先，这是解决任何类型的性能问题时的常见挑战。 您在测试时的观点完全是相对的，并且取决于您所使用的硬件。 毕竟，您可能使用的是具有快速互联网连接的快速设备，但这并不意味着您的用户也是如此。 对于这种情况，您可以执行以下三项操作之一：</p>
<ol>
<li>如果您有物理 Android 设备，请使用<a href="https://developer.chrome.com/docs/devtools/remote-debugging/" rel="noopener">远程调试</a>在主机上打开 Chrome DevTools 实例并尝试在那里重现缓慢的交互。</li>
<li>如果您没有物理设备，<a href="https://umaar.com/dev-tips/88-cpu-throttling/" rel="noopener">在 Chrome DevTools 中启用 CPU 限制功能</a>。</li>
<li>请同时执行步骤 1 和 2，因为您还可以在物理 Android 设备的 DevTools 实例上启用 CPU 限制。</li>
</ol>
<p>另一个原因可能是您在与页面交互之前正在等待页面加载，但您的用户却没有。 如果您的网络速度很快，请启用<a href="https://developer.chrome.com/docs/devtools/settings/throttling/" rel="noopener">网络节流</a>并在页面绘制后立即与其进行交互。 您应该这样做，因为主线程在启动期间通常最繁忙，此时进行测试可能有助于揭示用户的实际体验。</p>
<h3 id="record-a-trace">记录踪迹<a class="headline-link" href="https://web.dev/diagnose-slow-interactions-in-the-lab/#record-a-trace">#</a></h3>
<p>要获取有关交互缓慢原因的更多信息，您需要通过以下方式将事情提升到一个新的水平：<a href="https://developer.chrome.com/docs/devtools/performance/" rel="noopener">使用 Chrome DevTools 中的性能分析器</a>。 要在 Chrome 的性能分析器中分析交互，请执行以下操作：</p>
<ol>
<li>加载需要配置文件并准备好进行交互的页面后，打开 Chrome DevTools 并转到<strong>表现</strong>控制板。</li>
<li>点击<strong>记录</strong>面板左上角的按钮开始追踪。</li>
<li>执行所需的交互。</li>
<li>点击<strong>记录</strong>再次按钮停止追踪。</li>
</ol>
<p>填充配置文件时，首先查看的位置应该是分析器顶部的活动摘要。 活动摘要将在记录中发生长任务的顶部显示红色条。 这使您可以快速放大问题区域。</p>
<figure>
  <img alt="A screenshot of the activity summary in the performance panel of Chrome DevTools. The activity displayed is mostly from JavaScript that causes a long task, which is highlighted in red above the flame chart." decoding="async" height="126" loading="lazy" sizes="(min-width: 674px) 674px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&amp;w=1348 1348w" width="674">
  <figcaption>
     Chrome 性能分析器顶部的活动摘要。 长任务在活动火焰图上方以红色突出显示。 在这种情况下，重要的脚本编写工作负责了长任务中的大部分工作。 
  </figcaption>
</figure>
<p>您可以通过拖动并选择活动摘要中的区域来快速关注问题区域。 一旦您关注交互发生的位置，<strong>互动</strong>track 将帮助您将交互和在其下方的主线程轨道中发生的活动排列起来：</p>
<figure>
  <img alt="A screenshot of an interaction as visualized in the performance panel of Chrome DevTools. An interactions track above the main thread track shows the duration of an interaction, which can be lined up with main thread activity." decoding="async" height="325" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
     Chrome 开发工具的性能分析器中分析的交互。 这<strong>互动</strong>track 显示了一系列相当于点击交互的事件。 交互跟踪条目跨越负责驱动交互的任务。 
  </figcaption>
</figure>
<p>从这里开始，需要观察交互可能存在的问题。 有很多因素会导致高交互延迟，所以让我们来看看一些可能的罪魁祸首是什么。</p>
<h3 id="use-lighthouse-timespans-as-an-alternative-to-tracing">使用 Lighthouse 时间跨度作为追踪的替代方案<a class="headline-link" href="https://web.dev/diagnose-slow-interactions-in-the-lab/#use-lighthouse-timespans-as-an-alternative-to-tracing">#</a></h3>
<p>Chrome 的性能分析器虽然包含丰富的诊断信息，但对于新手来说可能有点令人生畏。 性能分析器的一种替代方法是 Lighthouse 的时间跨度模式。 要使用此模式，请执行以下操作：</p>
<ol>
<li>打开 DevTools 后，转到<strong>灯塔</strong>DevTools 中的选项卡。</li>
<li>在标记的部分下<strong>模式</strong>，选择<strong>时间跨度</strong>选项。</li>
<li>在标记的部分下选择所需的设备类型<strong>设备</strong>。</li>
<li>确保至少标记为复选框<strong>表现</strong>被选择在<strong>类别</strong>标签。</li>
<li>点击<strong>开始时间跨度</strong>按钮。</li>
<li>测试页面上所需的交互。</li>
<li>点击<strong>结束时间跨度</strong>按钮并等待审核出现</li>
<li>一旦审核填充到 Lighthouse 选项卡中，您可以通过单击<strong>内啡肽</strong>标签旁边的链接写着<strong>显示相关审核</strong>。</li>
</ol>
<p>此时，您将看到已失败或通过的审核的下拉列表。 当您展开该下拉列表时，您可能会看到交互过程中所花费时间的细分。</p>
<figure>
  <img alt="A screenshot of a Lighthouse audit provided by its timespan mode. The audit is specific to INP, and shows details for an interaction, including a screenshot of the element that triggered it, and a table beneath detailing where time was spent processing the interaction." decoding="async" height="662" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
     以 Lighthouse 的时间跨度模式描述的交互。 当与页面进行交互时，Lighthouse 会提供详细的审计，详细说明交互期间的时间花费情况，并按输入延迟、处理延迟和呈现延迟进行细分。 
  </figcaption>
</figure>
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow">如果您想进一步调查交互缓慢的原因，可以通过单击<strong>查看轨迹</strong>幻灯片上方的按钮。 这将带您进入性能分析器，其中显示您在时间跨度模式下测试的交互的交互详细信息。</div></aside>
<h2 id="how-to-identify-long-input-delays">如何识别长输入延迟<a class="headline-link" href="https://web.dev/diagnose-slow-interactions-in-the-lab/#how-to-identify-long-input-delays">#</a></h2>
<p>可能导致高交互延迟的一件事是输入延迟。 这<em>输入延迟</em>是交互的第一阶段。 这是从操作系统首次接收到用户操作到浏览器能够开始处理由该输入触发的第一个事件的时间段。 当交互的事件回调开始运行时，输入延迟立即结束。</p>
<p>通过在交互面板中查找交互的开始，然后查找该交互的事件回调开始运行的时间，可以识别 Chrome 性能分析器中的输入延迟。</p>
<p>您总是会至少产生一些输入延迟，因为操作系统需要一些时间才能将输入事件传递到浏览器，但您确实可以控制输入延迟的时间。<strong>关键是要弄清楚主线程上是否正在运行阻止回调运行的工作。</strong></p>
<figure>
  <img alt="A depiction of input delay in Chrome's performance panel. The start of the interaction comes significantly before the event callbacks because of increased input delay due to a timer firing from a third-party script." decoding="async" height="291" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
    由第三方脚本的计时器触发的任务导致的输入延迟。
  </figcaption>
</figure>
<p>在上图中，当用户尝试与页面交互时，来自第三方脚本的任务正在运行，因此延长了输入延迟。 延长的输入延迟会影响交互的延迟，因此可能会影响页面的 INP。</p>
<p>有关如何解决长时间输入延迟的更多信息，请阅读如何解决<a href="https://web.dev/optimize-input-delay/">识别并减少输入延迟</a>。</p>
<h2 id="how-to-identify-expensive-event-callbacks">如何识别昂贵的事件回调<a class="headline-link" href="https://web.dev/diagnose-slow-interactions-in-the-lab/#how-to-identify-expensive-event-callbacks">#</a></h2>
<p>事件回调在输入延迟后立即发生。 如果事件回调运行时间过长，则会延迟浏览器呈现下一帧，并可能显着增加交互的总延迟。 事件回调通常会运行太长时间，无论它们是作为第一方还是第三方 JavaScript 的结果运行，在某些情况下，两者都是如此。</p>
<figure>
  <img alt="A depiction of event callback tasks in Chrome's performance panel. The event callbacks occur for the pointerdown and click events, which occur in a long task." decoding="async" height="291" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
     响应点击交互而运行的事件回调，如 Chrome DevTools 中的性能分析器中所示。 注意右上角的红色三角形<strong>事件：指针向下</strong>和<strong>事件：点击</strong>条目，它标识昂贵的事件回调。
  </figcaption>
</figure>
<p>可以通过观察特定交互的跟踪中的以下内容来查找昂贵的事件回调：</p>
<ol>
<li>确定与事件回调关联的任务是否是<a href="https://web.dev/long-tasks-devtools/#what-are-long-tasks">长期任务</a>。 为了更可靠地揭示实验室环境中的长任务，您可能需要<a href="https://developer.chrome.com/blog/new-in-devtools-61/#throttling" rel="noopener">启用CPU节流</a>在性能面板中，或连接中低端 Android 设备并使用<a href="https://developer.chrome.com/docs/devtools/remote-debugging/" rel="noopener">远程调试</a>。</li>
<li>如果运行事件回调的任务是一个长任务，请查找事件处理程序条目（名称如<strong>事件：点击</strong>，例如）在调用堆栈中，条目的右上角有一个红色三角形。 这些是昂贵的事件回调。</li>
</ol>
<p>要解决昂贵的事件回调问题，请尝试以下策略之一：</p>
<ol>
<li><strong>尽可能少做工作。</strong>昂贵的事件回调中发生的所有事情都是严格必要的吗？ 如果没有，请考虑完全删除该代码（如果可以的话），或者如果不能的话，将其执行推迟到稍后的时间点。 您还可以利用框架功能来提供帮助。 例如，React 的<a href="https://beta.reactjs.org/reference/react/PureComponent" rel="noopener"><code>纯组件</code>班级</a>和<a href="https://react.dev/reference/react/memo" rel="noopener">记忆功能</a>当组件的 props 和 state 没有改变时，可以跳过不必要的渲染工作。</li>
<li><strong>将事件回调中的非渲染工作推迟到稍后的时间点。</strong>长任务可以通过以下方式分解<a href="https://web.dev/optimize-long-tasks/#use-asyncawait-to-create-yield-points">屈服于主线​​程</a>。 每当您屈服于主线​​程时，您都会结束当前任务的执行，并将剩余的工作分解为一个单独的任务。 这使渲染器有机会处理先前在事件回调中处理的用户界面的更新。 如果你碰巧在 React 中进行开发，那么<a href="https://react.dev/reference/react/useTransition" rel="noopener">过渡功能</a>将为您做这件事。</li>
</ol>
<p>通过采用这些策略，您应该能够将事件回调放在可以更快地响应用户输入的位置。</p>
<h2 id="how-to-identify-presentation-delays">如何识别演示延迟<a class="headline-link" href="https://web.dev/diagnose-slow-interactions-in-the-lab/#how-to-identify-presentation-delays">#</a></h2>
<p>长输入延迟和昂贵的事件回调并不是 INP 不佳的唯一可能原因。 有时，即使是响应少量事件回调代码而发生的渲染更新也可能代价高昂。 浏览器向用户界面呈现视觉更新以反映交互结果所需的时间称为<em>呈现延迟</em>。</p>
<aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>重要的</strong></p><div class=" flow">这<a href="https://web.dev/rendering-performance/">渲染性能指南</a>是了解浏览器如何呈现页面的一个很好的入门读物。<a href="https://www.youtube.com/watch?v=K2QHdgAKP-s">像素的寿命</a>进一步深入了解基于 Chromium 的浏览器中渲染的工作原理。</div></aside>
<figure>
  <img alt="Rendering work as visualized in the performance panel of Chrome DevTools. The rendering work occurs after the event callback in order to paint the next frame." decoding="async" height="229" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
     Chrome 性能分析器中显示的渲染任务。 渲染工作以紫色显示，油漆工作以绿色显示。 
  </figcaption>
</figure>
<aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>重要的</strong></p><div class=" flow">当分析由于昂贵的渲染工作而导致交互缓慢时，您应该启用<strong>截图</strong>性能分析器顶部的复选框。 这将帮助您将用户界面更新与主线程上相应的渲染工作对齐。</div></aside>
<p>在导致高交互延迟的所有可能原因中，渲染工作可能是最难排除故障和修复的，但结果是值得付出努力的。 过多的渲染工作可能是由以下任一原因引起的：</p>
<ul>
<li><strong>大 DOM 尺寸。</strong>渲染工作通常随着页面 DOM 的大小而增加。 欲了解更多信息，请阅读<a href="https://web.dev/dom-size-and-interactivity/">DOM 大小对交互性的影响有多大——以及您可以采取哪些措施</a>。</li>
<li><strong>强制回流焊。</strong>当您将样式更改应用于 JavaScript 中的元素时，就会发生这种情况，并且<em>然后</em>查询该工作的结果。 结果是浏览器必须在执行其他操作之前执行布局工作，以便浏览器可以返回更新后的样式。 有关避免强制回流的更多信息和提示，请阅读<a href="https://web.dev/avoid-large-complex-layouts-and-layout-thrashing/">避免大型、复杂的布局和布局颠簸</a>。</li>
<li><strong>过多或不必要的工作<a href="https://developer.mozilla.org/docs/Web/API/window/requestAnimationFrame" rel="noopener"><code>请求动画帧</code></a>回调。</strong> <code>请求动画帧()</code>回调在事件循环的渲染阶段运行，并且必须在呈现下一帧之前完成。 如果您正在使用<code>请求动画帧()</code>要完成不涉及更改用户界面的工作，请了解您可能会延迟下一帧。</li>
<li><strong><a href="https://developer.mozilla.org/docs/Web/API/ResizeObserver" rel="noopener"><code>调整大小观察者</code></a>回调。</strong>此类回调在渲染之前运行，如果其中的工作成本很高，则可能会延迟下一帧的呈现。 与事件回调一样，推迟下一帧不需要的任何逻辑。</li>
</ul>
<aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>重要的</strong></p><div class=" flow">通过启用<strong>时间轴：事件发起者</strong>在 Chrome DevTools 中进行实验。 启用此实验将绘制一个从任何样式重新计算任务到启动它的 JavaScript 任务的箭头。 要启用此实验，请进入 Chrome DevTools 设置，单击<strong>实验</strong>在左侧菜单中，单击标记为的复选框<strong>时间轴：事件发起者</strong>，然后重新启动 DevTools。</div></aside>
<h2 id="troubleshooting-inp-is-an-iterative-process">INP 故障排除是一个迭代过程<a class="headline-link" href="https://web.dev/diagnose-slow-interactions-in-the-lab/#troubleshooting-inp-is-an-iterative-process">#</a></h2>
<p>找出导致 INP 较差的高交互延迟的原因需要做大量工作，但如果您能查明原因，那么您就成功了一半。 通过遵循有条不紊的方法对不良 INP 进行故障排除，您可以可靠地查明导致问题的原因，并更快地找到正确的解决方案。 回顾：</p>
<ul>
<li><a href="https://web.dev/find-slow-interactions-in-the-field/">依靠现场数据来查找缓慢的交互</a>。</li>
<li>在实验室中测试有问题的现场交互，看看它们是否可重现。</li>
<li>确定原因是否是由于较长的输入延迟、昂贵的事件回调或昂贵的渲染工作造成的。</li>
<li>重复。</li>
</ul>
<p>其中最后一个是最重要的。 与提高页面性能必须做的大多数其他工作一样，故障排除和改进 INP 是一个循环过程。 当你修复一个缓慢的交互时，你需要转向下一个，并继续这样做，直到你开始看到结果。 保持警惕！</p>
<p><em>英雄形象来自<a href="https://unsplash.com/" rel="noopener">未飞溅</a>， 经过<a href="https://unsplash.com/@_louisreed" rel="noopener">路易斯·里德</a>。</em></p>
<hr><p>One challenging aspect of optimizing <a href="https://web.dev/inp/">Interaction to Next Paint (INP)</a> is figuring out what's causing poor INP. There's a large variety of potential causes: third-party scripts that schedule many tasks on the main thread, large <a href="https://developer.mozilla.org/docs/Web/API/Document_Object_Model" rel="noopener">DOM</a> sizes, expensive event callbacks, and so on.</p>
<p>Finding ways to fix poor INP can be difficult. To start, you have to know which interactions tend to be responsible for a page's INP. If you don't know this already, start by reading <a href="https://web.dev/find-slow-interactions-in-the-field/">Find slow interactions in the field</a>. Once you have that field data and know what interactions to test, you can do so in lab tools to work out why those interactions are slow.</p>
<h2 id="what-if-you-dont-have-field-data">What if you don't have field data? <a class="headline-link" href="https://web.dev/diagnose-slow-interactions-in-the-lab/#what-if-you-dont-have-field-data">#</a></h2>
<p>Ideally, you'll want field data, as it saves you a lot of time trying to figure out which interactions need to be optimized. You might be in a position where you don't have field data, though. If that's your situation, you can still find interactions to improve: you'll just have to take a different approach.</p>
<p><a href="https://web.dev/tbt/">Total Blocking Time (TBT)</a> is a metric that assesses page responsiveness during load. <a href="https://almanac.httparchive.org/en/2022/performance#inp-and-tbt" rel="noopener">It correlates very well with INP</a>, and can give you an idea if there might be interactions you can profile while the page is loading.</p>
<p>You can use either <a href="https://developer.chrome.com/docs/lighthouse/overview/" rel="noopener">Lighthouse</a> or <a href="https://pagespeed.web.dev/" rel="noopener">PageSpeed Insights</a> to measure your page's TBT. If your TBT is either poor or needs improvement, there's a good chance there are interactions that might be slow during page load.</p>
<p>To find slow interactions after the page has loaded, you might need to rely on other types of data, such as common user flows that you may already have in your website's analytics. If you work on an ecommerce website, for example, a common user flow would be the actions users take when they're adding items to an online shopping cart or going through an online checkout.</p>
<p>Whether or not you have field data, the next step involves reproducing that interaction—because it's only when you're able to conclusively identify a slow interaction that you'll be able to fix it.</p>
<h2 id="reproducing-slow-interactions-in-the-lab">Reproducing slow interactions in the lab <a class="headline-link" href="https://web.dev/diagnose-slow-interactions-in-the-lab/#reproducing-slow-interactions-in-the-lab">#</a></h2>
<p>Once you've identified a slow interaction, the next step is to test it in the lab to see if it's reliably slow.</p>
<h3 id="dont-reach-for-the-performance-profiler-right-away">Don't reach for the performance profiler right away <a class="headline-link" href="https://web.dev/diagnose-slow-interactions-in-the-lab/#dont-reach-for-the-performance-profiler-right-away">#</a></h3>
<p>Chrome performance profiler—while invaluable—doesn't provide a live view while interacting with the page. It's more efficient to test interaction latency in a much faster way first, so you can quickly assess whether a given interaction is reliably slow, and then reach for the performance profiler when you need more information.</p>
<h4 id="use-the-web-vitals-chrome-extension">Use the Web Vitals Chrome Extension <a class="headline-link" href="https://web.dev/diagnose-slow-interactions-in-the-lab/#use-the-web-vitals-chrome-extension">#</a></h4>
<p>The <a href="https://chrome.google.com/webstore/detail/web-vitals/ahfhijdlegdabablpippeagghigmibma?hl=en" rel="noopener">Web Vitals Chrome Extension</a> involves the lowest amount of effort in testing interaction latency. Once installed, the extension will display interaction data in the console if you do the following:</p>
<ol>
<li>In Chrome, click the extensions icon to the right of the address bar.</li>
<li>Locate the Web Vitals extension in the drop-down menu.</li>
<li>Click the icon at the right to open the extension's settings.</li>
<li>Click <strong>Options</strong>.</li>
<li>Enable the <strong>Console logging</strong> checkbox in the resulting screen, and then click <strong>Save</strong>.</li>
</ol>
<p>Once this has been done, open the console in Chrome DevTools, and begin testing the desired interactions on your website. As you interact with the page, you'll receive useful console logs giving you detailed diagnostic information for the interaction.</p>
<figure>
  <img alt="A screenshot of the console logging that the Web Vitals extension provides for interactions. The logging contains details such timings and other contextual information." decoding="async" height="264" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
    A console entry from the Web Vitals extension when console logging is turned on. Each qualifying interaction will log interaction data to the console.
  </figcaption>
</figure>
<h4 id="use-a-javascript-snippet">Use a JavaScript snippet <a class="headline-link" href="https://web.dev/diagnose-slow-interactions-in-the-lab/#use-a-javascript-snippet">#</a></h4>
<p>Using the Web Vitals extension may not be a viable option for a number of reasons. Extensions can be blocked in some cases, and they also can't be installed on mobile devices. The latter is problematic if you want to test on a physical Android device with <a href="https://developer.chrome.com/docs/devtools/remote-debugging/" rel="noopener">remote debugging</a>.</p>
<p>An alternate method involves copying and pasting some JavaScript into the console of Chrome DevTools. The following code yields the same console output as the Web Vitals extension for every interaction:</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">let</span> worstInp <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PerformanceObserver</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">list<span class="token punctuation">,</span> obs<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><br>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> entry <span class="token keyword">of</span> list<span class="token punctuation">.</span><span class="token function">getEntries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>entry<span class="token punctuation">.</span>interactionId<span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span><br><br>    entry<span class="token punctuation">.</span>renderTime <span class="token operator">=</span> entry<span class="token punctuation">.</span>startTime <span class="token operator">+</span> entry<span class="token punctuation">.</span>duration<span class="token punctuation">;</span><br>    worstInp <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span>duration<span class="token punctuation">,</span> worstInp<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'[Interaction]'</span><span class="token punctuation">,</span> entry<span class="token punctuation">.</span>duration<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">type: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>entry<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> interactionCount: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>performance<span class="token punctuation">.</span>interactionCount<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, worstInp: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>worstInp<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> entry<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'event'</span><span class="token punctuation">,</span><br>  <span class="token literal-property property">durationThreshold</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 16 minimum by spec</span><br>  <span class="token literal-property property">buffered</span><span class="token operator">:</span> <span class="token boolean">true</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div><aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> A more convenient way of using the preceding code is to use the <a href="https://developer.chrome.com/docs/devtools/javascript/snippets/">snippets feature in Chrome DevTools</a>. </div></aside>
<p>Once you have determined that the interaction is reliably slow, you can then profile the interaction to get more detailed information on <em>why</em> that interaction is slow.</p>
<h4 id="what-if-you-cant-reproduce-a-slow-interaction">What if you can't reproduce a slow interaction? <a class="headline-link" href="https://web.dev/diagnose-slow-interactions-in-the-lab/#what-if-you-cant-reproduce-a-slow-interaction">#</a></h4>
<p>What if you've managed to find something in your field data that suggests a particular interaction is slow, but you can't reproduce it in the lab?</p>
<p>For one, this is a common challenge in troubleshooting performance issues of any kind. Your point of view when testing is entirely relative and dependent on the hardware you're using. After all, you may be on a fast device with a fast internet connection—but that doesn't mean your users are too. For this situation you can do one of three things:</p>
<ol>
<li>If you have a physical Android device, use <a href="https://developer.chrome.com/docs/devtools/remote-debugging/" rel="noopener">remote debugging</a> to open a Chrome DevTools instance on your host machine and try to reproduce slow interactions there.</li>
<li>If you don't have a physical device, <a href="https://umaar.com/dev-tips/88-cpu-throttling/" rel="noopener">enable the CPU throttling feature in Chrome DevTools</a>.</li>
<li>Follow both steps 1 and 2, as you can also enable CPU throttling on the DevTools instance for a physical Android device.</li>
</ol>
<p>Another cause could be that you're waiting for a page to load before you interact with it, but your users are not. If you're on a fast network, enable <a href="https://developer.chrome.com/docs/devtools/settings/throttling/" rel="noopener">network throttling</a> and interact with the page as soon as it paints. You should do this because the main thread is often busiest during startup, and testing at that time might help reveal what your users are actually experiencing.</p>
<h3 id="record-a-trace">Record a trace <a class="headline-link" href="https://web.dev/diagnose-slow-interactions-in-the-lab/#record-a-trace">#</a></h3>
<p>To get more information on why an interaction is slow, you'll need to take things to the next level by <a href="https://developer.chrome.com/docs/devtools/performance/" rel="noopener">using the performance profiler in Chrome DevTools</a>. To profile an interaction in Chrome's performance profiler, do the following:</p>
<ol>
<li>With the page you need to profile loaded and ready for interactions, open Chrome DevTools and go to the <strong>Performance</strong> panel.</li>
<li>Click the <strong>Record</strong> button at the upper left of the panel to start tracing.</li>
<li>Perform the desired interaction.</li>
<li>Click the <strong>Record</strong> button again to stop tracing.</li>
</ol>
<p>When the profile populates, the first place to look should be the activity summary at the top of the profiler. The activity summary will show red bars at the top where long tasks occurred in the recording. This allows you to quickly zoom in on problem areas.</p>
<figure>
  <img alt="A screenshot of the activity summary in the performance panel of Chrome DevTools. The activity displayed is mostly from JavaScript that causes a long task, which is highlighted in red above the flame chart." decoding="async" height="126" loading="lazy" sizes="(min-width: 674px) 674px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&amp;w=1348 1348w" width="674">
  <figcaption>
    The activity summary at the top of Chrome's performance profiler. Long tasks are highlighted in red above the activity flame chart. In this case, significant scripting work was responsible for most of the work in the long task.
  </figcaption>
</figure>
<p>You can quickly focus on the problem area by dragging and selecting a region in the activity summary. Once you've focused to where the interaction occurred, the <strong>Interactions</strong> track will help you line up the interaction and the activity that occurred in the main thread track below it:</p>
<figure>
  <img alt="A screenshot of an interaction as visualized in the performance panel of Chrome DevTools. An interactions track above the main thread track shows the duration of an interaction, which can be lined up with main thread activity." decoding="async" height="325" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
    An interaction profiled in the performance profiler in Chrome's DevTools. The <strong>Interactions</strong> track shows a series of events that amount to a click interaction. The Interactions track entries span across the tasks responsible for driving the interaction.
  </figcaption>
</figure>
<p>From here, it's a matter of observing what the problem with the interaction might be. There are many things that can contribute to high interaction latency, so let's go through what some of the culprits could be.</p>
<h3 id="use-lighthouse-timespans-as-an-alternative-to-tracing">Use Lighthouse timespans as an alternative to tracing <a class="headline-link" href="https://web.dev/diagnose-slow-interactions-in-the-lab/#use-lighthouse-timespans-as-an-alternative-to-tracing">#</a></h3>
<p>Chrome's performance profiler—while rich with diagnostic information—can be a bit intimidating to the uninitiated. One alternative to the performance profiler is Lighthouse's timespan mode. To use this mode, do the following:</p>
<ol>
<li>With DevTools open, go to the <strong>Lighthouse</strong> tab in DevTools.</li>
<li>Under the section labeled <strong>Mode</strong>, select the <strong>Timespan</strong> option.</li>
<li>Select the desired device type under the section labeled <strong>Device</strong>.</li>
<li>Ensure at least the checkbox labeled <strong>Performance</strong> is selected under the <strong>Categories</strong> label.</li>
<li>Click the <strong>Start timespan</strong> button.</li>
<li>Test the desired interaction(s) on the page.</li>
<li>Click the <strong>End timespan</strong> button and wait for the audit to appear</li>
<li>Once the audit populates in the Lighthouse tab, you can filter the audits by INP by clicking the <strong>INP</strong> link next to the label which reads <strong>Show audits relevant to</strong>.</li>
</ol>
<p>At this point, you'll see a drop-down list for audits that have failed or passed. When you expand that drop-down, you'll probably see a breakdown of time spent during the interaction.</p>
<figure>
  <img alt="A screenshot of a Lighthouse audit provided by its timespan mode. The audit is specific to INP, and shows details for an interaction, including a screenshot of the element that triggered it, and a table beneath detailing where time was spent processing the interaction." decoding="async" height="662" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
    An interaction profiled in Lighthouse's timespan mode. When interactions are made with the page, Lighthouse provides an audit detailing where the time during an interaction was spent, and breaks it down by input delay, processing delay, and presentation delay.
  </figcaption>
</figure>
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> If you want to further investigate the cause behind a slow interaction, you can do so by clicking the <strong>View Trace</strong> button just above the filmstrip. This will take you to the performance profiler that shows interactions details for the interactions that you tested in the timespan mode. </div></aside>
<h2 id="how-to-identify-long-input-delays">How to identify long input delays <a class="headline-link" href="https://web.dev/diagnose-slow-interactions-in-the-lab/#how-to-identify-long-input-delays">#</a></h2>
<p>One thing that could be contributing to high interaction latency is input delay. The <em>input delay</em> is the first phase of an interaction. This is the period of time from when the user action is first received by the operating system until the browser is able to start processing the first event triggered by that input. The input delay ends right as the event callbacks for the interaction begin to run.</p>
<p>Identifying input delay in Chrome's performance profiler can be done by finding the start of an interaction in the interactions panel, and then finding the beginning of when the event callbacks for that interaction start to run.</p>
<p>You'll always incur at least some input delay, as it takes some time for the operating system to pass the input event to the browser—but you do have some control over how long the input delay is. <strong>The key is to figure out if there is work running on the main thread that's preventing your callbacks from running.</strong></p>
<figure>
  <img alt="A depiction of input delay in Chrome's performance panel. The start of the interaction comes significantly before the event callbacks because of increased input delay due to a timer firing from a third-party script." decoding="async" height="291" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
    Input delay caused by a task fired by a timer from a third-party script.
  </figcaption>
</figure>
<p>In the previous figure, a task from a third-party script is running as the user attempts to interact with the page, and therefore extends the input delay. The extended input delay affects the interaction's latency, and could therefore affect the page's INP.</p>
<p>For more information on how you can resolve long input delays, read about how you can <a href="https://web.dev/optimize-input-delay/">identify and reduce input delay</a>.</p>
<h2 id="how-to-identify-expensive-event-callbacks">How to identify expensive event callbacks <a class="headline-link" href="https://web.dev/diagnose-slow-interactions-in-the-lab/#how-to-identify-expensive-event-callbacks">#</a></h2>
<p>Event callbacks occur immediately after the input delay. If an event callback runs too long, it delays the browser from presenting the next frame, and can add significantly to an interaction's total latency. Event callbacks can often run for too long, whether they run as the result of first-party or third-party JavaScript—and in some cases, both.</p>
<figure>
  <img alt="A depiction of event callback tasks in Chrome's performance panel. The event callbacks occur for the pointerdown and click events, which occur in a long task." decoding="async" height="291" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
    The event callbacks that run in response to a click interaction, as shown in the performance profiler in Chrome DevTools. Note the red triangle in the upper right corner of both the <strong>Event: pointerdown</strong> and <strong>Event: click</strong> entries, which identifies expensive event callbacks.
  </figcaption>
</figure>
<p>Finding expensive event callbacks can be done by observing the following in a trace for a specific interaction:</p>
<ol>
<li>Determine whether the task associated with the event callbacks is a <a href="https://web.dev/long-tasks-devtools/#what-are-long-tasks">long task</a>. To reveal long tasks in a lab setting more reliably, you may need to <a href="https://developer.chrome.com/blog/new-in-devtools-61/#throttling" rel="noopener">enable CPU throttling</a> in the performance panel, or connect a low to mid-tier Android device and use <a href="https://developer.chrome.com/docs/devtools/remote-debugging/" rel="noopener">remote debugging</a>.</li>
<li>If the task that runs the event callbacks is a long task, look for event handler entries (entries with names such as <strong>Event: click</strong>, for example) in the call stack that have a red triangle at the upper right corner of the entry. These are expensive event callbacks.</li>
</ol>
<p>To address expensive event callbacks, try one of the following strategies:</p>
<ol>
<li><strong>Do as little work as possible.</strong> Is everything that happens in an expensive event callback strictly necessary? If not, consider removing that code altogether if you can, or deferring its execution to a later point in time if you can't. You can also take advantage of framework features to help. For example, React's <a href="https://beta.reactjs.org/reference/react/PureComponent" rel="noopener"><code>PureComponent</code> class</a> and <a href="https://react.dev/reference/react/memo" rel="noopener">memoization feature</a> can skip unnecessary rendering work when props and state haven't changed for a component.</li>
<li><strong>Defer non-rendering work in the event callback to a later point in time.</strong> Long tasks can be broken up by <a href="https://web.dev/optimize-long-tasks/#use-asyncawait-to-create-yield-points">yielding to the main thread</a>. Whenever you yield to the main thread, you're ending execution of the current task and breaking up the remainder of the work into a separate task. This gives the renderer a chance to process updates to the user interface that were processed earlier in the event callback. If you happen to be developing in React, its <a href="https://react.dev/reference/react/useTransition" rel="noopener">transitions feature</a> will do this for you.</li>
</ol>
<p>By employing these strategies, you should be able to get your event callbacks in a place where they're responding more quickly to user input.</p>
<h2 id="how-to-identify-presentation-delays">How to identify presentation delays <a class="headline-link" href="https://web.dev/diagnose-slow-interactions-in-the-lab/#how-to-identify-presentation-delays">#</a></h2>
<p>Long input delays and expensive event callbacks aren't the only possible culprits of poor INP. Sometimes the rendering updates that occur in response to even small amounts of event callback code can be expensive. The time it takes for the browser to render visual updates to the user interface to reflect the result of an interaction is known as <em>presentation delay</em>.</p>
<aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>Important</strong></p><div class=" flow"> The <a href="https://web.dev/rendering-performance/">rendering performance guide</a> is a good primer on understanding how the browser renders a page. <a href="https://www.youtube.com/watch?v=K2QHdgAKP-s">Life of a pixel</a> goes further in depth on how rendering works in Chromium-based browsers. </div></aside>
<figure>
  <img alt="Rendering work as visualized in the performance panel of Chrome DevTools. The rendering work occurs after the event callback in order to paint the next frame." decoding="async" height="229" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
    Rendering tasks as shown in Chrome's performance profiler. The rendering work is shown in purple, with paint work in green.
  </figcaption>
</figure>
<aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>Important</strong></p><div class=" flow"> When profiling slow interactions due to expensive rendering work, you should enable the <strong>Screenshots</strong> checkbox at the top of the performance profiler. This will help you to line up user interface updates with the corresponding rendering work on the main thread. </div></aside>
<p>Of all the possible causes of high interaction latency, rendering work can be the most difficult to troubleshoot and fix, but the result is worth the effort. Excessive rendering work could be caused by any of the following:</p>
<ul>
<li><strong>Large DOM sizes.</strong> Rendering work often increases along with the size of the page's DOM. For more information, read <a href="https://web.dev/dom-size-and-interactivity/">How large DOM sizes affect interactivity—and what you can do about it</a>.</li>
<li><strong>Forced reflows.</strong> This happens when you apply style changes to elements in JavaScript, and <em>then</em> query the results of that work. The result is that the browser has to perform the layout work before doing anything else, so that the browser can return the updated styles. For more information and tips on avoiding forced reflows, read <a href="https://web.dev/avoid-large-complex-layouts-and-layout-thrashing/">Avoid large, complex layouts and layout thrashing</a>.</li>
<li><strong>Excessive or unnecessary work in <a href="https://developer.mozilla.org/docs/Web/API/window/requestAnimationFrame" rel="noopener"><code>requestAnimationFrame</code></a> callbacks.</strong> <code>requestAnimationFrame()</code> callbacks are run during the rendering phase of the event loop, and must complete before the next frame can be presented. If you're using <code>requestAnimationFrame()</code> to do work that doesn't involve changes to the user interface, understand that you could be delaying the next frame.</li>
<li><strong><a href="https://developer.mozilla.org/docs/Web/API/ResizeObserver" rel="noopener"><code>ResizeObserver</code></a> callbacks.</strong> Such callbacks run prior to rendering, and may delay presentation of the next frame if the work in them is expensive. As with event callbacks, defer any logic not needed for the next frame.</li>
</ul>
<aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>Important</strong></p><div class=" flow"> Troubleshooting might be made easier by enabling the <strong>Timeline: event initiators</strong> experiment in Chrome DevTools. Enabling this experiment will draw an arrow from any style recalculation task to the JavaScript task that kicked it off. To enable this experiment, go into the Chrome DevTools settings, click on <strong>Experiments</strong> in the left hand menu, the click the checkbox labeled <strong>Timeline: event initiators</strong>, and restart DevTools. </div></aside>
<h2 id="troubleshooting-inp-is-an-iterative-process">Troubleshooting INP is an iterative process <a class="headline-link" href="https://web.dev/diagnose-slow-interactions-in-the-lab/#troubleshooting-inp-is-an-iterative-process">#</a></h2>
<p>Finding out what's causing high interaction latency that contributes to poor INP takes a lot of work—but if you can pin down the causes, you're halfway there. By following a methodical approach to troubleshooting poor INP, you can reliably pin down what's causing a problem, and arrive more quickly to the right fix. To review:</p>
<ul>
<li><a href="https://web.dev/find-slow-interactions-in-the-field/">Rely on field data to find slow interactions</a>.</li>
<li>Test problematic field interactions in the lab to see if they're reproducible.</li>
<li>Identify whether the cause is due to long input delay, expensive event callbacks, or expensive rendering work.</li>
<li>Repeat.</li>
</ul>
<p>The last of these is the most important. Like most other work you must do to improve page performance, troubleshooting and improving INP is a cyclical process. When you fix one slow interaction, you'll need to move onto the next, and continue to do so until you start to see results. Stay vigilant!</p>
<p><em>Hero image from <a href="https://unsplash.com/" rel="noopener">Unsplash</a>, by <a href="https://unsplash.com/@_louisreed" rel="noopener">Louis Reed</a>.</em></p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[HTML 的客户端呈现和交互性]]></title>
            <link>https://web.dev/client-side-rendering-of-html-and-interactivity/</link>
            <guid>https://web.dev/client-side-rendering-of-html-and-interactivity/</guid>
            <content:encoded><![CDATA[<div>
    <h1>GPT总结</h1>
    <summary>本文讨论了服务器提供的HTML和客户端JavaScript创建的HTML之间的性能差异。传统页面加载模式下，浏览器可以通过流式传输HTML来实现增量解析和渲染，从而提高页面的交互性能。然而，使用单页面应用（SPA）模式或在客户端使用JavaScript动态创建HTML时，会导致交互延迟增加。客户端渲染的HTML任务无法自动分块，可能导致长时间的主线程阻塞，影响页面的交互性能和关键时刻的渲染。为了解决客户端渲染带来的性能问题，可以尽量从服务器端提供HTML，减少客户端渲染的工作量；同时，限制在客户端创建的DOM节点数量，以减少渲染所需的处理时间；还可以考虑使用流式服务工作线程架构，通过缓存和流式传输HTML来提高页面加载速度。通过减少客户端渲染的工作量，可以改善页面的交互性能和其他指标。</summary>
    <div>
    <div>OriginTitle: Client-side rendering of HTML and interactivity</div>

    </div></div><p>对于使用浏览器内置导航逻辑（有时称为“传统页面加载”或“硬导航”）的网站，浏览器默认会很好地解析和呈现 HTML。 此类网站有时称为多页面应用程序 (MPA)。</p>
<p>但是，开发人员可以解决浏览器默认设置以满足他们的应用程序需求。 对于使用<a href="https://en.wikipedia.org/wiki/Single-page_application" rel="noopener">单页应用程序 (SPA) 模式</a>，它使用 JavaScript 在客户端动态创建大部分 HTML/DOM。 客户端渲染是这种设计模式的名称，它可以对您的网站产生影响<a href="https://web.dev/inp/">与下一个油漆的相互作用 (INP)</a>如果涉及的工作量过多。</p>
<p>本指南将帮助您权衡使用服务器发送到浏览器的 HTML 与使用 JavaScript 在客户端创建 HTML 之间的区别，以及后者如何在关键时刻导致较高的交互延迟。</p>
<h2 id="how-the-browser-renders-html-provided-by-the-server">浏览器如何呈现服务器提供的 HTML<a class="headline-link" href="https://web.dev/client-side-rendering-of-html-and-interactivity/#how-the-browser-renders-html-provided-by-the-server">#</a></h2>
<p>传统页面加载中使用的导航模式涉及在每次导航时从服务器接收 HTML。 如果您在浏览器地址栏中输入 URL 或单击 MPA 中的链接，则会发生以下一系列事件：</p>
<ol>
<li>浏览器发送针对所提供的 URL 的导航请求。</li>
<li>服务器以块的形式响应 HTML。</li>
</ol>
<p>其中最后一步是关键。 它也是服务器/浏览器交换中最基本的性能优化之一，被称为<em>流媒体</em>。 如果服务器可以尽快开始发送 HTML，并且浏览器不等待整个响应到达，则浏览器可以在 HTML 到达时分块处理它。</p>
<figure>
  <img alt="A screenshot of parsing of HTML sent by the server visualized in the performance panel of Chrome DevTools. As the HTML streams in, chunks of it are processed across multiple shorter tasks, and rendering is incremental." decoding="async" height="379" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
     解析和呈现服务器提供的 HTML，如 Chrome DevTools 的性能面板中所示。 解析 HTML 和渲染 HTML 所涉及的任务被分成多个块。 
  </figcaption>
</figure>
<p>与浏览器中发生的大多数事情一样，解析 HTML 发生在任务中。 当 HTML 从服务器流式传输到浏览器时，浏览器会在该流的位以块的形式到达时，一次一点地执行此操作，从而优化对该 HTML 的解析。 结果是浏览器在处理完每个块后会定期让步给主线程，从而避免<a href="https://web.dev/long-tasks-devtools/#what-are-long-tasks">长期任务</a>。 这意味着在解析 HTML 时可能会发生其他工作，包括向用户呈现页面所需的增量渲染工作，以及处理页面关键启动期间可能发生的用户交互。 这种方法转化为更好的<a href="https://web.dev/inp/">与下一个油漆的相互作用 (INP)</a>该页面的得分。</p>
<p>外卖？ 当您从服务器流式传输 HTML 时，<strong>您可以免费获得 HTML 的增量解析和渲染以及自动生成主线程。</strong>客户端渲染无法实现这一点。</p>
<h2 id="how-the-browser-renders-html-provided-by-javascript">浏览器如何呈现 JavaScript 提供的 HTML<a class="headline-link" href="https://web.dev/client-side-rendering-of-html-and-interactivity/#how-the-browser-renders-html-provided-by-javascript">#</a></h2>
<p>虽然对页面的每个导航请求都需要服务器提供一定量的 HTML，但某些网站将使用 SPA 模式。 这种方法通常涉及服务器提供的最小初始 HTML 负载，但随后客户端将使用从服务器获取的数据组装的 HTML 填充页面的主要内容区域。 后续导航（在本例中有时称为“软导航”）完全由 JavaScript 处理，以使用新的 HTML 填充页面。</p>
<p>在更有限的情况下，客户端渲染也可能发生在非 SPA 中，其中 HTML 通过 JavaScript 动态添加到 DOM。</p>
<p>通过 JavaScript 创建 HTML 或添加到 DOM 有几种常见方法：</p>
<ol>
<li>这<a href="https://developer.mozilla.org/docs/Web/API/Element/innerHTML" rel="noopener"><code>内部HTML</code>财产</a>允许您通过字符串设置现有元素的内容，浏览器将其解析为 DOM。</li>
<li>这<a href="https://developer.mozilla.org/docs/Web/API/Document/createElement" rel="noopener"><code>文档.createElement</code>方法</a>允许您创建要添加到 DOM 的新元素，而无需使用任何浏览器 HTML 解析。</li>
<li>这<a href="https://developer.mozilla.org/docs/Web/API/Document/write" rel="noopener"><code>文档.写入</code>方法</a>允许您将 HTML 写入文档（浏览器会解析它，就像方法 #1 一样）。 由于<a href="https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#document.write()" rel="noopener">有很多原因</a>， 然而，<strong>的用法<code>文档.写入</code>强烈劝阻。</strong></li>
</ol>
<figure>
  <img alt="A screenshot of parsing of HTML rendered via JavaScript visualized in the performance panel of Chrome DevTools. The work occurs in a single, long task that blocks the main thread." decoding="async" height="141" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
     在客户端通过 JavaScript 解析和渲染 HTML，如 Chrome DevTools 的性能面板中所示。 解析和渲染它所涉及的任务没有被分块，导致任务很长，阻塞主线程。 
  </figcaption>
</figure>
<p>通过客户端 JavaScript 创建 HTML/DOM 的后果可能非常严重：</p>
<ul>
<li>与服务器响应导航请求而流式传输的 HTML 不同，客户端上的 JavaScript 任务不会自动分块，这可能会导致长任务阻塞主线程。 这意味着如果您在客户端上一次创建过多的 HTML/DOM，则页面的 INP 可能会受到负面影响。</li>
<li>如果在启动期间在客户端上创建 HTML，则其中引用的资源<a href="https://web.dev/preload-scanner/#rendering-markup-with-client-side-javascript">将要<em>不是</em>被浏览器预加载扫描程序发现</a>。 这肯定会对页面的浏览量产生负面影响<a href="https://web.dev/lcp/">最大内容涂料 (LCP)</a>。 虽然这不是运行时性能问题（而是获取重要资源时的网络延迟问题），但您不希望您的网站的 LCP 由于回避这一基本的浏览器性能优化而受到影响。</li>
</ul>
<h2 id="what-you-can-do-about-the-performance-impact-of-client-side-rendering">针对客户端渲染的性能影响，您可以采取哪些措施<a class="headline-link" href="https://web.dev/client-side-rendering-of-html-and-interactivity/#what-you-can-do-about-the-performance-impact-of-client-side-rendering">#</a></h2>
<p>如果您的网站严重依赖客户端渲染并且您已经观察到<a href="https://web.dev/find-slow-interactions-in-the-field/">现场数据中的 INP 值较差</a>，您可能想知道客户端渲染是否与该问题有关。 例如，如果您的网站是 SPA，您的现场数据可能会揭示负责大量渲染工作的交互。</p>
<p>无论原因是什么，您都可以探索以下一些潜在原因，以帮助事情重回正轨。</p>
<h3 id="provide-as-much-html-from-the-server-as-possible">尽可能多地从服务器提供 HTML<a class="headline-link" href="https://web.dev/client-side-rendering-of-html-and-interactivity/#provide-as-much-html-from-the-server-as-possible">#</a></h3>
<p>如前所述，浏览器默认以非常高效的方式处理来自服务器的 HTML。 它将以一种避免长时间任务的方式分解 HTML 的解析和渲染，并优化总主线程时间。 这导致较低的<a href="https://web.dev/tbt/">总阻塞时间 (TBT)</a>，TBT 是<a href="https://almanac.httparchive.org/en/2022/performance#inp-and-tbt" rel="noopener">与INP强相关</a>。</p>
<p>您可能依赖前端框架来构建您的网站。 如果是这样，您需要确保在服务器上呈现组件 HTML。 这将限制您的网站所需的初始客户端渲染量，并且应该会带来更好的体验。</p>
<ul>
<li>对于 React，您需要使用<a href="https://react.dev/reference/react-dom/server" rel="noopener">服务器 DOM API</a>在服务器上呈现 HTML。 但要注意：服务器端渲染的传统方法使用<a href="https://react.dev/reference/react-dom/server#server-apis-for-non-streaming-environments" rel="noopener">同步方法</a>，这可能会导致更长的<a href="https://web.dev/ttfb/">第一个字节的时间 (TTFB)</a>，以及后续指标，例如<a href="https://web.dev/fcp/">首次内容绘制 (FCP)</a>和LCP。 如果可能，请确保您使用流式 API<a href="https://react.dev/reference/react-dom/server#server-apis-for-nodejs-streams" rel="noopener">Node.js</a>或者<a href="https://react.dev/reference/react-dom/server#server-apis-for-web-streams" rel="noopener">其他 JavaScript 运行时</a>以便服务器可以尽快开始将 HTML 流式传输到浏览器。 Next.js（一个基于 React 的框架）默认提供了许多最佳实践。 除了在服务器上自动渲染 HTML 之外，它还可以静态生成不根据用户上下文（例如身份验证）而更改的页面的 HTML。</li>
<li>Vue 默认也执行客户端渲染。 然而，与 React 一样，Vue 也可以<a href="https://vuejs.org/guide/scaling-up/ssr.html" rel="noopener">在服务器上渲染您的组件 HTML</a>。 要么尽可能利用这些服务器端 API，要么考虑<a href="https://vuejs.org/guide/scaling-up/ssr.html#higher-level-solutions" rel="noopener">更高层次的抽象</a>使您的 Vue 项目的最佳实践更容易实现。</li>
<li>斯韦尔特<a href="https://learn.svelte.dev/tutorial/ssr" rel="noopener">在服务器上呈现 HTML</a>默认情况下，尽管如果您的组件代码需要访问浏览器独占的命名空间（<code>窗户</code>，例如），您可能无法在服务器上呈现该组件的 HTML。 尽可能探索替代方法，以免造成不必要的客户端渲染。<a href="https://kit.svelte.dev/" rel="noopener">苗条套件</a>——对于 Svelte 就像 Next.js 之于 React ——将许多最佳实践尽可能嵌入到您的 Svelte 项目中，这样您就可以避免单独使用 Svelte 的项目中的潜在陷阱。</li>
</ul>
<aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>重要的</strong></p><div class=" flow">如果您的应用程序使用这些框架中的任何一个并且需要客户端上的交互性，您仍然需要<a href="https://web.dev/rendering-on-the-web/#combining-server-rendering-and-csr-via-rehydration">在客户端上水化你的组件</a>以便他们能够互动。 要对渲染 HTML 的不同方法进行全面评估，以及有关如何在考虑到性能的情况下在客户端处理组件水合作用的一些建议，请阅读<a href="https://web.dev/rendering-on-the-web/">在网络上渲染</a>。</div></aside>
<h3 id="limit-the-amount-of-dom-nodes-created-on-the-client">限制客户端创建的 DOM 节点数量<a class="headline-link" href="https://web.dev/client-side-rendering-of-html-and-interactivity/#limit-the-amount-of-dom-nodes-created-on-the-client">#</a></h3>
<p>当 DOM 很大时，渲染它们所需的处理时间往往会增加。 无论您的网站是成熟的 SPA，还是由于 MPA 交互而将新节点注入到现有 DOM 中，请考虑使这些 DOM 尽可能小。 这将有助于减少客户端呈现期间显示 HTML 所需的工作，有望有助于降低网站的 INP。</p>
<aside class="aside flow bg-state-good-bg color-state-good-text"><p class="cluster "><span class="aside__icon box-block "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24" fill="currentColor" role="img" aria-label="Check">   <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"></path> </svg></span><strong>客观的</strong></p><div class=" flow"> <strong>阅读以了解更多信息：</strong>&nbsp;<a href="https://web.dev/dom-size-and-interactivity/">DOM 大小和交互性</a>。</div></aside>
<h3 id="consider-a-streaming-service-worker-architecture">考虑一个流服务工作者架构<a class="headline-link" href="https://web.dev/client-side-rendering-of-html-and-interactivity/#consider-a-streaming-service-worker-architecture">#</a></h3>
<p>这是一项先进的技术，可能无法轻松地适用于所有用例，但它可以将您的 MPA 变成一个网站，当用户从一个页面导航到下一个页面时，感觉就像立即加载一样。 您可以使用 Service Worker 将网站的静态部分预先缓存在<a href="https://developer.mozilla.org/docs/Web/API/CacheStorage" rel="noopener"><code>缓存存储</code></a>在使用时<a href="https://developer.mozilla.org/docs/Web/API/ReadableStream" rel="noopener"><code>可读流</code>应用程序编程接口</a>从服务器获取页面 HTML 的其余部分。</p>
<p>当您成功使用此技术时，您不会在客户端上创建 HTML，但从缓存中即时加载部分内容会给人留下您的网站正在快速加载的印象。 使用这种方法的网站几乎就像一个 SPA，但没有客户端渲染的缺点。 它也是<a href="https://philipwalton.com/articles/smaller-html-payloads-with-service-workers/" rel="noopener">减少您从服务器请求的 HTML 数量</a>。</p>
<p>简而言之，流服务工作线程架构并不<em>代替</em>浏览器的内置导航逻辑——它<em>添加</em>到它。 有关如何实现此目标的更多信息<a href="https://developer.chrome.com/docs/workbox/" rel="noopener">工作箱</a>， 读<a href="https://developer.chrome.com/docs/workbox/faster-multipage-applications-with-streams/" rel="noopener">使用流更快的多页应用程序</a>。</p>
<h2 id="conclusion">结论<a class="headline-link" href="https://web.dev/client-side-rendering-of-html-and-interactivity/#conclusion">#</a></h2>
<p>您的网站接收和呈现 HTML 的方式会对性能产生影响。 当您依靠服务器发送网站运行所需的全部（或大部分）HTML 时，您将免费获得很多：增量解析和渲染，以及自动屈服于主线​​程以避免长时间的任务。</p>
<p>客户端 HTML 渲染引入了许多潜在的性能问题，这些问题在许多情况下是可以避免的。 然而，由于每个网站的要求不同，这并不是 100% 完全可以避免的。 为了减轻因客户端站点渲染过多而可能导致的潜在长时间任务，请确保尽可能多地从服务器发送网站的 HTML，对于必须在客户端上渲染的 HTML，保持 DOM 大小尽可能小客户端，并考虑替代架构来加速 HTML 到客户端的交付，同时还利用浏览器为从服务器加载的 HTML 提供的增量解析和呈现。</p>
<p>如果您可以尽可能减少网站的客户端渲染，那么您不仅可以改善网站的 INP，还可以改善其他指标，例如 LCP、TBT，在某些情况下甚至可能改善 TTFB。</p>
<p><em>英雄形象来自<a href="https://unsplash.com/" rel="noopener">未飞溅</a>， 经过<a href="https://unsplash.com/de/fotos/nZcMWOKAJrY" rel="noopener">麦克乔尼茨</a>。</em></p>
<hr><p>Parsing and rendering of HTML is something that browsers do very well by default for websites that use the browser's built-in navigation logic—sometimes called "traditional page loads" or "hard navigations". Such websites are sometimes called multi-page applications (MPAs).</p>
<p>However, developers may work around browser defaults to suit their application needs. This is certainly the case for websites using the <a href="https://en.wikipedia.org/wiki/Single-page_application" rel="noopener">single page application (SPA) pattern</a>, which dynamically creates large parts of the HTML/DOM on the client with JavaScript. Client-side rendering is the name for this design pattern, and it can have effects on your website's <a href="https://web.dev/inp/">Interaction to Next Paint (INP)</a> if the work involved is excessive.</p>
<p>This guide will help you weigh the difference between using HTML sent by the server to the browser versus creating it on the client with JavaScript, and how the latter can result in high interaction latency at crucial moments.</p>
<h2 id="how-the-browser-renders-html-provided-by-the-server">How the browser renders HTML provided by the server <a class="headline-link" href="https://web.dev/client-side-rendering-of-html-and-interactivity/#how-the-browser-renders-html-provided-by-the-server">#</a></h2>
<p>The navigation pattern used in traditional page loads involves receiving HTML from the server on every navigation. If you enter a URL in the address bar of your browser or click on a link in an MPA, the following series of events occurs:</p>
<ol>
<li>The browser sends a navigation request for the URL provided.</li>
<li>The server responds with HTML in chunks.</li>
</ol>
<p>The last step of these is key. It's also one of the most fundamental performance optimizations in the server/browser exchange, and is known as <em>streaming</em>. If the server can begin sending HTML as soon as possible, and the browser doesn't wait for the entire response to arrive, the browser can process HTML in chunks as it arrives.</p>
<figure>
  <img alt="A screenshot of parsing of HTML sent by the server visualized in the performance panel of Chrome DevTools. As the HTML streams in, chunks of it are processed across multiple shorter tasks, and rendering is incremental." decoding="async" height="379" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
    Parsing and rendering of HTML provided by the server as visualized in the performance panel of Chrome DevTools. The tasks involved in parsing HTML and rendering it are split into chunks.
  </figcaption>
</figure>
<p>Like most things that happen in the browser, parsing HTML occurs within tasks. When HTML is streamed from the server to the browser, the browser optimizes parsing of that HTML by doing so a bit at a time as bits of that stream arrive in chunks. The consequence is that the browser yields to the main thread periodically after processing each chunk, which avoids <a href="https://web.dev/long-tasks-devtools/#what-are-long-tasks">long tasks</a>. This means that other work can occur while HTML is being parsed, including the incremental rendering work necessary to present a page to the user, as well as processing user interactions that may occur during the page's crucial startup period. This approach translates to a better <a href="https://web.dev/inp/">Interaction to Next Paint (INP)</a> score for the page.</p>
<p>The takeaway? When you stream HTML from the server, <strong>you get incremental parsing and rendering of HTML and automatic yielding to the main thread for free.</strong> You don't get that with client-side rendering.</p>
<h2 id="how-the-browser-renders-html-provided-by-javascript">How the browser renders HTML provided by JavaScript <a class="headline-link" href="https://web.dev/client-side-rendering-of-html-and-interactivity/#how-the-browser-renders-html-provided-by-javascript">#</a></h2>
<p>While every navigation request to a page requires some amount of HTML to be provided by the server, some websites will use the SPA pattern. This approach often involves a minimal initial payload of HTML is provided by the server, but then the client will populate the main content area of a page with HTML assembled from data fetched from the server. Subsequent navigations—sometimes referred to as "soft navigations" in this case—are handled entirely by JavaScript to populate the page with new HTML.</p>
<p>Client-side rendering may also occur in non-SPAs in more limited cases where HTML is dynamically added to the DOM through JavaScript.</p>
<p>There are a few common ways of creating HTML or adding to the DOM through JavaScript:</p>
<ol>
<li>The <a href="https://developer.mozilla.org/docs/Web/API/Element/innerHTML" rel="noopener"><code>innerHTML</code> property</a> allows you to set the content on an existing element via a string, which the browser parses into DOM.</li>
<li>The <a href="https://developer.mozilla.org/docs/Web/API/Document/createElement" rel="noopener"><code>document.createElement</code> method</a> allows you to create new elements to be added to the DOM without using any browser HTML parsing.</li>
<li>The <a href="https://developer.mozilla.org/docs/Web/API/Document/write" rel="noopener"><code>document.write</code> method</a> allows you to write HTML to the document (and the browser parses it, just like in approach #1). Due to <a href="https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#document.write()" rel="noopener">a number of reasons</a>, however, <strong>usage of <code>document.write</code> is strongly discouraged.</strong></li>
</ol>
<figure>
  <img alt="A screenshot of parsing of HTML rendered via JavaScript visualized in the performance panel of Chrome DevTools. The work occurs in a single, long task that blocks the main thread." decoding="async" height="141" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&amp;w=1600 1600w" width="800">
  <figcaption>
    Parsing and rendering of HTML through JavaScript on the client as visualized in the performance panel of Chrome DevTools. The tasks involved in parsing and rendering it are not chunked up, resulting in a long task that blocks the main thread.
  </figcaption>
</figure>
<p>The consequences of creating HTML/DOM through client-side JavaScript can be significant:</p>
<ul>
<li>Unlike HTML streamed by the server in response to a navigation request, JavaScript tasks on the client are not automatically chunked up, which may result in long tasks that block the main thread. This means that your page's INP can be negatively affected if you're creating too much HTML/DOM at a time on the client.</li>
<li>If HTML is created on the client during startup, resources referenced within it <a href="https://web.dev/preload-scanner/#rendering-markup-with-client-side-javascript">will <em>not</em> be discovered by the browser preload scanner</a>. This will certainly have a negative effect on a page's <a href="https://web.dev/lcp/">Largest Contentful Paint (LCP)</a>. While this is not a runtime performance issue (instead it's an issue of network delay in fetching important resources), you don't want your website's LCP to be affected by sidestepping this fundamental browser performance optimization.</li>
</ul>
<h2 id="what-you-can-do-about-the-performance-impact-of-client-side-rendering">What you can do about the performance impact of client-side rendering <a class="headline-link" href="https://web.dev/client-side-rendering-of-html-and-interactivity/#what-you-can-do-about-the-performance-impact-of-client-side-rendering">#</a></h2>
<p>If your website depends heavily on client-side rendering and you've observed <a href="https://web.dev/find-slow-interactions-in-the-field/">poor INP values in your field data</a>, you might be wondering if client-side rendering has anything to do with the problem. For example, if your website is an SPA, your field data may reveal interactions responsible for considerable rendering work.</p>
<p>Whatever the cause, here are some potential causes you can explore to help get things back on track.</p>
<h3 id="provide-as-much-html-from-the-server-as-possible">Provide as much HTML from the server as possible <a class="headline-link" href="https://web.dev/client-side-rendering-of-html-and-interactivity/#provide-as-much-html-from-the-server-as-possible">#</a></h3>
<p>As mentioned earlier, the browser handles HTML from the server in a very performant way by default. It will break up parsing and rendering of HTML in a way that avoids long tasks, and optimizes the amount of total main thread time. This leads to a lower <a href="https://web.dev/tbt/">Total Blocking Time (TBT)</a>, and TBT is <a href="https://almanac.httparchive.org/en/2022/performance#inp-and-tbt" rel="noopener">strongly correlated with INP</a>.</p>
<p>You may be relying on a frontend framework to build your website. If so, you'll want to make sure you're rendering component HTML on the server. This will limit the amount of initial client-side rendering your website will require, and should result in a better experience.</p>
<ul>
<li>For React, you'll want to make use of the <a href="https://react.dev/reference/react-dom/server" rel="noopener">Server DOM API</a> to render HTML on the server. But be aware: the traditional method of server-side rendering uses <a href="https://react.dev/reference/react-dom/server#server-apis-for-non-streaming-environments" rel="noopener">a synchronous approach</a>, which can lead to a longer <a href="https://web.dev/ttfb/">Time to First Byte (TTFB)</a>, as well as subsequent metrics such as <a href="https://web.dev/fcp/">First Contentful Paint (FCP)</a> and LCP. Where possible, make sure you're using the streaming APIs for <a href="https://react.dev/reference/react-dom/server#server-apis-for-nodejs-streams" rel="noopener">Node.js</a> or <a href="https://react.dev/reference/react-dom/server#server-apis-for-web-streams" rel="noopener">other JavaScript runtimes</a> so that the server can begin streaming HTML to the browser as soon as possible. Next.js—a React-based framework—provides many best practices by default. In addition to automatically rendering HTML on the server, it can also statically generate HTML for pages that don't change based on user context (such as authentication).</li>
<li>Vue also performs client-side rendering by default. However, like React, Vue can also <a href="https://vuejs.org/guide/scaling-up/ssr.html" rel="noopener">render your component HTML on the server</a>. Either take advantage of these server-side APIs where possible, or consider a <a href="https://vuejs.org/guide/scaling-up/ssr.html#higher-level-solutions" rel="noopener">higher-level abstraction</a> for your Vue project to make the best practices easier to implement.</li>
<li>Svelte <a href="https://learn.svelte.dev/tutorial/ssr" rel="noopener">renders HTML on the server</a> by default—although if your component code needs access to browser-exclusive namespaces (<code>window</code>, for example), you may not be able to render that component's HTML on the server. Explore alternative approaches wherever possible so that you're not causing unnecessary client-side rendering. <a href="https://kit.svelte.dev/" rel="noopener">SvelteKit</a>—which is to Svelte as Next.js is to React—embeds many best practices into your Svelte projects as possible, so you can avoid potential pitfalls in projects that use Svelte alone.</li>
</ul>
<aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>Important</strong></p><div class=" flow"> If your application uses either of these frameworks and requires interactivity on the client, you'll still need to <a href="https://web.dev/rendering-on-the-web/#combining-server-rendering-and-csr-via-rehydration">hydrate your components on the client</a> so that they'll be interactive. For a comprehensive evaluation of the different approaches to rendering HTML, and for some advice on how to handle component hydration on the client with performance in mind, read <a href="https://web.dev/rendering-on-the-web/">Rendering on the web</a>. </div></aside>
<h3 id="limit-the-amount-of-dom-nodes-created-on-the-client">Limit the amount of DOM nodes created on the client <a class="headline-link" href="https://web.dev/client-side-rendering-of-html-and-interactivity/#limit-the-amount-of-dom-nodes-created-on-the-client">#</a></h3>
<p>When DOMs are large, the amount of processing time required to render them tends to increase. Whether your website is a full-fledged SPA, or is injecting new nodes into an existing DOM as the result of an interaction for an MPA, consider keeping those DOMs as small as possible. This will help reduce the work required during client-side rendering to display that HTML, hopefully helping to keep your website's INP lower.</p>
<aside class="aside flow bg-state-good-bg color-state-good-text"><p class="cluster "><span class="aside__icon box-block "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24" fill="currentColor" role="img" aria-label="Check">   <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"></path> </svg></span><strong>Objective</strong></p><div class=" flow"> <strong>Read to learn more:</strong>&nbsp;<a href="https://web.dev/dom-size-and-interactivity/">DOM size and interactivity</a>. </div></aside>
<h3 id="consider-a-streaming-service-worker-architecture">Consider a streaming service worker architecture <a class="headline-link" href="https://web.dev/client-side-rendering-of-html-and-interactivity/#consider-a-streaming-service-worker-architecture">#</a></h3>
<p>This is an advanced technique—one that may not work easily with every use case—but it's one that can turn your MPA into a website that feels like it's loading instantly when users navigate from one page to the next. You can use a service worker to precache the static parts of your website in <a href="https://developer.mozilla.org/docs/Web/API/CacheStorage" rel="noopener"><code>CacheStorage</code></a> while using the <a href="https://developer.mozilla.org/docs/Web/API/ReadableStream" rel="noopener"><code>ReadableStream</code> API</a> to fetch the rest of a page's HTML from the server.</p>
<p>When you use this technique successfully, you aren't creating HTML on the client, but the instant loading of content partials from the cache will give the impression that your site is loading quickly. Websites using this approach can feel almost like an SPA, but without the downfalls of client-side rendering. It also <a href="https://philipwalton.com/articles/smaller-html-payloads-with-service-workers/" rel="noopener">reduces the amount of HTML you're requesting from the server</a>.</p>
<p>In short, a streaming service worker architecture doesn't <em>replace</em> the browser's built-in navigation logic—it <em>adds</em> to it. For more information on how to achieve this with <a href="https://developer.chrome.com/docs/workbox/" rel="noopener">Workbox</a>, read <a href="https://developer.chrome.com/docs/workbox/faster-multipage-applications-with-streams/" rel="noopener">Faster multipage applications with streams</a>.</p>
<h2 id="conclusion">Conclusion <a class="headline-link" href="https://web.dev/client-side-rendering-of-html-and-interactivity/#conclusion">#</a></h2>
<p>How your website receives and renders HTML has an impact on performance. When you rely on the server to send all (or the bulk of) the HTML required for your website to function, you're getting a lot for free: incremental parsing and rendering, and automatic yielding to the main thread to avoid long tasks.</p>
<p>Client-side HTML rendering introduces a number of potential performance issues that can be avoidable in many cases. Due to each individual website's requirements, however, it's not entirely avoidable 100% of the time. To mitigate the potential long tasks that can result from excessive client-site rendering, make sure you're sending as much of your website's HTML from the server whenever possible, keep your DOM sizes as small as possible for HTML that must be rendered on the client, and consider alternative architectures to speed the delivery of HTML to the client while also taking advantage of the incremental parsing and rendering the browser provides for HTML loaded from the server.</p>
<p>If you can get your website's client-side rendering to be as minimal as possible, you'll improve not just your website's INP, but other metrics such as LCP, TBT, and possibly even your TTFB in some cases.</p>
<p><em>Hero image from <a href="https://unsplash.com/" rel="noopener">Unsplash</a>, by <a href="https://unsplash.com/de/fotos/nZcMWOKAJrY" rel="noopener">Maik Jonietz</a>.</em></p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[使用 Web Vitals 扩展来调试 Core Web Vitals 问题]]></title>
            <link>https://web.dev/debug-cwvs-with-web-vitals-extension/</link>
            <guid>https://web.dev/debug-cwvs-with-web-vitals-extension/</guid>
            <content:encoded><![CDATA[<div>
    <h1>GPT总结</h1>
    <summary>Web Vitals扩展提供了Core Web Vitals诊断信息，帮助开发人员测量和解决Core Web Vitals问题。它补充了Chrome团队提供的其他工具，帮助开发人员改进其网站的体验。

更新后的扩展提供了额外的调试信息，使开发人员更容易理解和解决性能问题。

在控制台中显示调试信息：
Web Vitals扩展已经有了“控制台日志”调试选项。可以在选项屏幕中启用它。

在最新的升级之前，它会将web-vitals库的输出记录在一个JSON对象中。

这个对象可以展开以获取完整的详细信息，可以将鼠标悬停在其中的LCP图像上以在主面板中突出显示。

为了提供更好的开发者体验，我们改进了扩展，使最重要的信息更加可见，同时仍然包含完整的对象供那些需要更多细节的人使用。

每个指标的新调试信息：
在新版本中，我们添加了更易读的调试信息，以帮助您找到和解决问题。对于每个指标，提供不同的信息，因为每个指标都是不同的。

LCP调试信息：
对于最大内容绘制（LCP），我们显示元素以及我们在优化LCP指南中详细介绍的4个阶段的细分。

在</summary>
    <div>
    <div>OriginTitle: Using the Web Vitals extension to debug Core Web Vitals issues</div>

    </div></div><p>这<a href="https://chrome.google.com/webstore/detail/web-vitals/ahfhijdlegdabablpippeagghigmibma" rel="noopener">Web Vitals 扩展</a>提供对 Core Web Vitals 诊断信息的轻松访问，以帮助开发人员衡量和解决 Core Web Vitals 问题。 它补充了 Chrome 团队提供的其他工具，以帮助开发人员改善其网站体验。</p>
<p>我们更新了扩展，为开发人员提供额外的调试信息，使其更容易理解和解决他们的性能问题。</p>
<h2 id="showing-debug-information-in-the-console">在控制台中显示调试信息<a class="headline-link" href="https://web.dev/debug-cwvs-with-web-vitals-extension/#showing-debug-information-in-the-console">#</a></h2>
<p>Web Vitals 扩展具有“控制台日志记录”调试选项已有一段时间了。 可以在选项屏幕中启用它：</p>
<img alt="Web Vitals Extension Options screen" decoding="async" height="434" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format" srcset="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&amp;w=1600 1600w" width="800">
<p>在最后一次升级之前，这记录了来自<a href="https://github.com/GoogleChrome/web-vitals" rel="noopener"><code>网络生命库</code></a>（支持扩展）在 JSON 对象中：</p>
<img alt="Web Vitals Extension old console logging" decoding="async" height="458" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format" srcset="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&amp;w=1600 1600w" width="800">
<p>然后可以展开该对象以获取完整的详细信息，并且可以将 LCP 图像等元素悬停在主面板中以突出显示它们：</p>
<img alt="Web Vitals Extension old console logging with element highlighting" decoding="async" height="514" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format" srcset="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&amp;w=1600 1600w" width="800">
<p>这很有帮助，但输出格式不是特别用户友好，我们认为我们可以提供更好的开发人员体验。 因此，我们改进了扩展，使最重要的信息更加可见，同时仍然为那些想要更多详细信息的人提供完整的对象。</p>
<h2 id="new-debug-information-for-each-metric">每个指标的新调试信息<a class="headline-link" href="https://web.dev/debug-cwvs-with-web-vitals-extension/#new-debug-information-for-each-metric">#</a></h2>
<p>在新版本中，我们以更易读的格式添加了新的调试信息，以帮助您查找和解决问题。 由于每个指标都不同，因此为每个指标提供了不同的信息。</p>
<h3 id="lcp-debug-information">LCP调试信息<a class="headline-link" href="https://web.dev/debug-cwvs-with-web-vitals-extension/#lcp-debug-information">#</a></h3>
<p>为了<a href="https://web.dev/lcp/">最大内容涂料 (LCP)</a>，我们展示了元素以及 4 个阶段的详细信息<a href="https://web.dev/optimize-lcp/#lcp-breakdown">优化LCP</a>指导：</p>
<img alt="Web Vitals Extension new console logging showing LCP elements and sub-parts" decoding="async" height="535" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format" srcset="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&amp;w=1600 1600w" width="800">
<p>LCP 时间（2,876 毫秒，或约 2.9 秒）以琥珀色突出显示，因为它位于“需要改进”类别中。</p>
<p>在这个例子中，我们看到<code>资源加载时间</code>是最长的时间，因此为了缩短 LCP 时间，您需要对其进行优化 - 也许可以通过避免将它们托管在单独的域上，或者使用更小的图像或更有效的格式。 在本例中，这是由于为了演示输出而人为减慢了速度 - web.dev 是一个快速站点 😀</p>
<p>还可以将鼠标悬停在该元素上以突出显示图像：</p>
<img alt="Web Vitals Extension new console logging retains element highlighting on hover" decoding="async" height="535" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format" srcset="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&amp;w=1600 1600w" width="800">
<p>右键单击元素还可以在元素面板中显示它。</p>
<p>这里的 LCP 元素是一个图像，将鼠标悬停在右侧控制台中的该图像上，也会在左侧站点上突出显示该元素。</p>
<h3 id="cls-debug-information">CLS 调试信息<a class="headline-link" href="https://web.dev/debug-cwvs-with-web-vitals-extension/#cls-debug-information">#</a></h3>
<p>转变有助于<a href="https://web.dev/cls/">累积布局偏移 (CLS)</a>现在也列出了，并且可以将鼠标悬停在上面以突出显示相关元素：</p>
<img alt="Web Vitals Extension new console logging showing each CLS element shift" decoding="async" height="448" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format" srcset="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&amp;w=1600 1600w" width="800">
<p>上面的屏幕截图显示了 2 个转变，第一个由两个元素组成（当加载横幅图像并且其下方的内容被转变下载时），第二个由 4 个元素组成（当加载动态广告并且页面的大部分内容被加载时）。向下移动）。</p>
<p>这<code>小时2</code>在此屏幕截图中，元素悬停在右侧控制台中，您可以看到这突出显示了左侧网站上的元素。</p>
<aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>重要的</strong></p><div class=" flow"> <p>注意，被移位的元素不是元素<em>引起</em>转变，但那些<em>受影响的</em>通过任何轮班。</p> <p>但是，根据上面的示例，这通常足以帮助您通过查看第一个移位元素上方的元素（对于插入的元素）或第一个元素本身（如果这是展开的）来识别移位的原因。并因此改变自身）。</p> </div></aside>
<h3 id="fid-debug-information">FID调试信息<a class="headline-link" href="https://web.dev/debug-cwvs-with-web-vitals-extension/#fid-debug-information">#</a></h3>
<p>为了<a href="https://web.dev/fid/">首次输入延迟 (FID)</a>我们像往常一样显示受影响的元素（再次将其悬停在页面上以突出显示它）和交互类型，以及完整的 JSON 对象：</p>
<img alt="Web Vitals Extension new console logging showing FID target and type" decoding="async" height="448" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format" srcset="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&amp;w=1600 1600w" width="800">
<h3 id="inp-debug-information">INP调试信息<a class="headline-link" href="https://web.dev/debug-cwvs-with-web-vitals-extension/#inp-debug-information">#</a></h3>
<p>为了<a href="https://web.dev/inp/">与下一个油漆的相互作用 (INP)</a>，我们添加了两个新日志：</p>
<ul>
<li>INP-- 最长的相互作用</li>
<li>交互 - 所有交互</li>
</ul>
<h4 id="inp-metric">INP指标<a class="headline-link" href="https://web.dev/debug-cwvs-with-web-vitals-extension/#inp-metric">#</a></h4>
<p>首先，我们在 INP 指标发生变化时突出显示：</p>
<img alt="Web Vitals Extension new console logging showing INP target, event type, and breakdown" decoding="async" height="448" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format" srcset="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&amp;w=1600 1600w" width="800">
<p>与 LCP 类似，该扩展将 INP 时间分解为三个阶段：</p>
<ol>
<li>输入延迟</li>
<li>处理时间</li>
<li>演示延迟</li>
</ol>
<p>这可以帮助您确定事件是否由于受到其他事件的阻碍而变慢（<strong>输入延迟</strong>），因为事件处理程序本身由于您的代码而很慢（<strong>处理时间</strong>），如果后处理渲染延迟是原因（<strong>呈现延迟</strong>)，或其中两个或多个的组合。</p>
<h4 id="interactions">互动<a class="headline-link" href="https://web.dev/debug-cwvs-with-web-vitals-extension/#interactions">#</a></h4>
<p>由于先前的交互阻塞了主线程，INP 可能会很慢，从而导致较高的输入延迟。 因此，我们以与 INP 日志记录类似的格式列出所有交互：</p>
<img alt="Web Vitals Extension new console logging showing all interactions" decoding="async" height="448" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format" srcset="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&amp;w=1600 1600w" width="800">
<p>这允许您通过与网站交互并在控制台中查看哪些交互、哪些组合可能会导致 INP 问题来“实时跟踪”网站。</p>
<p>这还允许您识别多个缓慢的交互，而不仅仅是最大的 INP 交互，以帮助您在提高响应能力时避免追尾的感觉。</p>
<h2 id="filtering-the-console-logs">过滤控制台日志<a class="headline-link" href="https://web.dev/debug-cwvs-with-web-vitals-extension/#filtering-the-console-logs">#</a></h2>
<p>所有这些额外信息虽然有用，但如果您正在进行与 Core Web Vitals 无关的其他开发，或者当时仅对某一特定 Core Web Vitals 感兴趣，则可能会分散您的注意力。</p>
<p>您可以使用<a href="https://developer.chrome.com/docs/devtools/console/reference/#filter" rel="noopener">DevTools 中的控制台过滤选项</a>过滤掉部分或全部消息：</p>
<img alt="Using console filtering options" decoding="async" height="448" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format" srcset="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&amp;w=1600 1600w" width="800">
<ul>
<li>要删除所有扩展消息，您可以在选项中将其关闭或使用<code>-扩大</code>筛选。</li>
<li>要仅查看 LCP，您可以使用<code>Web Vitals 扩展 LCP</code>筛选。</li>
<li>要仅查看 INP 和交互作用，您可以使用<code>Web Vitals 扩展 -LCP -CLS -FID</code>筛选。</li>
</ul>
<p>我们正在努力减少此扩展的选项数量，但请通过提出问题让我们知道<a href="https://github.com/GoogleChrome/web-vitals-extension/issues" rel="noopener">GitHub问题</a>如果 DevTools 过滤不够，并且您更喜欢此处的选项。</p>
<h2 id="conclusion">结论<a class="headline-link" href="https://web.dev/debug-cwvs-with-web-vitals-extension/#conclusion">#</a></h2>
<p>我们希望您发现最新版本的扩展中的新调试选项很有用，并且它们可以更轻松地识别和解决 Core Web Vitals 问题，从而改善您网站上的用户体验。</p>
<p>请记住，您在开发人员计算机上的体验可能无法代表真实用户的体验。 看看我们的<a href="https://web.dev/field-data-in-the-web-vitals-extension/">上一篇博客文章介绍了如何在扩展中查看站点的 CrUX 字段数据</a>了解您的体验与用户的一致性。</p>
<p>我们将很高兴听到有关这些改进的任何反馈，或有关我们的任何其他建议<a href="https://github.com/GoogleChrome/web-vitals-extension/issues" rel="noopener">GitHub 问题跟踪器</a>。</p>
<h2 id="acknowledgements">致谢<a class="headline-link" href="https://web.dev/debug-cwvs-with-web-vitals-extension/#acknowledgements">#</a></h2>
<p><em>英雄形象由<a href="https://unsplash.com/@euwars?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener">法尔扎德</a>在<a href="https://unsplash.com/photos/p-xSl33Wxyc?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener">未飞溅</a></em></p>
<hr><p>The <a href="https://chrome.google.com/webstore/detail/web-vitals/ahfhijdlegdabablpippeagghigmibma" rel="noopener">Web Vitals extension</a> provides easy access to Core Web Vitals diagnostic information to help developers measure, and address Core Web Vitals issues. It supplements the other tools provided by the Chrome team to aid developers in improving the experiences on their websites.</p>
<p>We have updated the extension to provide additional debug information to developers to make it easier to understand and address their performance problems.</p>
<h2 id="showing-debug-information-in-the-console">Showing debug information in the console <a class="headline-link" href="https://web.dev/debug-cwvs-with-web-vitals-extension/#showing-debug-information-in-the-console">#</a></h2>
<p>The Web Vitals extension has had a "Console Logging" debug option for some time now. It can be enabled in the Options screen:</p>
<img alt="Web Vitals Extension Options screen" decoding="async" height="434" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format" srcset="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&amp;w=1600 1600w" width="800">
<p>Prior to the this last upgrade, this logged the outputs from the <a href="https://github.com/GoogleChrome/web-vitals" rel="noopener"><code>web-vitals library</code></a> (that underpins the extension) in a JSON object:</p>
<img alt="Web Vitals Extension old console logging" decoding="async" height="458" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format" srcset="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&amp;w=1600 1600w" width="800">
<p>This object could then be expanded to get the full details, and elements such as the LCP image, could be hovered over to highlight them in the main panel:</p>
<img alt="Web Vitals Extension old console logging with element highlighting" decoding="async" height="514" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format" srcset="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&amp;w=1600 1600w" width="800">
<p>This was helpful, but the output format was not particularly user friendly, and we thought we could provide a better developer experience. So we have improved the extension to make the most important information more visible—while still including the full object for those wanting more details.</p>
<h2 id="new-debug-information-for-each-metric">New debug information for each metric <a class="headline-link" href="https://web.dev/debug-cwvs-with-web-vitals-extension/#new-debug-information-for-each-metric">#</a></h2>
<p>With the new release, we have added new debug information in a more readable format to help you find and address issues. Different information is provided for each of the metrics, as each one is different.</p>
<h3 id="lcp-debug-information">LCP debug information <a class="headline-link" href="https://web.dev/debug-cwvs-with-web-vitals-extension/#lcp-debug-information">#</a></h3>
<p>For <a href="https://web.dev/lcp/">Largest Contentful Paint (LCP)</a>, we show both the element, and the breakdown of the 4 phases detailed in our <a href="https://web.dev/optimize-lcp/#lcp-breakdown">Optimize LCP</a> guide:</p>
<img alt="Web Vitals Extension new console logging showing LCP elements and sub-parts" decoding="async" height="535" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format" srcset="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&amp;w=1600 1600w" width="800">
<p>The LCP time (2,876 milliseconds—or about 2.9 seconds) is highlighted in amber as it is in the "Needs Improvement" category.</p>
<p>In this example, we see the <code>Resource load time</code> is the longest time, so to improve your LCP time you would look to optimize that - perhaps by avoiding hosting them on a separate domain, or by using smaller images or more efficient formats. In this case it's due to being artificially slowed down to demonstrate the output—web.dev is a fast site 😀</p>
<p>The element can also be hovered over to highlight the image:</p>
<img alt="Web Vitals Extension new console logging retains element highlighting on hover" decoding="async" height="535" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format" srcset="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&amp;w=1600 1600w" width="800">
<p>Right clicking on the element also allows you to reveal it in the elements panel.</p>
<p>Here the LCP element is an image, and hovering over that in the console on the right, also highlights that element on the site on the left.</p>
<h3 id="cls-debug-information">CLS debug information <a class="headline-link" href="https://web.dev/debug-cwvs-with-web-vitals-extension/#cls-debug-information">#</a></h3>
<p>Shifts contributing to <a href="https://web.dev/cls/">Cumulative Layout Shift (CLS)</a> are now also listed, and can be hovered over to highlight the relevant element:</p>
<img alt="Web Vitals Extension new console logging showing each CLS element shift" decoding="async" height="448" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format" srcset="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&amp;w=1600 1600w" width="800">
<p>The above screenshot shows 2 shifts, the first made up of two elements (when the banner image is loaded and the content beneath it is shifted downloaded), and the second of 4 elements (when the dynamic ad is loaded and most of the page is shifted downwards).</p>
<p>The <code>h2</code> element is being hovered over in this screenshot in the console on the right, and you can see this highlights the element on the site on the left.</p>
<aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>Important</strong></p><div class=" flow"> <p> Note that the shifted elements are not the elements <em>causing</em> the shift, but the ones that were <em>impacted</em> by any shifts. </p> <p> However, as per the above example, this should usually be enough to help you identify the cause of the shift by looking at the element which is either above the first shifted element (for inserted elements) or the first element itself (if this is expanded and so shifts itself). </p> </div></aside>
<h3 id="fid-debug-information">FID debug information <a class="headline-link" href="https://web.dev/debug-cwvs-with-web-vitals-extension/#fid-debug-information">#</a></h3>
<p>For <a href="https://web.dev/fid/">First Input Delay (FID)</a> we show the affected element (which again, can be hovered over to highlight it on the page) and the interaction type, along with the full JSON object as usual:</p>
<img alt="Web Vitals Extension new console logging showing FID target and type" decoding="async" height="448" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format" srcset="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&amp;w=1600 1600w" width="800">
<h3 id="inp-debug-information">INP debug information <a class="headline-link" href="https://web.dev/debug-cwvs-with-web-vitals-extension/#inp-debug-information">#</a></h3>
<p>For <a href="https://web.dev/inp/">Interaction to Next Paint (INP)</a>, we have added two new logs:</p>
<ul>
<li>INP - the longest interaction</li>
<li>Interactions - all interactions</li>
</ul>
<h4 id="inp-metric">INP metric <a class="headline-link" href="https://web.dev/debug-cwvs-with-web-vitals-extension/#inp-metric">#</a></h4>
<p>First up, we highlight the INP metric when it changes:</p>
<img alt="Web Vitals Extension new console logging showing INP target, event type, and breakdown" decoding="async" height="448" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format" srcset="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&amp;w=1600 1600w" width="800">
<p>Similar to LCP, the extension breaks down the INP time to show three phases:</p>
<ol>
<li>Input delay</li>
<li>Processing time</li>
<li>Presentation delay</li>
</ol>
<p>This helps you identify if the event was slow due to being held up by other events (<strong>input delay</strong>), as the event handler itself was slow due to your code (<strong>processing time</strong>), if the post-processing render delay was the reason (<strong>presentation delay</strong>), or a combination of two or more of these.</p>
<h4 id="interactions">Interactions <a class="headline-link" href="https://web.dev/debug-cwvs-with-web-vitals-extension/#interactions">#</a></h4>
<p>INP can be slow due to previous interactions blocking the main thread, and thus causing a high input delay. For this reason, we list all interactions in a similar format to the INP logging:</p>
<img alt="Web Vitals Extension new console logging showing all interactions" decoding="async" height="448" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format" srcset="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&amp;w=1600 1600w" width="800">
<p>This allows you to "live trace" a website by interacting with it and seeing in the console which interactions, in which combinations, are likely to cause an INP problem.</p>
<p>This also allows you to identify multiple slow interactions, rather than just the largest INP interaction to help you avoid the feeling of chasing your tail when improving your responsiveness.</p>
<h2 id="filtering-the-console-logs">Filtering the console logs <a class="headline-link" href="https://web.dev/debug-cwvs-with-web-vitals-extension/#filtering-the-console-logs">#</a></h2>
<p>All this extra information, while useful, can be distracting if you are doing other development unrelated to Core Web Vitals, or are only interested in one particular Core Web Vital at that time.</p>
<p>You can use the <a href="https://developer.chrome.com/docs/devtools/console/reference/#filter" rel="noopener">Console filtering options in DevTools</a> to filter out some or all of the messages:</p>
<img alt="Using console filtering options" decoding="async" height="448" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format" srcset="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&amp;w=1600 1600w" width="800">
<ul>
<li>To remove all the extension messages, you can either turn this off in the options or use the <code>-Extension</code> filter.</li>
<li>To look at just LCP you can use the <code>Web Vitals Extension LCP</code> filter.</li>
<li>To look at just INP and interactions you can use the <code>Web Vitals Extension -LCP -CLS -FID</code> filter.</li>
</ul>
<p>We're trying to keep the number of options for this extension down, but do let us know by raising a <a href="https://github.com/GoogleChrome/web-vitals-extension/issues" rel="noopener">GitHub issue</a> if DevTools filtering is not sufficient and you would prefer options here.</p>
<h2 id="conclusion">Conclusion <a class="headline-link" href="https://web.dev/debug-cwvs-with-web-vitals-extension/#conclusion">#</a></h2>
<p>We hope you find the new debug options in the latest version of the extension useful and that they make it easier to identify and resolve Core Web Vitals issues, improving the  user experiences on your website.</p>
<p>Do remember that your experiences, on your developer computer, may not be representative of what your real users are experiencing. Check out our <a href="https://web.dev/field-data-in-the-web-vitals-extension/">previous blog post on how you can view the CrUX field data for your site in the extension</a> to get a sense of how aligned your experiences are with your users.</p>
<p>We would be grateful to hear any feedback on these improvements, or any other suggestions on our <a href="https://github.com/GoogleChrome/web-vitals-extension/issues" rel="noopener">GitHub issues tracker</a>.</p>
<h2 id="acknowledgements">Acknowledgements <a class="headline-link" href="https://web.dev/debug-cwvs-with-web-vitals-extension/#acknowledgements">#</a></h2>
<p><em>Hero image by <a href="https://unsplash.com/@euwars?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener">Farzad</a> on <a href="https://unsplash.com/photos/p-xSl33Wxyc?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener">Unsplash</a></em></p>
]]></content:encoded>
        </item>
    </channel>
</rss>